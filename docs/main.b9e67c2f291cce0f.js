(self.webpackChunkreycle_page=self.webpackChunkreycle_page||[]).push([[179],{5547:(st,Oe,I)=>{"use strict";var ce={};function ye(t){return"function"==typeof t}function H(t){const e=t(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}I.r(ce),I.d(ce,{addImpl:()=>JT,bincountImpl:()=>$H,bincountReduceImpl:()=>LH,bitwiseAndImpl:()=>eM,castImpl:()=>QT,ceilImpl:()=>nM,concatImpl:()=>zH,equalImpl:()=>rM,expImpl:()=>iM,expm1Impl:()=>sM,floorImpl:()=>oM,gatherNdImpl:()=>GH,gatherV2Impl:()=>KH,greaterEqualImpl:()=>lM,greaterImpl:()=>aM,lessEqualImpl:()=>uM,lessImpl:()=>cM,linSpaceImpl:()=>QH,logImpl:()=>dM,maxImpl:()=>eW,maximumImpl:()=>hM,minimumImpl:()=>fM,multiplyImpl:()=>nx,negImpl:()=>pM,notEqualImpl:()=>mM,prodImpl:()=>_M,raggedGatherImpl:()=>pW,raggedRangeImpl:()=>mW,raggedTensorToTensorImpl:()=>gW,rangeImpl:()=>yW,rsqrtImpl:()=>CM,scatterImpl:()=>bW,sigmoidImpl:()=>vW,simpleAbsImpl:()=>ZT,sliceImpl:()=>EM,sparseFillEmptyRowsImpl:()=>CW,sparseReshapeImpl:()=>EW,sparseSegmentReductionImpl:()=>SW,sqrtImpl:()=>DW,staticRegexReplaceImpl:()=>SM,stridedSliceImpl:()=>MW,stringNGramsImpl:()=>NW,stringSplitImpl:()=>kW,stringToHashBucketFastImpl:()=>OW,subImpl:()=>DM,tileImpl:()=>$W,topKImpl:()=>LW,transposeImpl:()=>gM,uniqueImpl:()=>BW});const q=H(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function T(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class ${constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(ye(r))try{r()}catch(s){n=s instanceof q?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{G(s)}catch(o){n=n??[],o instanceof q?n=[...n,...o.errors]:n.push(o)}}if(n)throw new q(n)}}add(n){var e;if(n&&n!==this)if(this.closed)G(n);else{if(n instanceof $){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&T(e,n)}remove(n){const{_finalizers:e}=this;e&&T(e,n),n instanceof $&&n._removeParent(this)}}$.EMPTY=(()=>{const t=new $;return t.closed=!0,t})();const se=$.EMPTY;function ne(t){return t instanceof $||t&&"closed"in t&&ye(t.remove)&&ye(t.add)&&ye(t.unsubscribe)}function G(t){ye(t)?t():t.unsubscribe()}const te={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Y={setTimeout(t,n,...e){const{delegate:r}=Y;return r?.setTimeout?r.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=Y;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function S(t){Y.setTimeout(()=>{const{onUnhandledError:n}=te;if(!n)throw t;n(t)})}function ee(){}const Se=Qe("C",void 0,void 0);function Qe(t,n,e){return{kind:t,value:n,error:e}}let Ke=null;function _t(t){if(te.useDeprecatedSynchronousErrorHandling){const n=!Ke;if(n&&(Ke={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:r}=Ke;if(Ke=null,e)throw r}}else t()}class re extends ${constructor(n){super(),this.isStopped=!1,n?(this.destination=n,ne(n)&&n.add(this)):this.destination=Ae}static create(n,e,r){return new ie(n,e,r)}next(n){this.isStopped?le(function Ne(t){return Qe("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?le(function he(t){return Qe("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?le(Se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Je(t,n){return ze.call(t,n)}class ue{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(r){N(r)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(r){N(r)}else N(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){N(e)}}}class ie extends re{constructor(n,e,r){let i;if(super(),ye(n)||!n)i={next:n??void 0,error:e??void 0,complete:r??void 0};else{let s;this&&te.useDeprecatedNextContext?(s=Object.create(n),s.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&Je(n.next,s),error:n.error&&Je(n.error,s),complete:n.complete&&Je(n.complete,s)}):i=n}this.destination=new ue(i)}}function N(t){te.useDeprecatedSynchronousErrorHandling?function Ze(t){te.useDeprecatedSynchronousErrorHandling&&Ke&&(Ke.errorThrown=!0,Ke.error=t)}(t):S(t)}function le(t,n){const{onStoppedNotification:e}=te;e&&Y.setTimeout(()=>e(t,n))}const Ae={closed:!0,next:ee,error:function Q(t){throw t},complete:ee},v="function"==typeof Symbol&&Symbol.observable||"@@observable";function Le(t){return t}function _e(t){return 0===t.length?Le:1===t.length?t[0]:function(e){return t.reduce((r,i)=>i(r),e)}}let Te=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new t;return r.source=this,r.operator=e,r}subscribe(e,r,i){const s=function ut(t){return t&&t instanceof re||function be(t){return t&&ye(t.next)&&ye(t.error)&&ye(t.complete)}(t)&&ne(t)}(e)?e:new ie(e,r,i);return _t(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=Ie(r))((i,s)=>{const o=new ie({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[v](){return this}pipe(...e){return _e(e)(this)}toPromise(e){return new(e=Ie(e))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=n=>new t(n),t})();function Ie(t){var n;return null!==(n=t??te.Promise)&&void 0!==n?n:Promise}const Ce=H(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let De=(()=>{class t extends Te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new Ye(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new Ce}next(e){_t(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){_t(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){_t(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:i,observers:s}=this;return r||i?se:(this.currentObservers=null,s.push(e),new $(()=>{this.currentObservers=null,T(s,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:i,isStopped:s}=this;r?e.error(i):s&&e.complete()}asObservable(){const e=new Te;return e.source=this,e}}return t.create=(n,e)=>new Ye(n,e),t})();class Ye extends De{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,n)}error(n){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==r?r:se}}function Pe(t){return ye(t?.lift)}function tt(t){return n=>{if(Pe(n))return n.lift(function(e){try{return t(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function et(t,n,e,r,i){return new mt(t,n,e,r,i)}class mt extends re{constructor(n,e,r,i,s,o){super(n),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){n.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function qe(t,n){return tt((e,r)=>{let i=0;e.subscribe(et(r,s=>{r.next(t.call(n,s,i++))}))})}function $r(t){return this instanceof $r?(this.v=t,this):new $r(t)}function Js(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function us(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(s){e[s]=t[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const eo=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function ms(t){return ye(t?.then)}function fi(t){return ye(t[v])}function ea(t){return Symbol.asyncIterator&&ye(t?.[Symbol.asyncIterator])}function Pt(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Wr=function xn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function rn(t){return ye(t?.[Wr])}function Ui(t){return function Ys(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=e.apply(t,n||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){r[m]&&(i[m]=function(y){return new Promise(function(C,k){s.push([m,y,C,k])>1||a(m,y)})})}function a(m,y){try{!function l(m){m.value instanceof $r?Promise.resolve(m.value.v).then(c,u):h(s[0][2],m)}(r[m](y))}catch(C){h(s[0][3],C)}}function c(m){a("next",m)}function u(m){a("throw",m)}function h(m,y){m(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:r,done:i}=yield $r(e.read());if(i)return yield $r(void 0);yield yield $r(r)}}finally{e.releaseLock()}})}function Si(t){return ye(t?.getReader)}function Bn(t){if(t instanceof Te)return t;if(null!=t){if(fi(t))return function pi(t){return new Te(n=>{const e=t[v]();if(ye(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(eo(t))return function ji(t){return new Te(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(ms(t))return function dl(t){return new Te(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,S)})}(t);if(ea(t))return ta(t);if(rn(t))return function No(t){return new Te(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(Si(t))return function ii(t){return ta(Ui(t))}(t)}throw Pt(t)}function ta(t){return new Te(n=>{(function na(t,n){var e,r,i,s;return function lr(t,n,e,r){return new(e||(e=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function i(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((r=r.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Js(t);!(r=yield e.next()).done;)if(n.next(r.value),n.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=e.return)&&(yield s.call(e))}finally{if(i)throw i.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function Di(t,n,e,r=0,i=!1){const s=n.schedule(function(){e(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function er(t,n,e=1/0){return ye(n)?er((r,i)=>qe((s,o)=>n(r,s,i,o))(Bn(t(r,i))),e):("number"==typeof n&&(e=n),tt((r,i)=>function Ii(t,n,e,r,i,s,o,a){const l=[];let c=0,u=0,h=!1;const m=()=>{h&&!l.length&&!c&&n.complete()},y=k=>c<r?C(k):l.push(k),C=k=>{s&&n.next(k),c++;let P=!1;Bn(e(k,u++)).subscribe(et(n,B=>{i?.(B),s?y(B):n.next(B)},()=>{P=!0},void 0,()=>{if(P)try{for(c--;l.length&&c<r;){const B=l.shift();o?Di(n,o,()=>C(B)):C(B)}m()}catch(B){n.error(B)}}))};return t.subscribe(et(n,y,()=>{h=!0,m()})),()=>{a?.()}}(r,i,t,e)))}function gs(t=1/0){return er(Le,t)}const Lr=new Te(t=>t.complete());function to(t){return t&&ye(t.schedule)}function ra(t){return t[t.length-1]}function ia(t){return ye(ra(t))?t.pop():void 0}function _s(t){return to(ra(t))?t.pop():void 0}function Ro(t,n=0){return tt((e,r)=>{e.subscribe(et(r,i=>Di(r,t,()=>r.next(i),n),()=>Di(r,t,()=>r.complete(),n),i=>Di(r,t,()=>r.error(i),n)))})}function ro(t,n=0){return tt((e,r)=>{r.add(t.schedule(()=>e.subscribe(r),n))})}function Ra(t,n){if(!t)throw new Error("Iterable cannot be null");return new Te(e=>{Di(e,n,()=>{const r=t[Symbol.asyncIterator]();Di(e,n,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function dn(t,n){return n?function cr(t,n){if(null!=t){if(fi(t))return function hl(t,n){return Bn(t).pipe(ro(n),Ro(n))}(t,n);if(eo(t))return function fl(t,n){return new Te(e=>{let r=0;return n.schedule(function(){r===t.length?e.complete():(e.next(t[r++]),e.closed||this.schedule())})})}(t,n);if(ms(t))return function ko(t,n){return Bn(t).pipe(ro(n),Ro(n))}(t,n);if(ea(t))return Ra(t,n);if(rn(t))return function Na(t,n){return new Te(e=>{let r;return Di(e,n,()=>{r=t[Wr](),Di(e,n,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void e.error(o)}s?e.complete():e.next(i)},0,!0)}),()=>ye(r?.return)&&r.return()})}(t,n);if(Si(t))return function sa(t,n){return Ra(Ui(t),n)}(t,n)}throw Pt(t)}(t,n):Bn(t)}function Oo(...t){const n=_s(t),e=function no(t,n){return"number"==typeof ra(t)?t.pop():n}(t,1/0),r=t;return r.length?1===r.length?Bn(r[0]):gs(e)(dn(r,n)):Lr}class gn extends De{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:r}=this;if(n)throw e;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}function Bt(...t){return dn(t,_s(t))}function Br(t={}){const{connector:n=(()=>new De),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,l,c=0,u=!1,h=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=l=void 0,u=h=!1},C=()=>{const k=o;y(),k?.unsubscribe()};return tt((k,P)=>{c++,!h&&!u&&m();const B=l=l??n();P.add(()=>{c--,0===c&&!h&&!u&&(a=io(C,i))}),B.subscribe(P),!o&&c>0&&(o=new ie({next:V=>B.next(V),error:V=>{h=!0,m(),a=io(y,e,V),B.error(V)},complete:()=>{u=!0,m(),a=io(y,r),B.complete()}}),Bn(k).subscribe(o))})(s)}}function io(t,n,...e){if(!0===n)return void t();if(!1===n)return;const r=new ie({next:()=>{r.unsubscribe(),t()}});return Bn(n(...e)).subscribe(r)}function Nr(t,n){return tt((e,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();e.subscribe(et(r,l=>{i?.unsubscribe();let c=0;const u=s++;Bn(t(l,u)).subscribe(i=et(r,h=>r.next(n?n(l,h,u,c++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function so(t,n=Le){return t=t??ka,tt((e,r)=>{let i,s=!0;e.subscribe(et(r,o=>{const a=n(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function ka(t,n){return t===n}function En(t){for(let n in t)if(t[n]===En)return n;throw Error("Could not find renamed property on target object.")}function Hi(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function An(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(An).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function oo(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Oa=En({__forward_ref__:En});function Sn(t){return t.__forward_ref__=Sn,t.toString=function(){return An(this())},t}function jt(t){return ks(t)?t():t}function ks(t){return"function"==typeof t&&t.hasOwnProperty(Oa)&&t.__forward_ref__===Sn}function Wi(t){return t&&!!t.\u0275providers}const Gi="https://g.co/ng/security#xss";class je extends Error{constructor(n,e){super(function Rr(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function Kt(t){return"string"==typeof t?t:null==t?"":String(t)}function Ti(t,n){throw new je(-201,!1)}function J(t,n){null==t&&function X(t,n,e,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${e} ${r} ${n} <=Actual]`))}(n,t,null,"!=")}function Fe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function yt(t){return{providers:t.providers||[],imports:t.imports||[]}}function qt(t){return Nt(t,Cr)||Nt(t,Nn)}function Nt(t,n){return t.hasOwnProperty(n)?t[n]:null}function Kn(t){return t&&(t.hasOwnProperty(Vr)||t.hasOwnProperty(ao))?t[Vr]:null}const Cr=En({\u0275prov:En}),Vr=En({\u0275inj:En}),Nn=En({ngInjectableDef:En}),ao=En({ngInjectorDef:En});var on=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(on||{});let lo;function Gr(t){const n=lo;return lo=t,n}function Pa(t,n,e){const r=qt(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&on.Optional?null:void 0!==n?n:void Ti(An(t))}const Vn=globalThis;class ot{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Fe({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Fa={},ca="__NG_DI_FLAG__",ua="ngTempTokenPath",Gd=/\n/gm,_l="__source";let Lo;function Os(t){const n=Lo;return Lo=t,n}function bl(t,n=on.Default){if(void 0===Lo)throw new je(-203,!1);return null===Lo?Pa(t,void 0,n):Lo.get(t,n&on.Optional?null:void 0,n)}function We(t,n=on.Default){return(function $o(){return lo}()||bl)(jt(t),n)}function ft(t,n=on.Default){return We(t,$a(n))}function $a(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Bo(t){const n=[];for(let e=0;e<t.length;e++){const r=jt(t[e]);if(Array.isArray(r)){if(0===r.length)throw new je(900,!1);let i,s=on.Default;for(let o=0;o<r.length;o++){const a=r[o],l=Xd(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}n.push(We(i,s))}else n.push(We(r))}return n}function we(t,n){return t[ca]=n,t.prototype[ca]=n,t}function Xd(t){return t[ca]}function Ps(t){return{toString:t}.toString()}var Zi=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Zi||{}),Kr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Kr||{});const Xr={},Zt=[],Yi=En({\u0275cmp:En}),Qi=En({\u0275dir:En}),rc=En({\u0275pipe:En}),La=En({\u0275mod:En}),Fs=En({\u0275fac:En}),Ba=En({__NG_ELEMENT_ID__:En}),vl=En({__NG_ENV_ID__:En});function Qc(t,n,e){let r=t.length;for(;;){const i=t.indexOf(n,e);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=n.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}e=i+1}}function ic(t,n,e){let r=0;for(;r<e.length;){const i=e[r];if("number"==typeof i){if(0!==i)break;r++;const s=e[r++],o=e[r++],a=e[r++];t.setAttribute(n,o,a,s)}else{const s=i,o=e[++r];eu(s)?t.setProperty(n,s,o):t.setAttribute(n,s,o),r++}}return r}function Jc(t){return 3===t||4===t||6===t}function eu(t){return 64===t.charCodeAt(0)}function Va(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?e=i:0===e||tu(t,e,i,null,-1===e||2===e?n[++r]:null)}}return t}function tu(t,n,e,r,i){let s=0,o=t.length;if(-1===n)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===n){o=-1;break}if(a>n){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,n),s=o+1),t.splice(s++,0,e),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const nu="ng-template";function Yd(t,n,e){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(e&&"class"===s&&-1!==Qc(o.toLowerCase(),n,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===n)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function sc(t){return 4===t.type&&t.value!==nu}function Qd(t,n,e){return n===(4!==t.type||e?t.value:nu)}function Jd(t,n,e){let r=4;const i=t.attrs||[],s=function ha(t){for(let n=0;n<t.length;n++)if(Jc(t[n]))return n;return t.length}(i);let o=!1;for(let a=0;a<n.length;a++){const l=n[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!Qd(t,l,e)||""===l&&1===n.length){if(Ji(r))return!1;o=!0}}else{const c=8&r?l:n[++a];if(8&r&&null!==t.attrs){if(!Yd(t.attrs,c,e)){if(Ji(r))return!1;o=!0}continue}const h=eh(8&r?"class":l,i,sc(t),e);if(-1===h){if(Ji(r))return!1;o=!0;continue}if(""!==c){let m;m=h>s?"":i[h+1].toLowerCase();const y=8&r?m:null;if(y&&-1!==Qc(y,c,0)||2&r&&c!==m){if(Ji(r))return!1;o=!0}}}}else{if(!o&&!Ji(r)&&!Ji(l))return!1;if(o&&Ji(l))continue;o=!1,r=l|1&r}}return Ji(r)||o}function Ji(t){return 0==(1&t)}function eh(t,n,e,r){if(null===n)return-1;let i=0;if(r||!e){let s=!1;for(;i<n.length;){const o=n[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=n[++i];for(;"string"==typeof a;)a=n[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function nh(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const r=t[e];if("number"==typeof r)return-1;if(r===n)return e;e++}return-1}(n,t)}function ru(t,n,e=!1){for(let r=0;r<n.length;r++)if(Jd(t,n[r],e))return!0;return!1}function rh(t,n){e:for(let e=0;e<n.length;e++){const r=n[e];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function iu(t,n){return t?":not("+n.trim()+")":n}function ih(t){let n=t[0],e=1,r=2,i="",s=!1;for(;e<t.length;){let o=t[e];if("string"==typeof o)if(2&r){const a=t[++e];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Ji(o)&&(n+=iu(s,i),i=""),r=o,s=s||!Ji(r);e++}return""!==i&&(n+=iu(s,i)),n}function rr(t){return Ps(()=>{const n=lu(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Zi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Kr.Emulated,styles:t.styles||Zt,_:null,schemas:t.schemas||null,tView:null,id:""};cu(e);const r=t.dependencies;return e.directiveDefs=xl(r,!1),e.pipeDefs=xl(r,!0),e.id=function ch(t){let n=0;const e=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of e)n=Math.imul(31,n)+i.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(e),e})}function oc(t){return bn(t)||kr(t)}function su(t){return null!==t}function Tn(t){return Ps(()=>({type:t.type,bootstrap:t.bootstrap||Zt,declarations:t.declarations||Zt,imports:t.imports||Zt,exports:t.exports||Zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function au(t,n){if(null==t)return Xr;const e={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),e[i]=r,n&&(n[i]=s)}return e}function Rt(t){return Ps(()=>{const n=lu(t);return cu(n),n})}function bn(t){return t[Yi]||null}function kr(t){return t[Qi]||null}function qr(t){return t[rc]||null}function mi(t,n){const e=t[La]||null;if(!e&&!0===n)throw new Error(`Type ${An(t)} does not have '\u0275mod' property.`);return e}function lu(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||Xr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:au(t.inputs,n),outputs:au(t.outputs)}}function cu(t){t.features?.forEach(n=>n(t))}function xl(t,n){if(!t)return null;const e=n?qr:oc;return()=>("function"==typeof t?t():t).map(r=>e(r)).filter(su)}const ir=0,St=1,en=2,Zn=3,es=4,wl=5,Zr=6,co=7,ur=8,uo=9,pa=10,Yt=11,za=12,ac=13,R=14,x=15,M=16,F=17,j=18,oe=19,me=20,Me=21,Ue=22,Ge=23,xt=24,He=25,Ot=1,Wt=2,ln=7,vr=9,It=11;function Pn(t){return Array.isArray(t)&&"object"==typeof t[Ot]}function Er(t){return Array.isArray(t)&&!0===t[Ot]}function Cl(t){return 0!=(4&t.flags)}function ws(t){return t.componentOffset>-1}function ns(t){return 1==(1&t.flags)}function oi(t){return!!t.template}function ho(t){return 0!=(512&t[en])}function ja(t,n){return t.hasOwnProperty(Fs)?t[Fs]:null}let Sr=null,uu=!1;function rs(t){const n=Sr;return Sr=t,n}const Sp={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Dp(t){if(!uc(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Ip(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function dh(t){t.dirty=!0,function du(t){if(void 0===t.liveConsumerNode)return;const n=uu;uu=!0;try{for(const e of t.liveConsumerNode)e.dirty||dh(e)}finally{uu=n}}(t),t.consumerMarkedDirty?.(t)}function hh(t){return t&&(t.nextProducerIndex=0),rs(t)}function cc(t,n){if(rs(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(uc(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)hu(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ip(t){Dl(t);for(let n=0;n<t.producerNode.length;n++){const e=t.producerNode[n],r=t.producerLastReadVersion[n];if(r!==e.version||(Dp(e),r!==e.version))return!0}return!1}function Sl(t){if(Dl(t),uc(t))for(let n=0;n<t.producerNode.length;n++)hu(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function hu(t,n){if(function Mp(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Dl(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)hu(t.producerNode[r],t.producerIndexOfThis[r]);const e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[n],i=t.liveConsumerNode[n];Dl(i),i.producerIndexOfThis[r]=n}}function uc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Dl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Np=null;const pu=()=>{},C_=(()=>({...Sp,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:pu}))();class E_{constructor(n,e,r){this.previousValue=n,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function zr(){return mu}function mu(t){return t.type.prototype.ngOnChanges&&(t.setInput=S_),Fp}function Fp(){const t=$p(this),n=t?.current;if(n){const e=t.previous;if(e===Xr)t.previous=n;else for(let r in n)e[r]=n[r];t.current=null,this.ngOnChanges(n)}}function S_(t,n,e,r){const i=this.declaredInputs[e],s=$p(t)||function mh(t,n){return t[gu]=n}(t,{previous:Xr,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new E_(l&&l.currentValue,n,a===Xr),t[r]=n}zr.ngInherit=!0;const gu="__ngSimpleChanges__";function $p(t){return t[gu]||null}const fo=function(t,n,e){};function Yn(t){for(;Array.isArray(t);)t=t[ir];return t}function yu(t,n){return Yn(n[t])}function Mi(t,n){return Yn(n[t.index])}function Vp(t,n){return t.data[n]}function Ai(t,n){const e=n[t];return Pn(e)?e:e[ir]}function ga(t,n){return null==n?null:t[n]}function zp(t){t[F]=0}function M_(t){1024&t[en]||(t[en]|=1024,Up(t,1))}function is(t){1024&t[en]&&(t[en]&=-1025,Up(t,-1))}function Up(t,n){let e=t[Zn];if(null===e)return;e[wl]+=n;let r=e;for(e=e[Zn];null!==e&&(1===n&&1===r[wl]||-1===n&&0===r[wl]);)e[wl]+=n,r=e,e=e[Zn]}const Qt={lFrame:Qp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Wp(){return Qt.bindingsEnabled}function Tl(){return null!==Qt.skipHydrationRootTNode}function it(){return Qt.lFrame.lView}function Dn(){return Qt.lFrame.tView}function _u(t){return Qt.lFrame.contextLView=t,t[ur]}function bu(t){return Qt.lFrame.contextLView=null,t}function Qr(){let t=Xp();for(;null!==t&&64===t.type;)t=t.parent;return t}function Xp(){return Qt.lFrame.currentTNode}function po(t,n){const e=Qt.lFrame;e.currentTNode=t,e.isParent=n}function vh(){return Qt.lFrame.isParent}function xh(){Qt.lFrame.isParent=!1}function gi(){const t=Qt.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Ml(){return Qt.lFrame.bindingIndex++}function B_(t,n){const e=Qt.lFrame;e.bindingIndex=e.bindingRootIndex=t,fc(n)}function fc(t){Qt.lFrame.currentDirectiveIndex=t}function wh(t){const n=Qt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function Zp(){return Qt.lFrame.currentQueryIndex}function Ch(t){Qt.lFrame.currentQueryIndex=t}function z_(t){const n=t[St];return 2===n.type?n.declTNode:1===n.type?t[Zr]:null}function xu(t,n,e){if(e&on.SkipSelf){let i=n,s=t;for(;!(i=i.parent,null!==i||e&on.Host||(i=z_(s),null===i||(s=s[R],10&i.type))););if(null===i)return!1;n=i,t=s}const r=Qt.lFrame=Yp();return r.currentTNode=n,r.lView=t,!0}function Eh(t){const n=Yp(),e=t[St];Qt.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Yp(){const t=Qt.lFrame,n=null===t?null:t.child;return null===n?Qp(t):n}function Qp(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Jp(){const t=Qt.lFrame;return Qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const em=Jp;function Sh(){const t=Jp();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function yi(){return Qt.lFrame.selectedIndex}function Wa(t){Qt.lFrame.selectedIndex=t}function dr(){const t=Qt.lFrame;return Vp(t.tView,t.selectedIndex)}let Dh=!0;function wu(){return Dh}function Dr(t){Dh=t}function Cs(t,n){for(let e=n.directiveStart,r=n.directiveEnd;e<r;e++){const s=t.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-e,o),a&&((t.contentHooks??=[]).push(e,a),(t.contentCheckHooks??=[]).push(e,a)),l&&(t.viewHooks??=[]).push(-e,l),c&&((t.viewHooks??=[]).push(e,c),(t.viewCheckHooks??=[]).push(e,c)),null!=u&&(t.destroyHooks??=[]).push(e,u)}}function Cu(t,n,e){nm(t,n,3,e)}function Eu(t,n,e,r){(3&t[en])===e&&nm(t,n,e,r)}function Ih(t,n){let e=t[en];(3&e)===n&&(e&=8191,e+=1,t[en]=e)}function nm(t,n,e,r){const s=r??-1,o=n.length-1;let a=0;for(let l=void 0!==r?65535&t[F]:0;l<o;l++)if("number"==typeof n[l+1]){if(a=n[l],null!=r&&a>=r)break}else n[l]<0&&(t[F]+=65536),(a<s||-1==s)&&(q_(t,e,n,l),t[F]=(4294901760&t[F])+l+2),l++}function rm(t,n){fo(4,t,n);const e=rs(null);try{n.call(t)}finally{rs(e),fo(5,t,n)}}function q_(t,n,e,r){const i=e[r]<0,s=e[r+1],a=t[i?-e[r]:e[r]];i?t[en]>>13<t[F]>>16&&(3&t[en])===n&&(t[en]+=8192,rm(a,s)):rm(a,s)}const Al=-1;class pc{constructor(n,e,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function Mh(t){return t!==Al}function mc(t){return 32767&t}function gc(t,n){let e=function J_(t){return t>>16}(t),r=n;for(;e>0;)r=r[R],e--;return r}let Ah=!0;function Su(t){const n=Ah;return Ah=t,n}const im=255,sm=5;let eb=0;const mo={};function Du(t,n){const e=om(t,n);if(-1!==e)return e;const r=n[St];r.firstCreatePass&&(t.injectorIndex=n.length,Nh(r.data,t),Nh(n,null),Nh(r.blueprint,null));const i=Iu(t,n),s=t.injectorIndex;if(Mh(i)){const o=mc(i),a=gc(i,n),l=a[St].data;for(let c=0;c<8;c++)n[s+c]=a[o+c]|l[o+c]}return n[s+8]=i,s}function Nh(t,n){t.push(0,0,0,0,0,0,0,0,n)}function om(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Iu(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,r=null,i=n;for(;null!==i;){if(r=ke(i),null===r)return Al;if(e++,i=i[R],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return Al}function Rh(t,n,e){!function tb(t,n,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(Ba)&&(r=e[Ba]),null==r&&(r=e[Ba]=eb++);const i=r&im;n.data[t+(i>>sm)]|=1<<i}(t,n,e)}function am(t,n,e){if(e&on.Optional||void 0!==t)return t;Ti()}function lm(t,n,e,r){if(e&on.Optional&&void 0===r&&(r=null),!(e&(on.Self|on.Host))){const i=t[uo],s=Gr(void 0);try{return i?i.get(n,r,e&on.Optional):Pa(n,r,e&on.Optional)}finally{Gr(s)}}return am(r,0,e)}function cm(t,n,e,r=on.Default,i){if(null!==t){if(2048&n[en]&&!(r&on.Self)){const o=function de(t,n,e,r,i){let s=t,o=n;for(;null!==s&&null!==o&&2048&o[en]&&!(512&o[en]);){const a=um(s,o,e,r|on.Self,mo);if(a!==mo)return a;let l=s.parent;if(!l){const c=o[me];if(c){const u=c.get(e,mo,r);if(u!==mo)return u}l=ke(o),o=o[R]}s=l}return i}(t,n,e,r,mo);if(o!==mo)return o}const s=um(t,n,e,r,mo);if(s!==mo)return s}return lm(n,e,r,i)}function um(t,n,e,r,i){const s=function E(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Ba)?t[Ba]:void 0;return"number"==typeof n?n>=0?n&im:W:n}(e);if("function"==typeof s){if(!xu(n,t,r))return r&on.Host?am(i,0,r):lm(n,e,r,i);try{let o;if(o=s(r),null!=o||r&on.Optional)return o;Ti()}finally{em()}}else if("number"==typeof s){let o=null,a=om(t,n),l=Al,c=r&on.Host?n[x][Zr]:null;for((-1===a||r&on.SkipSelf)&&(l=-1===a?Iu(t,n):n[a+8],l!==Al&&_(r,!1)?(o=n[St],a=mc(l),n=gc(l,n)):a=-1);-1!==a;){const u=n[St];if(b(s,a,u.data)){const h=rb(a,n,e,o,r,c);if(h!==mo)return h}l=n[a+8],l!==Al&&_(r,n[St].data[a+8]===c)&&b(s,a,n)?(o=u,a=mc(l),n=gc(l,n)):a=-1}}return i}function rb(t,n,e,r,i,s){const o=n[St],a=o.data[t+8],u=Tu(a,o,e,null==r?ws(a)&&Ah:r!=o&&0!=(3&a.type),i&on.Host&&s===a);return null!==u?Ga(n,o,u,a):mo}function Tu(t,n,e,r,i){const s=t.providerIndexes,o=n.data,a=1048575&s,l=t.directiveStart,u=s>>20,m=i?a+u:t.directiveEnd;for(let y=r?a:a+u;y<m;y++){const C=o[y];if(y<l&&e===C||y>=l&&C.type===e)return y}if(i){const y=o[l];if(y&&oi(y)&&y.type===e)return l}return null}function Ga(t,n,e,r){let i=t[e];const s=n.data;if(function Z_(t){return t instanceof pc}(i)){const o=i;o.resolving&&function Ki(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new je(-200,`Circular dependency in DI detected for ${t}${e}`)}(function Ht(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Kt(t)}(s[e]));const a=Su(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Gr(o.injectImpl):null;xu(t,r,on.Default);try{i=t[e]=o.factory(void 0,s,t,r),n.firstCreatePass&&e>=r.directiveStart&&function X_(t,n,e){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=n.type.prototype;if(r){const o=mu(n);(e.preOrderHooks??=[]).push(t,o),(e.preOrderCheckHooks??=[]).push(t,o)}i&&(e.preOrderHooks??=[]).push(0-t,i),s&&((e.preOrderHooks??=[]).push(t,s),(e.preOrderCheckHooks??=[]).push(t,s))}(e,s[e],n)}finally{null!==c&&Gr(c),Su(a),o.resolving=!1,em()}}return i}function b(t,n,e){return!!(e[n+(t>>sm)]&1<<t)}function _(t,n){return!(t&on.Self||t&on.Host&&n)}class L{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,r){return cm(this._tNode,this._lView,n,$a(r),e)}}function W(){return new L(Qr(),it())}function K(t){return Ps(()=>{const n=t.prototype.constructor,e=n[Fs]||ae(n),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Fs]||ae(i);if(s&&s!==e)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function ae(t){return ks(t)?()=>{const n=ae(jt(t));return n&&n()}:ja(t)}function ke(t){const n=t[St],e=n.type;return 2===e?n.declTNode:1===e?t[Zr]:null}function $e(t){return function nb(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const r=e.length;let i=0;for(;i<r;){const s=e[i];if(Jc(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof e[i];)i++;else{if(s===n)return e[i+1];i+=2}}}return null}(Qr(),t)}const wt="__parameters__";function fn(t,n,e){return Ps(()=>{const r=function Vt(t){return function(...e){if(t){const r=t(...e);for(const i in r)this[i]=r[i]}}}(n);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const h=l.hasOwnProperty(wt)?l[wt]:Object.defineProperty(l,wt,{value:[]})[wt];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Bs(t,n){t.forEach(e=>Array.isArray(e)?Bs(e,n):n(e))}function Ka(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Mu(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function kh(t,n){const e=[];for(let r=0;r<t;r++)e.push(n);return e}function Vs(t,n,e){let r=Au(t,n);return r>=0?t[1|r]=e:(r=~r,function pP(t,n,e,r){let i=t.length;if(i==n)t.push(e,r);else if(1===i)t.push(r,t[0]),t[0]=e;else{for(i--,t.push(t[i-1],t[i]);i>n;)t[i]=t[i-2],i--;t[n]=e,t[n+1]=r}}(t,r,n,e)),r}function ib(t,n){const e=Au(t,n);if(e>=0)return t[1|e]}function Au(t,n){return function SC(t,n,e){let r=0,i=t.length>>e;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<e];if(n===o)return s<<e;o>n?i=s:r=s+1}return~(i<<e)}(t,n,1)}const yc=we(fn("Optional"),8),Oh=we(fn("SkipSelf"),4);function gm(t){return 128==(128&t.flags)}var Rl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Rl||{});const cb=new Map;let LP=0;const db="__ngContext__";function Ri(t,n){Pn(n)?(t[db]=n[oe],function VP(t){cb.set(t[oe],t)}(n)):t[db]=n}let hb;function fb(t,n){return hb(t,n)}function $h(t){const n=t[Zn];return Er(n)?n[Zn]:n}function WC(t){return KC(t[za])}function GC(t){return KC(t[es])}function KC(t){for(;null!==t&&!Er(t);)t=t[es];return t}function ku(t,n,e,r,i){if(null!=r){let s,o=!1;Er(r)?s=r:Pn(r)&&(o=!0,r=r[ir]);const a=Yn(r);0===t&&null!==e?null==i?YC(n,e,a):_c(n,e,a,i||null,!0):1===t&&null!==e?_c(n,e,a,i||null,!0):2===t?function Cm(t,n,e){const r=xm(t,n);r&&function o2(t,n,e,r){t.removeChild(n,e,r)}(t,r,n,e)}(n,a,o):3===t&&n.destroyNode(a),null!=s&&function c2(t,n,e,r,i){const s=e[ln];s!==Yn(e)&&ku(n,t,r,s,i);for(let a=It;a<e.length;a++){const l=e[a];Bh(l[St],l,t,n,r,s)}}(n,t,s,e,i)}}function bm(t,n,e){return t.createElement(n,e)}function qC(t,n){const e=t[vr],r=e.indexOf(n);is(n),e.splice(r,1)}function vm(t,n){if(t.length<=It)return;const e=It+n,r=t[e];if(r){const i=r[M];null!==i&&i!==t&&qC(i,r),n>0&&(t[e-1][es]=r[es]);const s=Mu(t,It+n);!function YP(t,n){Bh(t,n,n[Yt],2,null,null),n[ir]=null,n[Zr]=null}(r[St],r);const o=s[j];null!==o&&o.detachView(s[St]),r[Zn]=null,r[es]=null,r[en]&=-129}return r}function mb(t,n){if(!(256&n[en])){const e=n[Yt];n[Ge]&&Sl(n[Ge]),n[xt]&&Sl(n[xt]),e.destroyNode&&Bh(t,n,e,3,null,null),function e2(t){let n=t[za];if(!n)return gb(t[St],t);for(;n;){let e=null;if(Pn(n))e=n[za];else{const r=n[It];r&&(e=r)}if(!e){for(;n&&!n[es]&&n!==t;)Pn(n)&&gb(n[St],n),n=n[Zn];null===n&&(n=t),Pn(n)&&gb(n[St],n),e=n&&n[es]}n=e}}(n)}}function gb(t,n){if(!(256&n[en])){n[en]&=-129,n[en]|=256,function s2(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let r=0;r<e.length;r+=2){const i=n[e[r]];if(!(i instanceof pc)){const s=e[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];fo(4,a,l);try{l.call(a)}finally{fo(5,a,l)}}else{fo(4,i,s);try{s.call(i)}finally{fo(5,i,s)}}}}}(t,n),function r2(t,n){const e=t.cleanup,r=n[co];if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else e[s].call(r[e[s+1]]);null!==r&&(n[co]=null);const i=n[Me];if(null!==i){n[Me]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,n),1===n[St].type&&n[Yt].destroy();const e=n[M];if(null!==e&&Er(n[Zn])){e!==n[Zn]&&qC(e,n);const r=n[j];null!==r&&r.detachView(t)}!function zP(t){cb.delete(t[oe])}(n)}}function yb(t,n,e){return function ZC(t,n,e){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return e[ir];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Kr.None||s===Kr.Emulated)return null}return Mi(r,e)}}(t,n.parent,e)}function _c(t,n,e,r,i){t.insertBefore(n,e,r,i)}function YC(t,n,e){t.appendChild(n,e)}function QC(t,n,e,r,i){null!==r?_c(t,n,e,r,i):YC(t,n,e)}function xm(t,n){return t.parentNode(n)}function JC(t,n,e){return tE(t,n,e)}let _b,Em,wb,Sm,tE=function eE(t,n,e){return 40&t.type?Mi(t,e):null};function wm(t,n,e,r){const i=yb(t,r,n),s=n[Yt],a=JC(r.parent||n[Zr],r,n);if(null!=i)if(Array.isArray(e))for(let l=0;l<e.length;l++)QC(s,i,e[l],a,!1);else QC(s,i,e,a,!1);void 0!==_b&&_b(s,r,n,e,i)}function Lh(t,n){if(null!==n){const e=n.type;if(3&e)return Mi(n,t);if(4&e)return bb(-1,t[n.index]);if(8&e){const r=n.child;if(null!==r)return Lh(t,r);{const i=t[n.index];return Er(i)?bb(-1,i):Yn(i)}}if(32&e)return fb(n,t)()||Yn(t[n.index]);{const r=rE(t,n);return null!==r?Array.isArray(r)?r[0]:Lh($h(t[x]),r):Lh(t,n.next)}}return null}function rE(t,n){return null!==n?t[x][Zr].projection[n.projection]:null}function bb(t,n){const e=It+t+1;if(e<n.length){const r=n[e],i=r[St].firstChild;if(null!==i)return Lh(r,i)}return n[ln]}function vb(t,n,e,r,i,s,o){for(;null!=e;){const a=r[e.index],l=e.type;if(o&&0===n&&(a&&Ri(Yn(a),r),e.flags|=2),32!=(32&e.flags))if(8&l)vb(t,n,e.child,r,i,s,!1),ku(n,t,i,a,s);else if(32&l){const c=fb(e,r);let u;for(;u=c();)ku(n,t,i,u,s);ku(n,t,i,a,s)}else 16&l?sE(t,n,r,e,i,s):ku(n,t,i,a,s);e=o?e.projectionNext:e.next}}function Bh(t,n,e,r,i,s){vb(e,r,t.firstChild,n,i,s,!1)}function sE(t,n,e,r,i,s){const o=e[x],l=o[Zr].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)ku(n,t,i,l[c],s);else{let c=l;const u=o[Zn];gm(r)&&(c.flags|=128),vb(t,n,c,u,i,s,!0)}}function oE(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function aE(t,n,e){const{mergedAttrs:r,classes:i,styles:s}=e;null!==r&&ic(t,n,r),null!==i&&oE(t,n,i),null!==s&&function d2(t,n,e){t.setAttribute(n,"style",e)}(t,n,s)}function Ou(t){return function xb(){if(void 0===Em&&(Em=null,Vn.trustedTypes))try{Em=Vn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Em}()?.createHTML(t)||t}function uE(t){return function Cb(){if(void 0===Sm&&(Sm=null,Vn.trustedTypes))try{Sm=Vn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Sm}()?.createScriptURL(t)||t}class bc{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Gi})`}}class g2 extends bc{getTypeName(){return"HTML"}}class y2 extends bc{getTypeName(){return"Style"}}class _2 extends bc{getTypeName(){return"Script"}}class b2 extends bc{getTypeName(){return"URL"}}class v2 extends bc{getTypeName(){return"ResourceURL"}}function zs(t){return t instanceof bc?t.changingThisBreaksApplicationSecurity:t}function ya(t,n){const e=function x2(t){return t instanceof bc&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${Gi})`)}return e===n}class I2{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(Ou(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch{return null}}}class T2{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const e=this.inertDocument.createElement("template");return e.innerHTML=Ou(n),e}}const A2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Dm(t){return(t=String(t)).match(A2)?t:"unsafe:"+t}function Xa(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function Vh(...t){const n={};for(const e of t)for(const r in e)e.hasOwnProperty(r)&&(n[r]=!0);return n}const hE=Xa("area,br,col,hr,img,wbr"),fE=Xa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),pE=Xa("rp,rt"),Eb=Vh(hE,Vh(fE,Xa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vh(pE,Xa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vh(pE,fE)),Sb=Xa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mE=Vh(Sb,Xa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),N2=Xa("script,style,template");class R2{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,r=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let i=this.checkClobberedElement(e,e.nextSibling);if(i){e=i;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!Eb.hasOwnProperty(e))return this.sanitizedSomething=!0,!N2.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const r=n.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!mE.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Sb[a]&&(l=Dm(l)),this.buf.push(" ",o,'="',gE(l),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();Eb.hasOwnProperty(e)&&!hE.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(gE(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const k2=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,O2=/([^\#-~ |!])/g;function gE(t){return t.replace(/&/g,"&amp;").replace(k2,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(O2,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Im;function yE(t,n){let e=null;try{Im=Im||function dE(t){const n=new T2(t);return function M2(){try{return!!(new window.DOMParser).parseFromString(Ou(""),"text/html")}catch{return!1}}()?new I2(n):n}(t);let r=n?String(n):"";e=Im.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=e.innerHTML,e=Im.getInertBodyElement(r)}while(r!==s);return Ou((new R2).sanitizeChildren(Db(e)||e))}finally{if(e){const r=Db(e)||e;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Db(t){return"content"in t&&function P2(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var _i=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(_i||{});function _E(t){const n=zh();return n?n.sanitize(_i.URL,t)||"":ya(t,"URL")?zs(t):Dm(Kt(t))}function bE(t){const n=zh();if(n)return uE(n.sanitize(_i.RESOURCE_URL,t)||"");if(ya(t,"ResourceURL"))return uE(zs(t));throw new je(904,!1)}function zh(){const t=it();return t&&t[pa].sanitizer}const Uh=new ot("ENVIRONMENT_INITIALIZER"),xE=new ot("INJECTOR",-1),wE=new ot("INJECTOR_DEF_TYPES");class Ib{get(n,e=Fa){if(e===Fa){const r=new Error(`NullInjectorError: No provider for ${An(n)}!`);throw r.name="NullInjectorError",r}return e}}function U2(...t){return{\u0275providers:CE(0,t),\u0275fromNgModule:!0}}function CE(t,...n){const e=[],r=new Set;let i;const s=o=>{e.push(o)};return Bs(n,o=>{const a=o;Tm(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&EE(i,s),e}function EE(t,n){for(let e=0;e<t.length;e++){const{ngModule:r,providers:i}=t[e];Mb(i,s=>{n(s,r)})}}function Tm(t,n,e,r){if(!(t=jt(t)))return!1;let i=null,s=Kn(t);const o=!s&&bn(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const l=t.ngModule;if(s=Kn(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Tm(c,n,e,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{Bs(s.imports,u=>{Tm(u,n,e,r)&&(c||=[],c.push(u))})}finally{}void 0!==c&&EE(c,n)}if(!a){const c=ja(i)||(()=>new i);n({provide:i,useFactory:c,deps:Zt},i),n({provide:wE,useValue:i,multi:!0},i),n({provide:Uh,useValue:()=>We(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=t;Mb(l,u=>{n(u,c)})}}}return i!==t&&void 0!==t.providers}function Mb(t,n){for(let e of t)Wi(e)&&(e=e.\u0275providers),Array.isArray(e)?Mb(e,n):n(e)}const j2=En({provide:String,useValue:En});function Ab(t){return null!==t&&"object"==typeof t&&j2 in t}function vc(t){return"function"==typeof t}const Nb=new ot("Set Injector scope."),Mm={},W2={};let Rb;function Am(){return void 0===Rb&&(Rb=new Ib),Rb}class Us{}class Fu extends Us{get destroyed(){return this._destroyed}constructor(n,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ob(n,o=>this.processProvider(o)),this.records.set(xE,$u(void 0,this)),i.has("environment")&&this.records.set(Us,$u(void 0,this));const s=this.records.get(Nb);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(wE.multi,Zt,on.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const e of n)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const e=Os(this),r=Gr(void 0);try{return n()}finally{Os(e),Gr(r)}}get(n,e=Fa,r=on.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(vl))return n[vl](this);r=$a(r);const s=Os(this),o=Gr(void 0);try{if(!(r&on.SkipSelf)){let l=this.records.get(n);if(void 0===l){const c=function Z2(t){return"function"==typeof t||"object"==typeof t&&t instanceof ot}(n)&&qt(n);l=c&&this.injectableDefInScope(c)?$u(kb(n),Mm):null,this.records.set(n,l)}if(null!=l)return this.hydrate(n,l)}return(r&on.Self?Am():this.parent).get(n,e=r&on.Optional&&e===Fa?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[ua]=a[ua]||[]).unshift(An(n)),s)throw a;return function qd(t,n,e,r){const i=t[ua];throw n[_l]&&i.unshift(n[_l]),t.message=function Zd(t,n,e,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=An(n);if(Array.isArray(n))i=n.map(An).join(" -> ");else if("object"==typeof n){let s=[];for(let o in n)if(n.hasOwnProperty(o)){let a=n[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):An(a)))}i=`{${s.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${t.replace(Gd,"\n  ")}`}("\n"+t.message,i,e,r),t.ngTokenPath=i,t[ua]=null,t}(a,n,"R3InjectorError",this.source)}throw a}finally{Gr(o),Os(s)}}resolveInjectorInitializers(){const n=Os(this),e=Gr(void 0);try{const i=this.get(Uh.multi,Zt,on.Self);for(const s of i)s()}finally{Os(n),Gr(e)}}toString(){const n=[],e=this.records;for(const r of e.keys())n.push(An(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new je(205,!1)}processProvider(n){let e=vc(n=jt(n))?n:jt(n&&n.provide);const r=function K2(t){return Ab(t)?$u(void 0,t.useValue):$u(IE(t),Mm)}(n);if(vc(n)||!0!==n.multi)this.records.get(e);else{let i=this.records.get(e);i||(i=$u(void 0,Mm,!0),i.factory=()=>Bo(i.multi),this.records.set(e,i)),e=n,i.multi.push(n)}this.records.set(e,r)}hydrate(n,e){return e.value===Mm&&(e.value=W2,e.value=e.factory()),"object"==typeof e.value&&e.value&&function q2(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=jt(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){const e=this._onDestroyHooks.indexOf(n);-1!==e&&this._onDestroyHooks.splice(e,1)}}function kb(t){const n=qt(t),e=null!==n?n.factory:ja(t);if(null!==e)return e;if(t instanceof ot)throw new je(204,!1);if(t instanceof Function)return function G2(t){const n=t.length;if(n>0)throw kh(n,"?"),new je(204,!1);const e=function sn(t){return t&&(t[Cr]||t[Nn])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new je(204,!1)}function IE(t,n,e){let r;if(vc(t)){const i=jt(t);return ja(i)||kb(i)}if(Ab(t))r=()=>jt(t.useValue);else if(function DE(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Bo(t.deps||[]));else if(function SE(t){return!(!t||!t.useExisting)}(t))r=()=>We(jt(t.useExisting));else{const i=jt(t&&(t.useClass||t.provide));if(!function X2(t){return!!t.deps}(t))return ja(i)||kb(i);r=()=>new i(...Bo(t.deps))}return r}function $u(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Ob(t,n){for(const e of t)Array.isArray(e)?Ob(e,n):e&&Wi(e)?Ob(e.\u0275providers,n):n(e)}const Nm=new ot("AppId",{providedIn:"root",factory:()=>Y2}),Y2="ng",TE=new ot("Platform Initializer"),qa=new ot("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kl=new ot("AnimationModuleType"),Pb=new ot("CSP nonce",{providedIn:"root",factory:()=>function Pu(){if(void 0!==wb)return wb;if(typeof document<"u")return document;throw new je(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ME=(t,n,e)=>null;function jb(t,n,e=!1){return ME(t,n,e)}class aF{}class RE{}class cF{resolveComponentFactory(n){throw function lF(t){const n=Error(`No component factory found for ${An(t)}.`);return n.ngComponent=t,n}(n)}}let Wh=(()=>{class t{static#e=this.NULL=new cF}return t})();function uF(){return Vu(Qr(),it())}function Vu(t,n){return new $n(Mi(t,n))}let $n=(()=>{class t{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=uF}return t})();function dF(t){return t instanceof $n?t.nativeElement:t}class Gh{}let Za=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function hF(){const t=it(),e=Ai(Qr().index,t);return(Pn(e)?e:t)[Yt]}()}return t})(),fF=(()=>{class t{static#e=this.\u0275prov=Fe({token:t,providedIn:"root",factory:()=>null})}return t})();class xc{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const pF=new xc("16.2.11"),Gb={};function $E(t,n=null,e=null,r){const i=LE(t,n,e,r);return i.resolveInjectorInitializers(),i}function LE(t,n=null,e=null,r,i=new Set){const s=[e||Zt,U2(t)];return r=r||("object"==typeof t?void 0:An(t)),new Fu(s,n||Am(),r||null,i)}let ki=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Fa;static#t=this.NULL=new Ib;static create(e,r){if(Array.isArray(e))return $E({name:""},r,e,"");{const i=e.name??"";return $E({name:i},e.parent,e.providers,i)}}static#n=this.\u0275prov=Fe({token:t,providedIn:"any",factory:()=>We(xE)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function Xb(t){return t.ngOriginalError}class go{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&Xb(n);for(;e&&Xb(e);)e=Xb(e);return e||null}}function Zb(t){return n=>{setTimeout(t,void 0,n)}}const Qn=class xF extends De{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,r){let i=n,s=e||(()=>null),o=r;if(n&&"object"==typeof n){const l=n;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Zb(s),i&&(i=Zb(i)),o&&(o=Zb(o)));const a=super.subscribe({next:i,error:s,complete:o});return n instanceof $&&n.add(a),a}};function VE(...t){}class Mt{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qn(!1),this.onMicrotaskEmpty=new Qn(!1),this.onStable=new Qn(!1),this.onError=new Qn(!1),typeof Zone>"u")throw new je(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&e,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function wF(){const t="function"==typeof Vn.requestAnimationFrame;let n=Vn[t?"requestAnimationFrame":"setTimeout"],e=Vn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&e){const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function SF(t){const n=()=>{!function EF(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Vn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Qb(t),t.isCheckStableRunning=!0,Yb(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Qb(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,i,s,o,a)=>{if(function IF(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return e.invokeTask(i,s,o,a);try{return zE(t),e.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&n(),UE(t)}},onInvoke:(e,r,i,s,o,a,l)=>{try{return zE(t),e.invoke(i,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&n(),UE(t)}},onHasTask:(e,r,i,s)=>{e.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,Qb(t),Yb(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,r,i,s)=>(e.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mt.isInAngularZone())throw new je(909,!1)}static assertNotInAngularZone(){if(Mt.isInAngularZone())throw new je(909,!1)}run(n,e,r){return this._inner.run(n,e,r)}runTask(n,e,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,n,CF,VE,VE);try{return s.runTask(o,e,r)}finally{s.cancelTask(o)}}runGuarded(n,e,r){return this._inner.runGuarded(n,e,r)}runOutsideAngular(n){return this._outer.run(n)}}const CF={};function Yb(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Qb(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function zE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function UE(t){t._nesting--,Yb(t)}class DF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qn,this.onMicrotaskEmpty=new Qn,this.onStable=new Qn,this.onError=new Qn}run(n,e,r){return n.apply(e,r)}runGuarded(n,e,r){return n.apply(e,r)}runOutsideAngular(n){return n()}runTask(n,e,r,i){return n.apply(e,r)}}const jE=new ot("",{providedIn:"root",factory:HE});function HE(){const t=ft(Mt);let n=!0;return Oo(new Te(i=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(n),i.complete()})}),new Te(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{Mt.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{Mt.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Br()))}function WE(t){return t.ownerDocument.defaultView}function Ya(t){return t instanceof Function?t():t}let Jb=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Fe({token:t,providedIn:"root",factory:()=>new t})}return t})();function Kh(t){for(;t;){t[en]|=64;const n=$h(t);if(ho(t)&&!n)return t;t=n}return null}const ZE=new ot("",{providedIn:"root",factory:()=>!1});let Lm=null;function eS(t,n){return t[n]??rS()}function tS(t,n){const e=rS();e.producerNode?.length&&(t[n]=Lm,e.lView=t,Lm=nS())}const FF={...Sp,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Kh(t.lView)},lView:null};function nS(){return Object.create(FF)}function rS(){return Lm??=nS(),Lm}const hn={};function yn(t){iS(Dn(),it(),yi()+t,!1)}function iS(t,n,e,r){if(!r)if(3==(3&n[en])){const s=t.preOrderCheckHooks;null!==s&&Cu(n,s,e)}else{const s=t.preOrderHooks;null!==s&&Eu(n,s,0,e)}Wa(e)}function Re(t,n=on.Default){const e=it();return null===e?We(t,n):cm(Qr(),e,jt(t),n)}function ev(){throw new Error("invalid")}function Bm(t,n,e,r,i,s,o,a,l,c,u){const h=n.blueprint.slice();return h[ir]=i,h[en]=140|r,(null!==c||t&&2048&t[en])&&(h[en]|=2048),zp(h),h[Zn]=h[R]=t,h[ur]=e,h[pa]=o||t&&t[pa],h[Yt]=a||t&&t[Yt],h[uo]=l||t&&t[uo]||null,h[Zr]=s,h[oe]=function BP(){return LP++}(),h[Ue]=u,h[me]=c,h[x]=2==n.type?t[x]:h,h}function ju(t,n,e,r,i){let s=t.data[n];if(null===s)s=function tv(t,n,e,r,i){const s=Xp(),o=vh(),l=t.data[n]=function HF(t,n,e,r,i,s){let o=n?n.injectorIndex:-1,a=0;return Tl()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,n,r,i);return null===t.firstChild&&(t.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(t,n,e,r,i),function L_(){return Qt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=r,s.attrs=i;const o=function hc(){const t=Qt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return po(s,!0),s}function Xh(t,n,e,r){if(0===e)return-1;const i=n.length;for(let s=0;s<e;s++)n.push(r),t.blueprint.push(r),t.data.push(null);return i}function sS(t,n,e,r,i){const s=eS(n,Ge),o=yi(),a=2&r;try{Wa(-1),a&&n.length>He&&iS(t,n,He,!1),fo(a?2:0,i);const c=a?s:null,u=hh(c);try{null!==c&&(c.dirty=!1),e(r,i)}finally{cc(c,u)}}finally{a&&null===n[Ge]&&tS(n,Ge),Wa(o),fo(a?3:1,i)}}function nv(t,n,e){if(Cl(n)){const r=rs(null);try{const s=n.directiveEnd;for(let o=n.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,e[o],o)}}finally{rs(r)}}}function rv(t,n,e){Wp()&&(function YF(t,n,e,r){const i=e.directiveStart,s=e.directiveEnd;ws(e)&&function i$(t,n,e){const r=Mi(n,t),i=oS(e);let o=16;e.signals?o=4096:e.onPush&&(o=64);const a=Vm(t,Bm(t,i,null,o,r,n,null,t[pa].rendererFactory.createRenderer(r,e),null,null,null));t[n.index]=a}(n,e,t.data[i+e.componentOffset]),t.firstCreatePass||Du(e,n),Ri(r,n);const o=e.initialInputs;for(let a=i;a<s;a++){const l=t.data[a],c=Ga(n,t,a,e);Ri(c,n),null!==o&&s$(0,a-i,c,l,0,o),oi(l)&&(Ai(e.index,n)[ur]=Ga(n,t,a,e))}}(t,n,e,Mi(e,n)),64==(64&e.flags)&&dS(t,n,e))}function iv(t,n,e=Mi){const r=n.localNames;if(null!==r){let i=n.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?e(n,t):t[o];t[i++]=a}}}function oS(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=sv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function sv(t,n,e,r,i,s,o,a,l,c,u){const h=He+r,m=h+i,y=function LF(t,n){const e=[];for(let r=0;r<n;r++)e.push(r<t?null:hn);return e}(h,m),C="function"==typeof c?c():c;return y[St]={type:t,blueprint:y,template:e,queries:null,viewQuery:a,declTNode:n,data:y.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:C,incompleteFirstPass:!1,ssrId:u}}let aS=t=>null;function lS(t,n,e,r){for(let i in t)if(t.hasOwnProperty(i)){e=null===e?{}:e;const s=t[i];null===r?cS(e,n,i,s):r.hasOwnProperty(i)&&cS(e,n,r[i],s)}return e}function cS(t,n,e,r){t.hasOwnProperty(e)?t[e].push(n,r):t[e]=[n,r]}function js(t,n,e,r,i,s,o,a){const l=Mi(n,e);let u,c=n.inputs;!a&&null!=c&&(u=c[r])?(uv(t,e,u,r,i),ws(n)&&function KF(t,n){const e=Ai(n,t);16&e[en]||(e[en]|=64)}(e,n.index)):3&n.type&&(r=function GF(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,n.value||"",r):i,s.setProperty(l,r,i))}function ov(t,n,e,r){if(Wp()){const i=null===r?null:{"":-1},s=function JF(t,n){const e=t.directiveRegistry;let r=null,i=null;if(e)for(let s=0;s<e.length;s++){const o=e[s];if(ru(n,o.selectors,!1))if(r||(r=[]),oi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),av(t,n,a.length)}else r.unshift(o),av(t,n,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,e);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&uS(t,n,e,o,i,a),i&&function e$(t,n,e){if(n){const r=t.localNames=[];for(let i=0;i<n.length;i+=2){const s=e[n[i+1]];if(null==s)throw new je(-301,!1);r.push(n[i],s)}}}(e,r,i)}e.mergedAttrs=Va(e.mergedAttrs,e.attrs)}function uS(t,n,e,r,i,s){for(let c=0;c<r.length;c++)Rh(Du(e,n),t,r[c].type);!function n$(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Xh(t,n,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];e.mergedAttrs=Va(e.mergedAttrs,u.hostAttrs),r$(t,e,n,l,u),t$(l,u,i),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}!function WF(t,n,e){const i=n.directiveEnd,s=t.data,o=n.attrs,a=[];let l=null,c=null;for(let u=n.directiveStart;u<i;u++){const h=s[u],m=e?e.get(h):null,C=m?m.outputs:null;l=lS(h.inputs,u,l,m?m.inputs:null),c=lS(h.outputs,u,c,C);const k=null===l||null===o||sc(n)?null:o$(l,u,o);a.push(k)}null!==l&&(l.hasOwnProperty("class")&&(n.flags|=8),l.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=l,n.outputs=c}(t,e,s)}function dS(t,n,e){const r=e.directiveStart,i=e.directiveEnd,s=e.index,o=function V_(){return Qt.lFrame.currentDirectiveIndex}();try{Wa(s);for(let a=r;a<i;a++){const l=t.data[a],c=n[a];fc(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&QF(l,c)}}finally{Wa(-1),fc(o)}}function QF(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function av(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function t$(t,n,e){if(e){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)e[n.exportAs[r]]=t;oi(n)&&(e[""]=t)}}function r$(t,n,e,r,i){t.data[r]=i;const s=i.factory||(i.factory=ja(i.type)),o=new pc(s,oi(i),Re);t.blueprint[r]=o,e[r]=o,function qF(t,n,e,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~n.index;(function ZF(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,r,s)}}(t,n,r,Xh(t,e,i.hostVars,hn),i)}function _a(t,n,e,r,i,s){const o=Mi(t,n);!function lv(t,n,e,r,i,s,o){if(null==s)t.removeAttribute(n,i,e);else{const a=null==o?Kt(s):o(s,r||"",i);t.setAttribute(n,i,a,e)}}(n[Yt],o,s,t.value,e,r,i)}function s$(t,n,e,r,i,s){const o=s[n];if(null!==o)for(let a=0;a<o.length;)hS(r,e,o[a++],o[a++],o[a++])}function hS(t,n,e,r,i){const s=rs(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(n,i)),null!==t.setInput?t.setInput(n,i,e,r):n[r]=i}finally{rs(s)}}function o$(t,n,e){let r=null,i=0;for(;i<e.length;){const s=e[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===n){r.push(s,o[a+1],e[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function fS(t,n,e,r){return[t,!0,!1,n,null,0,r,e,null,null,null]}function pS(t,n){const e=t.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const s=e[r+1];if(-1!==s){const o=t.data[s];Ch(e[r]),o.contentQueries(2,n[s],s)}}}function Vm(t,n){return t[za]?t[ac][es]=n:t[za]=n,t[ac]=n,n}function cv(t,n,e){Ch(0);const r=rs(null);try{n(t,e)}finally{rs(r)}}function mS(t){return t[co]||(t[co]=[])}function gS(t){return t.cleanup||(t.cleanup=[])}function yS(t,n,e){return(null===t||oi(t))&&(e=function yh(t){for(;Array.isArray(t);){if("object"==typeof t[Ot])return t;t=t[ir]}return null}(e[n.index])),e[Yt]}function _S(t,n){const e=t[uo],r=e?e.get(go,null):null;r&&r.handleError(n)}function uv(t,n,e,r,i){for(let s=0;s<e.length;){const o=e[s++],a=e[s++];hS(t.data[o],n[o],r,a,i)}}function a$(t,n){const e=Ai(n,t),r=e[St];!function l$(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}(r,e);const i=e[ir];null!==i&&null===e[Ue]&&(e[Ue]=jb(i,e[uo])),dv(r,e,e[ur])}function dv(t,n,e){Eh(n);try{const r=t.viewQuery;null!==r&&cv(1,r,e);const i=t.template;null!==i&&sS(t,n,i,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&pS(t,n),t.staticViewQueries&&cv(2,t.viewQuery,e);const s=t.components;null!==s&&function c$(t,n){for(let e=0;e<n.length;e++)a$(t,n[e])}(n,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{n[en]&=-5,Sh()}}let bS=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(e,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function w_(t,n,e){const r=Object.create(C_);e&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=n;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>dh(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Ip(r))return;r.hasRun=!0;const o=hh(r);try{r.cleanupFn(),r.cleanupFn=pu,r.fn(i)}finally{cc(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(e,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[e,r]of this.queue)this.queue.delete(e),r?r.run(()=>e.run()):e.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Fe({token:t,providedIn:"root",factory:()=>new t})}return t})();function zm(t,n,e){let r=e?t.styles:null,i=e?t.classes:null,s=0;if(null!==n)for(let o=0;o<n.length;o++){const a=n[o];"number"==typeof a?s=a:1==s?i=oo(i,a):2==s&&(r=oo(r,a+": "+n[++o]+";"))}e?t.styles=r:t.stylesWithoutHost=r,e?t.classes=i:t.classesWithoutHost=i}function qh(t,n,e,r,i=!1){for(;null!==e;){const s=n[e.index];null!==s&&r.push(Yn(s)),Er(s)&&vS(s,r);const o=e.type;if(8&o)qh(t,n,e.child,r);else if(32&o){const a=fb(e,n);let l;for(;l=a();)r.push(l)}else if(16&o){const a=rE(n,e);if(Array.isArray(a))r.push(...a);else{const l=$h(n[x]);qh(l[St],l,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function vS(t,n){for(let e=It;e<t.length;e++){const r=t[e],i=r[St].firstChild;null!==i&&qh(r[St],r,i,n)}t[ln]!==t[ir]&&n.push(t[ln])}function Um(t,n,e,r=!0){const i=n[pa],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{xS(t,n,t.template,e)}catch(l){throw r&&_S(n,l),l}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function xS(t,n,e,r){const i=n[en];if(256!=(256&i)){n[pa].effectManager?.flush(),Eh(n);try{zp(n),function vu(t){return Qt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&sS(t,n,e,2,r);const o=3==(3&i);if(o){const c=t.preOrderCheckHooks;null!==c&&Cu(n,c,null)}else{const c=t.preOrderHooks;null!==c&&Eu(n,c,0,null),Ih(n,0)}if(function h$(t){for(let n=WC(t);null!==n;n=GC(n)){if(!n[Wt])continue;const e=n[vr];for(let r=0;r<e.length;r++){M_(e[r])}}}(n),wS(n,2),null!==t.contentQueries&&pS(t,n),o){const c=t.contentCheckHooks;null!==c&&Cu(n,c)}else{const c=t.contentHooks;null!==c&&Eu(n,c,1),Ih(n,1)}!function $F(t,n){const e=t.hostBindingOpCodes;if(null===e)return;const r=eS(n,xt);try{for(let i=0;i<e.length;i++){const s=e[i];if(s<0)Wa(~s);else{const o=s,a=e[++i],l=e[++i];B_(a,o),r.dirty=!1;const c=hh(r);try{l(2,n[o])}finally{cc(r,c)}}}}finally{null===n[xt]&&tS(n,xt),Wa(-1)}}(t,n);const a=t.components;null!==a&&ES(n,a,0);const l=t.viewQuery;if(null!==l&&cv(2,l,r),o){const c=t.viewCheckHooks;null!==c&&Cu(n,c)}else{const c=t.viewHooks;null!==c&&Eu(n,c,2),Ih(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[en]&=-73,is(n)}finally{Sh()}}}function wS(t,n){for(let e=WC(t);null!==e;e=GC(e))for(let r=It;r<e.length;r++)CS(e[r],n)}function f$(t,n,e){CS(Ai(n,t),e)}function CS(t,n){if(!function T_(t){return 128==(128&t[en])}(t))return;const e=t[St],r=t[en];if(80&r&&0===n||1024&r||2===n)xS(e,t,e.template,t[ur]);else if(t[wl]>0){wS(t,1);const i=e.components;null!==i&&ES(t,i,1)}}function ES(t,n,e){for(let r=0;r<n.length;r++)f$(t,n[r],e)}class Zh{get rootNodes(){const n=this._lView,e=n[St];return qh(e,n,e.firstChild,[])}constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ur]}set context(n){this._lView[ur]=n}get destroyed(){return 256==(256&this._lView[en])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Zn];if(Er(n)){const e=n[8],r=e?e.indexOf(this):-1;r>-1&&(vm(n,r),Mu(e,r))}this._attachedToViewContainer=!1}mb(this._lView[St],this._lView)}onDestroy(n){!function jp(t,n){if(256==(256&t[en]))throw new je(911,!1);null===t[Me]&&(t[Me]=[]),t[Me].push(n)}(this._lView,n)}markForCheck(){Kh(this._cdRefInjectingView||this._lView)}detach(){this._lView[en]&=-129}reattach(){this._lView[en]|=128}detectChanges(){Um(this._lView[St],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function JP(t,n){Bh(t,n,n[Yt],2,null,null)}(this._lView[St],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new je(902,!1);this._appRef=n}}class p$ extends Zh{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Um(n[St],n,n[ur],!1)}checkNoChanges(){}get context(){return null}}class SS extends Wh{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=bn(n);return new Yh(e,this.ngModule)}}function DS(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}class g${constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,r){r=$a(r);const i=this.injector.get(n,Gb,r);return i!==Gb||e===Gb?i:this.parentInjector.get(n,e,r)}}class Yh extends RE{get inputs(){const n=this.componentDef,e=n.inputTransforms,r=DS(n.inputs);if(null!==e)for(const i of r)e.hasOwnProperty(i.propName)&&(i.transform=e[i.propName]);return r}get outputs(){return DS(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function sh(t){return t.map(ih).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,r,i){let s=(i=i||this.ngModule)instanceof Us?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new g$(n,s):n,a=o.get(Gh,null);if(null===a)throw new je(407,!1);const h={rendererFactory:a,sanitizer:o.get(fF,null),effectManager:o.get(bS,null),afterRenderEventManager:o.get(Jb,null)},m=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",C=r?function BF(t,n,e,r){const s=r.get(ZE,!1)||e===Kr.ShadowDom,o=t.selectRootElement(n,s);return function VF(t){aS(t)}(o),o}(m,r,this.componentDef.encapsulation,o):bm(m,y,function m$(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(y)),B=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let V=null;null!==C&&(V=jb(C,o,!0));const fe=sv(0,null,null,1,0,null,null,null,null,null,null),ve=Bm(null,fe,null,B,null,null,h,m,o,null,V);let Ve,gt;Eh(ve);try{const dt=this.componentDef;let ht,Gt=null;dt.findHostDirectiveDefs?(ht=[],Gt=new Map,dt.findHostDirectiveDefs(dt,ht,Gt),ht.push(dt)):ht=[dt];const zt=function _$(t,n){const e=t[St],r=He;return t[r]=n,ju(e,r,2,"#host",null)}(ve,C),Hn=function b$(t,n,e,r,i,s,o){const a=i[St];!function v$(t,n,e,r){for(const i of t)n.mergedAttrs=Va(n.mergedAttrs,i.hostAttrs);null!==n.mergedAttrs&&(zm(n,n.mergedAttrs,!0),null!==e&&aE(r,e,n))}(r,t,n,o);let l=null;null!==n&&(l=jb(n,i[uo]));const c=s.rendererFactory.createRenderer(n,e);let u=16;e.signals?u=4096:e.onPush&&(u=64);const h=Bm(i,oS(e),null,u,i[t.index],t,s,c,null,null,l);return a.firstCreatePass&&av(a,t,r.length-1),Vm(i,h),i[t.index]=h}(zt,C,dt,ht,ve,h,m);gt=Vp(fe,He),C&&function w$(t,n,e,r){if(r)ic(t,e,["ng-version",pF.full]);else{const{attrs:i,classes:s}=function oh(t){const n=[],e=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&n.push(s,t[++r]):8===i&&e.push(s);else{if(!Ji(i))break;i=s}r++}return{attrs:n,classes:e}}(n.selectors[0]);i&&ic(t,e,i),s&&s.length>0&&oE(t,e,s.join(" "))}}(m,dt,C,r),void 0!==e&&function C$(t,n,e){const r=t.projection=[];for(let i=0;i<n.length;i++){const s=e[i];r.push(null!=s?Array.from(s):null)}}(gt,this.ngContentSelectors,e),Ve=function x$(t,n,e,r,i,s){const o=Qr(),a=i[St],l=Mi(o,i);uS(a,i,o,e,null,r);for(let u=0;u<e.length;u++)Ri(Ga(i,a,o.directiveStart+u,o),i);dS(a,i,o),l&&Ri(l,i);const c=Ga(i,a,o.directiveStart+o.componentOffset,o);if(t[ur]=i[ur]=c,null!==s)for(const u of s)u(c,n);return nv(a,o,t),c}(Hn,dt,ht,Gt,ve,[E$]),dv(fe,ve,null)}finally{Sh()}return new y$(this.componentType,Ve,Vu(gt,ve),ve,gt)}}class y$ extends aF{constructor(n,e,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new p$(i),this.componentType=n}setInput(n,e){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;const s=this._rootLView;uv(s[St],s,i,n,e),this.previousInputValues.set(n,e),Kh(Ai(this._tNode.index,s))}}get injector(){return new L(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function E$(){const t=Qr();Cs(it()[St],t)}function wn(t){let n=function IS(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const r=[t];for(;n;){let i;if(oi(t))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new je(903,!1);i=n.\u0275dir}if(i){if(e){r.push(i);const o=t;o.inputs=jm(t.inputs),o.inputTransforms=jm(t.inputTransforms),o.declaredInputs=jm(t.declaredInputs),o.outputs=jm(t.outputs);const a=i.hostBindings;a&&T$(t,a);const l=i.viewQuery,c=i.contentQueries;if(l&&D$(t,l),c&&I$(t,c),Hi(t.inputs,i.inputs),Hi(t.declaredInputs,i.declaredInputs),Hi(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Hi(o.inputTransforms,i.inputTransforms)),oi(i)&&i.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===wn&&(e=!1)}}n=Object.getPrototypeOf(n)}!function S$(t){let n=0,e=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=n+=i.hostVars,i.hostAttrs=Va(i.hostAttrs,e=Va(e,i.hostAttrs))}}(r)}function jm(t){return t===Xr?{}:t===Zt?[]:t}function D$(t,n){const e=t.viewQuery;t.viewQuery=e?(r,i)=>{n(r,i),e(r,i)}:n}function I$(t,n){const e=t.contentQueries;t.contentQueries=e?(r,i,s)=>{n(r,i,s),e(r,i,s)}:n}function T$(t,n){const e=t.hostBindings;t.hostBindings=e?(r,i)=>{n(r,i),e(r,i)}:n}function NS(t){const n=t.inputConfig,e={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];Array.isArray(i)&&i[2]&&(e[r]=i[2])}t.inputTransforms=e}function Hm(t){return!!hv(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function hv(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ba(t,n,e){return t[n]=e}function Oi(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function bi(t,n,e,r){const i=it();return Oi(i,Ml(),n)&&(Dn(),_a(dr(),i,t,n,e,r)),bi}function Wu(t,n,e,r){return Oi(t,Ml(),e)?n+Kt(e)+r:hn}function Gn(t,n,e,r,i,s,o,a){const l=it(),c=Dn(),u=t+He,h=c.firstCreatePass?function J$(t,n,e,r,i,s,o,a,l){const c=n.consts,u=ju(n,t,4,o||null,ga(c,a));ov(n,e,u,ga(c,l)),Cs(n,u);const h=u.tView=sv(2,u,r,i,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c,null);return null!==n.queries&&(n.queries.template(n,u),h.queries=n.queries.embeddedTView(u)),u}(u,c,l,n,e,r,i,s,o):c.data[u];po(h,!1);const m=HS(c,l,h,t);wu()&&wm(c,l,m,h),Ri(m,l),Vm(l,l[u]=fS(m,l,m,h)),ns(h)&&rv(c,l,h),null!=o&&iv(l,h,a)}let HS=function WS(t,n,e,r){return Dr(!0),n[Yt].createComment("")};function nf(t){return function Il(t,n){return t[n]}(function $_(){return Qt.lFrame.contextLView}(),He+t)}function tn(t,n,e){const r=it();return Oi(r,Ml(),n)&&js(Dn(),dr(),r,t,n,r[Yt],e,!1),tn}function _v(t,n,e,r,i){const o=i?"class":"style";uv(t,e,n.inputs[o],o,r)}function pt(t,n,e,r){const i=it(),s=Dn(),o=He+t,a=i[Yt],l=s.firstCreatePass?function rL(t,n,e,r,i,s){const o=n.consts,l=ju(n,t,2,r,ga(o,i));return ov(n,e,l,ga(o,s)),null!==l.attrs&&zm(l,l.attrs,!1),null!==l.mergedAttrs&&zm(l,l.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,l),l}(o,s,i,n,e,r):s.data[o],c=GS(s,i,l,a,n,t);i[o]=c;const u=ns(l);return po(l,!0),aE(a,c,l),32!=(32&l.flags)&&wu()&&wm(s,i,c,l),0===function N_(){return Qt.lFrame.elementDepthCount}()&&Ri(c,i),function R_(){Qt.lFrame.elementDepthCount++}(),u&&(rv(s,i,l),nv(s,l,i)),null!==r&&iv(i,l),pt}function ct(){let t=Qr();vh()?xh():(t=t.parent,po(t,!1));const n=t;(function O_(t){return Qt.skipHydrationRootTNode===t})(n)&&function Kp(){Qt.skipHydrationRootTNode=null}(),function k_(){Qt.lFrame.elementDepthCount--}();const e=Dn();return e.firstCreatePass&&(Cs(e,t),Cl(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function Y_(t){return 0!=(8&t.flags)}(n)&&_v(e,n,it(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Q_(t){return 0!=(16&t.flags)}(n)&&_v(e,n,it(),n.stylesWithoutHost,!1),ct}function Xt(t,n,e,r){return pt(t,n,e,r),ct(),Xt}let GS=(t,n,e,r,i,s)=>(Dr(!0),bm(r,i,function tm(){return Qt.lFrame.currentNamespace}()));function xv(){return it()}function rf(t){return!!t&&"function"==typeof t.then}function qS(t){return!!t&&"function"==typeof t.subscribe}function Mr(t,n,e,r){const i=it(),s=Dn(),o=Qr();return ZS(s,i,i[Yt],o,t,n,r),Mr}function wv(t,n){const e=Qr(),r=it(),i=Dn();return ZS(i,r,yS(wh(i.data),e,r),e,t,n),wv}function ZS(t,n,e,r,i,s,o){const a=ns(r),c=t.firstCreatePass&&gS(t),u=n[ur],h=mS(n);let m=!0;if(3&r.type||o){const k=Mi(r,n),P=o?o(k):k,B=h.length,V=o?ve=>o(Yn(ve[r.index])):r.index;let fe=null;if(!o&&a&&(fe=function cL(t,n,e,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===e&&i[s+1]===r){const a=n[co],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(t,n,i,r.index)),null!==fe)(fe.__ngLastListenerFn__||fe).__ngNextListenerFn__=s,fe.__ngLastListenerFn__=s,m=!1;else{s=QS(r,n,u,s,!1);const ve=e.listen(P,i,s);h.push(s,ve),c&&c.push(i,V,B,B+1)}}else s=QS(r,n,u,s,!1);const y=r.outputs;let C;if(m&&null!==y&&(C=y[i])){const k=C.length;if(k)for(let P=0;P<k;P+=2){const Ve=n[C[P]][C[P+1]].subscribe(s),gt=h.length;h.push(s,Ve),c&&c.push(i,r.index,gt,-(gt+1))}}}function YS(t,n,e,r){try{return fo(6,n,e),!1!==e(r)}catch(i){return _S(t,i),!1}finally{fo(7,n,e)}}function QS(t,n,e,r,i){return function s(o){if(o===Function)return r;Kh(t.componentOffset>-1?Ai(t.index,n):n);let l=YS(n,e,r,o),c=s.__ngNextListenerFn__;for(;c;)l=YS(n,e,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&o.preventDefault(),l}}function zo(t=1){return function U_(t){return(Qt.lFrame.contextLView=function j_(t,n){for(;t>0;)n=n[R],t--;return n}(t,Qt.lFrame.contextLView))[ur]}(t)}function uL(t,n){let e=null;const r=function th(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(!(1&e))return n[e+1]}return null}(t);for(let i=0;i<n.length;i++){const s=n[i];if("*"!==s){if(null===r?ru(t,s,!0):rh(r,s))return i}else e=i}return e}function Uo(t){const n=it()[x][Zr];if(!n.projection){const r=n.projection=kh(t?t.length:1,null),i=r.slice();let s=n.child;for(;null!==s;){const o=t?uL(s,t):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function br(t,n=0,e){const r=it(),i=Dn(),s=ju(i,He+t,16,null,e||null);null===s.projection&&(s.projection=n),xh(),(!r[Ue]||Tl())&&32!=(32&s.flags)&&function l2(t,n,e){sE(n[Yt],0,n,e,yb(t,e,n),JC(e.parent||n[Zr],e,n))}(i,r,s)}function Cv(t,n,e){return Ev(t,"",n,"",e),Cv}function Ev(t,n,e,r,i){const s=it(),o=Wu(s,n,e,r);return o!==hn&&js(Dn(),dr(),s,t,o,s[Yt],i,!1),Ev}function qm(t,n){return t<<17|n<<2}function Ol(t){return t>>17&32767}function Sv(t){return 2|t}function Cc(t){return(131068&t)>>2}function Dv(t,n){return-131069&t|n<<2}function Iv(t){return 1|t}function aD(t,n,e,r,i){const s=t[e+1],o=null===n;let a=r?Ol(s):Cc(s),l=!1;for(;0!==a&&(!1===l||o);){const u=t[a+1];gL(t[a],n)&&(l=!0,t[a+1]=r?Iv(u):Sv(u)),a=r?Ol(u):Cc(u)}l&&(t[e+1]=r?Sv(s):Iv(s))}function gL(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Au(t,n)>=0}function Tv(t,n,e){return jo(t,n,e,!1),Tv}function Ur(t,n){return jo(t,n,null,!0),Ur}function jo(t,n,e,r){const i=it(),s=Dn(),o=function Ls(t){const n=Qt.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}(2);s.firstUpdatePass&&function mD(t,n,e,r){const i=t.data;if(null===i[e+1]){const s=i[yi()],o=function pD(t,n){return n>=t.expandoStartIndex}(t,e);(function bD(t,n){return 0!=(t.flags&(n?8:16))})(s,r)&&null===n&&!o&&(n=!1),n=function SL(t,n,e,r){const i=wh(t);let s=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(e=sf(e=Mv(null,t,n,e,r),n.attrs,r),s=null);else{const o=n.directiveStylingLast;if(-1===o||t[o]!==i)if(e=Mv(i,t,n,e,r),null===s){let l=function DL(t,n,e){const r=e?n.classBindings:n.styleBindings;if(0!==Cc(r))return t[Ol(r)]}(t,n,r);void 0!==l&&Array.isArray(l)&&(l=Mv(null,t,n,l[1],r),l=sf(l,n.attrs,r),function IL(t,n,e,r){t[Ol(e?n.classBindings:n.styleBindings)]=r}(t,n,r,l))}else s=function TL(t,n,e){let r;const i=n.directiveEnd;for(let s=1+n.directiveStylingLast;s<i;s++)r=sf(r,t[s].hostAttrs,e);return sf(r,n.attrs,e)}(t,n,r)}return void 0!==s&&(r?n.residualClasses=s:n.residualStyles=s),e}(i,s,n,r),function pL(t,n,e,r,i,s){let o=s?n.classBindings:n.styleBindings,a=Ol(o),l=Cc(o);t[r]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||Au(e,u)>0)&&(c=!0)):u=e,i)if(0!==l){const m=Ol(t[a+1]);t[r+1]=qm(m,a),0!==m&&(t[m+1]=Dv(t[m+1],r)),t[a+1]=function hL(t,n){return 131071&t|n<<17}(t[a+1],r)}else t[r+1]=qm(a,0),0!==a&&(t[a+1]=Dv(t[a+1],r)),a=r;else t[r+1]=qm(l,0),0===a?a=r:t[l+1]=Dv(t[l+1],r),l=r;c&&(t[r+1]=Sv(t[r+1])),aD(t,u,r,!0),aD(t,u,r,!1),function mL(t,n,e,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof n&&Au(s,n)>=0&&(e[r+1]=Iv(e[r+1]))}(n,u,t,r,s),o=qm(a,l),s?n.classBindings=o:n.styleBindings=o}(i,s,n,e,o,r)}}(s,t,o,r),n!==hn&&Oi(i,o,n)&&function yD(t,n,e,r,i,s,o,a){if(!(3&n.type))return;const l=t.data,c=l[a+1],u=function fL(t){return 1==(1&t)}(c)?_D(l,n,e,i,Cc(c),o):void 0;Zm(u)||(Zm(s)||function dL(t){return 2==(2&t)}(c)&&(s=_D(l,null,e,i,a,o)),function u2(t,n,e,r,i){if(n)i?t.addClass(e,r):t.removeClass(e,r);else{let s=-1===r.indexOf("-")?void 0:Rl.DashCase;null==i?t.removeStyle(e,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Rl.Important),t.setStyle(e,r,i,s))}}(r,o,yu(yi(),e),i,s))}(s,s.data[yi()],i,i[Yt],t,i[o+1]=function RL(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=An(zs(t)))),t}(n,e),r,o)}function Mv(t,n,e,r,i){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=n[a],r=sf(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(e.directiveStylingLast=a),r}function sf(t,n,e){const r=e?1:2;let i=-1;if(null!==n)for(let s=0;s<n.length;s++){const o=n[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Vs(t,o,!!e||n[++s]))}return void 0===t?null:t}function _D(t,n,e,r,i,s){const o=null===n;let a;for(;i>0;){const l=t[i],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let m=e[i+1];m===hn&&(m=h?Zt:void 0);let y=h?ib(m,r):u===r?m:void 0;if(c&&!Zm(y)&&(y=ib(l,r)),Zm(y)&&(a=y,o))return a;const C=t[i+1];i=o?Ol(C):Cc(C)}if(null!==n){let l=s?n.residualClasses:n.residualStyles;null!=l&&(a=ib(l,r))}return a}function Zm(t){return void 0!==t}function Et(t,n=""){const e=it(),r=Dn(),i=t+He,s=r.firstCreatePass?ju(r,i,1,n,null):r.data[i],o=vD(r,e,s,n,t);e[i]=o,wu()&&wm(r,e,o,s),po(s,!1)}let vD=(t,n,e,r,i)=>(Dr(!0),function _m(t,n){return t.createText(n)}(n[Yt],r));function Av(t){return af("",t,""),Av}function af(t,n,e){const r=it(),i=Wu(r,t,n,e);return i!==hn&&function Qa(t,n,e){const r=yu(n,t);!function XC(t,n,e){t.setValue(n,e)}(t[Yt],r,e)}(r,yi(),i),af}function Ym(t,n,e){const r=it();return Oi(r,Ml(),n)&&js(Dn(),dr(),r,t,n,r[Yt],e,!0),Ym}function Nv(t,n,e){const r=it();if(Oi(r,Ml(),n)){const s=Dn(),o=dr();js(s,o,r,t,n,yS(wh(s.data),o,r),e,!0)}return Nv}const td="en-US";let VD=td;function Ov(t,n,e,r,i){if(t=jt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Ov(t[s],n,e,r,i);else{const s=Dn(),o=it(),a=Qr();let l=vc(t)?t:jt(t.provide);const c=IE(t),u=1048575&a.providerIndexes,h=a.directiveStart,m=a.providerIndexes>>20;if(vc(t)||!t.multi){const y=new pc(c,i,Re),C=Fv(l,n,i?u:u+m,h);-1===C?(Rh(Du(a,o),s,l),Pv(s,t,n.length),n.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(y),o.push(y)):(e[C]=y,o[C]=y)}else{const y=Fv(l,n,u+m,h),C=Fv(l,n,u,u+m),P=C>=0&&e[C];if(i&&!P||!i&&!(y>=0&&e[y])){Rh(Du(a,o),s,l);const B=function JB(t,n,e,r,i){const s=new pc(t,e,Re);return s.multi=[],s.index=n,s.componentProviders=0,dI(s,i,r&&!e),s}(i?QB:YB,e.length,i,r,c);!i&&P&&(e[C].providerFactory=B),Pv(s,t,n.length,0),n.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(B),o.push(B)}else Pv(s,t,y>-1?y:C,dI(e[i?C:y],c,!i&&r));!i&&r&&P&&e[C].componentProviders++}}}function Pv(t,n,e,r){const i=vc(n),s=function H2(t){return!!t.useClass}(n);if(i||s){const l=(s?jt(n.useClass):n).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&n.multi){const u=c.indexOf(e);-1===u?c.push(e,[r,l]):c[u+1].push(r,l)}else c.push(e,l)}}}function dI(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function Fv(t,n,e,r){for(let i=e;i<r;i++)if(n[i]===t)return i;return-1}function YB(t,n,e,r){return $v(this.multi,[])}function QB(t,n,e,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ga(e,e[St],this.providerFactory.index,r);s=a.slice(0,o),$v(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],$v(i,s);return s}function $v(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function Jn(t,n=[]){return e=>{e.providersResolver=(r,i)=>function ZB(t,n,e){const r=Dn();if(r.firstCreatePass){const i=oi(t);Ov(e,r.data,r.blueprint,i,!0),Ov(n,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,n)}}class Sc{}class hI{}class Lv extends Sc{constructor(n,e,r){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new SS(this);const i=mi(n);this._bootstrapComponents=Ya(i.bootstrap),this._r3Injector=LE(n,e,[{provide:Sc,useValue:this},{provide:Wh,useValue:this.componentFactoryResolver},...r],An(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Bv extends hI{constructor(n){super(),this.moduleType=n}create(n){return new Lv(this.moduleType,n,[])}}class fI extends Sc{constructor(n){super(),this.componentFactoryResolver=new SS(this),this.instance=null;const e=new Fu([...n.providers,{provide:Sc,useValue:this},{provide:Wh,useValue:this.componentFactoryResolver}],n.parent||Am(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Vv(t,n,e=null){return new fI({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}let nV=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const r=CE(0,e.type),i=r.length>0?Vv([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Fe({token:t,providedIn:"environment",factory:()=>new t(We(Us))})}return t})();function pI(t){t.getStandaloneInjector=n=>n.get(nV).getOrCreateStandaloneInjector(t)}function Pl(t,n,e){const r=gi()+t,i=it();return i[r]===hn?ba(i,r,e?n.call(e):n()):function Qh(t,n){return t[n]}(i,r)}function ng(t,n,e,r){return function xI(t,n,e,r,i,s){const o=n+e;return Oi(t,o,i)?ba(t,o+1,s?r.call(s,i):r(i)):function ff(t,n){const e=t[n];return e===hn?void 0:e}(t,o+1)}(it(),gi(),t,n,e,r)}function DV(){return this._results[Symbol.iterator]()}class rg{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Qn)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=rg.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=DV)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const r=this;r.dirty=!1;const i=function Tr(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Nl(t,n,e){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=n[r];if(e&&(i=e(i),s=e(s)),s!==i)return!1}return!0}(r._results,i,e))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function TV(t,n,e,r=!0){const i=n[St];if(function t2(t,n,e,r){const i=It+r,s=e.length;r>0&&(e[i-1][es]=n),r<s-It?(n[es]=e[i],Ka(e,It+r,n)):(e.push(n),n[es]=null),n[Zn]=e;const o=n[M];null!==o&&e!==o&&function n2(t,n){const e=t[vr];n[x]!==n[Zn][Zn][x]&&(t[Wt]=!0),null===e?t[vr]=[n]:e.push(n)}(o,n);const a=n[j];null!==a&&a.insertView(t),n[en]|=128}(i,n,t,e),r){const s=bb(e,t),o=n[Yt],a=xm(o,t[ln]);null!==a&&function QP(t,n,e,r,i,s){r[ir]=i,r[Zr]=n,Bh(t,r,e,1,i,s)}(i,t[Zr],o,n,a,s)}}let Ja=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=NV}return t})();const MV=Ja,AV=class extends MV{constructor(n,e,r){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,r){const i=function IV(t,n,e,r){const i=n.tView,a=Bm(t,i,e,4096&t[en]?4096:16,null,n,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[M]=t[n.index];const c=t[j];return null!==c&&(a[j]=c.createEmbeddedView(i)),dv(i,a,e),a}(this._declarationLView,this._declarationTContainer,n,{injector:e,hydrationInfo:r});return new Zh(i)}};function NV(){return ig(Qr(),it())}function ig(t,n){return 4&t.type?new AV(n,t,Vu(t,n)):null}let Wo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=$V}return t})();function $V(){return RI(Qr(),it())}const LV=Wo,AI=class extends LV{constructor(n,e,r){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=r}get element(){return Vu(this._hostTNode,this._hostLView)}get injector(){return new L(this._hostTNode,this._hostLView)}get parentInjector(){const n=Iu(this._hostTNode,this._hostLView);if(Mh(n)){const e=gc(n,this._hostLView),r=mc(n);return new L(e[St].data[r+8],e)}return new L(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=NI(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-It}createEmbeddedView(n,e,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=n.createEmbeddedViewImpl(e||{},s,null);return this.insertImpl(a,i,false),a}createComponent(n,e,r,i,s){const o=n&&!function Ni(t){return"function"==typeof t}(n);let a;if(o)a=e;else{const k=e||{};a=k.index,r=k.injector,i=k.projectableNodes,s=k.environmentInjector||k.ngModuleRef}const l=o?n:new Yh(bn(n)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const P=(o?c:this.parentInjector).get(Us,null);P&&(s=P)}bn(l.componentType??{});const y=l.create(c,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(n,e){return this.insertImpl(n,e,!1)}insertImpl(n,e,r){const i=n._lView;if(function bh(t){return Er(t[Zn])}(i)){const l=this.indexOf(n);if(-1!==l)this.detach(l);else{const c=i[Zn],u=new AI(c,c[Zr],c[Zn]);u.detach(u.indexOf(n))}}const o=this._adjustIndex(e),a=this._lContainer;return TV(a,i,o,!r),n.attachToViewContainerRef(),Ka(Uv(a),o,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=NI(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),r=vm(this._lContainer,e);r&&(Mu(Uv(this._lContainer),e),mb(r[St],r))}detach(n){const e=this._adjustIndex(n,-1),r=vm(this._lContainer,e);return r&&null!=Mu(Uv(this._lContainer),e)?new Zh(r):null}_adjustIndex(n,e=0){return n??this.length+e}};function NI(t){return t[8]}function Uv(t){return t[8]||(t[8]=[])}function RI(t,n){let e;const r=n[t.index];return Er(r)?e=r:(e=fS(r,n,null,t),n[t.index]=e,Vm(n,e)),kI(e,n,t,r),new AI(e,t,n)}let kI=function OI(t,n,e,r){if(t[ln])return;let i;i=8&e.type?Yn(r):function BV(t,n){const e=t[Yt],r=e.createComment(""),i=Mi(n,t);return _c(e,xm(e,i),r,function a2(t,n){return t.nextSibling(n)}(e,i),!1),r}(n,e),t[ln]=i};class jv{constructor(n){this.queryList=n,this.matches=null}clone(){return new jv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hv{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const r=null!==n.contentQueries?n.contentQueries[0]:e.length,i=[];for(let s=0;s<r;s++){const o=e.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new Hv(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==BI(n,e).matches&&this.queries[e].setDirty()}}class PI{constructor(n,e,r=null){this.predicate=n,this.flags=e,this.read=r}}class Wv{constructor(n=[]){this.queries=n}elementStart(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let r=0;r<this.length;r++){const i=null!==e?e.length:0,s=this.getByIndex(r).embeddedTView(n,i);s&&(s.indexInDeclarationView=r,null!==e?e.push(s):e=[s])}return null!==e?new Wv(e):null}template(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Gv{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new Gv(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(n,e,UV(e,s)),this.matchTNodeWithReadOption(n,e,Tu(e,n,s,!1,!1))}else r===Ja?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Tu(e,n,r,!1,!1))}matchTNodeWithReadOption(n,e,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===$n||i===Wo||i===Ja&&4&e.type)this.addMatch(e.index,-2);else{const s=Tu(e,n,i,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,r)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function UV(t,n){const e=t.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===n)return e[r+1];return null}function HV(t,n,e,r){return-1===e?function jV(t,n){return 11&t.type?Vu(t,n):4&t.type?ig(t,n):null}(n,t):-2===e?function WV(t,n,e){return e===$n?Vu(n,t):e===Ja?ig(n,t):e===Wo?RI(n,t):void 0}(t,n,r):Ga(t,t[St],e,n)}function FI(t,n,e,r){const i=n[j].queries[r];if(null===i.matches){const s=t.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:HV(n,s[c],o[l+1],e.metadata.read))}i.matches=a}return i.matches}function Kv(t,n,e,r){const i=t.queries.getByIndex(e),s=i.matches;if(null!==s){const o=FI(t,n,i,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=n[-l];for(let h=It;h<u.length;h++){const m=u[h];m[M]===m[Zn]&&Kv(m[St],m,c,r)}if(null!==u[vr]){const h=u[vr];for(let m=0;m<h.length;m++){const y=h[m];Kv(y[St],y,c,r)}}}}}return r}function hr(t){const n=it(),e=Dn(),r=Zp();Ch(r+1);const i=BI(e,r);if(t.dirty&&function _h(t){return 4==(4&t[en])}(n)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?Kv(e,n,r,[]):FI(e,n,i,r);t.reset(s,dF),t.notifyOnChanges()}return!0}return!1}function Hs(t,n,e){const r=Dn();r.firstCreatePass&&(LI(r,new PI(t,n,e),-1),2==(2&n)&&(r.staticViewQueries=!0)),$I(r,it(),n)}function Ws(t,n,e,r){const i=Dn();if(i.firstCreatePass){const s=Qr();LI(i,new PI(n,e,r),s.index),function KV(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(i,t),2==(2&e)&&(i.staticContentQueries=!0)}$I(i,it(),e)}function fr(){return function GV(t,n){return t[j].queries[n].queryList}(it(),Zp())}function $I(t,n,e){const r=new rg(4==(4&e));(function jF(t,n,e,r){const i=mS(n);i.push(e),t.firstCreatePass&&gS(t).push(r,i.length-1)})(t,n,r,r.destroy),null===n[j]&&(n[j]=new Hv),n[j].queries.push(new jv(r))}function LI(t,n,e){null===t.queries&&(t.queries=new Wv),t.queries.track(new Gv(n,e))}function BI(t,n){return t.queries.getByIndex(n)}function VI(t,n){return ig(t,n)}const Jv=new ot("Application Initializer");let e0=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r}),this.appInits=ft(Jv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const i of this.appInits){const s=i();if(rf(s))e.push(s);else if(qS(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),0===e.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),r1=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const wa=new ot("LocaleId",{providedIn:"root",factory:()=>ft(wa,on.Optional|on.SkipSelf)||function m3(){return typeof $localize<"u"&&$localize.locale||td}()});let ag=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new gn(!1)}add(){this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class _3{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let s1=(()=>{class t{compileModuleSync(e){return new Bv(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const r=this.compileModuleSync(e),s=Ya(mi(e).declarations).reduce((o,a)=>{const l=bn(a);return l&&o.push(new Yh(l)),o},[]);return new _3(r,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const c1=new ot(""),cg=new ot("");let o0,r0=(()=>{class t{constructor(e,r,i){this._ngZone=e,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,o0||(function V3(t){o0=t}(i),i.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:i})}whenStable(e,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(We(Mt),We(s0),We(cg))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})(),s0=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return o0?.findTestabilityInTree(this,e,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Fl=null;const u1=new ot("AllowMultipleToken"),a0=new ot("PlatformDestroyListeners"),l0=new ot("appBootstrapListener");class h1{constructor(n,e){this.name=n,this.token=e}}function p1(t,n,e=[]){const r=`Platform: ${n}`,i=new ot(r);return(s=[])=>{let o=c0();if(!o||o.injector.get(u1,!1)){const a=[...e,...s,{provide:i,useValue:!0}];t?t(a):function j3(t){if(Fl&&!Fl.get(u1,!1))throw new je(400,!1);(function d1(){!function Rp(t){Np=t}(()=>{throw new je(600,!1)})})(),Fl=t;const n=t.get(g1);(function f1(t){t.get(TE,null)?.forEach(e=>e())})(t)}(function m1(t=[],n){return ki.create({name:n,providers:[{provide:Nb,useValue:"platform"},{provide:a0,useValue:new Set([()=>Fl=null])},...t]})}(a,r))}return function W3(t){const n=c0();if(!n)throw new je(401,!1);return n}()}}function c0(){return Fl?.get(g1)??null}let g1=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const i=function G3(t="zone.js",n){return"noop"===t?new DF:"zone.js"===t?new Mt(n):t}(r?.ngZone,function y1(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function tV(t,n,e){return new Lv(t,n,e)}(e.moduleType,this.injector,function w1(t){return[{provide:Mt,useFactory:t},{provide:Uh,multi:!0,useFactory:()=>{const n=ft(X3,{optional:!0});return()=>n.initialize()}},{provide:x1,useFactory:K3},{provide:jE,useFactory:HE}]}(()=>i)),o=s.injector.get(go,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{ug(this._modules,s),a.unsubscribe()})}),function _1(t,n,e){try{const r=e();return rf(r)?r.catch(i=>{throw n.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(e0);return a.runInitializers(),a.donePromise.then(()=>(function zD(t){J(t,"Expected localeId to be defined"),"string"==typeof t&&(VD=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(wa,td)||td),this._moduleDoBootstrap(s),s))})})}bootstrapModule(e,r=[]){const i=b1({},r);return function z3(t,n,e){const r=new Bv(e);return Promise.resolve(r)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(e){const r=e.injector.get($l);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!e.instance.ngDoBootstrap)throw new je(-403,!1);e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(a0,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(We(ki))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function b1(t,n){return Array.isArray(n)?n.reduce(b1,t):{...t,...n}}let $l=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ft(x1),this.zoneIsStable=ft(jE),this.componentTypes=[],this.components=[],this.isStable=ft(ag).hasPendingTasks.pipe(Nr(e=>e?Bt(!1):this.zoneIsStable),so(),Br()),this._injector=ft(Us)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,r){const i=e instanceof RE;if(!this._injector.get(e0).done)throw!i&&function fa(t){const n=bn(t)||kr(t)||qr(t);return null!==n&&n.standalone}(e),new je(405,!1);let o;o=i?e:this._injector.get(Wh).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function U3(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Sc),c=o.create(ki.NULL,[],r||o.selector,a),u=c.location.nativeElement,h=c.injector.get(c1,null);return h?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),ug(this.components,c),h?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new je(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;ug(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const r=this._injector.get(l0,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>ug(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new je(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ug(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const x1=new ot("",{providedIn:"root",factory:()=>ft(go).handleError.bind(void 0)});function K3(){const t=ft(Mt),n=ft(go);return e=>t.runOutsideAngular(()=>n.handleError(e))}let X3=(()=>{class t{constructor(){this.zone=ft(Mt),this.applicationRef=ft($l)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let Dc=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Z3}return t})();function Z3(t){return function Y3(t,n,e){if(ws(t)&&!e){const r=Ai(t.index,n);return new Zh(r,r)}return 47&t.type?new Zh(n[x],n):null}(Qr(),it(),16==(16&t))}class D1{constructor(){}supports(n){return Hm(n)}create(n){return new rz(n)}}const nz=(t,n)=>n;class rz{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||nz}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,r=this._removalsHead,i=0,s=null;for(;e||r;){const o=!r||e&&e.currentIndex<T1(r,i,s)?e:r,a=T1(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(e=e._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let m=0;m<c;m++){const y=m<s.length?s[m]:s[m]=0,C=y+m;u<=C&&C<c&&(s[m]=y+1)}s[o.previousIndex]=u-c}}a!==l&&n(o,a,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!Hm(n))throw new je(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i,s,o,e=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)s=n[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(r&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),r=!0),e=e._next}else i=0,function P$(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let r;for(;!(r=e.next()).done;)n(r.value)}}(n,a=>{o=this._trackByFn(i,a),null!==e&&Object.is(e.trackById,o)?(r&&(e=this._verifyReinsertion(e,a,o,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,i),r=!0),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,r,i){let s;return null===n?s=this._itTail:(s=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,s,i)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,s,i)):n=this._addAfter(new iz(e,r),s,i),n}_verifyReinsertion(n,e,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?n=this._reinsertAfter(s,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const i=n._prevRemoved,s=n._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(n,e,r),this._addToMoves(n,r),n}_moveAfter(n,e,r){return this._unlink(n),this._insertAfter(n,e,r),this._addToMoves(n,r),n}_addAfter(n,e,r){return this._insertAfter(n,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,r){const i=null===e?this._itHead:e._next;return n._next=i,n._prev=e,null===i?this._itTail=n:i._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new I1),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,r=n._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new I1),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class iz{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sz{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const e=n._prevDup,r=n._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class I1{constructor(){this.map=new Map}put(n){const e=n.trackById;let r=this.map.get(e);r||(r=new sz,this.map.set(e,r)),r.add(n)}get(n,e){const i=this.map.get(n);return i?i.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function T1(t,n,e){const r=t.previousIndex;if(null===r)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+n+i}class M1{constructor(){}supports(n){return n instanceof Map||hv(n)}create(){return new oz}}class oz{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||hv(n)))throw new je(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const r=n._prev;return e._next=n,e._prev=r,n._prev=e,r&&(r._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const i=this._records.get(n);this._maybeAddToChanges(i,e);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new az(n);return this._records.set(n,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(r=>e(n[r],r))}}class az{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function A1(){return new fg([new D1])}let fg=(()=>{class t{static#e=this.\u0275prov=Fe({token:t,providedIn:"root",factory:A1});constructor(e){this.factories=e}static create(e,r){if(null!=r){const i=r.factories.slice();e=e.concat(i)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||A1()),deps:[[t,new Oh,new yc]]}}find(e){const r=this.factories.find(i=>i.supports(e));if(null!=r)return r;throw new je(901,!1)}}return t})();function N1(){return new yf([new M1])}let yf=(()=>{class t{static#e=this.\u0275prov=Fe({token:t,providedIn:"root",factory:N1});constructor(e){this.factories=e}static create(e,r){if(r){const i=r.factories.slice();e=e.concat(i)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||N1()),deps:[[t,new Oh,new yc]]}}find(e){const r=this.factories.find(i=>i.supports(e));if(r)return r;throw new je(901,!1)}}return t})();const uz=p1(null,"core",[]);let dz=(()=>{class t{constructor(e){}static#e=this.\u0275fac=function(r){return new(r||t)(We($l))};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({})}return t})();function id(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let m0=null;function Ll(){return m0}class Sz{}const _n=new ot("DocumentToken");let g0=(()=>{class t{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:function(){return ft(Iz)},providedIn:"platform"})}return t})();const Dz=new ot("Location Initialized");let Iz=(()=>{class t extends g0{constructor(){super(),this._doc=ft(_n),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ll().getBaseHref(this._doc)}onPopState(e){const r=Ll().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=Ll().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function y0(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function V1(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function el(t){return t&&"?"!==t[0]?"?"+t:t}let Tc=(()=>{class t{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:function(){return ft(U1)},providedIn:"root"})}return t})();const z1=new ot("appBaseHref");let U1=(()=>{class t extends Tc{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ft(_n).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return y0(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+el(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,s){const o=this.prepareExternalUrl(i+el(s));this._platformLocation.pushState(e,r,o)}replaceState(e,r,i,s){const o=this.prepareExternalUrl(i+el(s));this._platformLocation.replaceState(e,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(r){return new(r||t)(We(g0),We(z1,8))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Tz=(()=>{class t extends Tc{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=y0(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,s){let o=this.prepareExternalUrl(i+el(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,r,o)}replaceState(e,r,i,s){let o=this.prepareExternalUrl(i+el(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(r){return new(r||t)(We(g0),We(z1,8))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})(),sd=(()=>{class t{constructor(e){this._subject=new Qn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function Nz(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(V1(j1(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+el(r))}normalize(e){return t.stripTrailingSlash(function Az(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,j1(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+el(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+el(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}static#e=this.normalizeQueryParams=el;static#t=this.joinWithSlash=y0;static#n=this.stripTrailingSlash=V1;static#r=this.\u0275fac=function(r){return new(r||t)(We(Tc))};static#i=this.\u0275prov=Fe({token:t,factory:function(){return function Mz(){return new sd(We(Tc))}()},providedIn:"root"})}return t})();function j1(t){return t.replace(/\/index.html$/,"")}function Q1(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const r=e.indexOf("="),[i,s]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===n)return decodeURIComponent(s)}return null}const I0=/\s+/,J1=[];let T0=(()=>{class t{constructor(e,r,i,s){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=J1,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(I0):J1}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(I0):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){const i=this.stateMap.get(e);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(I0).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||t)(Re(fg),Re(yf),Re($n),Re(Za))};static#t=this.\u0275dir=Rt({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return t})();class gU{constructor(n,e,r,i){this.$implicit=n,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let M0=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new gU(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),tT(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{tT(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(e,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Wo),Re(Ja),Re(fg))};static#t=this.\u0275dir=Rt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function tT(t,n){t.context.$implicit=n.item}let vf=(()=>{class t{constructor(e,r){this._viewContainer=e,this._context=new yU,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){nT("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){nT("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Wo),Re(Ja))};static#t=this.\u0275dir=Rt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class yU{constructor(){this.$implicit=null,this.ngIf=null}}function nT(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${An(n)}'.`)}class A0{constructor(n,e){this._viewContainerRef=n,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let Sg=(()=>{class t{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const r=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const r of this._defaultViews)r.enforceState(e)}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Rt({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return t})(),rT=(()=>{class t{constructor(e,r,i){this.ngSwitch=i,i._addCase(),this._view=new A0(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Wo),Re(Ja),Re(Sg,9))};static#t=this.\u0275dir=Rt({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return t})(),sT=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=r.createEmbeddedView(i,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Wo))};static#t=this.\u0275dir=Rt({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[zr]})}return t})(),Dg=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({})}return t})();const aT="browser";function lT(t){return t===aT}function cT(t){return"server"===t}let GU=(()=>{class t{static#e=this.\u0275prov=Fe({token:t,providedIn:"root",factory:()=>new KU(We(_n),window)})}return t})();class KU{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function XU(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(n)||s.querySelector(`[name="${n}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){this.supportsScrolling()&&(this.window.history.scrollRestoration=n)}scrollToElement(n){const e=n.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class uT{}class y4 extends Sz{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class P0 extends y4{static makeCurrent(){!function Ez(t){m0||(m0=t)}(new P0)}onAndCancel(n,e,r){return n.addEventListener(e,r),()=>{n.removeEventListener(e,r)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function _4(){return wf=wf||document.querySelector("base"),wf?wf.getAttribute("href"):null}();return null==e?null:function b4(t){Mg=Mg||document.createElement("a"),Mg.setAttribute("href",t);const n=Mg.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){wf=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Q1(document.cookie,n)}}let Mg,wf=null,x4=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();const F0=new ot("EventManagerPlugins");let mT=(()=>{class t{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(s=>s.supports(e)),!r)throw new je(5101,!1);return this._eventNameToPlugin.set(e,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(We(F0),We(Mt))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();class gT{constructor(n){this._doc=n}}const $0="ng-app-id";let yT=(()=>{class t{constructor(e,r,i,s={}){this.doc=e,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=cT(s),this.resetHostNodes()}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(r=>r.remove()),e.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.elements?.forEach(i=>i.remove()),r.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${$0}="${this.appId}"]`);if(e?.length){const r=new Map;return e.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(e,r){const i=this.styleRef;if(i.has(e)){const s=i.get(e);return s.usage+=r,s.usage}return i.set(e,{usage:r,elements:[]}),r}getStyleElement(e,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===e)return i.delete(r),s.removeAttribute($0),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute($0,this.appId),o}}addStyleToHost(e,r){const i=this.getStyleElement(e,r);e.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(We(_n),We(Nm),We(Pb,8),We(qa))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();const L0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},B0=/%COMP%/g,S4=new ot("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function bT(t,n){return n.map(e=>e.replace(B0,t))}let V0=(()=>{class t{constructor(e,r,i,s,o,a,l,c=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=cT(a),this.defaultRenderer=new z0(e,o,l,this.platformIsServer)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Kr.ShadowDom&&(r={...r,encapsulation:Kr.Emulated});const i=this.getOrCreateRenderer(e,r);return i instanceof xT?i.applyToHost(e):i instanceof U0&&i.applyStyles(),i}getOrCreateRenderer(e,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Kr.Emulated:s=new xT(l,c,r,this.appId,u,o,a,h);break;case Kr.ShadowDom:return new M4(l,c,e,r,o,a,this.nonce,h);default:s=new U0(l,c,r,u,o,a,h)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(We(mT),We(yT),We(Nm),We(S4),We(_n),We(qa),We(Mt),We(Pb))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();class z0{constructor(n,e,r,i){this.eventManager=n,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(L0[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(vT(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(vT(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let r="string"==typeof n?this.doc.querySelector(n):n;if(!r)throw new je(-5104,!1);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,i){if(i){e=i+":"+e;const s=L0[i];s?n.setAttributeNS(s,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){const i=L0[r];i?n.removeAttributeNS(i,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,i){i&(Rl.DashCase|Rl.Important)?n.style.setProperty(e,r,i&Rl.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&Rl.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n[e]=r}setValue(n,e){n.nodeValue=e}listen(n,e,r){if("string"==typeof n&&!(n=Ll().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(r))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function vT(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class M4 extends z0{constructor(n,e,r,i,s,o,a,l){super(n,s,o,l),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=bT(i.id,i.styles);for(const u of c){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class U0 extends z0{constructor(n,e,r,i,s,o,a,l){super(n,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i,this.styles=l?bT(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class xT extends U0{constructor(n,e,r,i,s,o,a,l){const c=i+"-"+r.id;super(n,e,r,s,o,a,l,c),this.contentAttr=function D4(t){return"_ngcontent-%COMP%".replace(B0,t)}(c),this.hostAttr=function I4(t){return"_nghost-%COMP%".replace(B0,t)}(c)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}}let A4=(()=>{class t extends gT{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(We(_n))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();const wT=["alt","control","meta","shift"],N4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},R4={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let k4=(()=>{class t extends gT{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ll().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),wT.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(e,r){let i=N4[e.key]||e.key,s="";return r.indexOf("code.")>-1&&(i=e.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),wT.forEach(o=>{o!==i&&(0,R4[o])(e)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(e,r,i){return s=>{t.matchEventFullKeyCode(s,e)&&i.runGuarded(()=>r(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(r){return new(r||t)(We(_n))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();const $4=p1(uz,"browser",[{provide:qa,useValue:aT},{provide:TE,useValue:function O4(){P0.makeCurrent()},multi:!0},{provide:_n,useFactory:function F4(){return function m2(t){wb=t}(document),document},deps:[]}]),L4=new ot(""),ST=[{provide:cg,useClass:class v4{addToWindow(n){Vn.getAngularTestability=(r,i=!0)=>{const s=n.findTestabilityInTree(r,i);if(null==s)throw new je(5103,!1);return s},Vn.getAllAngularTestabilities=()=>n.getAllTestabilities(),Vn.getAllAngularRootElements=()=>n.getAllRootElements(),Vn.frameworkStabilizers||(Vn.frameworkStabilizers=[]),Vn.frameworkStabilizers.push(r=>{const i=Vn.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(n,e,r){return null==e?null:n.getTestability(e)??(r?Ll().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:c1,useClass:r0,deps:[Mt,s0,cg]},{provide:r0,useClass:r0,deps:[Mt,s0,cg]}],DT=[{provide:Nb,useValue:"root"},{provide:go,useFactory:function P4(){return new go},deps:[]},{provide:F0,useClass:A4,multi:!0,deps:[_n,Mt,qa]},{provide:F0,useClass:k4,multi:!0,deps:[_n]},V0,yT,mT,{provide:Gh,useExisting:V0},{provide:uT,useClass:x4,deps:[]},[]];let IT=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:Nm,useValue:e.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(We(L4,12))};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({providers:[...DT,...ST],imports:[Dg,dz]})}return t})(),TT=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(r){return new(r||t)(We(_n))};static#t=this.\u0275prov=Fe({token:t,factory:function(r){let i=null;return i=r?new r:function V4(){return new TT(We(_n))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;let H0=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:function(r){let i=null;return i=r?new(r||t):We(NT),i},providedIn:"root"})}return t})(),NT=(()=>{class t extends H0{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case _i.NONE:return r;case _i.HTML:return ya(r,"HTML")?zs(r):yE(this._doc,String(r)).toString();case _i.STYLE:return ya(r,"Style")?zs(r):r;case _i.SCRIPT:if(ya(r,"Script"))return zs(r);throw new je(5200,!1);case _i.URL:return ya(r,"URL")?zs(r):Dm(String(r));case _i.RESOURCE_URL:if(ya(r,"ResourceURL"))return zs(r);throw new je(5201,!1);default:throw new je(5202,!1)}}bypassSecurityTrustHtml(e){return function w2(t){return new g2(t)}(e)}bypassSecurityTrustStyle(e){return function C2(t){return new y2(t)}(e)}bypassSecurityTrustScript(e){return function E2(t){return new _2(t)}(e)}bypassSecurityTrustUrl(e){return function S2(t){return new b2(t)}(e)}bypassSecurityTrustResourceUrl(e){return function D2(t){return new v2(t)}(e)}static#e=this.\u0275fac=function(r){return new(r||t)(We(_n))};static#t=this.\u0275prov=Fe({token:t,factory:function(r){let i=null;return i=r?new r:function H4(t){return new NT(t.get(_n))}(We(ki)),i},providedIn:"root"})}return t})();var g=I(3557),Mc=I(5861);const Vl={},Ag={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Xo(t,n){if(!(t in Vl)||null!=n){const r=function K4(t,n){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const e=n??function G4(t){if(!(0,g.env)().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&2===t)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return e.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Vl[t]},!1),(0,g.env)().getBool("SOFTWARE_WEBGL_ENABLED")&&(Ag.failIfMajorPerformanceCaveat=!1),1===t?e.getContext("webgl",Ag)||e.getContext("experimental-webgl",Ag):e.getContext("webgl2",Ag)}(t,n);if(null===r)return console.log("Could not get context for WebGL version",t),null;Vl[t]=r}const e=Vl[t];return null==e||e.isContextLost()?(delete Vl[t],Xo(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Vl[t])}var Ng=function(t){return t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH",t}(Ng||{}),vo=function(t){return t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD",t}(vo||{}),vi=function(t){return t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",t}(vi||{});function Cf(t,n){return[n,t]}function Rg(t){const n=g.util.sizeFromShape(t),e=Math.ceil(n/4);return g.util.sizeToSquarishShape(e)}function ad(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function W0(t,n){const e=t;let r,i,s,o,a,l,c,u,h,m;return 2===(0,g.env)().getNumber("WEBGL_VERSION")?(r=e.R32F,i=e.R16F,s=e.RGBA16F,o=e.RGBA32F,a=e.RED,c=4,u=1,h=e.HALF_FLOAT,m=e.FLOAT,l=e.RGBA8):(r=t.RGBA,i=t.RGBA,s=t.RGBA,o=e.RGBA,a=t.RGBA,c=4,u=4,h=null!=n?n.HALF_FLOAT_OES:null,m=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:h,textureTypeFloat:m}}function Dt(t,n){const e=n();return(0,g.env)().getBool("DEBUG")&&function Z4(t){const n=t.getError();if(n!==t.NO_ERROR)throw new Error("WebGL Error: "+function ej(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${n}`}}(t,n))}(t),e}function J4(t){return!!((0,g.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||5.96e-8<Math.abs(t)&&Math.abs(t)<65504)}function kg(t,n){return rl(t,()=>t.getExtension(n),'Extension "'+n+'" not supported on this browser.')}const rj=/ERROR: [0-9]+:([0-9]+):/g;function kT(t,n){const e=rj.exec(n);if(null==e)return console.log(`Couldn't parse line number in error: ${n}`),void console.log(t);const r=+e[1],i=t.split("\n"),s=i.length.toString().length+2,o=i.map((h,m)=>g.util.rightPad((m+1).toString(),s)+h);let a=0;for(let h=0;h<o.length;h++)a=Math.max(o[h].length,a);const l=o.slice(0,r-1),c=o.slice(r-1,r),u=o.slice(r);console.log(l.join("\n")),console.log(n.split("\n")[0]),console.log(`%c ${g.util.rightPad(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function G0(t,n){if(Dt(t,()=>t.validateProgram(n)),!1===t.getProgramParameter(n,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function OT(t,n,e,r,i,s,o){const a=t.getAttribLocation(n,e);return-1!==a&&(Dt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Dt(t,()=>t.vertexAttribPointer(a,i,t.FLOAT,!1,s,o)),Dt(t,()=>t.enableVertexAttribArray(a)),!0)}function pj(t,n,e,r){Dt(t,()=>function dj(t,n,e){(function FT(t,n){const e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+t.TEXTURE0;if(r<t.TEXTURE0||r>e)throw new Error(`textureUnit must be in [gl.TEXTURE0, gl.TEXTURE${e}].`)})(t,e),Dt(t,()=>t.activeTexture(t.TEXTURE0+e)),Dt(t,()=>t.bindTexture(t.TEXTURE_2D,n))}(t,n,r)),Dt(t,()=>t.uniform1i(e,r))}function K0(t,n,e){Dt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Dt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0))}function PT(t,n){Dt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Dt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Og(t){const n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function mj(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${n}`}}(t,n))}function rl(t,n,e){const r=Dt(t,()=>n());if(null==r)throw new Error(e);return r}function ld(t,n=2){return g.util.sizeFromShape(t.slice(0,t.length-n))}function cd(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Pg(t){let n=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(n=[ld(t),...cd(t)]),n}function Fg(t){return t%2==0}function $g(t,n){if(t=t.slice(-2),n=n.slice(-2),g.util.arraysEqual(t,n)||!t.length||!n.length||0===t[0]||0===t[1]||0===n[0]||0===n[1])return!0;if(t.length!==n.length){const e=t[t.length-1],r=n[n.length-1];if(e===r||Fg(e)&&Fg(r)&&(1===t[0]||1===n[0]))return!0}return t[1]===n[1]&&Fg(t[0])&&Fg(n[0])}let Lg,Bg;function xo(t,n){return null!=t.getExtension(n)}function $T(t){try{if(null!=Xo(t))return!0}catch(n){return console.log("Error when getting WebGL context: ",n),!1}return!1}function X0(t){const n=W0(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(s),o}function Ef(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{null!=e&&g.util.assert("complex64"!==e.dtype,()=>`${n} does not support complex64 tensors in the WebGL backend.`)})}const Lt=(0,g.env)();function Pi(){let t,n,e,r,i,s,o,a,l,c;return 2===(0,g.env)().getNumber("WEBGL_VERSION")?(t="#version 300 es",n="in",e="out",r="in",i="texture",s="outputColor",o="out vec4 outputColor;",a=(0,g.env)().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",n="attribute",e="varying",r="varying",i="texture2D",s="gl_FragColor",o="",a="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:n,varyingVs:e,varyingFs:r,texture2D:i,output:s,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}function Ac(t,n,e="index"){const r=g.util.computeStrides(n);return r.map((i,s)=>`int ${t[s]} = ${e} / ${i}; ${s===r.length-1?`int ${t[s+1]} = ${e} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`};`).join("")}function Vg(t,n,e="index"){const r=g.util.computeStrides(n);return r.map((i,s)=>`int ${t[s]} = ${e} / outShapeStrides[${s}]; ${s===r.length-1?`int ${t[s+1]} = ${e} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`};`).join("")}function q0(t){const n=g.util.computeStrides(t).map(e=>e.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${n[0]} + coords.y * ${n[1]} + coords.z;\n  }\n`}Lt.registerFlag("HAS_WEBGL",()=>Lt.getNumber("WEBGL_VERSION")>0),Lt.registerFlag("WEBGL_VERSION",()=>$T(2)?2:$T(1)?1:0),Lt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),Lt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===Lt.get("WEBGL_VERSION")),Lt.registerFlag("WEBGL_CPU_FORWARD",()=>!0),Lt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),Lt.registerFlag("WEBGL_PACK",()=>Lt.getBool("HAS_WEBGL")),Lt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Lt.getBool("WEBGL_PACK")),Lt.registerFlag("WEBGL_PACK_CLIP",()=>Lt.getBool("WEBGL_PACK")),Lt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Lt.getBool("WEBGL_PACK")),Lt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Lt.getBool("WEBGL_PACK")),Lt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Lt.getBool("WEBGL_PACK")),Lt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Lt.getBool("WEBGL_PACK")),Lt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Lt.getBool("WEBGL_PACK")),Lt.registerFlag("WEBGL_PACK_REDUCE",()=>Lt.getBool("WEBGL_PACK")),Lt.registerFlag("WEBGL_LAZILY_UNPACK",()=>Lt.getBool("WEBGL_PACK")),Lt.registerFlag("WEBGL_CONV_IM2COL",()=>Lt.getBool("WEBGL_PACK")),Lt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Lt.getBool("WEBGL_PACK")),Lt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>function yj(t){if(null==Lg){const n=Xo(t);Lg=n.getParameter(n.MAX_TEXTURE_SIZE)}return Lg}(Lt.getNumber("WEBGL_VERSION"))),Lt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>function _j(t){if(null==Bg){const n=Xo(t);Bg=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Bg)}(Lt.getNumber("WEBGL_VERSION"))),Lt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Lt.getNumber("WEBGL_VERSION");return 0===t?0:function bj(t){if(0===t)return 0;let n;const e=Xo(t);return n=xo(e,"EXT_disjoint_timer_query_webgl2")&&2===t?2:xo(e,"EXT_disjoint_timer_query")?1:0,n}(t)}),Lt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Lt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!g.device_util.isMobile()),Lt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>function vj(t){if(0===t)return!1;const n=Xo(t);if(1===t){if(!xo(n,"OES_texture_float"))return!1}else if(!xo(n,"EXT_color_buffer_float"))return!1;return X0(n)}(Lt.getNumber("WEBGL_VERSION"))),Lt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!Lt.getBool("WEBGL_FORCE_F16_TEXTURES")&&Lt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),Lt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>function xj(t){if(0===t)return!1;const n=Xo(t);if(1!==t){if(xo(n,"EXT_color_buffer_float"))return X0(n);const r="EXT_color_buffer_half_float";if(xo(n,r)){const i=n.getExtension(r);return function wj(t,n){const e=W0(t,n),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatHalfFloat,1,1,0,e.textureFormatFloat,e.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}(n,i)}return!1}return!(!xo(n,"OES_texture_float")||!xo(n,"WEBGL_color_buffer_float"))&&X0(n)}(Lt.getNumber("WEBGL_VERSION"))),Lt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>function Cj(t){return 2===t&&null!=Xo(t).fenceSync}(Lt.getNumber("WEBGL_VERSION"))),Lt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Lt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),Lt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if("number"!=typeof t)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&-1!==t)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)}),Lt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>g.device_util.isMobile()?1:-1,t=>{if("number"!=typeof t)throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&-1!==t)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)}),Lt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),Lt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),Lt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),Lt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),Lt.registerFlag("WEBGL_EXP_CONV",()=>!1),Lt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Lt.getBool("IS_TEST")),Lt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),Lt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),Lt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),Lt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);const LT="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:BT}=g.backend_util;function Dj(t,n,e){const r=[];if(t.forEach(y=>{const C=g.util.sizeFromShape(y.shapeInfo.logicalShape);if(y.shapeInfo.isUniform?r.push(`uniform float ${y.name}${C>1?`[${C}]`:""};`):(r.push(`uniform sampler2D ${y.name};`),r.push(`uniform int offset${y.name};`)),e.enableShapeUniforms){const{uniformShape:k}=Y0(e.packedInputs,y.shapeInfo.logicalShape,y.shapeInfo.texShape);switch(k.length){case 1:r.push(`uniform int ${y.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${y.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${y.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${y.name}Shape;`)}r.push(`uniform ivec2 ${y.name}TexShape;`)}}),e.enableShapeUniforms){switch(n.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}e.customUniforms&&e.customUniforms.forEach(y=>{r.push(`uniform ${y.type} ${y.name}${y.arrayIndex?`[${y.arrayIndex}]`:""};`)});const i=r.join("\n"),s=t.map(y=>function Ij(t,n,e=!1,r){let i="";i+=e?VT(t,r):ud(t,r);return t.shapeInfo.logicalShape.length<=n.logicalShape.length&&(i+=e?function oH(t,n){const e=t.name,r=e.charAt(0).toUpperCase()+e.slice(1),i="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,o=n.logicalShape.length,a=BT(t.shapeInfo.logicalShape,n.logicalShape),l=Xn(o),c=o-s;let u;const h=["x","y","z","w","u","v"];u=0===s?"":o<2&&a.length>=1?"coords = 0;":a.map(V=>`coords.${h[V+c]} = 0;`).join("\n");let m="";m=o<2&&s>0?"coords":t.shapeInfo.logicalShape.map((V,fe)=>`coords.${h[fe+c]}`).join(", ");let y="return outputValue;";const k=1===g.util.sizeFromShape(t.shapeInfo.logicalShape),B=1===g.util.sizeFromShape(n.logicalShape);if(1!==s||k||B){if(k&&!B)y=1===o?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(a.length){const V=s-2,fe=s-1;a.indexOf(V)>-1&&a.indexOf(fe)>-1?y="return vec4(outputValue.x);":a.indexOf(V)>-1?y="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(fe)>-1&&(y="return vec4(outputValue.xx, outputValue.zz);")}}else y="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${i}() {\n      ${l} coords = getOutputCoords();\n      ${u}\n      vec4 outputValue = get${r}(${m});\n      ${y}\n    }\n  `}(t,n):function aH(t,n){const e=t.name,r=e.charAt(0).toUpperCase()+e.slice(1),i="get"+r+"AtOutCoords",a=t.shapeInfo.logicalShape.length,l=n.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&null==t.shapeInfo.flatOffset&&g.util.arraysEqual(t.shapeInfo.texShape,n.texShape))return`\n      float ${i}() {\n        return sampleTexture(${e}, resultUV);\n      }\n    `;const c=Xn(l),u=BT(t.shapeInfo.logicalShape,n.logicalShape),h=l-a;let m;const y=["x","y","z","w","u","v"];m=0===a?"":l<2&&u.length>=1?"coords = 0;":u.map(k=>`coords.${y[k+h]} = 0;`).join("\n");let C="";return C=l<2&&a>0?"coords":t.shapeInfo.logicalShape.map((k,P)=>`coords.${y[P+h]}`).join(", "),`\n    float ${i}() {\n      ${c} coords = getOutputCoords();\n      ${m}\n      return get${r}(${C});\n    }\n  `}(t,n)),i}(y,n,e.packedInputs,e.enableShapeUniforms)).join("\n"),o=n.texShape,a=Pi(),l=function Aj(t){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${t.texture2D}(textureSampler, uv).r;\n    }\n  `}(a);let c,u,h=function kj(t){return`${t.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${t.varyingFs} vec2 resultUV;\n    ${t.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${t.defineSpecialNaN}\n    ${t.defineSpecialInf}\n    ${t.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${Oj}\n    ${Pj}\n    ${Fj}\n  `}(a);return n.isPacked?(c=function Tj(t,n,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function Lj(t,n,e){const r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];return 1===r[0]?e?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `:1===r[1]?e?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `:e?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}(0,n,e);case 2:return function Gj(t,n,e){const r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];if(g.util.arraysEqual(t,n))return e?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const i=Math.ceil(t[1]/2);return e?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(t,n,e);case 3:return function Vj(t,n,e){if(e)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${s};\n      index -= b * ${s};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(t,n,e);default:return function Uj(t,n,e){if(e)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2);let o=s,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],a=`\n      int b${c} = index / ${o};\n      index -= b${c} * ${o};\n    `+a,l=`b${c}, `+l;return`\n    ivec${t.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${a}\n\n      int b = index / ${s};\n      index -= b * ${s};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec${t.length}(${l});\n    }\n  `}(t,n,e)}}(n.logicalShape,o,e.enableShapeUniforms),u=function Rj(t){return`\n    void setOutput(vec4 val) {\n      ${t.output} = val;\n    }\n  `}(a)):(c=function Mj(t,n,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function Bj(t,n,e){return 1===n[0]?e?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?e?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${n[0]}.0);\n      }\n    `:e?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return resTexRC.x * ${n[1]} + resTexRC.y;\n    }\n  `}(0,n,e);case 2:return function Kj(t,n,e){return g.util.arraysEqual(t,n)?e?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `:1===t[1]?e?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${n[0]}, ${n[1]}));\n        int index = resTexRC.x * ${n[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===t[0]?e?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${n[0]}, ${n[1]}));\n        int index = resTexRC.x * ${n[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:e?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = index / ${t[1]};\n      int c = index - r * ${t[1]};\n      return ivec2(r, c);\n    }\n  `}(t,n,e);case 3:return function zj(t,n,e){if(e)return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${Vg(["r","c","d"],t)}\n    return ivec3(r, c, d);\n  }\n`;const r=Ac(["r","c","d"],t);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(t,n,e);case 4:return function jj(t,n,e){if(e)return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${Vg(["r","c","d","d2"],t)}\n      return ivec4(r, c, d, d2);\n    }\n  `;const r=Ac(["r","c","d","d2"],t);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(t,n,e);case 5:return function Hj(t,n){const e=Ac(["r","c","d","d2","d3"],t);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${n[0]},\n                             ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${e}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(t,n);case 6:return function Wj(t,n){const e=Ac(["r","c","d","d2","d3","d4"],t);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${e}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(t,n);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}(n.logicalShape,o,e.enableShapeUniforms),u=function Nj(t){return`\n    void setOutput(float val) {\n      ${t.output} = vec4(val, 0, 0, 0);\n    }\n  `}(a)),e.packedInputs&&(h+=$j),[h,l,u,i,c,s,e.userCode].join("\n")}function ud(t,n=!1){const e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function qj(t,n){const e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${e};}`;const[i,s]=t.shapeInfo.texShape;if(1===i&&1===s)return`\n      float ${r}() {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const o=Nc(e);if(n)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], ${o});\n      return sampleTexture(${e}, uv);\n    }\n  `;const[a,l]=t.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${a}, ${l}, ${o});\n      return sampleTexture(${e}, uv);\n    }\n  `}(t,n);case 1:return function Yj(t,n){const e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${dd(t)}\n      }\n    `;const i=t.shapeInfo.texShape,s=i[0],o=i[1];if(1===o&&1===s)return`\n      float ${r}(int index) {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const a=Nc(e);return 1===o?n?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${e}TexShape[0]));\n        return sampleTexture(${e}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `:1===s?n?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${e}TexShape[1]), 0.5);\n        return sampleTexture(${e}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);\n        return sampleTexture(${e}, uv);\n      }\n    `:n?`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], index + ${a});\n      return sampleTexture(${e}, uv);\n    }\n  `:`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${s}, ${o}, index + ${a});\n      return sampleTexture(${e}, uv);\n    }\n  `}(t,n);case 2:return function Jj(t,n){const e=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(null!=s&&g.util.arraysEqual(e,s))return n?`\n      float ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${s[1]}.0, ${s[0]}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const{newShape:o,keptDims:a}=g.util.squeezeShape(e);if(o.length<e.length){const y=["row","col"];return`\n      ${ud(hd(t,o),n)}\n      float ${i}(int row, int col) {\n        return ${i}(${fd(y,a)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${i}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));\n        ${dd(t)}\n      }\n    `;const c=s[0],u=s[1],h=Nc(r);return 1===u?n?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${e[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `:1===c?n?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${e[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `:n?`\n      float ${i}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${h};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n  float ${i}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${e[1]} + col + ${h};\n    vec2 uv = uvFromFlat(${c}, ${u}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}(t,n);case 3:return function tH(t,n){const e=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e[1]*e[2],o=e[2],{newShape:a,keptDims:l}=g.util.squeezeShape(e);if(a.length<e.length){const P=["row","col","depth"];return`\n        ${ud(hd(t,a),n)}\n        float ${i}(int row, int col, int depth) {\n          return ${i}(${fd(P,l)});\n        }\n      `}if(t.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${s}, ${o}, 1)));\n        ${dd(t)}\n      }\n    `;const u=t.shapeInfo.texShape,h=u[0],m=u[1],y=t.shapeInfo.flatOffset;if(m===s&&null==y)return n?`\n      float ${i}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${i}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${o}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${m}.0, ${h}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(m===o&&null==y)return n?`\n      float ${i}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${m}.0, ${h}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const C=Nc(r);return n?`\n    float ${i}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${C};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `:`\n      float ${i}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${s} + col * ${o} + depth + ${C};\n        vec2 uv = uvFromFlat(${h}, ${m}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}(t,n);case 4:return function rH(t,n){const e=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e[3],o=e[2]*s,a=e[1]*o,{newShape:l,keptDims:c}=g.util.squeezeShape(e);if(l.length<e.length){const fe=["row","col","depth","depth2"];return`\n      ${ud(hd(t,l),n)}\n      float ${i}(int row, int col, int depth, int depth2) {\n        return ${i}(${fd(fe,c)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${a}, ${o}, ${s}, 1)));\n        ${dd(t)}\n      }\n    `;const u=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,m=h[0],y=h[1],C=`int stride2 = ${r}Shape[3];`,k=`int stride1 = ${r}Shape[2] * stride2;`,P=`int stride0 = ${r}Shape[1] * stride1;`;if(y===a&&null==u)return n?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        ${C}\n        ${k}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${o}, ${s}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${y}.0, ${m}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(y===s&&null==u)return n?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${e[1]*e[2]}, ${e[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${y}.0, ${m}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;const B=Nc(r);return n?`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${C}\n      ${k}\n      ${P}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${B});\n      return sampleTexture(${r}, uv);\n    }\n  `:`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${a} + col * ${o} +\n          depth * ${s} + depth2;\n      vec2 uv = uvFromFlat(${m}, ${y}, index + ${B});\n      return sampleTexture(${r}, uv);\n    }\n  `}(t,n);case 5:return function iH(t){const n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),i=n[4],s=n[3]*i,o=n[2]*s,a=n[1]*o,{newShape:l,keptDims:c}=g.util.squeezeShape(n);if(l.length<n.length){const P=["row","col","depth","depth2","depth3"];return`\n      ${ud(hd(t,l))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${fd(P,c)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${a}, ${o}, ${s}, ${i})) +\n          depth3;\n        ${dd(t)}\n      }\n    `;const u=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,m=h[0],y=h[1];if(y===a&&null==u)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${o}, ${s}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${y}.0, ${m}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `;if(y===i&&null==u)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]},\n               ${n[2]*n[3]}, ${n[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${y}.0, ${m}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `;return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${a} + col * ${o} + depth * ${s} +\n          depth2 * ${i} + depth3 + ${Nc(e)};\n      vec2 uv = uvFromFlat(${m}, ${y}, index);\n      return sampleTexture(${e}, uv);\n    }\n  `}(t);case 6:return function sH(t){const n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),{newShape:i,keptDims:s}=g.util.squeezeShape(n);if(i.length<n.length){const B=["row","col","depth","depth2","depth3","depth4"];return`\n      ${ud(hd(t,i))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${fd(B,s)});\n      }\n    `}const o=n[5],a=n[4]*o,l=n[3]*a,c=n[2]*l,u=n[1]*c;if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${u}, ${c}, ${l}, ${a})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${o}, 1)));\n        ${dd(t)}\n      }\n    `;const h=t.shapeInfo.flatOffset,m=t.shapeInfo.texShape,y=m[0],C=m[1];if(C===u&&null==h)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${c}, ${l}, ${a}, ${o})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${C}.0, ${y}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `;if(C===o&&null==h)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]*n[4]},\n               ${n[2]*n[3]*n[4]},\n               ${n[3]*n[4]},\n               ${n[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${C}.0, ${y}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `;return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${u} + col * ${c} + depth * ${l} +\n          depth2 * ${a} + depth3 * ${o} + depth4 + ${Nc(e)};\n      vec2 uv = uvFromFlat(${y}, ${C}, index);\n      return sampleTexture(${e}, uv);\n    }\n  `}(t);default:throw new Error(`${e.length}-D input sampling is not yet supported`)}}function VT(t,n){switch(t.shapeInfo.logicalShape.length){case 0:return function Xj(t){const n=t.name;return`\n    vec4 ${"get"+n.charAt(0).toUpperCase()+n.slice(1)}() {\n      return ${Pi().texture2D}(${n}, halfCR);\n    }\n  `}(t);case 1:return function Zj(t,n){const e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),i=t.shapeInfo.texShape,s=Pi();if(n)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${s.texture2D}(${e}, uv);\n    }\n  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${o[0]}, ${o[1]}, index);\n      return ${s.texture2D}(${e}, uv);\n    }\n  `}(t,n);case 2:return function Qj(t,n){const e=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=s[0],a=s[1],l=Pi();if(null!=s&&g.util.arraysEqual(e,s))return n?`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `;if(n)return`\n    vec4 ${i}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `;const c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(e[1]/2)}, ${c[0]}, ${c[1]}, row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `}(t,n);case 3:return function eH(t,n){const e=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(1===e[0]){const y=[1,2],k=["b","row","col"];return`\n        ${VT(hd(t,e.slice(1)),n)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${fd(k,y)});\n        }\n      `}const a=Pi();if(n)return`\n    vec4 ${i}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${a.texture2D}(${r}, uv);\n    }\n  `;const l=o[0],c=o[1],u=Math.ceil(e[2]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${c}, ${u*Math.ceil(e[1]/2)}, ${u}, b, row, col);\n      return ${a.texture2D}(${r}, uv);\n    }\n  `}(t,n);default:return function nH(t,n){const e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),i=Pi();if(n)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${e}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${e}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${e}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${e}, uv);\n    }\n  `;const s=t.shapeInfo.logicalShape,o=s.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],h=Math.ceil(s[o-1]/2);let m=h*Math.ceil(s[o-2]/2),y="int b, int row, int col",C=`b * ${m} + (row / 2) * ${h} + (col / 2)`;for(let k=2;k<o-1;k++)y=`int b${k}, `+y,m*=s[o-k-1],C=`b${k} * ${m} + `+C;return`\n    vec4 ${r}(${y}) {\n      int index = ${C};\n      int texR = index / ${u};\n      int texC = index - texR * ${u};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});\n      return ${i.texture2D}(${e}, uv);\n    }\n  `}(t,n)}}const Oj="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Pj="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Fj="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$j="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Nc(t){return`offset${t}`}function dd(t){const n=t.name,e=g.util.sizeFromShape(t.shapeInfo.logicalShape);return e<2?`return ${n};`:`\n    for (int i = 0; i < ${e}; i++) {\n      if (i == index) {\n        return ${n}[i];\n      }\n    }\n  `}function Xn(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function Y0(t,n,e){const{newShape:r,keptDims:i}=g.util.squeezeShape(n),s=n.length,o=t&&3===s&&1===n[0],a=o?n.slice(1):r,l=!t&&s>1&&!g.util.arraysEqual(n,e)&&r.length<s||o;return{useSqueezeShape:l,uniformShape:l?a:n,keptDims:i}}function hd(t,n){const e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function fd(t,n){return n.map(e=>t[e]).join(", ")}function UT(t,n,e){const r=[],i=[];let s,o,a,l=null,c=null;c=t.getUniformLocation(e,"NAN",!1),1===(0,g.env)().getNumber("WEBGL_VERSION")&&(l=t.getUniformLocation(e,"INFINITY",!1));const u=!1;for(const h of n.variableNames){const m={name:h,uniform:t.getUniformLocation(e,h,u),offset:t.getUniformLocation(e,`offset${h}`,u)};n.enableShapeUniforms&&(m.shape=t.getUniformLocation(e,`${h}Shape`,u),m.texShape=t.getUniformLocation(e,`${h}TexShape`,u)),r.push(m)}if(n.enableShapeUniforms&&(s=t.getUniformLocation(e,"outShape",u),a=t.getUniformLocation(e,"outShapeStrides",u),o=t.getUniformLocation(e,"outTexShape",u)),n.customUniforms)for(const h of n.customUniforms)i.push(t.getUniformLocation(e,h.name,u));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:o}}function jT(t,n){if(t.length!==n.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${n.length} inputs`);t.forEach((e,r)=>{const i=e.logicalShape,s=n[r],o=s.shape;if(!g.util.arraysEqual(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(e.isUniform&&s.isUniform)return;const a=e.texShape,l=s.isUniform?null:s.texData.texShape;if(!g.util.arraysEqual(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function xi(t){return(0,g.env)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}class dH{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Ng.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const e=Pi();this.outputShape=n,this.enableShapeUniforms=xi(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?Vg(["r","c","d"],n):Ac(["r","c","d"],n)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${e.output} = result;\n      }\n    `}}class hH{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Ng.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const e=Pi();this.outputShape=n,this.enableShapeUniforms=xi(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?Vg(["r","c","d"],n):Ac(["r","c","d"],n)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${e.output} = result;\n      }\n    `}}class fH{constructor(n){this.variableNames=["A"],this.outTexUsage=vo.DOWNLOAD;const e=Pi();this.outputShape=n,this.userCode=`\n      ${LT}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${e.output} = encode_float(x);\n      }\n    `}}class pH{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=vo.DOWNLOAD;const e=Pi();this.outputShape=n,this.userCode=`\n      ${LT}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${e.output} = encode_float(x);\n      }\n    `}}const mH={R:0,G:1,B:2,A:3};class HT{constructor(n,e=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=Pi();this.outputShape=n,this.enableShapeUniforms=xi(this.outputShape.length);let s="result";e&&(s="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++)o+=`\n          if(offset == ${a}) {\n            result = values[${mH[r[a]]}];\n          }`;this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":q0(n)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${r.length});\n\n        flatIndex = idiv(flatIndex, ${r.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${i.texture2D}(A, uv);\n          ${o}\n        }\n        ${i.output} = vec4(${s}, 0., 0., 0.);\n      }\n    `}}class gH{constructor(n,e=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Pi();this.outputShape=n,this.enableShapeUniforms=xi(this.outputShape.length);let i="",s="result";e&&(s="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=2*o+a;i+=`\n          localCoords = coords;\n          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${n[2]}`}) {\n          localCoords[2] += ${a};\n          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${n[1]}`}) {\n            localCoords[1] += ${o};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${r.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${l}] = values[0];\n            } else if (offset == 1) {\n              result[${l}] = values[1];\n            } else if (offset == 2) {\n              result[${l}] = values[2];\n            } else {\n              result[${l}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":q0(n)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${i}\n\n          ${r.output} = ${s};\n        }\n    `}}function Sf(t,n,e,r,i,s){!function cj(t,n){const e=(0,g.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0)throw new Error(`Requested texture size [${t}x${n}] is invalid.`);if(t>e||n>e)throw new Error(`Requested texture size [${t}x${n}] greater than WebGL maximum on this browser / GPU [${e}x${e}].`)}(n,e);const o=function lj(t){return rl(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}(t),a=t.TEXTURE_2D;return Dt(t,()=>t.bindTexture(a,o)),Dt(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Dt(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Dt(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Dt(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),1===(0,g.env)().getNumber("WEBGL_VERSION")?Dt(t,()=>t.texImage2D(a,0,r,n,e,0,i,s,null)):Dt(t,()=>t.texStorage2D(a,1,r,n,e)),Dt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[e,n]}}function WT(t){return t.internalFormatFloat}function GT(t){return t.internalFormatHalfFloat}function KT(t){return t.downloadTextureFormat}function XT(t){return t.internalFormatPackedFloat}function qT(t){return t.internalFormatPackedHalfFloat}class Q0{constructor(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const e=(0,g.env)().getNumber("WEBGL_VERSION");if(null!=n?(this.gl=n,function W4(t,n){Vl[t]=n}(e,n)):this.gl=Xo(e),n=this.gl,2===(0,g.env)().getNumber("WEBGL_VERSION")){const s=n;this.createVertexArray=()=>Dt(s,()=>s.createVertexArray()),this.bindVertexArray=o=>Dt(s,()=>s.bindVertexArray(o)),this.deleteVertexArray=o=>Dt(s,()=>s.deleteVertexArray(o)),this.getVertexArray=()=>Dt(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(null!=n){const s=n.getExtension("OES_vertex_array_object");if(null==s)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Dt(n,()=>s.createVertexArrayOES()),this.bindVertexArray=o=>Dt(n,()=>s.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Dt(n,()=>s.deleteVertexArrayOES(o)),this.getVertexArray=()=>Dt(n,()=>n.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===(0,g.env)().getNumber("WEBGL_VERSION")){const o="OES_texture_half_float";if(this.textureFloatExtension=kg(this.gl,"OES_texture_float"),xo(this.gl,o))this.textureHalfFloatExtension=kg(this.gl,o);else if((0,g.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),xo(this.gl,i))this.colorBufferHalfFloatExtension=kg(this.gl,i);else if((0,g.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",xo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!xo(this.gl,i))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(i)}this.vertexBuffer=function _H(t){return function oj(t,n){const e=rl(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Dt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),Dt(t,()=>t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)),e}(t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}(this.gl),this.indexBuffer=function bH(t){return function aj(t,n){const e=rl(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Dt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e)),Dt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)),e}(t,new Uint16Array([0,1,2,2,1,3]))}(this.gl),this.framebuffer=function uj(t){return rl(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=W0(this.gl,this.textureHalfFloatExtension)}get debug(){return(0,g.env)().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const n=this.gl;Dt(n,()=>n.finish()),Dt(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,null)),Dt(n,()=>n.deleteFramebuffer(this.framebuffer)),Dt(n,()=>n.bindBuffer(n.ARRAY_BUFFER,null)),Dt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)),Dt(n,()=>n.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(n,e){return this.throwIfDisposed(),function vH(t,n,e,r){const[i,s]=Cf(n,e);return Sf(t,i,s,WT(r),r.textureFormatFloat,t.FLOAT)}(this.gl,n,e,this.textureConfig)}createFloat16MatrixTexture(n,e){return this.throwIfDisposed(),function xH(t,n,e,r){const[i,s]=Cf(n,e);return Sf(t,i,s,GT(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,n,e,this.textureConfig)}createUnsignedBytesMatrixTexture(n,e){return this.throwIfDisposed(),function wH(t,n,e,r){const[i,s]=Cf(n,e);return Sf(t,i,s,KT(r),t.RGBA,t.UNSIGNED_BYTE)}(this.gl,n,e,this.textureConfig)}uploadPixelDataToTexture(n,e){this.throwIfDisposed(),function IH(t,n,e){Dt(t,()=>t.bindTexture(t.TEXTURE_2D,n)),e.data instanceof Uint8Array?2===(0,g.env)().getNumber("WEBGL_VERSION")?Dt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,e.data)):Dt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,e.data)):2===(0,g.env)().getNumber("WEBGL_VERSION")?Dt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e)):Dt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)),Dt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}(this.gl,n,e)}uploadDenseMatrixToTexture(n,e,r,i){this.throwIfDisposed(),function DH(t,n,e,r,i,s){let o,a,l;Dt(t,()=>t.bindTexture(t.TEXTURE_2D,n)),i instanceof Uint8Array?(o=new Uint8Array(e*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(e*r*4),a=t.FLOAT,l=s.internalFormatPackedFloat),o.set(i),2===(0,g.env)().getNumber("WEBGL_VERSION")?Dt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e,r,t.RGBA,a,o)):Dt(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,e,r,0,t.RGBA,a,o)),Dt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}(this.gl,n,e,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(n,e){return this.throwIfDisposed(),function EH(t,n,e,r){const[i,s]=ad(n,e);return Sf(t,i,s,qT(r),t.RGBA,r.textureTypeHalfFloat)}(this.gl,n,e,this.textureConfig)}createPackedMatrixTexture(n,e){return this.throwIfDisposed(),function CH(t,n,e,r){const[i,s]=ad(n,e);return Sf(t,i,s,XT(r),t.RGBA,t.FLOAT)}(this.gl,n,e,this.textureConfig)}deleteMatrixTexture(n){this.throwIfDisposed(),this.outputTexture===n&&(PT(this.gl,this.framebuffer),this.outputTexture=null),Dt(this.gl,()=>this.gl.deleteTexture(n))}downloadByteEncodedFloatMatrixFromOutputTexture(n,e,r){return this.downloadMatrixDriver(n,()=>function AH(t,n,e,r){const[i,s]=Cf(n,e),a=new Uint8Array(function X4(t,n){return t*n}(n*e,4));return Dt(t,()=>t.readPixels(0,0,i,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}(this.gl,e,r,this.textureConfig))}downloadPackedMatrixFromBuffer(n,e,r,i,s,o){return function NH(t,n,e,r,i,s,o,a){const l=t,c=new Float32Array(function q4(t,n){const[e,r]=ad(t,n);return e*r*4}(s,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,n),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}(this.gl,n,0,0,0,s,o)}downloadFloat32MatrixFromBuffer(n,e){return function MH(t,n,e){const r=t,i=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}(this.gl,n,e)}createBufferFromTexture(n,e,r){this.bindTextureToFrameBuffer(n);const i=function TH(t,n,e,r){const i=t.createBuffer();Dt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const a=16*n*e;return Dt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Dt(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,0)),Dt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}(this.gl,e,r);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const n=this.createFence(this.gl);return this.pollFence(n)}createFence(n){let e,r;if((0,g.env)().getBool("WEBGL_FENCE_API_ENABLED")){const i=n,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=()=>{const o=i.clientWaitSync(s,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},e=s}else(0,g.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(e,(0,g.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:e,isFencePassed:r}}downloadMatrixFromPackedTexture(n,e,r){return this.downloadMatrixDriver(n,()=>function RH(t,n,e){const r=new Float32Array(n*e*4);return Dt(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,r)),r}(this.gl,e,r))}createProgram(n){this.throwIfDisposed();const e=this.gl;null==this.vertexShader&&(this.vertexShader=function yH(t){const n=Pi();return function tj(t,n){const e=rl(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Dt(t,()=>t.shaderSource(e,n)),Dt(t,()=>t.compileShader(e)),!1===t.getShaderParameter(e,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(e)),new Error("Failed to compile vertex shader.");return e}(t,`${n.version}\n    precision highp float;\n    ${n.attribute} vec3 clipSpacePos;\n    ${n.attribute} vec2 uv;\n    ${n.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}(e));const r=function ij(t){return rl(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}(e);Dt(e,()=>e.attachShader(r,this.vertexShader)),Dt(e,()=>e.attachShader(r,n)),function sj(t,n){if(Dt(t,()=>t.linkProgram(n)),!(0,g.env)().get("ENGINE_COMPILE_ONLY")&&!1===t.getProgramParameter(n,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}(e,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&G0(e,i),i}buildVao(n){this.setProgram(n),this.bindVertexArray(n.vao);const e=this.gl;Dt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),function SH(t,n,e){Dt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),OT(t,n,"clipSpacePos",e,3,20,0)&&OT(t,n,"uv",e,2,20,12)}(e,n,this.vertexBuffer)}deleteProgram(n){this.throwIfDisposed(),n===this.program&&(this.program=null),null!=n&&(Dt(this.gl,()=>this.gl.deleteProgram(n)),this.deleteVertexArray(n.vao))}setProgram(n){this.throwIfDisposed(),this.program=n,null!=this.program&&this.debug&&G0(this.gl,this.program),Dt(this.gl,()=>this.gl.useProgram(n))}getUniformLocation(n,e,r=!0){return this.throwIfDisposed(),r?function hj(t,n,e){return rl(t,()=>t.getUniformLocation(n,e),'uniform "'+e+'" not present in program.')}(this.gl,n,e):function fj(t,n,e){return t.getUniformLocation(n,e)}(this.gl,n,e)}getAttributeLocation(n,e){return this.throwIfDisposed(),Dt(this.gl,()=>this.gl.getAttribLocation(n,e))}getUniformLocationNoThrow(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)}setInputMatrixTexture(n,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),pj(this.gl,n,e,r)}setOutputMatrixTexture(n,e,r){this.setOutputMatrixTextureDriver(n,r,e)}setOutputPackedMatrixTexture(n,e,r){this.throwIfDisposed();const[i,s]=ad(e,r);this.setOutputMatrixTextureDriver(n,i,s)}setOutputMatrixWriteRegion(n,e,r,i){this.setOutputMatrixWriteRegionDriver(r,n,i,e)}setOutputPackedMatrixWriteRegion(n,e,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&G0(this.gl,this.program),Og(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const n=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Dt(n,()=>n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Dt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=kg(this.gl,2===(0,g.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===(0,g.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const n=this.getQueryTimerExtensionWebGL1(),e=n.createQueryEXT();return n.beginQueryEXT(n.TIME_ELAPSED_EXT,e),e}endQuery(){if(2===(0,g.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,r=this.getQueryTimerExtensionWebGL2();return void e.endQuery(r.TIME_ELAPSED_EXT)}const n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(n){var e=this;return(0,Mc.Z)(function*(){return yield g.util.repeatedTry(()=>e.disposed||e.isQueryAvailable(n,(0,g.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),e.getQueryTime(n,(0,g.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})()}getQueryTime(n,e){if(0===e)return null;if(2===e){const r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(n,e){if(0===e)return!0;if(2===e){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(n,r.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(n){return new Promise(e=>{this.addItemToPoll(()=>n.isFencePassed(),()=>e())})}pollItems(){const n=function kH(t){let n=0;for(;n<t.length&&t[n]();++n);return n-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=n;++e){const{resolveFn:r}=this.itemsToPoll[e];r()}this.itemsToPoll=this.itemsToPoll.slice(n+1)}addItemToPoll(n,e){if(this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in(0,g.env)().platform&&(r=(0,g.env)().platform.setTimeoutCustom.bind((0,g.env)().platform)),g.util.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,r)}bindTextureToFrameBuffer(n){this.throwIfDisposed(),K0(this.gl,n,this.framebuffer),this.debug&&Og(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(K0(this.gl,this.outputTexture,this.framebuffer),this.debug&&Og(this.gl)):PT(this.gl,this.framebuffer)}downloadMatrixDriver(n,e){this.bindTextureToFrameBuffer(n);const r=e();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(n,e,r){this.throwIfDisposed();const i=this.gl;K0(i,n,this.framebuffer),this.debug&&Og(i),this.outputTexture=n,Dt(i,()=>i.viewport(0,0,e,r)),Dt(i,()=>i.scissor(0,0,e,r))}setOutputMatrixWriteRegionDriver(n,e,r,i){this.throwIfDisposed(),Dt(this.gl,()=>this.gl.scissor(n,e,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function Rc(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{null!=e&&g.util.assert("complex64"!==e.dtype,()=>`${n} does not support complex64 tensors in the CPU backend.`)})}function ZT(t){const n=new Float32Array(t.length);for(let e=0;e<t.length;++e)n[e]=Math.abs(t[e]);return n}function Ks(t){return(n,e,r,i,s)=>{const o=g.backend_util.assertAndGetBroadcastShape(n,e),a=o.length,l=g.util.computeStrides(o),c=g.util.sizeFromShape(o),u=g.util.getTypedArrayFromDType(s,c),h=n.length,m=e.length,y=g.util.computeStrides(n),C=g.util.computeStrides(e),k=g.backend_util.getBroadcastDims(n,o),P=g.backend_util.getBroadcastDims(e,o);if(k.length+P.length===0)for(let B=0;B<u.length;++B)u[B]=t(r[B%r.length],i[B%i.length]);else for(let B=0;B<u.length;++B){const V=g.util.indexToLoc(B,a,l),fe=V.slice(-h);k.forEach(dt=>fe[dt]=0);const ve=g.util.locToIndex(fe,h,y),Ve=V.slice(-m);P.forEach(dt=>Ve[dt]=0);const gt=g.util.locToIndex(Ve,m,C);u[B]=t(r[ve],i[gt])}return[u,o]}}function Ug(t){const{inputs:n,backend:e}=t,{real:r,imag:i}=n,s=e.data.get(r.dataId).values,o=e.data.get(i.dataId).values,a=e.makeTensorInfo(r.shape,"complex64");return e.data.get(a.dataId).complexTensorInfos={real:e.makeTensorInfo(r.shape,"float32",s),imag:e.makeTensorInfo(i.shape,"float32",o)},a}function J0(t,n,e="float32"){if("complex64"===e)return Ug({inputs:{real:J0(t,n,"float32"),imag:J0(t,n,"float32")},backend:t});const r=g.util.makeZerosTypedArray(g.util.sizeFromShape(n),e);return t.makeTensorInfo(n,e,r)}function ex(t){const{inputs:n,backend:e}=t,{x:r}=n;return e.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function QT(t,n,e,r){if("int32"===r)return[n,"int32",Int32Array.from(t)];if("bool"===r){const i=g.util.toTypedArray([0],e),[s,o]=Ks((a,l)=>a!==l?1:0)(n,[],t,i,"bool");return[o,"bool",s]}throw new Error(`Error in Cast: failed to cast ${e} to ${r}`)}function Df(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{dtype:s}=r;if("complex64"===s){if("complex64"===i.dtype)return ex({inputs:{x:i},backend:e});const u=J0(e,i.shape,i.dtype),h=Df({inputs:{x:i},backend:e,attrs:{dtype:"float32"}}),m=Ug({inputs:{real:h,imag:u},backend:e});return e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(h),m}if("complex64"===i.dtype){const u=function YT(t){const{inputs:n,backend:e}=t,{input:r}=n,i=e.data.get(r.dataId).complexTensorInfos.real,s=e.data.get(i.dataId).values;return e.makeTensorInfo(i.shape,i.dtype,s)}({inputs:{input:i},backend:e}),h=Df({inputs:{x:u},backend:e,attrs:{dtype:s}});return e.disposeIntermediateTensorInfo(u),h}if(!g.util.hasEncodingLoss(i.dtype,s)){const u=ex({inputs:{x:i},backend:e});return{dataId:u.dataId,shape:u.shape,dtype:s}}const o=e.data.get(i.dataId).values,[a,l,c]=QT(o,i.shape,i.dtype,s);return e.makeTensorInfo(a,l,c)}function wo(t,n,e,r){return null==e?({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;Rc([o,a],t);const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,h="string"===o.dtype?g.backend_util.fromUint8ToStringArray(c):c,m="string"===o.dtype?g.backend_util.fromUint8ToStringArray(u):u,y=r||o.dtype,[C,k]=n(o.shape,a.shape,h,m,y);return l.makeTensorInfo(k,y,C)}:({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;if("complex64"===o.dtype||"complex64"===a.dtype){const c=Df({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),m=u.complexTensorInfos.imag,y=l.data.get(u.complexTensorInfos.real.dataId).values,C=l.data.get(m.dataId).values,k=Df({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),P=l.data.get(k.dataId),V=P.complexTensorInfos.imag,fe=l.data.get(P.complexTensorInfos.real.dataId).values,ve=l.data.get(V.dataId).values,[Ve,gt,dt]=e(o.shape,a.shape,y,C,fe,ve),ht=l.makeTensorInfo(dt,"float32",Ve),Gt=l.makeTensorInfo(dt,"float32",gt),zt=Ug({inputs:{real:ht,imag:Gt},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(k),l.disposeIntermediateTensorInfo(ht),l.disposeIntermediateTensorInfo(Gt),zt}{const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,h=r||o.dtype,[m,y]=n(o.shape,a.shape,c,u,h);return l.makeTensorInfo(y,h,m)}}}function tx(t){return(n,e,r,i,s,o)=>{const a=g.backend_util.assertAndGetBroadcastShape(n,e),l=g.util.sizeFromShape(a),c=a.length,u=g.util.computeStrides(a),h=g.util.getTypedArrayFromDType("float32",l),m=g.util.getTypedArrayFromDType("float32",l),y=g.backend_util.getBroadcastDims(n,a),C=g.backend_util.getBroadcastDims(e,a),k=g.backend_util.mergeRealAndImagArrays(r,i),P=g.backend_util.mergeRealAndImagArrays(s,o),B=n.length,V=g.util.computeStrides(n),fe=e.length,ve=g.util.computeStrides(e);if(y.length+C.length===0)for(let Ve=0;Ve<h.length;Ve++){const gt=Ve%k.length,dt=Ve%P.length,ht=t(k[2*gt],k[2*gt+1],P[2*dt],P[2*dt+1]);h[Ve]=ht.real,m[Ve]=ht.imag}else for(let Ve=0;Ve<h.length;Ve++){const gt=g.util.indexToLoc(Ve,c,u),dt=gt.slice(-B);y.forEach(Ln=>dt[Ln]=0);const ht=g.util.locToIndex(dt,B,V),Gt=gt.slice(-fe);C.forEach(Ln=>Gt[Ln]=0);const zt=g.util.locToIndex(Gt,fe,ve),Hn=t(k[2*ht],k[2*ht+1],P[2*zt],P[2*zt+1]);h[Ve]=Hn.real,m[Ve]=Hn.imag}return[h,m,a]}}const JT=Ks((t,n)=>t+n),PH=tx((t,n,e,r)=>({real:t+e,imag:n+r}));function $H(t,n,e,r,i){const s=g.util.sizeFromShape(r),o=g.util.makeZerosTypedArray(i,e);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(o[l]+=s>0?n[a]:1)}return o}function LH(t,n,e,r=!1){const i=t.shape[0],s=t.shape[1],o=(0,g.buffer)([i,e],n.dtype);for(let a=0;a<i;a++)for(let l=0;l<s;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=e||o.set(r?1:n.size>0?o.get(a,c)+n.get(a,l):o.get(a,c)+1,a,c)}return o}wo(g.Add,JT,PH);const eM=Ks((t,n)=>t&n);function Ca(t){return(n,e,r)=>{const i=g.util.getArrayFromDType(e,n.length);for(let s=0;s<n.length;++s)i[s]=t(n[s],r);return i}}function tM(t,n,e){return zl(t,Ca(n),e)}function zl(t,n,e){return({inputs:r,attrs:i,backend:s})=>{const{x:o}=r;Rc(o,t);const a=s,l=a.data.get(o.dataId).values;let c;if("string"===o.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=g.backend_util.fromUint8ToStringArray(l)}else c=l;const u=e||o.dtype,h=n(c,u,i);return a.makeTensorInfo(o.shape,u,h)}}wo(g.BitwiseAnd,eM);const nM=Ca(t=>Math.ceil(t));function zH(t,n,e,r){const i=g.util.getArrayFromDType(e,g.util.sizeFromShape(n));if(r&&"string"!==e){let s=0;t.forEach(o=>{const a=g.util.sizeFromShape(o.shape);i.set(o.vals,s),s+=a})}else{let s=0;t.forEach(o=>{const a="string"===e?g.backend_util.fromUint8ToStringArray(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*n[1]+s;for(let h=0;h<o.shape[1];++h)i[u+h]=a[l++]}s+=o.shape[1]})}return i}zl(g.Ceil,nM);const rM=Ks((t,n)=>t===n?1:0),iM=(wo(g.Equal,rM,null,"bool"),Ca(t=>Math.exp(t))),sM=(zl(g.Exp,iM,"float32"),Ca(t=>Math.expm1(t))),oM=(zl(g.Expm1,sM),Ca(t=>Math.floor(t)));function GH(t,n,e,r,i,s,o,a,l){const c=(0,g.buffer)([r,s],e);for(let u=0;u<r;u++){const h=[];let m=0;for(let y=0;y<i;y++){const C=t[u*i+y];m+=C*o[y],h.push(C)}if(m<0||m>=l/s)throw new Error(`Invalid indices: ${h} does not index into ${a}`);for(let y=0;y<s;y++)c.values[u*s+y]=n.get(...n.indexToLoc(m*s+y))}return c}function KH(t,n,e){const r=(0,g.buffer)(e,t.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),c=n.locToIndex([o[0],o[2]]);o[2]=n.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(r.values[i]=t.values[u])}return r}zl(g.Floor,oM);const aM=Ks((t,n)=>t>n?1:0),lM=(wo(g.Greater,aM,null,"bool"),Ks((t,n)=>t>=n?1:0)),cM=(wo(g.GreaterEqual,lM,null,"bool"),Ks((t,n)=>t<n?1:0)),uM=(wo(g.Less,cM,null,"bool"),Ks((t,n)=>t<=n?1:0));function QH(t,n,e){const r=(n-t)/(e-1),i=g.util.makeZerosTypedArray(e,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}wo(g.LessEqual,uM,null,"bool");const dM=Ca(t=>Math.log(t));function eW(t,n,e,r){const i=g.util.getTypedArrayFromDType(r,g.util.sizeFromShape(e));for(let s=0;s<i.length;++s){const o=s*n;let a=t[o];for(let l=0;l<n;++l){const c=t[o+l];(Number.isNaN(c)||c>a)&&(a=c)}i[s]=a}return i}zl(g.Log,dM);const hM=Ks((t,n)=>Math.max(t,n)),fM=(wo(g.Maximum,hM),Ks((t,n)=>Math.min(t,n))),nx=(wo(g.Minimum,fM),Ks((t,n)=>t*n)),rW=tx((t,n,e,r)=>({real:t*e-n*r,imag:t*r+n*e}));function pM(t,n,e){const r=g.util.createScalarValue(-1,e);return nx([],n,r,t,e)}wo(g.Multiply,nx,rW);const mM=Ks((t,n)=>t!==n?1:0);function gM(t,n,e,r,i){const s=n.length,o=g.util.sizeFromShape(n),a=g.util.computeStrides(n),l=g.util.computeStrides(i),c=g.util.getTypedArrayFromDType(e,g.util.sizeFromShape(i));for(let u=0;u<o;++u){const h=g.util.indexToLoc(u,s,a),m=new Array(h.length);for(let C=0;C<m.length;C++)m[C]=h[r[C]];c[g.util.locToIndex(m,s,l)]=t[u]}return c}function _M(t,n,e,r){const[i,s]=g.backend_util.computeOutAndReduceShapes(t,r),o=(0,g.upcastType)(n,"int32"),a=g.util.makeZerosTypedArray(g.util.sizeFromShape(i),o),l=g.util.sizeFromShape(s);for(let c=0;c<a.length;++c){const u=c*l;let h=1;for(let m=0;m<l;++m)h*=e[u+m];a[c]=h}return{outVals:a,outShape:i,outDtype:o}}function bM(t,n){const e=t.slice(0,n);for(;e.length<n;)e.push(1);for(let r=n;r<t.length;r++)e[n-1]*=t[r];return e}function pW(t,n,e,r,i,s,o,a){if(0===t.length)throw new Error("paramsNestedSplits must be non empty");if(0===n[0].length)throw new Error("Split tensors must not be scalars");if(function lW(t,n,e){t.forEach((r,i)=>{if(r<0||r>=e){const s=g.util.indexToLoc(i,n.length,g.util.computeStrides(n)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${e})`)}})}(s,o,n[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:h,numValues:m}=function uW(t,n,e,r){const i=[];let s=0;const a=new Array(n.length-1+e.length).fill(null).map(()=>[0]);!function cW(t,n){for(let e=0;e<t.length;++e){const r=t[e],i=e===t.length-1?n:t[e+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}(e,r);let l=1;for(let c=0;c<n.length-1;++c){l*=n[c];const u=n[c+1];for(let h=1;h<l+1;++h)a[c].push(h*u)}for(let c=0;c<t.length;++c){let u=t[c],h=t[c]+1;for(let m=0;m<e.length;++m){const y=e[m],C=m+n.length-1;if(C>=0){const k=a[C],P=k[k.length-1]-y[u];for(let B=u;B<h;++B)a[C].push(y[B+1]+P)}u=y[u],h=y[h]}h!==u&&(i.push([u,h]),s+=h-u)}return{outSplits:a,valueSlices:i,numValues:s}}(s,o,t,c),y=function dW(t){const n=[];for(let e=0;e<t.length;++e){const i=g.util.getArrayFromDType("int32",t[e].length);n.push(i),t[e].forEach((s,o)=>i[o]=s)}return n}(u),C=function fW(t,n,e,r,i){const s=n.slice();s[0]=i;const o=g.util.getArrayFromDType(e,g.util.sizeFromShape(s)),a=t.length;return function hW(t,n,e,r,i,s){const o=bM(n,2)[1],a=bM(s,2)[1];let l=0;for(const c of e)for(let u=c[0];u<c[1];++u){for(let h=0;h<r;++h)i[l*a+h]=t[u*o+h];++l}}(t,n,r,0===a?0:a/n[0],o,s),[o,s]}(e,r,i,h,m);return[y,C[0],C[1]]}wo(g.NotEqual,mM,null,"bool");const vM=2147483647;function mW(t,n,e,r,i,s,o){if(n.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=0===n.length,l=0===i.length,c=0===o.length,u=[];a||u.push(n[0]),l||u.push(i[0]),c||u.push(o[0]);for(let P=1;P<u.length;++P)if(u[P]!==u[P-1])throw new Error("starts, limits, and deltas must have the same shape");const h=0===u.length?1:u[0],m=g.util.getArrayFromDType("int32",h+1);m[0]=0;for(let P=0;P<h;++P){const B=a?t[0]:t[P],V=l?r[0]:r[P],fe=c?s[0]:s[P];if(0===fe)throw new Error("Requires delta != 0");let ve;if(fe>0&&V<B||fe<0&&V>B)ve=0;else if(ve=Math.ceil(Math.abs((V-B)/fe)),ve>vM)throw new Error(`Requires ((limit - start) / delta) <= ${vM}`);m[P+1]=m[P]+ve}const C=g.util.getArrayFromDType(e,m[h]);let k=0;for(let P=0;P<h;++P){const B=m[P+1]-m[P];let V=a?t[0]:t[P];const fe=c?s[0]:s[P];for(let ve=0;ve<B;++ve)C[k++]=V,V+=fe}return[m,C]}var Co=g.backend_util.RowPartitionType;class jg{constructor(n,e,r,i,s,o,a,l,c,u){this.shape=n,this.shapeShape=e,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=g.backend_util.getRowPartitionTypesHelper(u),this.raggedRank=g.backend_util.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(n){return this.rowPartitionTypes[0]===Co.FIRST_DIM_SIZE?this.rowPartitionTypes[n+1]:this.rowPartitionTypes[n]}getRowPartitionTensor(n){return this.rowPartitionTypes[0]===Co.FIRST_DIM_SIZE?this.rowPartitionValues[n+1]:this.rowPartitionValues[n]}getMaxWidth(n){const e=this.getRowPartitionTensor(n-1);switch(this.getRowPartitionTypeByDimension(n-1)){case Co.VALUE_ROWIDS:return jg.getMaxWidthValueRowID(e);case Co.ROW_SPLITS:return jg.getMaxWidthRowSplit(e);default:throw new Error(`Cannot handle partition type ${Co[this.getRowPartitionTypeByDimension(n-1)]}`)}}static getMaxWidthRowSplit(n){const e=n.length;if(0===e||1===e)return 0;let r=0;for(let i=0;i<e-1;++i){const s=n[i+1]-n[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(n){const e=n.length;if(0===e)return 0;let r=0,i=n[0],s=0;for(let o=1;o<e;++o){const a=n[o];a!==i&&(i=a,s=Math.max(o-r,s),r=o)}return Math.max(e-r,s)}tensorShapeFromTensor(n,e,r=!0){if(0===e.length){if(-1===n[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return wM(n,r)}calculateOutputSize(n){const e=this.valuesShape;g.backend_util.validateDefaultValueShape(this.defaultValueShape,e);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=g.backend_util.combineRaggedTensorToTensorShapes(this.raggedRank,i,e);o[0]<0&&(o[0]=n);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(n,e,r){const i=Math.min(n,r),s=[];let o=0;for(let a=0;a<i;++a,o+=e)s.push(o);for(let a=i;a<n;++a)s.push(-1);return g.util.assert(s.length===n,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(n,e,r,i){const s=n.length,o=[];for(let a=0;a<s-1;++a){const l=n[a+1]-n[a];let c=Math.min(i,l),u=e[a];-1===u&&(c=0);for(let h=0;h<c;++h)o.push(u),u+=r;for(let h=0;h<l-c;++h)o.push(-1)}if(s>0&&o.length!==n[s-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(n,e,r,i){const s=n.length,o=[];if(0===s)return[];let a=0,l=n[0];if(l>=e.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${e.length}`);let c=e[l];o.push(c);for(let u=1;u<s;++u){const h=n[u];if(h===l)c>=0&&(++a,a<i?c+=r:c=-1);else{if(a=0,l=h,h>=e.length)throw new Error(`Got nextValueRowId=${h} which is not less than ${e.length}`);c=e[h]}o.push(c)}if(o.length!==n.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(n,e,r,i){const s=this.getRowPartitionTensor(n),o=this.getRowPartitionTypeByDimension(n);switch(o){case Co.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,e,r,i);case Co.ROW_SPLITS:if(s.length-1>e.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${e.length}`);return this.calculateOutputIndexRowSplit(s,e,r,i);default:throw new Error(`Unsupported partition type: ${Co[o]}`)}}getFirstDimensionSize(){const n=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const e=this.rowPartitionTypes[0];switch(e){case Co.FIRST_DIM_SIZE:return n[0];case Co.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Co.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Co[e]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),r=this.calculateOutputSize(e),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const s=wM(r,!1),o=g.util.getArrayFromDType(this.valuesDType,g.util.sizeFromShape(s));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(e,i[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,i[c],r[c]);this.setOutput(this.raggedRank,l,o,s)}return[s,o]}setOutput(n,e,r,i){if(0===r.length)return;const s=this.values,o=r;let a=i.slice();a=a.slice(n+1);const l=g.util.sizeFromShape(a),c=e.length;let u=this.defaultValue;if(u.length!==l&&1!==u.length){const C=this.defaultValueShape;(0,g.tidy)(()=>{const k=(0,g.reshape)(u,C);u=(0,g.broadcastTo)(k,a).dataSync()})}let h=0,m=0,y=0;for(let C=0;C<=c;++C){let k=C<c?e[C]:-1;if(k!==y){if(m<y){const P=s.subarray(h*l);xM(o.subarray(m*l),P,(y-m)*l)}if(C>=c&&(k=Math.floor(r.length/l)),k>y)if(1===this.defaultValue.length)o.subarray(y*l,k*l).fill(this.defaultValue[0]),y=k;else for(;k>y;)xM(o.slice(y*l),u,l),++y;k<0?(h=C+1,m=y):(h=C,m=y,y=m+1)}else++y}}}function xM(t,n,e){for(let r=0;r<e;r++)t[r]=n[r]}function wM(t,n){const e=[];for(let r of t){if(r<0){if(!n)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}e.push(r)}return e}function gW(t,n,e,r,i,s,o,a,l,c){return new jg(t,n,e,r,i,s,o,a,l,c).compute()}function yW(t,n,e,r){if(t===n||t<n&&e<0||n<t&&e>1)return g.util.makeZerosTypedArray(0,r);const a=Math.abs(Math.ceil((n-t)/e)),l=g.util.makeZerosTypedArray(a,r);n<t&&1===e&&(e=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+e;return l}const CM=Ca(t=>1/Math.sqrt(t));function bW(t,n,e,r,i,s,o,a,l,c){const u=[r/i,i],h=t.values,m=n.values;if(0===r)return(0,g.buffer)(e,n.dtype);const y=l instanceof g.TensorBuffer?l:(0,g.buffer)(u,n.dtype);"string"==typeof l||"number"==typeof l?y.values.fill(l):"boolean"==typeof l&&y.values.fill(+l);for(let C=0;C<s;C++){const k=[];let P=0;for(let B=0;B<o;B++){const V=h[C*o+B];k.push(V),P+=V*a[B]}if(P<0||P>=r/i)throw new Error(`Invalid indices: ${k} does not index into ${e}`);for(let B=0;B<i;B++)c?y.values[P*i+B]+=m[C*i+B]:y.values[P*i+B]=0===n.rank?m[0]:m[C*i+B]}return y}zl(g.Rsqrt,CM);const vW=Ca(t=>1/(1+Math.exp(-t)));function EM(t,n,e,r,i){const s=g.slice_util.isSliceContinous(r,n,e),o=g.util.sizeFromShape(e),a=g.util.computeStrides(r);if(s){const h=g.slice_util.computeFlatOffset(n,a);return"string"===i?t.slice(h,h+o):t.subarray(h,h+o)}const l="string"===i?g.backend_util.fromUint8ToStringArray(t):t,c=(0,g.buffer)(r,i,l),u=(0,g.buffer)(e,i);for(let h=0;h<u.size;++h){const m=u.indexToLoc(h),y=m.map((C,k)=>C+n[k]);u.set(c.get(...y),...m)}return"string"===i?g.backend_util.fromStringArrayToUint8(u.values):u.values}function CW(t,n,e,r,i,s,o){const a=n[0],l=s[0],c=new Array(l),u=new Array(a),h=n[1];if(0===l){if(0!==a)throw new Error(g.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(a));return[g.util.getArrayFromDType(e,0),[0,h],g.util.getArrayFromDType(i,0),c,u]}let m=!0,y=0;const C=new Array(l).fill(0);for(let P=0;P<a;++P){const B=t[P*h];if(B<0)throw new Error(g.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(P,B));if(B>=l)throw new Error(g.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(P,B,l));++C[B],m=m&&B>=y,y=B}let k=!0;for(let P=0;P<l;++P){const B=0===C[P];c[P]=B,k=k&&!B,C[P]=Math.max(C[P],1),P>0&&(C[P]+=C[P-1])}if(k&&m){const P=t,B=r;for(let V=0;V<a;++V)u[V]=V;return[P,[a,h],B,c,u]}{const P=C[l-1],B=g.util.getArrayFromDType(e,P*h),V=g.util.getArrayFromDType(i,P),fe=new Array(l).fill(0);for(let ve=0;ve<a;++ve){const Ve=t[ve*h],dt=(0===Ve?0:C[Ve-1])+fe[Ve];fe[Ve]++;for(let ht=0;ht<h;++ht)B[dt*h+ht]=t[ve*h+ht];V[dt]=r[ve],u[ve]=dt}for(let ve=0;ve<l;++ve)if(0===fe[ve]){const gt=0===ve?0:C[ve-1];B[gt*h+0]=ve;for(let dt=1;dt<h;++dt)B[gt*h+dt]=0;V[gt]=o}return[B,[P,h],V,c,u]}}function EW(t,n,e,r,i){const s=g.util.sizeFromShape(r),o=n[0],a=i.length,l=[];let c=1,u=-1;for(let P=0;P<a;++P){const B=i[P];if(-1===B){if(-1!==u)throw new Error(g.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(u,P));u=P,l.push(1)}else{if(B<0)throw new Error(g.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(P,B));c*=B,l.push(B)}}if(-1!==u){if(c<=0)throw new Error(g.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());const P=Math.trunc(s/c);if(c*P!==s)throw new Error(g.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(r,l));l[u]=P}if(g.util.sizeFromShape(l)!==s)throw new Error(g.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(r,l));const m=r.length,y=[];if(m>0){y[m-1]=1;for(let P=m-2;P>=0;--P)y[P]=y[P+1]*r[P+1]}const C=[];if(a>0){C[a-1]=1;for(let P=a-2;P>=0;--P)C[P]=C[P+1]*l[P+1]}const k=g.util.getArrayFromDType(e,o*a);for(let P=0;P<o;++P){let B=0;for(let V=0;V<m;++V)B+=t[P*m+V]*y[V];for(let V=0;V<a;++V)k[P*a+V]=Math.trunc(B/C[V]),B%=C[V]}return[k,[o,a],l]}function SW(t,n,e,r,i,s=!1,o=0){const a=r.length,l=[n[0],t.length/n[0]],c=l[1],h=a>0?i[a-1]+1:0;if(h<0)throw new Error(g.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());const m=n.slice();m[0]=h;const y=m.reduce((fe,ve)=>fe*ve,1),C=g.util.getArrayFromDType(e,y);if(0===a)return h>0&&C.fill(o),[C,m];if(h<=0)throw new Error(g.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let k=0,P=1,B=0,V=i[k];for(;;){let fe=0;if(P<a){if(fe=i[P],V===fe){++P;continue}if(V>=fe)throw new Error(g.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(V<0||V>=h)throw new Error(g.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(V,h));V>B&&C.fill(o,B*c,V*c);for(let ve=k;ve<P;++ve){const Ve=r[ve];if(Ve<0||Ve>=l[0])throw new Error(g.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(ve,r[ve],l[0]));for(let gt=0;gt<c;gt++)C[V*c+gt]+=t[Ve*c+gt]}if(s)for(let ve=0;ve<c;ve++)C[V*c+ve]/=P-k;if(k=P,++P,B=V+1,V=fe,P>a)break}return B<h&&C.fill(o,B*c,h*c),[C,m]}tM(g.Sigmoid,t=>1/(1+Math.exp(-t)));const DW=Ca(t=>Math.sqrt(t)),SM=(tM(g.Sqrt,t=>Math.sqrt(t)),Ca((t,n)=>{const{pattern:e,replaceGlobal:r,rewrite:i}=n;return t.replace(new RegExp(e,r?"g":""),i)}));function MW(t,n,e,r){const i=(0,g.buffer)(t,n.dtype);for(let s=0;s<i.size;s++){const o=i.indexToLoc(s),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*e[l]+r[l];i.set(n.get(...a),...o)}return i}zl(g.StaticRegexReplace,SM);class AW{constructor(n,e,r,i,s,o){this.separator=g.util.encodeString(n),this.nGramWidths=e,this.leftPad=g.util.encodeString(r),this.rightPad=g.util.encodeString(i),this.padWidth=s,this.preserveShort=o}getPadWidth(n){return Math.min(this.padWidth<0?n-1:this.padWidth,n-1)}getNumNGrams(n,e){const r=this.getPadWidth(e);return Math.max(0,n+2*r-e+1)}createNGrams(n,e,r,i,s,o){for(let a=0;a<s;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(s-(a+1))),h=o-(c+u),m=e+(c>0?0:a-l);let y=0;y+=c*this.leftPad.length;for(let V=0;V<h;++V)y+=n[m+V].length;y+=u*this.rightPad.length,y+=(c+u+h-1)*this.separator.length,r[i+a]=new Uint8Array(y);const k=r[i+a];let P=0;const B=V=>V.forEach(fe=>k[P++]=fe);for(let V=0;V<c;++V)B(this.leftPad),B(this.separator);for(let V=0;V<h-1;++V)B(n[m+V]),B(this.separator);if(h>0){B(n[m+h-1]);for(let V=0;V<u;++V)B(this.separator),B(this.rightPad)}else{for(let V=0;V<u-1;++V)B(this.rightPad),B(this.separator);B(this.rightPad)}}}compute(n,e){const r=n.length,i=e.length;if(i>0){let l=e[0];if(0!==l)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<i;++c){let u=e[c]>=l;if(u=u&&e[c]<=r,!u)throw new Error(`Invalid split value ${e[c]}, must be in [${l}, ${r}]`);l=e[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=i-1,o=g.util.getArrayFromDType("int32",i);if(0===r||0===i){const l=new Array(r);for(let c=0;c<=s;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=s;++l){const c=e[l]-e[l-1];let u=0;this.nGramWidths.forEach(h=>{u+=this.getNumNGrams(c,h)}),this.preserveShort&&c>0&&0===u&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[s]);for(let l=0;l<s;++l){const c=e[l];let u=o[l];if(this.nGramWidths.forEach(h=>{const y=this.getNumNGrams(e[l+1]-e[l],h);this.createNGrams(n,c,a,u,y,h),u+=y}),this.preserveShort&&u===o[l]){const h=e[l+1]-e[l];if(0===h)continue;this.createNGrams(n,c,a,u,1,h+2*this.padWidth)}}return[a,o]}}function NW(t,n,e,r,i,s,o,a){return new AW(e,r,i,s,o,a).compute(t,n)}function RW(t,n,e,r){if(!t.length)return;if(0===n.length){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(1===n.length){const s=n[0];let o=t.indexOf(s);for(;-1!==o;){const a=t.subarray(0,o);(!e||0!==a.length)&&r.push(a),o=(t=t.subarray(o+1)).indexOf(s)}return void((!e||0!==t.length)&&r.push(t))}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||-1!==n.indexOf(t[s])){const o=t.subarray(i,s);(!e||0!==o.length)&&r.push(o),i=s+1}}function kW(t,n,e){const r=t.length,i=[];let s=0,o=0;const a=new Array(r);for(let m=0;m<r;++m){const y=i.length;RW(t[m],n,e,i);const C=i.length-y;a[m]=C,s+=C,o=Math.max(o,C)}const l=g.util.getArrayFromDType("int32",2*s),c=new Array(s),u=[r,o];let h=0;for(let m=0;m<r;++m)for(let y=0;y<a[m];++y)l[2*h]=m,l[2*h+1]=y,c[h]=i[h],++h;return[l,c,u]}function OW(t,n){const e=g.util.getArrayFromDType("int32",t.length);for(let r=0;r<t.length;++r)e[r]=g.util.fingerPrint64(t[r]).modulo(n).getLowBitsUnsigned();return e}const DM=Ks((t,n)=>t-n),PW=tx((t,n,e,r)=>({real:t-e,imag:n-r}));function $W(t,n){const e=new Array(t.rank);for(let i=0;i<e.length;i++)e[i]=t.shape[i]*n[i];const r=(0,g.buffer)(e,t.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=s[l]%t.shape[l];const a=t.locToIndex(o);r.values[i]=t.values[a]}return r}wo(g.Sub,DM,PW);const If=(t,n)=>{const e=n.value-t.value;return 0===e?t.index-n.index:e};function IM(t,n,e=0,r=t.length-1){for(;r>e;){if(r-e>600){const a=r-e+1,l=n-e+1,c=Math.log(a),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2);IM(t,n,Math.max(e,Math.floor(n-l*u/a+h)),Math.min(r,Math.floor(n+(a-l)*u/a+h)))}const i=t[n];let s=e,o=r;for(g.util.swap(t,e,n),If(t[r],i)>0&&g.util.swap(t,e,r);s<o;){for(g.util.swap(t,s,o),s++,o--;If(t[s],i)<0;)s+=1;for(;If(t[o],i)>0;)o-=1}0===If(t[e],i)?g.util.swap(t,e,o):(o+=1,g.util.swap(t,o,r)),o<=n&&(e=o+1),n<=o&&(r=o-1)}}function LW(t,n,e,r,i){const s=n[n.length-1],[o,a]=[t.length/s,s],l=g.util.getTypedArrayFromDType(e,o*r),c=g.util.getTypedArrayFromDType("int32",o*r);for(let h=0;h<o;h++){const m=h*a,y=t.subarray(m,m+a);let C=new Array(y.length);y.forEach((V,fe)=>C[fe]={value:V,index:fe}),r<C.length&&(IM(C,r),C=C.slice(0,r)),i&&C.sort(If);const k=h*r,P=l.subarray(k,k+r),B=c.subarray(k,k+r);for(let V=0;V<r;V++)P[V]=C[V].value,B[V]=C[V].index}const u=n.slice();return u[u.length-1]=r,[(0,g.buffer)(u,e,l),(0,g.buffer)(u,"int32",c)]}function BW(t,n,e,r){const i=g.util.parseAxisParam(n,e)[0],s=[1,e[0],1];for(let C=0;C<i;C++)s[0]*=e[C];s[1]=e[i];for(let C=i+1;C<e.length;C++)s[2]*=e[C];const o=new Map,a=new Int32Array(e[i]),l=new g.TensorBuffer(s,r,t),c=[],u=1===s[0]&&1===s[2];for(let C=0;C<e[i];C++){let k;if(u)k=t[C].toString();else{const B=[];for(let V=0;V<s[0];V++)for(let fe=0;fe<s[2];fe++)B.push(l.get(V,C,fe));k=B.join(",")}const P=o.get(k);if(null!=P)a[C]=P;else{const B=o.size;o.set(k,B),a[C]=B,c.push(C)}}const h=s.slice();h[1]=o.size;const m=new g.TensorBuffer(h,r);c.forEach((C,k)=>{for(let P=0;P<s[0];P++)for(let B=0;B<s[2];B++)m.set(l.get(P,C,B),P,k,B)});const y=e.slice();return y[i]=h[1],{outputValues:m.values,outputShape:y,indices:a}}const{addImpl:VW,bincountImpl:TM,bincountReduceImpl:zW,bitwiseAndImpl:UW,castImpl:jW,ceilImpl:HW,concatImpl:WW,equalImpl:GW,expImpl:KW,expm1Impl:XW,floorImpl:qW,gatherNdImpl:ZW,gatherV2Impl:YW,greaterImpl:QW,greaterEqualImpl:JW,lessImpl:eG,lessEqualImpl:tG,linSpaceImpl:nG,logImpl:rG,maxImpl:iG,maximumImpl:sG,minimumImpl:oG,multiplyImpl:aG,negImpl:lG,notEqualImpl:cG,prodImpl:uG,raggedGatherImpl:dG,raggedRangeImpl:hG,raggedTensorToTensorImpl:fG,rangeImpl:pG,rsqrtImpl:mG,scatterImpl:gG,sigmoidImpl:yG,simpleAbsImpl:MM,sliceImpl:_G,sparseFillEmptyRowsImpl:bG,sparseReshapeImpl:vG,sparseSegmentReductionImpl:AM,sqrtImpl:xG,staticRegexReplaceImpl:wG,stridedSliceImpl:CG,stringNGramsImpl:EG,stringSplitImpl:SG,stringToHashBucketFastImpl:DG,subImpl:IG,tileImpl:TG,topKImpl:MG,transposeImpl:rx,uniqueImpl:AG}=ce;function NM(t,n){return["x","y","z","w","u","v"].slice(0,n).map(e=>`${t}.${e}`)}function Fi(t,n){return 1===n?[t]:NM(t,n)}class RG{constructor(n){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.enableShapeUniforms=xi(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=Fi("rc",this.rank),r=Xn(this.rank),i=this.getOutOfBoundsCondition(e),s=this.getSetup(e),o=this.getOutput(e);this.userCode=`\n        void main() {\n          ${r} rc = getOutputCoords();\n\n          if(${i}) {\n            setOutput(vec4(0));\n          } else {\n            ${s}\n\n            setOutput(vec4(${o}));\n          }\n        }\n      `}}getSourceCoordsArr(n){const e=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${0===r?"r":"rp1"}, ${0===i?"c":"cp1"}`;for(let o=2;o<this.rank;o++)s=`${n[n.length-1-o]},`+s;e.push(s)}return e}getOutOfBoundsCondition(n){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let e="";for(let r=this.rank-2;r<this.rank;r++)e+=`${n[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(e+="||");return e}getSetup(n){if(1===this.rank)return"";const e=n.slice(-2);return`\n      int r = ${e[0]};\n      int c = ${e[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1]};\n      bool rEdge = rp1 >= ${this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2]};\n    `}getOutput(n){const e=this.getSourceCoordsArr(n);return 1===this.rank?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${e[0]}),\n            cEdge ? 0. : getA(${e[1]}),\n            rEdge ? 0. : getA(${e[2]}),\n            rEdge || cEdge ? 0. : getA(${e[3]})`}}class RM{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=n,this.enableShapeUniforms=xi(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2==1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`\n        ${s}\n        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${i}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${i>0?"}":""}\n      `}this.userCode=`\n      ${function kG(t,n){return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${n?function Sj(t,n,e="index"){const i=function Ej(t,n){const e=t.length,r=t.map(s=>`${n}[${s}]`),i=new Array(e-1);i[e-2]=r[e-1];for(let s=e-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}(t.map((s,o)=>o),n);return i.map((s,o)=>`int ${t[o]} = ${e} / ${i[o]}; ${o===i.length-1?`int ${t[o+1]} = ${e} - ${t[o]} * ${i[o]}`:`index -= ${t[o]} * ${i[o]}`};`).join("")}(["r","c","d"],"inputShape"):Ac(["r","c","d"],t)}\n      return ivec3(r, c, d);\n    }\n  `}(e,this.enableShapeUniforms)}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":q0(n)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":n[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":n[2]};\n\n        ${r}\n\n        setOutput(result);\n      }\n    `}}class OG{constructor(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(n,e,r){const i=OM(e,r),s=PM(n,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const o=kM(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let a;return i===vi.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):i===vi.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):i===vi.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):i===vi.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):i===vi.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(n,e,r,i){if(null==this.freeTextures)return;const s=OM(r,i),o=PM(e,s,i);o in this.freeTextures||(this.freeTextures[o]=[]);const a=kM(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=(0,g.env)().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==l&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(n.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(n),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(n);if(null==u||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${this.numFreeTextures+this.numUsedTextures})`);const e=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const n in this.freeTextures)this.freeTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(const n in this.usedTextures)this.usedTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function kM(t,n,e,r,i){const s=function FG(t,n){switch(t){case vi.PACKED_2X2_FLOAT32:return XT(n);case vi.PACKED_2X2_FLOAT16:return qT(n);case vi.UNPACKED_FLOAT32:return WT(n);case vi.UNPACKED_FLOAT16:return GT(n);case vi.PACKED_4X1_UNSIGNED_BYTE:return KT(n);default:throw new Error(`Unknown physical texture type ${t}`)}}(n,r);let o;if(i){const[l,c]=ad(t[0],t[1]);o=l*c}else{const[l,c]=Cf(t[0],t[1]);o=l*c}const a=function PG(t,n){if(n===t.R32F)return 4;if(n===t.R16F)return 2;if(n===t.RGBA32F)return 16;if(n===t.RGBA)return 16;if(n===t.RGBA16F)return 8;if(n===t.RGBA8)return 4;throw new Error(`Unknown internal format ${n}`)}(e,s);return o*a}function OM(t,n){if(t===vo.UPLOAD)return vi.PACKED_2X2_FLOAT32;if(t===vo.RENDER||null==t)return function $G(t){return(0,g.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?vi.PACKED_2X2_FLOAT32:vi.UNPACKED_FLOAT32:t?vi.PACKED_2X2_FLOAT16:vi.UNPACKED_FLOAT16}(n);if(t===vo.DOWNLOAD||t===vo.PIXELS)return vi.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function PM(t,n,e){return`${t[0]}_${t[1]}_${n}_${e}`}class Ea{constructor(n,e){this.variableNames=["A"],this.outputShape=n,this.enableShapeUniforms=xi(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${e}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const Xs="if (isnan(x)) return x;",LG="return x;",FM="return abs(x);",BG="return (x >= 0.0) ? x : (exp(x) - 1.0);",VG=Xs+"\n  return (x < 0.0) ? 0.0 : x;\n",zG=Xs+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Ul="return x;",UG="return 1.0 / (1.0 + exp(-1.0 * x));",jG="return x;",HG="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",WG="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",GG="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",KG="return 1.0 / (1.0 + exp(-1.0 * x));";class jl{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=xi(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${e}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class XG{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n,this.enableShapeUniforms=xi(this.outputShape.length);const e=n.length,r=Fi("rc",e),i=Xn(e),s=function NG(t,n){if(1===t)return"rc";let e="";for(let r=0;r<t;r++)e+=n[r],r<t-1&&(e+=",");return e}(e,r),o=r.slice(-2),a=e<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`\n      void main() {\n        ${i} rc = getOutputCoords();\n        vec4 packedInput = getA(${s});\n\n        setOutput(getChannel(packedInput, ${a}));\n      }\n    `}}const qG=g.kernel_impls.whereImpl,Hg={},JG=(0,g.env)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");let n5=(()=>{class t extends g.KernelBackend{nextDataId(){return t.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!(0,g.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let r;if(null!=e){if(e instanceof Q0)r=e;else{const i=Xo((0,g.env)().getNumber("WEBGL_VERSION"),e);r=new Q0(i)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const i=Xo((0,g.env)().getNumber("WEBGL_VERSION"));r=new Q0(i),this.binaryCache=function QG(t){return t in Hg||(Hg[t]={}),Hg[t]}((0,g.env)().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=r,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new OG(this.gpgpu),this.numMBBeforeWarning=function t5(){return null==(0,g.env)().global.screen?1024:(0,g.env)().global.screen.height*(0,g.env)().global.screen.width*window.devicePixelRatio*600/1024/1024}(),this.texData=new g.DataStorage(this,(0,g.engine)())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,r,i,s,o,a){const l=this.makeTensorInfo(r,i),c=this.texData.get(l.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[s,o]},c.texShape=[s,o];const u=Pg(r),h=new HT(u,!1,a),m=this.runWebGLProgram(h,[l],i,[[s,o]]);return m.shape=r,c.texture=null,this.disposeIntermediateTensorInfo(l),m.dataId}write(e,r,i){if(((0,g.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,g.env)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===i&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:r,dtype:i,values:e,usage:vo.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){this.texData.get(e).refCount++}decRef(e){this.texData.has(e)&&this.texData.get(e).refCount--}move(e,r,i,s,o){if((0,g.env)().getBool("DEBUG")&&this.checkNumericalProblems(r),"complex64"===s)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:i,dtype:s,values:r,usage:vo.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const r=this.texData.get(e),{values:i,dtype:s,complexTensorInfos:o,slice:a,shape:l,isPacked:c}=r;if(null!=a){let y;y=c?new jl(l,Ul):new Ea(l,Ul);const C=this.runWebGLProgram(y,[{dataId:e,shape:l,dtype:s}],s),k=this.readSync(C.dataId);return this.disposeIntermediateTensorInfo(C),k}if(null!=i)return this.convertAndCacheOnCPU(e);if("string"===s)return i;const u=null!=this.activeTimers;let h,m;if(u&&(h=g.util.now()),"complex64"===s){const y=this.readSync(o.real.dataId),C=this.readSync(o.imag.dataId);m=g.backend_util.mergeRealAndImagArrays(y,C)}else m=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=g.util.now()-h),this.convertAndCacheOnCPU(e,m)}read(e){var r=this;return(0,Mc.Z)(function*(){if(r.pendingRead.has(e)){const P=r.pendingRead.get(e);return new Promise(B=>P.push(B))}const i=r.texData.get(e),{values:s,shape:o,slice:a,dtype:l,complexTensorInfos:c,isPacked:u}=i;if(null!=a){let P;P=u?new jl(o,Ul):new Ea(o,Ul);const B=r.runWebGLProgram(P,[{dataId:e,shape:o,dtype:l}],l),V=r.read(B.dataId);return r.disposeIntermediateTensorInfo(B),V}if(null!=s)return r.convertAndCacheOnCPU(e);if((0,g.env)().getBool("DEBUG")&&!(0,g.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===(0,g.env)().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let m,y,h=null;if("complex64"!==l&&(0,g.env)().get("WEBGL_BUFFER_SUPPORTED")){m=r.decode(e);const P=r.texData.get(m.dataId);h=r.gpgpu.createBufferFromTexture(P.texture.texture,...Rg(o))}if(r.pendingRead.set(e,[]),"complex64"!==l&&(yield r.gpgpu.createAndWaitForFence()),"complex64"===l){const P=yield Promise.all([r.read(c.real.dataId),r.read(c.imag.dataId)]);y=g.backend_util.mergeRealAndImagArrays(P[0],P[1])}else if(null==h)y=r.getValuesFromTexture(e);else{const P=g.util.sizeFromShape(o);y=r.gpgpu.downloadFloat32MatrixFromBuffer(h,P)}if(null!=m&&r.disposeIntermediateTensorInfo(m),null!=h){const P=r.gpgpu.gl;Dt(P,()=>P.deleteBuffer(h))}const C=r.convertAndCacheOnCPU(e,y),k=r.pendingRead.get(e);return r.pendingRead.delete(e),k.forEach(P=>P(C)),r.pendingDisposal.has(e)&&(r.pendingDisposal.delete(e),r.disposeData(e)&&(0,g.engine)().removeDataId(e,r),r.pendingDeletes--),C})()}readToGPU(e,r={}){const i=this.texData.get(e),{values:s,shape:o,slice:a,dtype:l,isPacked:c,texture:u}=i;if("complex64"===l)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=a){let C;C=c?new jl(o,Ul):new Ea(o,Ul);const k=this.runWebGLProgram(C,[{dataId:e,shape:o,dtype:l}],l),P=this.readToGPU(k,r);return this.disposeIntermediateTensorInfo(k),P}if(null==u)throw null!=s?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const h=this.decode(e,r.customTexShape),m=(0,g.engine)().makeTensorFromTensorInfo(h),y=this.texData.get(h.dataId);return Object.assign({tensorRef:m},y.texture)}bufferSync(e){const r=this.readSync(e.dataId);if("string"===e.dtype)try{const i=r.map(s=>g.util.decodeString(s));return(0,g.buffer)(e.shape,e.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,g.buffer)(e.shape,e.dtype,r)}checkNumericalProblems(e){if(null!=e)for(let r=0;r<e.length;r++){const i=e[r];if(!J4(i))throw(0,g.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${i} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${i} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:r,dtype:i,isPacked:s}=this.texData.get(e),o=g.util.sizeFromShape(r);if((0,g.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const y=this.decode(e),C=this.texData.get(y.dataId),k=this.gpgpu.downloadMatrixFromPackedTexture(C.texture.texture,...Rg(r)).subarray(0,o);return this.disposeIntermediateTensorInfo(y),k}const a=(0,g.env)().getBool("WEBGL_PACK")&&!0===s,l=a?Pg(r):r,c=a?new pH(l):new fH(l),u=this.runWebGLProgram(c,[{shape:l,dtype:i,dataId:e}],"float32"),h=this.texData.get(u.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture.texture,h.texShape[0],h.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(u),m}timerAvailable(){return(0,g.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){var r=this;const i=this.activeTimers,s=[];let o=!1;null==this.programTimersStack?(this.programTimersStack=s,o=!0):this.activeTimers.push(s),this.activeTimers=s,e();const a=g.util.flatten(this.activeTimers.map(u=>u.query)).filter(u=>null!=u),l=g.util.flatten(this.activeTimers.map(u=>u.name)).filter(u=>null!=u);this.activeTimers=i,o&&(this.programTimersStack=null);const c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(0,Mc.Z)(function*(){if((0,g.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const u=yield Promise.all(a);c.kernelMs=g.util.sum(u),c.getExtraProfileInfo=()=>u.map((h,m)=>({name:l[m],ms:h})).map(h=>`${h.name}: ${h.ms}`).join(", ")}else c.kernelMs={error:"WebGL query timers are not supported in this environment."};return r.uploadWaitMs=0,r.downloadWaitMs=0,c})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return(0,g.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:g.util.now(),endMs:null}}endTimer(e){return(0,g.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=g.util.now(),e)}getQueryTime(e){var r=this;return(0,Mc.Z)(function*(){return(0,g.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?r.gpgpu.waitForQueryAndGetTime(e):e.endMs-e.startMs})()}disposeData(e,r=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(r?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!r&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:i}=this.texData.get(e);return null!=i&&(this.disposeData(i.real.dataId,r),this.disposeData(i.imag.dataId,r)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:r,dtype:i,texShape:s,usage:o,isPacked:a,slice:l}=this.texData.get(e),c=l&&l.origDataId||e,u=this.dataRefCount.get(c);u>1?this.dataRefCount.set(c,u-1):(this.dataRefCount.delete(c),null!=r&&(this.numBytesInGPU-=this.computeBytes(s,i),this.textureManager.releaseTexture(r,s,o,a)));const h=this.texData.get(e);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,r=JG){return(0,g.env)().getBool("WEBGL_CPU_FORWARD")&&e.every(i=>null==this.texData.get(i.dataId).texture&&g.util.sizeFromShape(i.shape)<r)}getGPGPUContext(){return this.gpgpu}where(e){g.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const r=e.dataSync();return qG(e.shape,r)}packedUnaryOp(e,r,i){const s=new jl(e.shape,r),o=this.compileAndRun(s,[e],i);return(0,g.engine)().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const s=MM(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if((0,g.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,FM,e.dtype);const r=new Ea(e.shape,FM),i=this.compileAndRun(r,[e]);return(0,g.engine)().makeTensorFromTensorInfo(i)}makeTensorInfo(e,r,i){let s;if("string"===r&&null!=i&&i.length>0&&g.util.isString(i[0])){const o=i.map(a=>g.util.encodeString(a));s=this.write(o,e,r)}else s=this.write(i,e,r);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:r}}makeOutput(e,r,i){return(0,g.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(e,r,i),this)}unpackTensor(e){const r=new XG(e.shape);return this.runWebGLProgram(r,[e],e.dtype)}packTensor(e){const r=new RG(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)}packedReshape(e,r){const i=[ld(e.shape),...cd(e.shape)],s={dtype:e.dtype,shape:i,dataId:e.dataId},o=[ld(r),...cd(r)],a=new RM(o,i),u=this.runWebGLProgram(a,[s],e.dtype,[i],!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}}decode(e,r){const i=this.texData.get(e),{isPacked:s,shape:o,dtype:a}=i;if(null!=r){const y=g.util.sizeFromShape(o);g.util.assert(y<=r[0]*r[1]*4,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const l=Pg(o);let c;c=s?new hH(l):new dH(l);const h=[r??Rg(l)];return{dtype:a,shape:o,dataId:this.runWebGLProgram(c,[{shape:l,dtype:a,dataId:e}],a,h,!0,r).dataId}}runWebGLProgram(e,r,i,s,o=!1,a){const l=this.makeTensorInfo(e.outputShape,i),c=this.texData.get(l.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===Ng.DENSE){const V=a??Rg(e.outputShape);c.texShape=V.map(fe=>2*fe)}if(null!=e.outTexUsage&&(c.usage=e.outTexUsage),0===g.util.sizeFromShape(l.shape))return c.values=g.util.getTypedArrayFromDType(l.dtype,0),l;const u=[],h=r.map(V=>{if("complex64"===V.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let fe=this.texData.get(V.dataId);if(null==fe.texture){if(!e.packedInputs&&g.util.sizeFromShape(V.shape)<=(0,g.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:V.shape,texData:null,isUniform:!0,uniformValues:fe.values};e.packedInputs&&(fe.isPacked=!0,fe.shape=V.shape)}if(this.uploadToGPU(V.dataId),!!fe.isPacked!=!!e.packedInputs)V=fe.isPacked?this.unpackTensor(V):this.packTensor(V),u.push(V),fe=this.texData.get(V.dataId);else if(fe.isPacked&&!$g(fe.shape,V.shape)){const ve=V,Ve=V.shape;V.shape=fe.shape,V=this.packedReshape(V,Ve),u.push(V),fe=this.texData.get(V.dataId),ve.shape=Ve}return{shape:V.shape,texData:fe,isUniform:!1}});this.uploadToGPU(l.dataId);const m={shape:l.shape,texData:c,isUniform:!1},y=function uH(t,n,e){let r="";n.concat(e).forEach(o=>{const a=null!=o.texData&&null!=o.texData.slice&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:h}=Y0(t.packedInputs,o.shape,l);let m="",y="",C="";if(1===u.length&&t.packedInputs){const Ve=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];m=`${Ve[0]>1}_${Ve[1]>1}`}else if(2!==u.length||t.packedInputs){if(u.length>2&&!t.packedInputs){const Ve=g.util.computeStrides(u);C=`${Ve[0]===l[1]}_${Ve[Ve.length-1]===l[1]}`}}else y=`${u[0]>1}_${u[1]>1}`;const k=o.shape.length,P=2===u.length&&g.util.arraysEqual(o.shape,l),B=1===g.util.sizeFromShape(o.shape),V=g.backend_util.getBroadcastDims(o.shape,e.shape),fe=!t.packedInputs&&k===e.shape.length&&g.util.arraysEqual(l,e.texData.texShape);r+=`${k}_${fe}_${c?h:""}_${u.length}_${B}_${V}_${P}_${m}_${y}_${C}_${t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`}_${a}`}else r+=`${o.shape}_${o.isUniform?"uniform":o.texData.texShape}_${a}`});let s=t.constructor.name;return s+="_"+r+"_"+t.userCode+`${(0,g.env)().getNumber("WEBGL_VERSION")}`,s}(e,h,m),C=this.getAndSaveBinary(y,()=>function lH(t,n,e,r){const i=e.map((u,h)=>{const m={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:!u.isUniform&&u.texData.isPacked,flatOffset:null};return null!=u.texData&&null!=u.texData.slice&&u.texData.slice.flatOffset>0&&(m.flatOffset=u.texData.slice.flatOffset),{name:n.variableNames[h],shapeInfo:m}}),s=i.map(u=>u.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=Dj(i,o,n),l=function nj(t,n){const e=rl(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Dt(t,()=>t.shaderSource(e,n)),Dt(t,()=>t.compileShader(e)),(0,g.env)().get("ENGINE_COMPILE_ONLY"))return e;if(!1===t.getShaderParameter(e,t.COMPILE_STATUS))throw kT(n,t.getShaderInfoLog(e)),new Error("Failed to compile fragment shader.");return e}(t.gl,a),c=t.createProgram(l);return(0,g.env)().get("ENGINE_COMPILE_ONLY")?{program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:o},UT(t,n,c)))}(this.gpgpu,e,h,m)),k=null!=this.activeTimers;let P;k&&(P=this.startTimer()),(0,g.env)().get("ENGINE_COMPILE_ONLY")||function cH(t,n,e,r,i){n.program.enableShapeUniforms||(jT(n.inShapeInfos,e),jT([n.outShapeInfo],[r]));const s=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,o[0],o[1]):t.setOutputMatrixTexture(s.texture,o[0],o[1]),t.setProgram(n.webGLProgram),t.bindVertexArray(n.webGLProgram.vao),1===(0,g.env)().getNumber("WEBGL_VERSION")&&null!==n.infLoc&&t.gl.uniform1f(n.infLoc,1/0),null!==n.nanLoc&&t.gl.uniform1f(n.nanLoc,NaN);for(let l=0;l<e.length;++l){const c=e[l],{uniform:u,offset:h,shape:m,texShape:y}=n.variablesLocations[l];if(m){const{uniformShape:C}=Y0(n.program.packedInputs,c.shape,c.texData.texShape);switch(C.length){case 1:t.gl.uniform1iv(m,new Int32Array(C));break;case 2:t.gl.uniform2iv(m,new Int32Array(C));break;case 3:t.gl.uniform3iv(m,new Int32Array(C));break;case 4:t.gl.uniform4iv(m,new Int32Array(C))}}if(y&&t.gl.uniform2i(y,c.texData.texShape[0],c.texData.texShape[1]),null!=u){if(c.isUniform){if(g.util.sizeFromShape(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let C=c.uniformValues;C instanceof Float32Array||(C=new Float32Array(C)),t.gl.uniform1fv(u,C)}continue}null!=c.texData.slice&&null!=h&&t.gl.uniform1i(h,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=n.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape))}if(n.outShapeStridesLocation){const l=g.util.computeStrides(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(n.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(n.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(n.outShapeStridesLocation,new Int32Array(l))}}if(n.outTexShapeLocation&&t.gl.uniform2i(n.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),n.program.customUniforms&&i)for(let l=0;l<n.program.customUniforms.length;++l){const c=n.program.customUniforms[l],u=n.customUniformLocations[l],h=i[l];if("float"===c.type)t.gl.uniform1fv(u,h);else if("vec2"===c.type)t.gl.uniform2fv(u,h);else if("vec3"===c.type)t.gl.uniform3fv(u,h);else if("vec4"===c.type)t.gl.uniform4fv(u,h);else if("int"===c.type)t.gl.uniform1iv(u,h);else if("ivec2"===c.type)t.gl.uniform2iv(u,h);else if("ivec3"===c.type)t.gl.uniform3iv(u,h);else{if("ivec4"!==c.type)throw Error(`uniform type ${c.type} is not supported yet.`);t.gl.uniform4iv(u,h)}}t.executeProgram()}(this.gpgpu,C,h,m,s),u.forEach(V=>this.disposeIntermediateTensorInfo(V)),k&&(P=this.endTimer(P),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(P)}));const B=(0,g.env)().getNumber("WEBGL_FLUSH_THRESHOLD");if(B>0){const V=g.util.now();V-this.lastGlFlushTime>B&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=V)}if(!(0,g.env)().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&!1===o){const V=this.unpackTensor(l);return this.disposeIntermediateTensorInfo(l),V}return l}compileAndRun(e,r,i,s,o=!1){return this.runWebGLProgram(e,r,i=i||r[0].dtype,s,o)}getAndSaveBinary(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||((0,g.env)().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(r=>{this.gpgpu.deleteProgram(this.binaryCache[r].webGLProgram),delete this.binaryCache[r]}),this.textureManager.dispose(),null!=this.canvas&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,g.tidy)(()=>{if(!(0,g.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=(0,g.env)().getBool("DEBUG");(0,g.env)().set("DEBUG",!1);const r=this.abs((0,g.scalar)(1e-8)).dataSync()[0];if((0,g.env)().set("DEBUG",e),r>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const r=this.texData.get(e),{shape:i,dtype:s,values:o,texture:a,usage:l,isPacked:c}=r;if(null!=a)return;const u=null!=this.activeTimers;let h;u&&(h=g.util.now());let m=r.texShape;if(null==m&&(m=function gj(t,n=!1){let e=(0,g.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=(0,g.env)().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&(0,g.env)().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=e/2),n&&(e*=2,r*=2,1===(t=t.map((a,l)=>l>=t.length-2?g.util.nearestLargerEven(t[l]):t[l])).length&&(t=[2,t[0]])),2!==t.length&&(t=g.util.squeezeShape(t).newShape);let i=g.util.sizeFromShape(t),s=null;t.length<=1&&i<=e?s=[1,i]:2===t.length&&t[0]<=e&&t[1]<=e?s=t:3===t.length&&t[0]*t[1]<=e&&t[2]<=e?s=[t[0]*t[1],t[2]]:3===t.length&&t[0]<=e&&t[1]*t[2]<=e?s=[t[0],t[1]*t[2]]:4===t.length&&t[0]*t[1]*t[2]<=e&&t[3]<=e?s=[t[0]*t[1]*t[2],t[3]]:4===t.length&&t[0]<=e&&t[1]*t[2]*t[3]<=e&&(s=[t[0],t[1]*t[2]*t[3]]);const o=null!=s&&Math.max(...s)>r&&Math.min(...s)<=(n?2:1)&&Math.min(...s)>0;if(null==s||o)if(n){const a=ld(t);let l=2,c=2;t.length&&([l,c]=cd(t)),i=a*(l/2)*(c/2),s=g.util.sizeToSquarishShape(i).map(u=>2*u)}else s=g.util.sizeToSquarishShape(i);return s}(i,c),r.texShape=m),null!=o){const y=Pg(i);let C,k=m[1],P=m[0];const B=o instanceof Uint8Array||o instanceof Uint8ClampedArray;(c||!B)&&([k,P]=ad(m[0],m[1])),C=c?new gH(y,B):new HT(y,B);const V=B?[P,k]:m,fe=this.makeTensorInfo(V,s),ve=this.texData.get(fe.dataId);ve.usage=B?vo.PIXELS:vo.UPLOAD,ve.texShape=V,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(fe.dataId),k,P,o);const dt=this.runWebGLProgram(C,[fe],s,[[P,k]],!0),ht=this.texData.get(dt.dataId);r.texShape=ht.texShape,r.isPacked=ht.isPacked,r.usage=ht.usage,(0,g.env)().get("ENGINE_COMPILE_ONLY")?this.disposeData(dt.dataId):(r.texture=ht.texture,r.values=null,this.texData.delete(dt.dataId)),this.disposeIntermediateTensorInfo(fe),u&&(this.uploadWaitMs+=g.util.now()-h)}else{const y=this.acquireTexture(m,l,s,c);r.texture=y}}convertAndCacheOnCPU(e,r){const i=this.texData.get(e),{dtype:s}=i;return null!=r&&(i.values=function r5(t,n){if("float32"===n||"complex64"===n)return t;if("int32"===n||"bool"===n){const e="int32"===n?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<e.length;++r)e[r]=Math.round(t[r]);return e}throw new Error(`Unknown dtype ${n}`)}(r,s)),i.values}acquireTexture(e,r,i,s){if(this.numBytesInGPU+=this.computeBytes(e,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${o} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,r,s)}computeBytes(e,r){return e[0]*e[1]*g.util.bytesPerElement(r)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}checkCompileCompletionAsync(){var e=this;return(0,Mc.Z)(function*(){const r=[];if(e.gpgpu.parallelCompilationExtension){for(const[,i]of Object.entries(e.binaryCache))r.push(e.checkCompletionAsync_(i));return Promise.all(r)}for(const[,i]of Object.entries(e.binaryCache)){const s=new Promise(o=>{try{e.checkCompletion_(i),o(!0)}catch(a){throw a}});r.push(s)}return Promise.all(r)})()}checkCompletionAsync_(e){var r=this;return(0,Mc.Z)(function*(){return r.gpgpu.gl.getProgramParameter(e.webGLProgram,r.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?r.checkCompletion_(e):(yield(0,g.nextFrame)(),r.checkCompletionAsync_(e))})()}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS))throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)?(kT(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:r,customUniformLocations:i,infLoc:s,nanLoc:o,outShapeLocation:a,outShapeStridesLocation:l,outTexShapeLocation:c}=UT(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=r,e.customUniformLocations=i,e.infLoc=s,e.nanLoc=o,e.outShapeLocation=a,e.outShapeStridesLocation=l,e.outTexShapeLocation=c}}createTensorFromGPUData(e,r,i){e.channels=e.channels||"RGBA";const{texture:s,height:o,width:a,channels:l}=e,c=(0,g.engine)().backend;if(!c.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=c.writeTexture(s,r,i,o,a,l);return(0,g.engine)().makeTensorFromDataId(u,r,i,c)}}return t.nextDataId=0,t})();g.device_util.isBrowser()&&(0,g.registerBackend)("webgl",()=>new n5,2);const ix="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class kc{constructor(n,e,r){this.variableNames=["A","B"],this.outputShape=g.backend_util.assertAndGetBroadcastShape(e,r),this.enableShapeUniforms=xi(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${n}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}const Oc="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class pd{constructor(n,e,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=g.backend_util.assertAndGetBroadcastShape(e,r);const s=this.outputShape.length;this.enableShapeUniforms=xi(s);let o="";if(i)if(0===s||1===g.util.sizeFromShape(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o=`\n          ${Xn(s)} coords = getOutputCoords();\n        `,1===s)o+=this.enableShapeUniforms?"\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const l=Fi("coords",s);o+=this.enableShapeUniforms?`\n            bool nextRowOutOfBounds =\n              (${l[s-2]} + 1) >= outShape[${s} - 2];\n            bool nextColOutOfBounds =\n              (${l[s-1]} + 1) >= outShape[${s} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:`\n            bool nextRowOutOfBounds =\n              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};\n            bool nextColOutOfBounds =\n              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${n}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${o}\n\n        setOutput(result);\n      }\n    `}}function Ms(t){const{inputs:n,backend:e}=t,{x:r}=n;return e.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const o5={kernelName:g.Identity,backendName:"webgl",kernelFunc:Ms};function Hl(t){const{inputs:n,backend:e}=t,{real:r,imag:i}=n,s=e.makeTensorInfo(r.shape,"complex64"),o=e.texData.get(s.dataId),a=Ms({inputs:{x:r},backend:e}),l=Ms({inputs:{x:i},backend:e});return o.complexTensorInfos={real:a,imag:l},s}const a5={kernelName:g.Complex,backendName:"webgl",kernelFunc:Hl},$M="return (a < 0.) ? b * a : a;",LM="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",c5={kernelName:g.LeakyRelu,backendName:"webgl",kernelFunc:function l5(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{alpha:s}=r,o=e.makeTensorInfo([],"float32",g.util.createScalarValue(s,"float32")),a=(0,g.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pd(LM,i.shape,o.shape):new kc($M,i.shape,o.shape),l=e.runWebGLProgram(a,[i,o],"float32");return e.disposeIntermediateTensorInfo(o),l}},BM="return (a < 0.) ? b * a : a;",VM="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",d5={kernelName:g.Prelu,backendName:"webgl",kernelFunc:function u5(t){const{inputs:n,backend:e}=t,{x:r,alpha:i}=n,s=(0,g.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pd(VM,r.shape,i.shape):new kc(BM,r.shape,i.shape);return e.runWebGLProgram(s,[r,i],"float32")}},md="if (isnan(x)) return x;";function Mn({opSnippet:t,packedOpSnippet:n,cpuKernelImpl:e,dtype:r}){return({inputs:i,backend:s})=>{const{x:o}=i,a=s,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&null!=e){const h=a.texData.get(o.dataId),m=e(h.values,l);return a.makeTensorInfo(o.shape,l,m)}let u;return u=(0,g.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new jl(o.shape,n):new Ea(o.shape,t),a.runWebGLProgram(u,[o],l)}}function ai({opSnippet:t,packedOpSnippet:n,checkOutOfBounds:e=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(r&&"complex64"===l.dtype){const C=u.texData.get(l.dataId),k=u.texData.get(c.dataId),[P,B]=[[C.complexTensorInfos.real,k.complexTensorInfos.real],[C.complexTensorInfos.imag,k.complexTensorInfos.imag]].map(fe=>{const[ve,Ve]=fe,gt={dataId:ve.dataId,dtype:ve.dtype,shape:l.shape},dt={dataId:Ve.dataId,dtype:Ve.dtype,shape:c.shape},ht=new kc(t,l.shape,c.shape);return u.runWebGLProgram(ht,[gt,dt],(0,g.upcastType)(ve.dtype,Ve.dtype))}),V=Hl({inputs:{real:P,imag:B},backend:u});return u.disposeIntermediateTensorInfo(P),u.disposeIntermediateTensorInfo(B),V}const h=s||(0,g.upcastType)(l.dtype,c.dtype);if(("string"===l.dtype||"string"===c.dtype||u.shouldExecuteOnCPU([l,c]))&&null!=i){const C=u.texData.get(l.dataId).values,k=u.texData.get(c.dataId).values,P="string"===l.dtype?g.backend_util.fromUint8ToStringArray(C):C,B="string"===l.dtype?g.backend_util.fromUint8ToStringArray(k):k,[V,fe]=i(l.shape,c.shape,P,B,h),ve=u.makeTensorInfo(fe,h);return u.texData.get(ve.dataId).values=V,ve}let y;return y=(0,g.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new pd(n,l.shape,c.shape,e):new kc(t,l.shape,c.shape),u.runWebGLProgram(y,[l,c],h)}}function Tf(t,n=!1){if("linear"===t)return n?jG:LG;if("relu"===t)return n?WG:VG;if("elu"===t)return n?HG:BG;if("relu6"===t)return n?GG:zG;if("prelu"===t)return n?VM:BM;if("leakyrelu"===t)return n?LM:$M;if("sigmoid"===t)return n?KG:UG;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}class zM{constructor(n,e,r,i=!1,s=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=xi(this.outputShape.length);const h=Math.ceil((i?n[1]:n[2])/2),m=i?"i * 2, rc.y":"rc.y, i * 2",y=s?"rc.z, i * 2":"i * 2, rc.z",C=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],k=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let P="",B="";a&&(P=l?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${a}\n        }`:c?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${a}\n        }`:`vec4 activation(vec4 x) {\n          ${a}\n        }`,B="result = activation(result);");const V=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let fe="rc.x",ve="rc.x";n[0]<e[0]?fe=`imod(rc.x, ${n[0]})`:e[0]<n[0]&&(ve=`imod(rc.x, ${e[0]})`),this.userCode=`\n      ${P}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${h}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${fe};\n        int batchB = ${ve};\n        for (int i = 0; i < ${h}; i++) {\n          vec4 a = getMatrixA(batchA, ${m});\n          vec4 b = getMatrixB(batchB, ${y});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${C[0]} * ${k[0]});\n          result += (${C[1]} * ${k[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${V}\n\n        ${B}\n\n        setOutput(result);\n      }\n    `}}const UM={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class jM{constructor(n,e,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=g.backend_util.assertAndGetBroadcastShape(e,r),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${n}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const HM="return a * b;";function sx(t){const{inputs:n,backend:e}=t,{a:r,b:i}=n,s=g.backend_util.upcastType(r.dtype,i.dtype);if("complex64"===r.dtype){const a=e.texData.get(r.dataId),l=e.texData.get(i.dataId),c=new jM(UM.REAL,r.shape,i.shape),u=new jM(UM.IMAG,r.shape,i.shape),h=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],m=e.runWebGLProgram(c,h,"float32"),y=e.runWebGLProgram(u,h,"float32"),C=Hl({inputs:{real:m,imag:y},backend:e});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(y),C}if(e.shouldExecuteOnCPU([r,i])){const a=e.texData.get(r.dataId),l=e.texData.get(i.dataId),[c,u]=aG(r.shape,i.shape,a.values,l.values,s),h=e.makeTensorInfo(u,s);return e.texData.get(h.dataId).values=c,h}let o;return o=(0,g.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pd(HM,r.shape,i.shape):new kc(HM,r.shape,i.shape),e.runWebGLProgram(o,[r,i],s)}const h5={kernelName:g.Multiply,backendName:"webgl",kernelFunc:sx};function Ct(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{shape:s}=r,o=e,a=g.util.sizeFromShape(i.shape),l=g.util.inferFromImplicitShape(s,a),c=g.util.sizeFromShape(l);g.util.assert(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(i.dataId);return!u.isPacked||$g(i.shape,l)||null!==u.texture&&$g(u.shape,l)?(o.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype}):function f5(t,n,e){const r=[ld(t.shape),...cd(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[ld(n),...cd(n)],o=new RM(s,r),c=e.runWebGLProgram(o,[i],t.dtype,[r],!0);return{dataId:c.dataId,shape:n,dtype:c.dtype}}(i,l,o)}const p5={kernelName:g.Reshape,backendName:"webgl",kernelFunc:Ct};class WM{constructor(n,e){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=n;this.outputShape=[i,o];const a=4*Math.floor(r/4),l=r%4;let c="sumValue += dot(values, ones);";if(null!=e){const h=1/e;c=`sumValue += dot(values * ${g.util.isInt(h)?h.toPrecision(2):h}, ones);`}let u="";s%r>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${c}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===l}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${c}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${c}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${c}\n        }\n        setOutput(sumValue);\n      }\n    `}}class m5{constructor(n,e){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=n;this.outputShape=[i,o];let a="0.0",l="";"prod"===e?a="1.0":"min"===e?(a="1.0 / 1e-20",l="min"):"max"===e&&(a="-1.0 / 1e-20",l="max");let c=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===e?c="sumValue":"prod"===e?c="prodValue":"all"===e?c="allValue":"any"===e&&(c="anyValue");const u=4*Math.floor(r/4),h=r%4;let m=`\n      if (${"sum"===e}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===e}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${l}(values, minMaxValue);\n        if (${"min"===e} || ${"max"===e}) {\n          minMaxValue = ${l}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,y="vec4";"all"===e?(a="1.0",m="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",y="bvec4"):"any"===e&&(a="0.0",m="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",y="bvec4");let C="";s%r>0&&(C=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${a};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${C}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        vec4 minMaxValue = vec4(${a});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${y} values = ${y}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${m}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===h}) {\n          ${y} values = ${y}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${m}\n        } else if (${2===h}) {\n          ${y} values = ${y}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${m}\n        } else if (${3===h}) {\n          ${y} values = ${y}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${m}\n        }\n        setOutput(${c});\n      }\n    `}}function Pc(t,n,e,r){const i=function g5(t){const n=[];for(;0===n.length||1!==n[n.length-1].outSize;){const e=n.length?n[n.length-1].outSize:t[1],r=g.backend_util.computeOptimalWindowSize(e);n.push({inSize:e,windowSize:r,outSize:Math.ceil(e/r)})}return n}(t.shape);let s=t;for(let o=0;o<i.length;o++){const{inSize:a,windowSize:l,outSize:c}=i[o];let u,h;u="mean"===e?0===o?new WM({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new WM({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):new m5({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},e),h=s,s=r.runWebGLProgram(u,[s],n),h.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(h)}return s}class y5{constructor(n,e){this.variableNames=["A"];const r=new Array(n.length);for(let o=0;o<r.length;o++)r[o]=n[e[o]];this.outputShape=r,this.rank=r.length;const i=Xn(this.rank),s=function _5(t){const n=t.length;if(n>6)throw Error(`Transpose for rank ${n} is not yet supported`);const e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(n);for(let i=0;i<t.length;i++)r[t[i]]=e[i];return r.join()}(e);this.userCode=`\n    void main() {\n      ${i} resRC = getOutputCoords();\n      setOutput(getA(${s}));\n    }\n    `}}class b5{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(n.length);for(let u=0;u<r.length;u++)r[u]=n[e[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Xn(this.rank),s=NM("rc",this.rank),o=new Array(this.rank);for(let u=0;u<e.length;u++)o[e[u]]=s[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`\n    void main() {\n      ${i} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${c};\n      if(${l}) {\n        result[1] = ${c};\n      }\n      --${s[this.rank-1]};\n      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {\n        result[2] = ${c};\n        if(${l}) {\n          result[3] = ${c};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function Wg(t,n,e){const r=(0,g.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new b5(t.shape,n):new y5(t.shape,n);return e.runWebGLProgram(r,[t],t.dtype)}function Gg(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{axis:s,keepDims:o}=r;return function v5(t,n,e,r){const s=t.shape.length,o=g.util.parseAxisParam(n,t.shape);let a=o;const l=g.backend_util.getAxesPermutation(a,s),c=null!=l;let u=t;c&&(u=Wg(t,l,r),a=g.backend_util.getInnerMostAxes(a.length,s)),g.backend_util.assertAxesAreInnerMostDims("sum",a,s);const[h,m]=g.backend_util.computeOutAndReduceShapes(u.shape,a);let y=h;e&&(y=g.backend_util.expandShapeToKeepDim(h,o));const C=g.util.sizeFromShape(m),B=Ct({inputs:{x:u},attrs:{shape:[g.util.sizeFromShape(t.shape)/C,C]},backend:r}),fe=Pc(B,(0,g.sumOutType)(t.dtype),"sum",r),ve=Ct({inputs:{x:fe},attrs:{shape:y},backend:r});return r.disposeIntermediateTensorInfo(B),r.disposeIntermediateTensorInfo(fe),c&&r.disposeIntermediateTensorInfo(u),ve}(i,s,o,e)}const x5={kernelName:g.Sum,backendName:"webgl",kernelFunc:Gg};function $i(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{perm:s}=r,o=e,l=new Array(i.shape.length);for(let u=0;u<l.length;u++)l[u]=i.shape[s[u]];let c;if(o.shouldExecuteOnCPU([i])){const h=o.texData.get(i.dataId).values,m=rx(h,i.shape,i.dtype,s,l);c=o.makeTensorInfo(l,i.dtype),o.texData.get(c.dataId).values=m}else c=Wg(i,s,o);return c}const w5={kernelName:g.Transpose,backendName:"webgl",kernelFunc:$i},GM=1e3;function Kg({a:t,b:n,transposeA:e,transposeB:r,backend:i,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=n.shape.length,h=e?t.shape[c-2]:t.shape[c-1],m=r?n.shape[u-1]:n.shape[u-2],y=e?t.shape[c-1]:t.shape[c-2],C=r?n.shape[u-2]:n.shape[u-1],k=t.shape.slice(0,-2),P=n.shape.slice(0,-2),B=g.util.sizeFromShape(k),V=g.util.sizeFromShape(P),ve=g.broadcast_util.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,C]);g.util.assert(h===m,()=>`Error in matMul: inner shapes (${h}) and (${m}) of Tensors with shapes ${t.shape} and ${n.shape} and transposeA=${e} and transposeB=${r} must match.`);const Ve=e?[B,h,y]:[B,y,h],gt=r?[V,C,m]:[V,m,C],dt=Ct({inputs:{x:t},backend:i,attrs:{shape:Ve}}),ht=Ct({inputs:{x:n},backend:i,attrs:{shape:gt}}),Gt=[dt,ht],zt=Math.max(B,V),Hn=e?dt.shape[1]:dt.shape[2],Ln=null!=s,ui=null!=o,wi="leakyrelu"===l,Vi=null!=l?Tf(l,!0):null;let $t;if((1===y||1===C)&&Hn>GM&&!1===(Ln||ui||wi||null!=Vi)){let mn=dt,pr=ht;e&&(mn=$i({inputs:{x:dt},backend:i,attrs:{perm:[0,2,1]}}),Gt.push(mn)),r&&(pr=$i({inputs:{x:ht},backend:i,attrs:{perm:[0,2,1]}}),Gt.push(pr));const di=1===C;let Do=mn;1!==C&&(Do=Ct({inputs:{x:mn},backend:i,attrs:{shape:[zt,Hn,1]}}),Gt.push(Do));const mr=1===C?2:1;let Vd=pr;di&&(Vd=Ct({inputs:{x:pr},backend:i,attrs:{shape:[zt,1,Hn]}}),Gt.push(Vd));const f_=sx({inputs:{a:Do,b:Vd},backend:i});$t=Gg({inputs:{x:f_},backend:i,attrs:{axis:mr,keepDims:!0}}),Gt.push(f_)}else{const mn=(0,g.upcastType)(t.dtype,n.dtype),pr=new zM(Ve,gt,[zt,y,C],e,r,Ln,Vi,ui,wi),Ci=[dt,ht];if(null!=s&&Ci.push(s),ui&&Ci.push(o),wi){const di=i.makeTensorInfo([],"float32",g.util.createScalarValue(a,"float32"));Ci.push(di),Gt.push(di)}$t=i.runWebGLProgram(pr,Ci,mn)}const Ft=Ct({inputs:{x:$t},backend:i,attrs:{shape:ve}});Gt.push($t);for(const mn of Gt)i.disposeIntermediateTensorInfo(mn);return Ft}const E5={kernelName:g._FusedMatMul,backendName:"webgl",kernelFunc:function C5(t){const{inputs:n,backend:e,attrs:r}=t,{a:i,b:s,bias:o,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;return Kg({a:i,b:s,transposeA:l,transposeB:c,backend:e,bias:o,preluActivationWeights:a,leakyreluAlpha:h,activation:u})}},KM="return abs(x);",D5={kernelName:g.Abs,backendName:"webgl",kernelFunc:function S5(t){const{inputs:n,backend:e}=t,{x:r}=n;if(e.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const s=e.texData.get(r.dataId),o=MM(s.values);return e.makeTensorInfo(r.shape,r.dtype,o)}let i;return i=(0,g.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new jl(r.shape,KM):new Ea(r.shape,KM),e.runWebGLProgram(i,[r],r.dtype)}},T5=Mn({opSnippet:Xs+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),M5={kernelName:g.Acos,backendName:"webgl",kernelFunc:T5},N5=Mn({opSnippet:Xs+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),R5={kernelName:g.Acosh,backendName:"webgl",kernelFunc:N5},XM="return a + b;",k5=ai({opSnippet:XM,packedOpSnippet:XM,supportsComplex:!0,cpuKernelImpl:VW}),O5={kernelName:g.Add,backendName:"webgl",kernelFunc:k5};class P5{constructor(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`\n      void main() {\n        ${r.join("\n        ")}\n\n        float result = ${i};\n        setOutput(result);\n      }\n    `}}class F5{constructor(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`\n      void main() {\n        ${r.join("\n        ")}\n\n        vec4 result = ${i};\n        setOutput(result);\n      }\n    `}}const $5={kernelName:g.AddN,backendName:"webgl",kernelFunc:function Xg(t){const{inputs:n,backend:e}=t,r=n;if(1===r.length)return Ms({inputs:{x:r[0]},backend:e});if(r.length>(0,g.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=Xg({inputs:r.slice(0,l),backend:e}),u=Xg({inputs:r.slice(l),backend:e});return Xg({inputs:[c,u],backend:e})}const i=r.map(l=>l.dtype).reduce((l,c)=>(0,g.upcastType)(l,c)),s=r.map(l=>l.shape),a=(0,g.env)().getBool("WEBGL_PACK")?new F5(r[0].shape,s):new P5(r[0].shape,s);return e.runWebGLProgram(a,r,i)}},B5={kernelName:g.All,backendName:"webgl",kernelFunc:function L5(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{axis:s,keepDims:o}=r,a=i.shape.length,l=g.util.parseAxisParam(s,i.shape);let c=l;const u=g.backend_util.getAxesPermutation(c,a);let h=i;null!=u&&(h=$i({inputs:{x:i},backend:e,attrs:{perm:u}}),c=g.backend_util.getInnerMostAxes(c.length,a)),g.backend_util.assertAxesAreInnerMostDims("all",c,a);const[m,y]=g.backend_util.computeOutAndReduceShapes(h.shape,c),k=Ct({inputs:{x:h},backend:e,attrs:{shape:[-1,g.util.sizeFromShape(y)]}}),P=Pc(k,k.dtype,"all",e);let B;return B=Ct(o?{inputs:{x:P},backend:e,attrs:{shape:g.backend_util.expandShapeToKeepDim(m,l)}}:{inputs:{x:P},backend:e,attrs:{shape:m}}),e.disposeIntermediateTensorInfo(k),e.disposeIntermediateTensorInfo(P),null!=u&&e.disposeIntermediateTensorInfo(h),B}},z5={kernelName:g.Any,backendName:"webgl",kernelFunc:function V5(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{axis:s,keepDims:o}=r,a=i.shape.length,l=g.util.parseAxisParam(s,i.shape);let c=l;const u=g.backend_util.getAxesPermutation(c,a);let h=i;null!=u&&(h=$i({inputs:{x:i},backend:e,attrs:{perm:u}}),c=g.backend_util.getInnerMostAxes(c.length,a)),g.backend_util.assertAxesAreInnerMostDims("any",c,a);const[m,y]=g.backend_util.computeOutAndReduceShapes(h.shape,c),k=Ct({inputs:{x:h},backend:e,attrs:{shape:[-1,g.util.sizeFromShape(y)]}}),P=Pc(k,k.dtype,"any",e);let B;return B=Ct(o?{inputs:{x:P},backend:e,attrs:{shape:g.backend_util.expandShapeToKeepDim(m,l)}}:{inputs:{x:P},backend:e,attrs:{shape:m}}),e.disposeIntermediateTensorInfo(k),e.disposeIntermediateTensorInfo(P),null!=u&&e.disposeIntermediateTensorInfo(h),B}};class U5{constructor(n,e,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:o}=n;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${i}; i++) {\n          int inIdx = ${r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${"max"===e?">":"<"} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class j5{constructor(n,e,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,g.util.assert(n.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const o=Math.ceil(n[n.length-1]/e);this.outputShape=n.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=Xn(l),u=Fi("coords",l);let h,m;if(1===o){m=l+1;const ht=Xn(m);h=`\n        ${ht} sourceLocR = ${ht}(${u.join()}, 0);\n        ++${u[l-1]};\n        ${ht} sourceLocG = ${ht}(${u.join()}, 0);\n        ++${u[l-2]};\n        ${ht} sourceLocA = ${ht}(${u.join()}, 0);\n        --${u[l-1]};\n        ${ht} sourceLocB = ${ht}(${u.join()}, 0);\n        --${u[l-2]};`}else m=l,h=`\n        ${c} sourceLocR = coords;\n        ++${u[l-1]};\n        ${c} sourceLocG = coords;\n        ++${u[l-2]};\n        ${c} sourceLocA = coords;\n        --${u[l-1]};\n        ${c} sourceLocB = coords;\n        --${u[l-2]};`;const y=["x","y","z","w","u","v"].slice(0,m),C="."+y[m-1],k=y.map(ht=>"int "+ht),P=Fi("sourceLocR",m-1).concat("inIdx.r"),B=Fi("sourceLocG",m-1).concat("inIdx.g"),V=Fi("sourceLocB",m-1).concat("inIdx.b"),fe=Fi("sourceLocA",m-1).concat("inIdx.a"),ve="max"===r?"greaterThan":"lessThan",Ve=i?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${P.join()}),\n                             getBestIndicesAChannel(${B.join()}),\n                             getBestIndicesAChannel(${V.join()}),\n                             getBestIndicesAChannel(${fe.join()})));`,gt=`vec4(\n            getAChannel(${P.join()}),\n            hasNextCol ? getAChannel(${B.join()}) : 0.,\n            hasNextRow ? getAChannel(${V.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${fe.join()}) : 0.)`,dt=i?"":`\n      float getBestIndicesAChannel(${k.join()}) {\n        return getChannel(getBestIndicesA(${y.join()}),\n                                          vec2(${y.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${k.join()}) {\n        return getChannel(getA(${y.join()}),\n                               vec2(${y.slice(-2).join()}));\n      }\n      ${dt}\n      void main() {\n        ${c} coords = getOutputCoords();\n        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};\n        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};\n        ${h}\n        ivec4 srcIdx = ivec4(sourceLocR${C}, sourceLocG${C},\n          sourceLocB${C}, sourceLocA${C}) * ${e};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${gt};\n\n        for (int i = 0; i < ${e}; i++) {\n          inIdx = srcIdx;\n          ${Ve}\n          vec4 candidate = ${gt};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${ve}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function qM(t,n,e,r=null){let i=n.shape[0],s=n.shape[1];null!=r&&(i=r.shape[0],s=r.shape[1]);const o=g.backend_util.computeOptimalWindowSize(s),a={windowSize:o,inSize:s,batchSize:i,outSize:Math.ceil(s/o)},l=new U5(a,e,null==r),c=[n];null!=r&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(1===u.shape[1])return u;const h=qM(t,n,e,u);return t.disposeIntermediateTensorInfo(u),h}function ZM(t,n,e,r=null){const i=null!=r?r.shape:n.shape,o=g.backend_util.computeOptimalWindowSize(i[i.length-1]),a=new j5(i,o,e,null==r),c=t.runWebGLProgram(a,null==r?[n]:[n,r],"int32");if(c.shape.length===n.shape.length){const u=ZM(t,n,e,c);return t.disposeIntermediateTensorInfo(c),u}return c}function YM(t,n,e,r){const i=[e];if(g.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,n.shape.length),!(0,g.env)().getBool("WEBGL_PACK_REDUCE")||n.shape.length<=2){const s=[],o=t.texData.get(n.dataId);let l=n;null!==o&&o.isPacked&&(l=t.unpackTensor(n),s.push(l));const[c,u]=g.backend_util.computeOutAndReduceShapes(l.shape,i),h=g.util.sizeFromShape(u),m=Ct({inputs:{x:l},backend:t,attrs:{shape:[-1,h]}});s.push(m);const y=qM(t,m,r);s.push(y);const C=Ct({inputs:{x:y},backend:t,attrs:{shape:c}});return s.forEach(k=>t.disposeIntermediateTensorInfo(k)),C}return ZM(t,n,r)}const W5={kernelName:g.ArgMax,backendName:"webgl",kernelFunc:function H5(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{axis:s}=r;let o=g.util.parseAxisParam(s,i.shape);const a=g.backend_util.getAxesPermutation(o,i.shape.length);let l=i;const c=[];null!=a&&(l=$i({inputs:{x:i},backend:e,attrs:{perm:a}}),c.push(l),o=g.backend_util.getInnerMostAxes(o.length,l.shape.length)),g.backend_util.assertAxesAreInnerMostDims("argMax",[o[0]],l.shape.length);const u=YM(e,l,o[0],"max");return c.forEach(h=>e.disposeIntermediateTensorInfo(h)),u}},K5={kernelName:g.ArgMin,backendName:"webgl",kernelFunc:function G5(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{axis:s}=r;let o=g.util.parseAxisParam(s,i.shape);const a=g.backend_util.getAxesPermutation(o,i.shape.length);let l=i;const c=[];null!=a&&(l=$i({inputs:{x:i},backend:e,attrs:{perm:a}}),c.push(l),o=g.backend_util.getInnerMostAxes(o.length,l.shape.length)),g.backend_util.assertAxesAreInnerMostDims("argMin",[o[0]],l.shape.length);const u=YM(e,l,o[0],"min");return c.forEach(h=>e.disposeIntermediateTensorInfo(h)),u}},q5=Mn({opSnippet:Xs+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),Z5={kernelName:g.Asin,backendName:"webgl",kernelFunc:q5},Q5=Mn({opSnippet:Xs+"return log(x + sqrt(x * x + 1.0));"}),J5={kernelName:g.Asinh,backendName:"webgl",kernelFunc:Q5},t6=Mn({opSnippet:Xs+"\n  return atan(x);\n"}),n6={kernelName:g.Atan,backendName:"webgl",kernelFunc:t6},s6=ai({opSnippet:ix+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Oc+"\n  return result;\n"}),o6={kernelName:g.Atan2,backendName:"webgl",kernelFunc:s6},l6=Mn({opSnippet:Xs+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),c6={kernelName:g.Atanh,backendName:"webgl",kernelFunc:l6};class Mf{constructor(n,e,r,i=!1,s=!1){if(this.variableNames=["x"],"avg"===e&&r)throw new Error("Cannot compute positions for average pool.");const o=n.filterWidth,a=n.strideHeight,l=n.strideWidth,c=n.dilationHeight,u=n.dilationWidth,h=n.effectiveFilterHeight,m=n.effectiveFilterWidth,y=n.padInfo.top,C=n.padInfo.left;this.outputShape=n.outShape;const k="avg"===e;let V="0.0";if(k||(V="-1.0 / 1e-20"),r)return void(this.userCode=`\n        const ivec2 strides = ivec2(${a}, ${l});\n        const ivec2 pads = ivec2(${y}, ${C});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${h};\n              wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${m};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${i?s?`((batch  * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + d`:`(xR * ${n.inWidth} + xC) * ${n.inChannels} + d`:`wR * ${m} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let ve=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(ve="avgValue / max(count, 1.0)");const Ve=4*Math.floor(o/4),gt=o%4,dt=`\n      if (${k}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${l});\n      const ivec2 pads = ivec2(${y}, ${C});\n      const float initializationValue = ${V};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${n.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${V});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${h};\n            wR += ${c}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${Ve}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${dt}\n          }\n\n          int xC = xCCorner + ${Ve};\n          if (${1===gt}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${dt}\n          } else if (${2===gt}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${dt}\n          } else if (${3===gt}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${dt}\n          }\n        }\n        setOutput(${ve});\n      }\n    `}}class ox{constructor(n,e,r,i=!1,s=!1){if(this.variableNames=["x"],"avg"===e&&r)throw new Error("Cannot compute positions for average pool.");const o=n.filterWidth,a=n.strideDepth,l=n.strideHeight,c=n.strideWidth,u=n.dilationDepth,h=n.dilationHeight,m=n.dilationWidth,y=n.effectiveFilterDepth,C=n.effectiveFilterHeight,k=n.effectiveFilterWidth,P=n.padInfo.front,B=n.padInfo.top,V=n.padInfo.left;this.outputShape=n.outShape;const fe="avg"===e;let ve="0.0";if(fe||(ve="-1.0 / 1e-20"),r)return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${a}, ${l}, ${c});\n        const ivec3 pads = ivec3(${P}, ${B}, ${V});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${y};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${n.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${C};\n                wR += ${h}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${n.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${k};\n                  wC += ${m}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${n.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${i?s?`(((batch * ${n.inDepth} + xD) * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`((xD * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`wD * ${C} * ${k} +\n                      wR * ${k} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let gt=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(gt="avgValue / max(count, 1.0)");const dt=4*Math.floor(o/4),ht=o%4,Gt=`\n      if (${fe}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${a}, ${l}, ${c});\n      const ivec3 pads = ivec3(${P}, ${B}, ${V});\n      const float initializationValue = ${ve};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${n.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${ve});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${y};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${n.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${C};\n            wR += ${h}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${dt}; wC += 4) {\n              int xC = xCCorner + wC * ${m};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${m}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${m}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${m}, ch)\n              );\n\n              ${Gt}\n            }\n\n            int xC = xCCorner + ${dt};\n            if (${1===ht}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${Gt}\n            } else if (${2===ht}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${m}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${Gt}\n            } else if (${3===ht}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${m}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${m}, ch),\n                initializationValue\n              );\n\n              ${Gt}\n            }\n          }\n        }\n        setOutput(${gt});\n      }\n    `}}const d6={kernelName:g.AvgPool,backendName:"webgl",kernelFunc:function u6(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n;Ef(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r;g.util.assert(g.backend_util.eitherStridesOrDilationsAreOne(o,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);const u=g.backend_util.computePool2DInfo(i.shape,s,o,1,a,l);if(1===u.filterWidth&&1===u.filterHeight&&g.util.arraysEqual(u.inShape,u.outShape))return Ms({inputs:{x:i},backend:e});const h=new Mf(u,"avg",!1);return e.runWebGLProgram(h,[i],"float32")}},f6={kernelName:g.AvgPool3D,backendName:"webgl",kernelFunc:function h6(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r,h=g.backend_util.computePool3DInfo(i.shape,s,o,[1,1,1],a,l,c),m=new ox(h,"avg",!1);return e.runWebGLProgram(m,[i],"float32")}};class p6{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;const l=n.effectiveFilterHeight,c=n.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${l-1-n.padInfo.top}, ${c-1-n.padInfo.left});\n      const float avgMultiplier = float(${1/(n.filterHeight*n.filterWidth)});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${l};\n            wR += ${n.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${c};\n            wC+= ${n.dilationWidth}) {\n            float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class m6{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;const h=n.effectiveFilterDepth,m=n.effectiveFilterHeight,y=n.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${h-1-n.padInfo.front}, ${m-1-n.padInfo.top}, ${y-1-n.padInfo.left});\n      const float avgMultiplier = float(${1/(n.filterDepth*n.filterHeight*n.filterWidth)});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${h};\n            wD += ${n.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${n.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${m};\n              wR += ${n.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${y};\n                wC += ${n.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const y6={kernelName:g.AvgPool3DGrad,backendName:"webgl",kernelFunc:function g6(t){const{inputs:n,backend:e,attrs:r}=t,{dy:i,input:s}=n,o=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,m=g.backend_util.computePool3DInfo(o.shape,a,l,[1,1,1],c,u),y=new m6(m);return e.runWebGLProgram(y,[i],o.dtype)}},b6={kernelName:g.AvgPoolGrad,backendName:"webgl",kernelFunc:function _6(t){const{inputs:n,backend:e,attrs:r}=t,{dy:i,input:s}=n,o=s;Ef([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=g.backend_util.computePool2DInfo(o.shape,a,l,1,c),h=new p6(u);return e.runWebGLProgram(h,[i],o.dtype)}},x6={kernelName:g.BatchMatMul,backendName:"webgl",kernelFunc:function v6(t){const{inputs:n,backend:e,attrs:r}=t,{a:i,b:s}=n,{transposeA:o,transposeB:a}=r;return Kg({a:i,b:s,transposeA:o,transposeB:a,backend:e})}};class w6{constructor(n,e,r,i,s,o){this.outputShape=[],this.variableNames=["x","mean","variance"],g.backend_util.assertAndGetBroadcastShape(n,e),g.backend_util.assertAndGetBroadcastShape(n,r);let a="0.0";null!=i&&(g.backend_util.assertAndGetBroadcastShape(n,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";null!=s&&(g.backend_util.assertAndGetBroadcastShape(n,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${a};\n        float scale = ${l};\n        float inv = scale * inversesqrt(variance + float(${o}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class C6{constructor(n,e,r,i,s,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],g.backend_util.assertAndGetBroadcastShape(n,e),g.backend_util.assertAndGetBroadcastShape(n,r);let a="vec4(0.0)";null!=i&&(g.backend_util.assertAndGetBroadcastShape(n,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";null!=s&&(g.backend_util.assertAndGetBroadcastShape(n,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`\n      void main() {\n        vec4 offset = ${a};\n        vec4 scale = ${l};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${o}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const S6={kernelName:g.FusedBatchNorm,backendName:"webgl",kernelFunc:({inputs:t,backend:n,attrs:e})=>{const{x:r,mean:i,variance:s,offset:o,scale:a}=t;g.util.assert(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),g.util.assert(null==o||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),g.util.assert(null==a||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=e;null==l&&(l=.001);const c=[r,i,s];let u=null;null!=o&&(u=o.shape,c.push(o));let h=null;null!=a&&(h=a.shape,c.push(a));const m=(0,g.env)().getBool("WEBGL_PACK_NORMALIZATION")?new C6(r.shape,i.shape,s.shape,u,h,l):new w6(r.shape,i.shape,s.shape,u,h,l);return n.runWebGLProgram(m,c,c[0].dtype)}};class D6{constructor(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;const e=Xn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=function I6(t){if(1===t)return"sourceLoc";if(t<=6)return ax.slice(0,t).map(n=>"sourceLoc."+n).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}(this.rank);let i;i=`\n        ${e} sourceLoc;\n        ${e} coords = getOutputCoords();\n        ${n.map((o,a)=>`sourceLoc.${ax[a]} = start[${a}] + coords.${ax[a]};`).join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${i}\n        setOutput(getSource(${r}));\n      }\n    `}}const ax=["x","y","z","w","u","v"];class T6{constructor(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const e=Xn(this.rank),r=Fi("coords",this.rank),i=Fi("sourceLoc",this.rank),s=1===this.rank?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${s})`,a=`\n      result.x = ${o};\n      if (++${r[this.rank-1]} < ${n[this.rank-1]}) {\n        ++${i[this.rank-1]};\n        result.y = ${o};\n        --${i[this.rank-1]};\n      }\n    `,l=1===this.rank?"":`\n      --${r[this.rank-1]};\n      if (++${r[this.rank-2]} < ${n[this.rank-2]}) {\n        ++${i[this.rank-2]};\n        result.z = ${o};\n        if (++${r[this.rank-1]} < ${n[this.rank-1]}) {\n          ++${i[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,c=this.rank<=4?`sourceLoc = coords +\n            ${e}(${n.map((u,h)=>`start[${h}]`).join()});`:n.map((u,h)=>`${i[h]} = ${r[h]} + start[${h}];`).join("\n");this.userCode=`\n      void main() {\n        ${e} coords = getOutputCoords();\n        ${e} sourceLoc;\n        ${c}\n        vec4 result = vec4(0.);\n        ${a}\n        ${l}\n        setOutput(result);\n      }\n    `}}function gd(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{begin:s,size:o}=r,[a,l]=g.slice_util.parseSliceParams(i,s,o);if(g.slice_util.assertParamsValid(i,a,l),0===g.util.sizeFromShape(l))return e.makeTensorInfo(l,i.dtype,[]);if(e.shouldExecuteOnCPU([i])||"string"===i.dtype){const h=e.texData.get(i.dataId),m=_G(h.values,a,l,i.shape,i.dtype);return e.makeTensorInfo(l,i.dtype,m)}const{isPacked:c}=e.texData.get(i.dataId),u=g.slice_util.isSliceContinous(i.shape,a,l);if(c||!u){const h=(0,g.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new T6(l):new D6(l);return e.runWebGLProgram(h,[i],i.dtype,[a])}return e.uploadToGPU(i.dataId),function M6(t,n,e,r){const i=r.texData.get(t.dataId),s=r.makeTensorInfo(e,t.dtype),o=r.texData.get(s.dataId);Object.assign(o,i),o.refCount=1,o.shape=e,o.dtype=t.dtype;let a=g.slice_util.computeFlatOffset(n,g.util.computeStrides(t.shape));i.slice&&(a+=i.slice.flatOffset),o.slice={flatOffset:a,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),s}(i,a,l,e)}const A6={kernelName:g.Slice,backendName:"webgl",kernelFunc:gd},R6={kernelName:g.BatchToSpaceND,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{blockShape:s,crops:o}=r;g.util.assert(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((V,fe)=>V*fe),l=g.backend_util.getReshaped(i.shape,s,a),c=g.backend_util.getPermuted(l.length,s.length),u=g.backend_util.getReshapedPermuted(i.shape,s,a),h=g.backend_util.getSliceBeginCoords(o,s.length),m=g.backend_util.getSliceSize(u,o,s.length),y=[],C=Ct({inputs:{x:i},backend:e,attrs:{shape:l}}),k=$i({inputs:{x:C},backend:e,attrs:{perm:c}}),P=Ct({inputs:{x:k},backend:e,attrs:{shape:u}}),B=gd({inputs:{x:P},backend:e,attrs:{begin:h,size:m}});return y.push(C),y.push(k),y.push(P),y.forEach(V=>e.disposeIntermediateTensorInfo(V)),B}},O6={kernelName:g.Bincount,backendName:"webgl",kernelFunc:function k6(t){const{inputs:n,backend:e,attrs:r}=t,{x:i,weights:s}=n,{size:o}=r,a=e.readSync(i.dataId),l=e.readSync(s.dataId),c=TM(a,l,s.dtype,s.shape,o);return e.makeTensorInfo([o],s.dtype,c)}},L6={kernelName:g.BitwiseAnd,backendName:"webgl",kernelFunc:function $6(t){const{inputs:n,backend:e}=t,{a:r,b:i}=n,s=(0,g.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=(0,g.env)().getNumber("WEBGL_VERSION");if(e.shouldExecuteOnCPU([r,i])||1===o){const l=e.texData.get(r.dataId).values,c=e.texData.get(i.dataId).values,[u,h]=UW(r.shape,i.shape,l,c,r.dtype),m=e.makeTensorInfo(h,r.dtype);return e.texData.get(m.dataId).values=u,m}let a;return a=s?new pd("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,i.shape,!1):new kc("\n  return float(int(a.r) & int(b.r));\n",r.shape,i.shape),e.runWebGLProgram(a,[r,i],r.dtype)}},V6={kernelName:g.BroadcastArgs,backendName:"webgl",kernelFunc:function B6(t){const{inputs:n,backend:e}=t,{s0:r,s1:i}=n,s=e.readSync(r.dataId),o=e.readSync(i.dataId),a=g.backend_util.assertAndGetBroadcastShape(Array.from(s),Array.from(o));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}},QM=ai({opSnippet:"return float(a != b);",cpuKernelImpl:cG,dtype:"bool"}),z6={kernelName:g.NotEqual,backendName:"webgl",kernelFunc:QM};function Af(t){const{inputs:n,backend:e}=t,{input:r}=n;return Ms({inputs:{x:e.texData.get(r.dataId).complexTensorInfos.real},backend:e})}const U6={kernelName:g.Real,backendName:"webgl",kernelFunc:Af},W6={kernelName:g.Cast,backendName:"webgl",kernelFunc:function lx(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{dtype:s}=r;if("complex64"===s){if("complex64"===i.dtype)return Ms({inputs:{x:i},backend:e});const o=g.zeros(i.shape),a=lx({inputs:{x:i},backend:e,attrs:{dtype:"float32"}}),l=Hl({inputs:{real:a,imag:o},backend:e});return o.dispose(),e.disposeIntermediateTensorInfo(a),l}if("complex64"===i.dtype){const o=Af({inputs:{input:i},backend:e}),a=lx({inputs:{x:o},backend:e,attrs:{dtype:s}});return e.disposeIntermediateTensorInfo(o),a}if(!g.util.hasEncodingLoss(i.dtype,s)){const o=Ms({inputs:{x:i},backend:e});return{dataId:o.dataId,shape:o.shape,dtype:s}}if(e.shouldExecuteOnCPU([i])){const o=e.texData.get(i.dataId).values,[a,l,c]=jW(o,i.shape,i.dtype,s);return e.makeTensorInfo(a,l,c)}if("int32"===s)return function H6(t,n){const e=new Ea(t.shape,"return float(int(x));"),r=n.runWebGLProgram(e,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,e);if("bool"===s){const o=e.makeTensorInfo([],"bool",g.util.getTypedArrayFromDType("bool",1)),l=QM({inputs:{a:i,b:o},backend:e});return e.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}},JM="return ceil(x);",G6=Mn({opSnippet:JM,packedOpSnippet:JM,cpuKernelImpl:HW}),K6={kernelName:g.Ceil,backendName:"webgl",kernelFunc:G6};class X6{constructor(n){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class q6{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const Y6={kernelName:g.ClipByValue,backendName:"webgl",kernelFunc:function Z6(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{clipValueMin:s,clipValueMax:o}=r;let a;return a=(0,g.env)().getBool("WEBGL_PACK_CLIP")?new q6(i.shape):new X6(i.shape),e.runWebGLProgram(a,[i],i.dtype,[[s],[o]])}};class Q6{constructor(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function eA(t,n){return{dataId:n.dataId,dtype:n.dtype,shape:t.shape}}const e8={kernelName:g.ComplexAbs,backendName:"webgl",kernelFunc:function J6(t){const{inputs:n,backend:e}=t,{x:r}=n,i=e.texData.get(r.dataId),s=new Q6(r.shape),o=[eA(r,i.complexTensorInfos.real),eA(r,i.complexTensorInfos.imag)];return e.runWebGLProgram(s,o,o[0].dtype)}};class t8{constructor(n){this.outputShape=[],this.outputShape=g.backend_util.computeOutShape(n,1),this.variableNames=n.map((o,a)=>`T${a}`);const e=new Array(n.length-1);e[0]=n[0][1];for(let o=1;o<e.length;o++)e[o]=e[o-1]+n[o][1];const r=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<e.length;o++)r.push(`else if (yC < ${e[o]}) setOutput(getT${o}(yR, yC-${e[o-1]}));`);r.push(`else setOutput(getT${e.length}(yR, yC-${e[e.length-1]}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${r.join("\n        ")}\n      }\n    `}}class n8{constructor(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=g.backend_util.computeOutShape(n,e);const r=this.outputShape,i=r.length,s=Xn(i),o=Fi("coords",i),a=["x","y","z","w","u","v"].slice(0,i);this.variableNames=n.map((k,P)=>`T${P}`);const l=new Array(n.length-1);l[0]=n[0][e];for(let k=1;k<l.length;k++)l[k]=l[k-1]+n[k][e];const c=a[e],u=a.slice(-2),h=a.join();let m=`if (${c} < ${l[0]}) {\n        return getChannel(\n            getT0(${h}), vec2(${u.join()}));\n        }`;for(let k=1;k<l.length;k++){const P=l[k-1];m+=`\n        if (${c} < ${l[k]}  && ${c} >= ${l[k-1]}) {\n          return getChannel(\n            getT${k}(${qg(a,c,P)}),\n            vec2(${qg(u,c,P)}));\n        }`}const C=l[l.length-1];m+=`\n        return getChannel(\n          getT${l.length}(${qg(a,c,C)}),\n          vec2(${qg(u,c,C)}));`,this.userCode=`\n      float getValue(${a.map(k=>"int "+k)}) {\n        ${m}\n      }\n\n      void main() {\n        ${s} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${o}), 0., 0., 0.);\n\n        ${o[i-1]} = ${o[i-1]} + 1;\n        if (${o[i-1]} < ${r[i-1]}) {\n          result.g = getValue(${o});\n        }\n\n        ${o[i-2]} = ${o[i-2]} + 1;\n        if (${o[i-2]} < ${r[i-2]}) {\n          result.a = getValue(${o});\n        }\n\n        ${o[i-1]} = ${o[i-1]} - 1;\n        if (${o[i-2]} < ${r[i-2]} &&\n            ${o[i-1]} < ${r[i-1]}) {\n          result.b = getValue(${o});\n        }\n        setOutput(result);\n      }\n    `}}function qg(t,n,e){const r=t.indexOf(n);return t.map((s,o)=>o===r?`${s} - ${e}`:s).join()}function Zg(t){const{inputs:n,backend:e}=t,{input:r}=n;return Ms({inputs:{x:e.texData.get(r.dataId).complexTensorInfos.imag},backend:e})}const r8={kernelName:g.Imag,backendName:"webgl",kernelFunc:Zg};function Nf(t,n,e){const r=t[0].dtype;if("complex64"===r){const y=t.map(V=>Af({inputs:{input:V},backend:e})),C=t.map(V=>Zg({inputs:{input:V},backend:e})),k=Nf(y,n,e),P=Nf(C,n,e),B=Hl({inputs:{real:k,imag:P},backend:e});return y.forEach(V=>e.disposeIntermediateTensorInfo(V)),C.forEach(V=>e.disposeIntermediateTensorInfo(V)),e.disposeIntermediateTensorInfo(k),e.disposeIntermediateTensorInfo(P),B}let i=e.shouldExecuteOnCPU(t);if("string"===r&&(i=!0),i){const y=t.map(ve=>{const gt=[-1,g.util.sizeFromShape(ve.shape.slice(n))];return Ct({inputs:{x:ve},backend:e,attrs:{shape:gt}})}),C=y.map(ve=>({vals:e.readSync(ve.dataId),shape:ve.shape})),k=g.backend_util.computeOutShape(y.map(ve=>ve.shape),1),B=WW(C,k,r,1===y[0].shape[0]),V=g.backend_util.computeOutShape(t.map(ve=>ve.shape),n),fe=e.makeTensorInfo(V,r,B);return y.forEach(ve=>e.disposeIntermediateTensorInfo(ve)),fe}const s=t.filter(y=>g.util.sizeFromShape(y.shape)>0),o=(0,g.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(1===s.length){const y=o?new Ea(t[0].shape,Ul):new jl(t[0].shape,Ul);return e.runWebGLProgram(y,t,r)}const a=(0,g.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){const y=[];for(let k=0;k<s.length;k+=a){const P=s.slice(k,k+a);y.push(Nf(P,n,e))}const C=Nf(y,n,e);for(const k of y)e.disposeIntermediateTensorInfo(k);return C}if(o){const y=new n8(s.map(C=>C.shape),n);return e.runWebGLProgram(y,s,r)}const{tensors2D:l,outShape:c}=function i8(t,n,e){const r=g.backend_util.computeOutShape(t.map(s=>s.shape),n);return{tensors2D:t.map(s=>Ct({inputs:{x:s},attrs:{shape:[-1,g.util.sizeFromShape(s.shape.slice(n))]},backend:e})),outShape:r}}(s,n,e),u=new t8(l.map(y=>y.shape)),h=e.runWebGLProgram(u,l,r);l.forEach(y=>e.disposeIntermediateTensorInfo(y));const m=Ct({inputs:{x:h},attrs:{shape:c},backend:e});return e.disposeIntermediateTensorInfo(h),m}function tA(t){const{inputs:n,backend:e,attrs:r}=t,{axis:i}=r,s=g.util.parseAxisParam(i,n[0].shape)[0],o=n.map(c=>c.shape);g.backend_util.assertParamsConsistent(o,s);const a=g.backend_util.computeOutShape(n.map(c=>c.shape),s);if(0===g.util.sizeFromShape(a))return e.makeTensorInfo(a,n[0].dtype,[]);const l=n.filter(c=>g.util.sizeFromShape(c.shape)>0);return 1===l.length?Ms({inputs:{x:l[0]},backend:e}):Nf(l,s,e)}const s8={kernelName:g.Concat,backendName:"webgl",kernelFunc:tA};class nA{constructor(n,e=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=n.outShape;const o=n.padInfo.top,a=n.padInfo.left,l=n.strideHeight,c=n.strideWidth,u=n.dilationHeight,h=n.dilationWidth,m=n.filterHeight,y=n.filterWidth,C=4*Math.floor(n.inChannels/4),k=n.inChannels%4,P="channelsLast"===n.dataFormat,B=P?1:2,V=P?2:3,fe=P?3:1;let ve="",Ve="";r&&(ve=i?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${r}\n        }`:s?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${r}\n        }`:`\n          float activation(float x) {\n            ${r}\n          }\n        `,Ve="result = activation(result);");const gt=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${ve}\n\n      const ivec2 strides = ivec2(${l}, ${c});\n      const ivec2 pads = ivec2(${o}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${fe}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${B}], coords[${V}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${m}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${y}; wC++) {\n            int xC = xCCorner + wC * ${h};\n\n            if (xC < 0 || xC >= ${n.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${C}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${P}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===k}) {\n\n              if (${P}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${C}) *\n                    getW(wR, wC, ${C}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${C}, xR, xC) *\n                    getW(wR, wC, ${C}, d2);\n              }\n\n            } else if (${2===k}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${C}, d2),\n                getW(wR, wC, ${C} + 1, d2)\n              );\n\n              if (${P}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${C}),\n                  getX(batch, xR, xC, ${C} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${C}, xR, xC),\n                  getX(batch, ${C} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===k}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${C}, d2),\n                getW(wR, wC, ${C} + 1, d2),\n                getW(wR, wC, ${C} + 2, d2)\n              );\n\n              if (${P}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${C}),\n                  getX(batch, xR, xC, ${C} + 1),\n                  getX(batch, xR, xC, ${C} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${C}, xR, xC),\n                  getX(batch, ${C} + 1, xR, xC),\n                  getX(batch, ${C} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${gt}\n        ${Ve}\n        setOutput(result);\n      }\n    `}}class o8{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;const e=n.padInfo.front,r=n.padInfo.top,i=n.padInfo.left,s=n.strideDepth,o=n.strideHeight,a=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,u=n.dilationWidth,h=n.filterDepth,m=n.filterHeight,y=n.filterWidth,C=4*Math.floor(n.inChannels/4),k=n.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${s}, ${o}, ${a});\n      const ivec3 pads = ivec3(${e}, ${r}, ${i});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${h}; wF++) {\n          int xF = xFCorner + wF * ${l};\n\n          if (xF < 0 || xF >= ${n.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${m}; wR++) {\n            int xR = xRCorner + wR * ${c};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${y}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${C}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===k}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${C}) *\n                  getW(wF, wR, wC, ${C}, d2);\n              } else if (${2===k}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${C}),\n                  getX(batch, xF, xR, xC, ${C} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${C}, d2),\n                  getW(wF, wR, wC, ${C} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===k}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${C}),\n                  getX(batch, xF, xR, xC, ${C} + 1),\n                  getX(batch, xF, xR, xC, ${C} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${C}, d2),\n                  getW(wF, wR, wC, ${C} + 1, d2),\n                  getW(wF, wR, wC, ${C} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class rA{constructor(n,e=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=xi(this.outputShape.length);const o=n.padInfo.left,a=n.strideWidth,l=n.dilationWidth,c=n.filterHeight,u=n.filterWidth,h=u;let m="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let P=0;P<u;P++)m+=`\n           vec4 xTexelC${2*P};\n           int xTexelC${2*P}Ready;\n           vec4 xTexelC${2*P+1};\n           int xTexelC${2*P+1}Ready;\n           vec4 xC${P};`;m+=`\n     for (int r = 0; r < ${c}; r++) {\n      for (int d1 = 0; d1 < ${n.inChannels}; d1 += 2) {\n       `;for(let P=0;P<u;P++)m+=`\n           xTexelC${2*P} = vec4(0.0);\n           xTexelC${2*P}Ready = 0;\n           xTexelC${2*P+1} = vec4(0.0);\n           xTexelC${2*P+1}Ready = 0;\n           xC${P} = vec4(0.0);`;m+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let P=0;P<(h+1)/2;P++){const B=2*P;if(m+=`\n           xC = xCCorner + ${B*l};\n           `,1===a){if(B<u&&(o%2==1?(m+=`\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${B}Ready == 0) {\n                   xTexelC${B} = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${B}.zw = vec2(0.0);\n                   }\n                   xTexelC${B}Ready = 1;\n                 }\n               `,m+=1===l&&B>0?`\n                 xC${B} = vec4(xTexelC${B-2}.zw, xTexelC${B}.xy);\n                 `:`\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC${B} = vec4(previous.zw, xTexelC${B}.xy);\n                   } else {\n                     xC${B} = vec4(0.0, 0.0, xTexelC${B}.xy);\n                   }\n                   `):m+=`\n                 if (xC >= 0 && xC < inDims[1] && xTexelC${B}Ready == 0) {\n                   xTexelC${B} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${B}.zw = vec2(0.0);\n                   }\n                   xTexelC${B}Ready = 1;\n                 }\n\n                 xC${B} = xTexelC${B};\n                 `,B+1<u)){const V=o%2==0?g.util.nearestLargerEven(l):l;l%2==0&&o%2==1||l%2!=0&&o%2!=1?(m+=`\n                   xCOffset = xC + imod(pads[1], 2) + ${V};\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${B+1}Ready == 0) {\n                     xTexelC${B+1} = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC${B+1}.zw = vec2(0.0);\n                     }\n                     xTexelC${B+1}Ready = 1;\n                   }\n                   `,m+=l>1?`\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC${B+1} = vec4(previous.zw, xTexelC${B+1}.xy);\n                     } else {\n                      xC${B+1} = vec4(0.0, 0.0, xTexelC${B+1}.xy);\n                     }\n                     `:`\n                     xC${B+1} = vec4(xTexelC${B}.zw, xTexelC${B+1}.xy);\n                     `):m+=1===V?`\n                     xC${B+1} = xTexelC${B};\n                     `:`\n                     xCOffset = xC + ${V};\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${B+1}Ready == 0) {\n                       xTexelC${B+1} = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC${B+1}.zw = vec2(0.0);\n                       }\n                       xTexelC${B+1}Ready = 1;\n                     }\n\n                     xC${B+1} = xTexelC${B+1};\n                     `}}else B<u&&(o%2==1?(m+=`\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${B}Ready == 0) {\n                   xTexelC${B} = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${B}.zw = vec2(0.0);\n                   }\n                   xTexelC${B}Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${B+1}Ready == 0) {\n                   xTexelC${B+1} = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC${B+1}.zw = vec2(0.0);\n                   }\n                   xTexelC${B+1}Ready = 1;\n                 }\n\n                 xC${B} = vec4(xTexelC${B}.zw, xTexelC${B+1}.zw);\n               `,B+1<u&&(m+=`\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC${B+1} = vec4(xTexelC${B+1}.xy, final.xy);\n                 `)):(m+=`\n                 if(xC >= 0 && xC < inDims[1] && xTexelC${B}Ready == 0) {\n                   xTexelC${B} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${B}.zw = vec2(0.0);\n                   }\n                   xTexelC${B}Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${B+1}Ready == 0) {\n                   xTexelC${B+1} = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${B+1}.zw = vec2(0.);\n                   }\n                   xTexelC${B+1}Ready = 1;\n                 }\n\n                 xC${B} = vec4(\n                   xTexelC${B}.xy, xTexelC${B+1}.xy);\n               `,B+1<u&&(m+=`\n                   xC${B+1} = vec4(xTexelC${B}.zw, xTexelC${B+1}.zw);\n                 `)));B<u&&(m+=`\n             wTexel = getW(r, ${B}, d1, d2);\n             dotProd += xC${B}.xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ${n.inChannels}) {\n               dotProd += xC${B}.yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           `,B+1<u&&(m+=`\n               wTexel = getW(r, ${B+1}, d1, d2);\n               dotProd += xC${B+1}.xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ${n.inChannels}) {\n                 dotProd += xC${B+1}.yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             `))}m+="\n     }\n   ",m+="\n     }\n   ",m+="\n     }\n   ";let y="",C="";r&&(y=i?`vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ${r}\n         }`:s?`vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ${r}\n         }`:`vec4 activation(vec4 x) {\n           ${r}\n         }`,C="result = activation(result);");const k=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n       ${y}\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ${m}\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ${k}\n         ${C}\n         setOutput(result);\n       }\n     `}}class a8{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=n,this.enableShapeUniforms=xi(this.outputShape.length);const{dataFormat:r}=e,i=Pi(),s="channelsLast"===r,o=s?1:2,a=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${n[2]} && pos < ${n[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let h=0;h<=1;h++)c+=`\n          blockIndex = rc.z + ${h};\n          pos = rc.y + ${u};\n\n          ${l}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${o}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${a}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${s}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*u+h}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*u+h}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${c}\n\n        ${i.output} = result;\n      }\n    `}}function Yg(t,n){const e=t.length;return e>=3?n?[...t.slice(0,-3),t[e-3]*t[e-2],t[e-1]]:[...t.slice(0,-3),t[e-3],t[e-2]*t[e-1]]:!n&&1===e&&t[0]>1?[t[0],1]:null}function iA({x:t,filter:n,convInfo:e,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),u=e.inChannels,h=l[0]*l[1]*l[2],m=e.outChannels,y="channelsLast"===e.dataFormat;let P;const B=[];if(null!=s){const ve=Yg(s.shape,y);null!=ve&&(s=Ct({inputs:{x:s},backend:r,attrs:{shape:ve}}),B.push(s))}if(null!=i){const ve=Yg(i.shape,y);null!=ve&&(i=Ct({inputs:{x:i},backend:r,attrs:{shape:ve}}),B.push(i))}if((1!==h&&1!==m||!(u>GM))&&c.isPacked&&y&&null!=c.texture&&l[2]%2!=0&&g.util.arraysEqual(c.shape.slice(-3),l.slice(-3))){const Ve={dataId:t.dataId,shape:[1,l[0]*l[1]*(l[2]+1),e.inChannels],dtype:t.dtype},gt=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,g.util.assert($g(c.shape,Ve.shape),()=>`packed reshape ${c.shape} to ${Ve.shape} isn't free`);const dt=Ct({inputs:{x:n},backend:r,attrs:{shape:[1,e.inChannels,e.outChannels]}});B.push(dt);const ht=Kg({a:Ve,b:dt,backend:r,transposeA:!1,transposeB:!1,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o}),Gt=r.texData.get(ht.dataId);g.util.assert(Gt.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=gt,Gt.shape=e.outShape,P=Ms({inputs:{x:ht},backend:r}),P.shape=e.outShape,B.push(ht)}else{const ve=e.outHeight*e.outWidth,Ve=Ct({inputs:{x:t},backend:r,attrs:{shape:y?[e.batchSize,ve,e.inChannels]:[e.batchSize,e.inChannels,ve]}}),gt=Ct({inputs:{x:n},backend:r,attrs:{shape:[1,e.inChannels,e.outChannels]}}),dt=Kg({a:y?Ve:gt,b:y?gt:Ve,transposeA:!y,transposeB:!1,backend:r,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o});P=Ct({inputs:{x:dt},backend:r,attrs:{shape:e.outShape}}),B.push(Ve),B.push(gt),B.push(dt)}for(const ve of B)r.disposeIntermediateTensorInfo(ve);return P}function sA({x:t,filter:n,convInfo:e,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:h,outHeight:m,dataFormat:y}=e,C="channelsLast"===y,k=l*c*u,P=m*h,B=[e.batchSize,k,P],ve=[];if(null!=s){const Ft=Yg(s.shape,C);null!=Ft&&(s=Ct({inputs:{x:s},backend:r,attrs:{shape:Ft}}),ve.push(s))}if(null!=i){const Ft=Yg(i.shape,C);null!=Ft&&(i=Ct({inputs:{x:i},backend:r,attrs:{shape:Ft}}),ve.push(i))}const Ve=Ct({inputs:{x:n},backend:r,attrs:{shape:[1,k,g.util.sizeFromShape(n.shape)/k]}});ve.push(Ve);const gt=new a8(B,e),ht=r.runWebGLProgram(gt,[t],"float32",[t.shape,[e.padInfo.top,e.padInfo.left],[e.strideHeight,e.strideWidth],[e.dilationHeight,e.dilationWidth],[e.inChannels],[e.filterWidth*e.inChannels],[e.outWidth]]),Gt=Ct({inputs:{x:ht},backend:r,attrs:{shape:B}});ve.push(ht),ve.push(Gt);const zt=null!=i,Hn=null!=s,Ln="leakyrelu"===a,ui=a?Tf(a,!0):null,wi=new zM(C?Gt.shape:Ve.shape,C?Ve.shape:Gt.shape,C?[e.batchSize,P,e.outChannels]:[e.batchSize,e.outChannels,P],!0,!1,zt,ui,Hn,Ln),Vi=C?[Gt,Ve]:[Ve,Gt];if(i&&Vi.push(i),Hn&&Vi.push(s),Ln){const Ft=r.makeTensorInfo([],"float32",g.util.createScalarValue(o,"float32"));Vi.push(Ft),ve.push(Ft)}const kt=r.runWebGLProgram(wi,Vi,"float32"),$t=Ct({inputs:{x:kt},backend:r,attrs:{shape:e.outShape}});ve.push(kt);for(const Ft of ve)r.disposeIntermediateTensorInfo(Ft);return $t}const c8={kernelName:g.Conv2D,backendName:"webgl",kernelFunc:function l8(t){const{inputs:n,backend:e,attrs:r}=t,{x:i,filter:s}=n,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,h=g.backend_util.convertConv2DDataFormat(l),m=g.backend_util.computeConv2DInfo(i.shape,s.shape,o,c,a,u,!1,h);let y;if(1!==m.filterHeight||1!==m.filterWidth||1!==m.dilationHeight||1!==m.dilationWidth||1!==m.strideHeight||1!==m.strideWidth||"SAME"!==m.padInfo.type&&"VALID"!==m.padInfo.type)if(m.strideWidth<=2&&"channelsLast"===h&&(0,g.env)().getBool("WEBGL_EXP_CONV")){const k=new rA(m);y=e.runWebGLProgram(k,[i,s],"float32",[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]])}else if((0,g.env)().getBool("WEBGL_CONV_IM2COL"))y=sA({x:i,filter:s,convInfo:m,backend:e});else{const k=new nA(m);y=e.runWebGLProgram(k,[i,s],"float32")}else y=iA({x:i,filter:s,convInfo:m,backend:e});const C=Ct({inputs:{x:y},backend:e,attrs:{shape:m.outShape}});return e.disposeIntermediateTensorInfo(y),C}};class u8{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yR = 0; yR < ${n.outHeight}; yR++) {\n            int xR = wR + yR * ${n.strideHeight} - ${n.padInfo.top};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${n.outWidth}; yC++) {\n              int xC = wC + yC * ${n.strideWidth} - ${n.padInfo.left};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              ${"channelsLast"===n.dataFormat?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);"}\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class d8{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const e=n.filterHeight,r=n.filterWidth,o="channelsLast"===n.dataFormat;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-n.padInfo.top}, ${r-1-n.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${o?3:1}];\n\n        ivec2 dyCorner = ivec2(coords[${o?1:2}], coords[${o?2:3}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${r}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${r} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${n.outChannels}; d2++) {\n\n              if (${o}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class h8{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape,this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yF = 0; yF < ${n.outDepth}; yF++) {\n            int xF = wF + yF * ${n.strideDepth} - ${n.padInfo.front};\n\n            if (xF < 0 || xF >= ${n.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${n.outHeight}; yR++) {\n              int xR = wR + yR * ${n.strideHeight} - ${n.padInfo.top};\n\n              if (xR < 0 || xR >= ${n.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${n.outWidth}; yC++) {\n                int xC = wC + yC * ${n.strideWidth} - ${n.padInfo.left};\n\n                if (xC < 0 || xC >= ${n.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class f8{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const e=n.filterDepth,r=n.filterHeight,i=n.filterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${e-1-n.padInfo.front}, ${r-1-n.padInfo.top}, ${i-1-n.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${e}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${n.strideDepth}.0;\n\n          if (dyF < 0.0 || dyF >= ${n.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${e} - 1 - wF;\n\n          for (int wR = 0; wR < ${r}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${r} - 1 - wR;\n\n            for (int wC = 0; wC < ${i}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${i} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${n.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const m8={kernelName:g.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:function p8(t){const{inputs:n,backend:e,attrs:r}=t,{x:i,dy:s}=n,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,h=g.backend_util.convertConv2DDataFormat(l),m=g.backend_util.computeConv2DInfo(i.shape,u,o,1,a,c,!1,h),y=new u8(m);return e.runWebGLProgram(y,[i,s],"float32")}};class g8{constructor(n){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=n.inShape,this.enableShapeUniforms=xi(this.outputShape.length);const e=n.filterHeight,r=n.filterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-n.padInfo.top}, ${r-1-n.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${r}; wC++) {\n            int wCPerm = ${r} - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ${n.outWidth}.0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${n.outWidth}.0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    `}}const _8={kernelName:g.Conv2DBackpropInput,backendName:"webgl",kernelFunc:function y8(t){const{inputs:n,backend:e,attrs:r}=t,{dy:i,filter:s}=n,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,h=g.backend_util.convertConv2DDataFormat(c),m=g.backend_util.computeConv2DInfo(o,s.shape,a,1,l,u,!1,h);if((0,g.env)().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===h){const y=[[m.strideHeight,m.strideWidth]],C=new g8(m);return e.runWebGLProgram(C,[i,s],"float32",y)}{const y=new d8(m);return e.runWebGLProgram(y,[i,s],"float32")}}},v8={kernelName:g.Conv3D,backendName:"webgl",kernelFunc:function b8(t){const{inputs:n,backend:e,attrs:r}=t,{x:i,filter:s}=n,{strides:o,pad:a,dilations:l}=r,c=g.backend_util.computeConv3DInfo(i.shape,s.shape,o,l,a),u=new o8(c);return e.runWebGLProgram(u,[i,s],"float32")}},w8={kernelName:g.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:function x8(t){const{inputs:n,backend:e,attrs:r}=t,{x:i,dy:s}=n,{strides:o,pad:a,filterShape:l}=r,c=g.backend_util.computeConv3DInfo(i.shape,l,o,1,a),u=new h8(c);return e.runWebGLProgram(u,[i,s],"float32")}},E8={kernelName:g.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:function C8(t){const{inputs:n,backend:e,attrs:r}=t,{dy:i,filter:s}=n,{pad:o,strides:a,inputShape:l}=r,c=g.backend_util.computeConv3DInfo(l,s.shape,a,1,o),u=new f8(c);return e.runWebGLProgram(u,[i,s],"float32")}},I8=Mn({opSnippet:md+"\n  return cos(x);\n",packedOpSnippet:`\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ${Oc}\n  return result;\n`}),T8={kernelName:g.Cos,backendName:"webgl",kernelFunc:I8},M8=Mn({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),A8={kernelName:g.Cosh,backendName:"webgl",kernelFunc:M8};class N8{constructor(n,e,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=n,[u]=e,[h,m]=r;this.outputShape=[u,h,m,c];const y="bilinear"===i?1:0,[C,k]=[a-1+".0",l-1+".0"],[P,B,V]=h>1?[""+(a-1)/(h-1),"(y2-y1) * height_ratio",`y1*${C} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${C}`],[fe,ve,Ve]=m>1?[""+(l-1)/(m-1),"(x2-x1) * width_ratio",`x1*${k} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${k}`];this.userCode=`\n      const float height_ratio = float(${P});\n      const float width_ratio = float(${fe});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${o}) {\n          return;\n        }\n\n        float height_scale = ${B};\n        float width_scale = ${ve};\n\n        float in_y = ${V};\n        if( in_y < 0.0 || in_y > ${C} ) {\n          setOutput(float(${s}));\n          return;\n        }\n        float in_x = ${Ve};\n        if( in_x < 0.0 || in_x > ${k} ) {\n          setOutput(float(${s}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${y} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const k8={kernelName:g.CropAndResize,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:r}=t,{image:i,boxes:s,boxInd:o}=n,{cropSize:a,method:l,extrapolationValue:c}=r,u=new N8(i.shape,s.shape,a,l,c);return e.runWebGLProgram(u,[i,s,o],"float32")}};var Qg=function(t){return t.Prod="*",t.Sum="+",t}(Qg||{});class oA{constructor(n,e,r,i){this.op=n,this.outputShape=e,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,a=r?this.op===Qg.Prod?"1.0":"0.0":`getX(${aA(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=i?"end != "+(l-1):"end != 0",u=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${l}`:"end >= pow2",u=i?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${Xn(s)} coords = getOutputCoords();\n        int end = ${lA(s,"coords",this.op)};\n        float val = ${a};\n        int pow2 = int(pow(2.0, index));\n        if (${c}) {\n          int idx = ${u};\n          ${lA(s,"coords",this.op)} = idx;\n          val ${this.op}= getX(${aA(s,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}}function aA(t,n,e){if(1===t)return`${n}`;if(2===t)return`${n}.x, ${n}.y`;if(3===t)return`${n}.x, ${n}.y, ${n}.z`;if(4===t)return`${n}.x, ${n}.y, ${n}.z, ${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function lA(t,n,e){if(1===t)return`${n}`;if(2===t)return`${n}.y`;if(3===t)return`${n}.z`;if(4===t)return`${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function cA(t,n,e,r,i,s){const o=n.shape.length,a=g.backend_util.getAxesPermutation([r],o);let l=n;null!=a&&(l=$i({inputs:{x:n},backend:e,attrs:{perm:a}}));const c=g.backend_util.getInnerMostAxes(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${n.shape.length-1} but got axis=${r}`);const u=l.shape[c];let h=Ms({inputs:{x:l},backend:e});for(let m=0;m<=Math.ceil(Math.log2(u))-1;m++){const y=new oA(t,l.shape,!1,s),k=h;h=e.runWebGLProgram(y,[h],h.dtype,[[m]]),e.disposeIntermediateTensorInfo(k)}if(i){const m=new oA(t,l.shape,i,s),y=h;h=e.runWebGLProgram(m,[h],h.dtype),e.disposeIntermediateTensorInfo(y)}if(null!=a){const y=$i({inputs:{x:h},backend:e,attrs:{perm:g.backend_util.getUndoAxesPermutation(a)}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(l),y}return h}const P8={kernelName:g.Cumprod,backendName:"webgl",kernelFunc:function O8(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{axis:s,exclusive:o,reverse:a}=r;return cA(Qg.Prod,i,e,s,o,a)}},$8={kernelName:g.Cumsum,backendName:"webgl",kernelFunc:function F8(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{axis:s,exclusive:o,reverse:a}=r;return cA(Qg.Sum,i,e,s,o,a)}},B8={kernelName:g.DenseBincount,backendName:"webgl",kernelFunc:function L8(t){const{inputs:n,backend:e,attrs:r}=t,{x:i,weights:s}=n,{size:o,binaryOutput:a}=r;if(1===i.shape.length){const l=e.readSync(i.dataId),c=e.readSync(s.dataId),u=TM(l,c,s.dtype,s.shape,o);return e.makeTensorInfo([o],s.dtype,u)}if(2===i.shape.length){const l=e.bufferSync(i),c=e.bufferSync(s),u=zW(l,c,o,a);return e.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}};class V8{constructor(n,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=r,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${e};\n      int offset_h = imod(h, ${e});\n      int in_w = w / ${e};\n      int offset_w = imod(w, ${e});\n      int offset_d = (offset_h * ${e} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const U8={kernelName:g.DepthToSpace,backendName:"webgl",kernelFunc:function z8(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{blockSize:s,dataFormat:o}=r,a=i.shape[0],h=("NHWC"===o?i.shape[1]:i.shape[2])*s,m=("NHWC"===o?i.shape[2]:i.shape[3])*s,y=("NHWC"===o?i.shape[3]:i.shape[1])/(s*s),k=new V8("NHWC"===o?[a,h,m,y]:[a,y,h,m],s,o);return e.runWebGLProgram(k,[i],i.dtype)}};class uA{constructor(n,e=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=xi(this.outputShape.length);const o=n.filterHeight,a=n.filterWidth,l=n.outChannels/n.inChannels;let c="",u="";r&&(c=i?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${r}\n        }`:s?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${r}\n        }`:`\n          float activation(float x) {\n            ${r}\n          }\n        `,u="result = activation(result);");const h=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${c}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${l};\n        int q = d2 - d1 * ${l};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${o}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${h}\n        ${u}\n        setOutput(result);\n      }\n    `}}class dA{constructor(n,e=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=xi(this.outputShape.length);const o=n.outChannels/n.inChannels,a=n.padInfo.left,l=n.strideWidth,c=n.dilationWidth,u=n.filterHeight,h=n.filterWidth,m=h;let y="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let B=0;B<h;B++)y+=`\n          vec4 xTexelC${2*B};\n          int xTexelC${2*B}Ready;\n          vec4 xTexelC${2*B+1};\n          int xTexelC${2*B+1}Ready;\n          vec4 xC${B};`;y+=`\n    for (int r = 0; r < ${u}; r++) {\n      `;for(let B=0;B<h;B++)y+=`\n          xTexelC${2*B} = vec4(0.0);\n          xTexelC${2*B}Ready = 0;\n          xTexelC${2*B+1} = vec4(0.0);\n          xTexelC${2*B+1}Ready = 0;\n          xC${B} = vec4(0.0);`;y+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let B=0;B<(m+1)/2;B++){const V=2*B;if(y+=`\n          xC = xCCorner + ${V*c};\n          `,1===l){if(V<h&&(a%2==1?(y+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${V}Ready == 0) {\n                  xTexelC${V} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${V}.zw = vec2(0.0);\n                  }\n                  xTexelC${V}Ready = 1;\n                }\n              `,y+=1===c&&V>0?`\n                xC${V} = vec4(xTexelC${V-2}.zw, xTexelC${V}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${V} = vec4(previous.zw, xTexelC${V}.xy);\n                  } else {\n                    xC${V} = vec4(0.0, 0.0, xTexelC${V}.xy);\n                  }\n                  `):y+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${V}Ready == 0) {\n                  xTexelC${V} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${V}.zw = vec2(0.0);\n                  }\n                  xTexelC${V}Ready = 1;\n                }\n\n                xC${V} = xTexelC${V};\n                `,V+1<h)){const fe=a%2==0?g.util.nearestLargerEven(c):c;c%2==0&&a%2==1||c%2!=0&&a%2!=1?(y+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${fe};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${V+1}Ready == 0) {\n                    xTexelC${V+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${V+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${V+1}Ready = 1;\n                  }\n                  `,y+=c>1?`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC${V+1} = vec4(previous.zw, xTexelC${V+1}.xy);\n                    } else {\n                     xC${V+1} = vec4(0.0, 0.0, xTexelC${V+1}.xy);\n                    }\n                    `:`\n                    xC${V+1} = vec4(xTexelC${V}.zw, xTexelC${V+1}.xy);\n                    `):y+=1===fe?`\n                    xC${V+1} = xTexelC${V};\n                    `:`\n                    xCOffset = xC + ${fe};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${V+1}Ready == 0) {\n                      xTexelC${V+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${V+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${V+1}Ready = 1;\n                    }\n\n                    xC${V+1} = xTexelC${V+1};\n                    `}}else V<h&&(a%2==1?(y+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${V}Ready == 0) {\n                  xTexelC${V} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${V}.zw = vec2(0.0);\n                  }\n                  xTexelC${V}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${V+1}Ready == 0) {\n                  xTexelC${V+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${V+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${V+1}Ready = 1;\n                }\n\n                xC${V} = vec4(xTexelC${V}.zw, xTexelC${V+1}.zw);\n              `,V+1<h&&(y+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${V+1} = vec4(xTexelC${V+1}.xy, final.xy);\n                `)):(y+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${V}Ready == 0) {\n                  xTexelC${V} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${V}.zw = vec2(0.0);\n                  }\n                  xTexelC${V}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${V+1}Ready == 0) {\n                  xTexelC${V+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${V+1}.zw = vec2(0.);\n                  }\n                  xTexelC${V+1}Ready = 1;\n                }\n\n                xC${V} = vec4(\n                  xTexelC${V}.xy, xTexelC${V+1}.xy);\n              `,V+1<h&&(y+=`\n                  xC${V+1} = vec4(xTexelC${V}.zw, xTexelC${V+1}.zw);\n                `)));V<h&&(y+=`\n            wTexel = getW(r, ${V}, d1, q);\n            dotProd += xC${V} * vec4(wTexel.xz, wTexel.xz);\n          `,V+1<h&&(y+=`\n              wTexel = getW(r, ${V+1}, d1, q);\n              dotProd += xC${V+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}y+="\n    }\n  ",y+="\n      }\n    ";let C="",k="";r&&(C=i?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${r}\n        }`:s?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${r}\n        }`:`vec4 activation(vec4 x) {\n          ${r}\n        }`,k="result = activation(result);");const P=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${C}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${o};\n        int q = d2 - d1 * ${o};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${y}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${P}\n        ${k}\n        setOutput(result);\n      }\n    `}}const H8={kernelName:g.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:function j8(t){const{inputs:n,backend:e,attrs:r}=t,{x:i,filter:s}=n,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;null==u&&(u=[1,1]),g.util.assert(g.backend_util.eitherStridesOrDilationsAreOne(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const h=g.backend_util.computeConv2DInfo(i.shape,s.shape,o,u,a,c,!0);let m;return m=(0,g.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels==1?new dA(h):new uA(h),e.runWebGLProgram(m,[i,s],"float32",[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]])}};class W8{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${n.outChannels/n.inChannels} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yR = 0; yR < ${n.outHeight}; yR++) {\n            int xR = wR + yR * ${n.strideHeight} - ${n.padInfo.top};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${n.outWidth}; yC++) {\n              int xC = wC + yC * ${n.strideWidth} - ${n.padInfo.left};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class G8{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const e=n.filterHeight,r=n.filterWidth,l=n.outChannels/n.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-n.padInfo.top}, ${r-1-n.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${r}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${r} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${l}; dm++) {\n              int d2 = d1 * ${l} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const X8={kernelName:g.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:function K8(t){const{inputs:n,backend:e,attrs:r}=t,{x:i,dy:s}=n,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,h=g.backend_util.computeConv2DInfo(i.shape,u,o,a,l,c,!0),m=new W8(h);return e.runWebGLProgram(m,[i,s],"float32")}},Z8={kernelName:g.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:function q8(t){const{inputs:n,backend:e,attrs:r}=t,{dy:i,filter:s}=n,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,h=g.backend_util.computeConv2DInfo(u,s.shape,o,a,l,c,!0),m=new G8(h);return e.runWebGLProgram(m,[i,s],"float32")}};class Y8{constructor(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const J8={kernelName:g.Diag,backendName:"webgl",kernelFunc:function Q8(t){const{inputs:n,backend:e}=t,{x:r}=n,i=[...r.shape,...r.shape],s=g.util.sizeFromShape(r.shape),o=Ct({inputs:{x:r},backend:e,attrs:{shape:[s]}}),a=new Y8(s),l=e.runWebGLProgram(a,[o],o.dtype),c=Ct({inputs:{x:l},backend:e,attrs:{shape:i}});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(l),c}};class eK{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;const{inHeight:e,inWidth:r,padInfo:i,strideHeight:s,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=n,{top:h,left:m}=i;this.userCode=`\n      const ivec2 strides = ivec2(${s}, ${o});\n      const ivec2 pads = ivec2(${h}, ${m});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${a}; h++) {\n          int hIn = hBeg + h * ${c};\n\n          if (hIn >= 0 && hIn < ${e}) {\n            for (int w = 0; w < ${l}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${r}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const nK={kernelName:g.Dilation2D,backendName:"webgl",kernelFunc:function tK(t){const{inputs:n,backend:e,attrs:r}=t,{x:i,filter:s}=n,{strides:o,pad:a,dilations:l}=r,c=g.backend_util.computeDilation2DInfo(i.shape,s.shape,o,a,"NHWC",l);let u;const h=new eK(c);u=e.runWebGLProgram(h,[i,s],"float32");const m=Ct({inputs:{x:u},backend:e,attrs:{shape:c.outShape}});return e.disposeIntermediateTensorInfo(u),m}},iK={kernelName:g.Einsum,backendName:"webgl",kernelFunc:function rK(t){const{inputs:n,backend:e,attrs:r}=t,{equation:i}=r,s=n,{allDims:o,summedDims:a,idDims:l}=g.backend_util.decodeEinsumEquation(i,s.length);g.backend_util.checkEinsumDimSizes(o.length,l,s);const{path:c,steps:u}=g.backend_util.getEinsumComputePath(a,l),h=u.length;let m=null,y=o.length;const C=[];for(let k=0;k<h;++k){for(const P of u[k]){const{permutationIndices:B,expandDims:V}=g.backend_util.getEinsumPermutation(y,l[P]);let fe;g.backend_util.isIdentityPermutation(B)?fe=s[P]:(fe=$i({inputs:{x:s[P]},backend:e,attrs:{perm:B}}),C.push(fe));const ve=fe.shape.slice();for(let Ve=0;Ve<V.length;++Ve)ve.splice(V[Ve],0,1);g.util.arraysEqual(fe.shape,ve)||(fe=Ct({inputs:{x:fe},backend:e,attrs:{shape:ve}}),C.push(fe)),null===m?m=fe:(m=sx({inputs:{a:fe,b:m},backend:e}),C.push(m))}k<h-1&&(c[k]>=0&&(m=Gg({inputs:{x:m},backend:e,attrs:{axis:c[k]-(o.length-y),keepDims:!1}}),C.push(m)),y--)}for(const k of C)k!==m&&e.disposeIntermediateTensorInfo(k);return m}},sK=Mn({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),oK={kernelName:g.Elu,backendName:"webgl",kernelFunc:sK},uK={kernelName:g.EluGrad,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e}=t,{dy:r,y:i}=n,s=(0,g.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pd("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,i.shape):new kc("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,i.shape);return e.runWebGLProgram(s,[r,i],r.dtype)}},dK=ai({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:GW}),hK={kernelName:g.Equal,backendName:"webgl",kernelFunc:dK},pK=Mn({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${g.backend_util.ERF_P};\n  float a1 = ${g.backend_util.ERF_A1};\n  float a2 = ${g.backend_util.ERF_A2};\n  float a3 = ${g.backend_util.ERF_A3};\n  float a4 = ${g.backend_util.ERF_A4};\n  float a5 = ${g.backend_util.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),mK={kernelName:g.Erf,backendName:"webgl",kernelFunc:pK},hA=Mn({opSnippet:md+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:KW,dtype:"float32"}),yK={kernelName:g.Exp,backendName:"webgl",kernelFunc:hA};function cx(t){const{inputs:n,attrs:e,backend:r}=t,{dim:i}=e,{input:s}=n,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(g.util.assert(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),Ct({inputs:{x:s},backend:r,attrs:{shape:a}})}const _K={kernelName:g.ExpandDims,backendName:"webgl",kernelFunc:cx},fA="return exp(x) - 1.0;",bK=Mn({opSnippet:fA,packedOpSnippet:fA,cpuKernelImpl:XW}),vK={kernelName:g.Expm1,backendName:"webgl",kernelFunc:bK};class pA{constructor(n,e,r){this.variableNames=["real","imag"];const i=e[1];this.outputShape=e;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let a;if("real"===n)a="return real * expR - imag * expI;";else{if("imag"!==n)throw new Error(`FFT component must be either "real" or "imag", got ${n}.`);a="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${s};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${a}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${i});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${i}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${o};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function mA(t,n,e){const r=e.texData.get(t.dataId),i=g.util.sizeFromShape(t.shape),s=t.shape[t.shape.length-1],a=Ct({inputs:{x:t},backend:e,attrs:{shape:[i/s,s]}}),l=a.shape,c=new pA("real",l,n),u=new pA("imag",l,n),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],m=e.runWebGLProgram(c,h,"float32"),y=e.runWebGLProgram(u,h,"float32"),C=Hl({inputs:{real:m,imag:y},backend:e});e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(y);const k=Ct({inputs:{x:C},backend:e,attrs:{shape:t.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(C),k}const wK={kernelName:g.FFT,backendName:"webgl",kernelFunc:function xK(t){const{inputs:n,backend:e}=t,{input:r}=n;return mA(r,!1,e)}};class CK{constructor(n,e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=n,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function Rf(t){const{backend:n,attrs:e}=t,{shape:r,value:i}=e;let{dtype:s}=e;if(s=s||g.util.inferDtype(i),"string"===s){const o=g.util.getArrayFromDType(s,g.util.sizeFromShape(r));return o.fill(i),n.makeTensorInfo(r,s,o)}{const o=new CK(r,i);return n.runWebGLProgram(o,[],s,[[i]])}}const EK={kernelName:g.Fill,backendName:"webgl",kernelFunc:Rf};class SK{constructor(n){this.variableNames=["Image"],this.outputShape=[];const e=n[2];this.outputShape=n,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${e} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${e}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const DK={kernelName:g.FlipLeftRight,backendName:"webgl",kernelFunc:({inputs:t,backend:n})=>{const{image:e}=t,r=n,i=new SK(e.shape);return r.runWebGLProgram(i,[e],e.dtype)}},gA="return floor(x);",IK=Mn({opSnippet:gA,packedOpSnippet:gA,cpuKernelImpl:qW}),TK={kernelName:g.Floor,backendName:"webgl",kernelFunc:IK},MK=ai({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),AK={kernelName:g.FloorDiv,backendName:"webgl",kernelFunc:MK};class NK{constructor(n){this.variableNames=["A"];const e=Pi(),[r,i]=n;this.outputShape=n,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);\n\n        vec4 values = ${e.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class RK{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const e=Pi(),[r,i]=n;this.outputShape=n,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${i}.0, ${r}.0);\n            vec4 values = ${e.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${e.output} = result;\n      }\n    `}}const kK={kernelName:g.FromPixels,backendName:"webgl",kernelFunc:function OK(t){const{inputs:n,backend:e,attrs:r}=t;let{pixels:i}=n;const{numChannels:s}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=[c,l],h=[c,l,s];if(a||o){const k=(0,g.env)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(null==yd||k!==ux)&&(ux=k,yd=document.createElement("canvas").getContext("2d",{willReadFrequently:ux})),yd.canvas.width=l,yd.canvas.height=c,yd.drawImage(i,0,0,l,c),i=yd.canvas}const m=e.makeTensorInfo(u,"int32");e.texData.get(m.dataId).usage=vo.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(m.dataId),i);const y=(0,g.env)().getBool("WEBGL_PACK")?new RK(h):new NK(h),C=e.runWebGLProgram(y,[m],"int32");return e.disposeData(m.dataId),C}};let yd,ux=(0,g.env)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const FK={kernelName:g.FusedConv2D,backendName:"webgl",kernelFunc:function PK(t){const{inputs:n,backend:e,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:m,activation:y,leakyreluAlpha:C}=r,k=g.backend_util.convertConv2DDataFormat(u),P=g.backend_util.computeConv2DInfo(i.shape,s.shape,l,h,c,m,!1,k);let B;const V=[],fe=null!=o,ve=null!=a,Ve="leakyrelu"===y,gt=()=>{const ht=[i,s],Gt=(zt,Hn)=>{if("NCHW"===Hn&&1===zt.shape.length&&1!==zt.shape[0]){const Ln=Ct({inputs:{x:zt},backend:e,attrs:{shape:[zt.shape[0],1,1]}});return V.push(Ln),Ln}return zt};if(fe&&ht.push(Gt(o,u)),ve&&ht.push(Gt(a,u)),Ve){const zt=e.makeTensorInfo([],"float32",g.util.createScalarValue(C,"float32"));ht.push(zt),V.push(zt)}return ht};if(1!==P.filterHeight||1!==P.filterWidth||1!==P.dilationHeight||1!==P.dilationWidth||1!==P.strideHeight||1!==P.strideWidth||"SAME"!==P.padInfo.type&&"VALID"!==P.padInfo.type)if(P.strideWidth<=2&&"channelsLast"===k&&(0,g.env)().getBool("WEBGL_EXP_CONV")){const ht=y?Tf(y,!0):null,Gt=new rA(P,fe,ht,ve,Ve),zt=[[P.padInfo.top,P.padInfo.left],[P.strideHeight,P.strideWidth],[P.dilationHeight,P.dilationWidth],[P.inHeight,P.inWidth]],Hn=gt();B=e.runWebGLProgram(Gt,Hn,"float32",zt)}else if((0,g.env)().getBool("WEBGL_CONV_IM2COL"))B=sA({x:i,filter:s,convInfo:P,backend:e,bias:o,activation:y,preluActivationWeights:a,leakyreluAlpha:C});else{const ht=y?Tf(y,!1):null,Gt=new nA(P,fe,ht,ve,Ve),zt=gt();B=e.runWebGLProgram(Gt,zt,"float32")}else B=iA({x:i,filter:s,convInfo:P,backend:e,bias:o,activation:y,preluActivationWeights:a,leakyreluAlpha:C});const dt=Ct({inputs:{x:B},backend:e,attrs:{shape:P.outShape}});return V.push(B),V.forEach(ht=>e.disposeIntermediateTensorInfo(ht)),dt}},LK={kernelName:g.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:function $K(t){const{inputs:n,backend:e,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=n,{strides:l,pad:c,dilations:u,dimRoundingMode:h,activation:m,leakyreluAlpha:y}=r,C=[];let k=u;null==k&&(k=[1,1]),g.util.assert(g.backend_util.eitherStridesOrDilationsAreOne(l,k),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${k}'`);const P=g.backend_util.computeConv2DInfo(i.shape,s.shape,l,k,c,h,!0),B=(0,g.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&P.strideWidth<=2&&P.outChannels/P.inChannels==1,V=m?Tf(m,B):null,fe=[i,s],ve=null!=o,Ve=null!=a,gt="leakyrelu"===m;if(ve&&fe.push(o),Ve&&fe.push(a),gt){const zt=e.makeTensorInfo([],"float32",g.util.createScalarValue(y,"float32"));fe.push(zt),C.push(zt)}let dt;dt=B?new dA(P,ve,V,Ve,gt):new uA(P,ve,V,Ve,gt);const Gt=e.runWebGLProgram(dt,fe,"float32",[[P.padInfo.top,P.padInfo.left],[P.strideHeight,P.strideWidth],[P.dilationHeight,P.dilationWidth],[P.inHeight,P.inWidth]]);return C.forEach(zt=>e.disposeIntermediateTensorInfo(zt)),Gt}};class BK{constructor(n,e,r,i){this.sliceDim=n,this.strides=e,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=Xn(r.length);let o="\n    int index;";for(let a=0;a<this.sliceDim;a++)o+=`\n          index = round(getIndices(coords[0], ${a}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};\n          flattenIndex += index * ${this.strides[a]};`;this.userCode=`\n         void main() {\n          ${s} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${o}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}const zK={kernelName:g.GatherNd,backendName:"webgl",kernelFunc:function VK(t){const{inputs:n,backend:e}=t,{params:r,indices:i}=n,s=i.shape,o=s[s.length-1],a=g.util.sizeFromShape(r.shape),[l,c,u,h]=g.backend_util.prepareAndValidate(r,i),m=Ct({inputs:{x:i},backend:e,attrs:{shape:[c,o]}}),y=Ct({inputs:{x:r},backend:e,attrs:{shape:[g.util.sizeFromShape(r.shape)/u,u]}});if(e.shouldExecuteOnCPU([r,i])||"string"===r.dtype){const B=e.readSync(i.dataId),V=e.bufferSync(r),fe=ZW(B,V,r.dtype,c,o,u,h,r.shape,a);return e.makeTensorInfo(l,r.dtype,fe.values)}const C=new BK(o,h,[c,u],r.shape),k=e.runWebGLProgram(C,[y,m],y.dtype),P=Ct({inputs:{x:k},backend:e,attrs:{shape:l}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(k),P}};class UK{constructor(n,e){this.variableNames=["A","indices"],this.outputShape=e,this.rank=e.length;const r=Xn(this.rank),i=function jK(t,n){const e=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)r.push(2===i?"index":`${e[i]}`);return r.join()}(n);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${n[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${i}));\n      }\n    `}}function yA(t){const{inputs:n,backend:e,attrs:r}=t,{x:i,indices:s}=n,{axis:o,batchDims:a}=r,l=g.util.parseAxisParam(o,i.shape)[0];if((0,g.env)().get("DEBUG")){const V=e.readSync(s.dataId),fe=i.shape[l];for(let ve=0;ve<V.length;++ve){const Ve=V[ve];g.util.assert(Ve<=fe-1&&Ve>=0,()=>`GatherV2: the index value ${Ve} is not in [0, ${fe-1}]`)}}const c=g.backend_util.segment_util.collectGatherOpShapeInfo(i,s,l,a),u=g.util.sizeFromShape(s.shape),h=[],m=Ct({inputs:{x:i},backend:e,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),y=Ct({inputs:{x:s},backend:e,attrs:{shape:[c.batchSize,u/c.batchSize]}});h.push(m),h.push(y);const C=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(e.shouldExecuteOnCPU([i,s])||"string"===i.dtype){const V=e.bufferSync(y),fe=e.bufferSync(m),ve=YW(fe,V,C);return h.forEach(Ve=>e.disposeIntermediateTensorInfo(Ve)),e.makeTensorInfo(c.outputShape,ve.dtype,ve.values)}const k=new UK(m.shape,C),P=e.runWebGLProgram(k,[m,y],m.dtype);h.push(P);const B=Ct({inputs:{x:P},backend:e,attrs:{shape:c.outputShape}});return h.forEach(V=>e.disposeIntermediateTensorInfo(V)),B}const HK={kernelName:g.GatherV2,backendName:"webgl",kernelFunc:yA},WK=ai({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:QW,dtype:"bool"}),GK={kernelName:g.Greater,backendName:"webgl",kernelFunc:WK},KK=ai({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:JW}),XK={kernelName:g.GreaterEqual,backendName:"webgl",kernelFunc:KK},ZK={kernelName:g.IFFT,backendName:"webgl",kernelFunc:function qK(t){const{inputs:n,backend:e}=t,{input:r}=n;return mA(r,!0,e)}},YK=Mn({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),QK={kernelName:g.IsFinite,backendName:"webgl",kernelFunc:YK},JK=Mn({opSnippet:"return float(isinf(x));",dtype:"bool"}),e7={kernelName:g.IsInf,backendName:"webgl",kernelFunc:JK},t7=Mn({opSnippet:"return float(isnan(x));",dtype:"bool"}),n7={kernelName:g.IsNan,backendName:"webgl",kernelFunc:t7},r7=ai({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:eG,dtype:"bool"}),i7={kernelName:g.Less,backendName:"webgl",kernelFunc:r7},s7=ai({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:tG,dtype:"bool"}),o7={kernelName:g.LessEqual,backendName:"webgl",kernelFunc:s7},l7={kernelName:g.LinSpace,backendName:"webgl",kernelFunc:function a7(t){const{backend:n,attrs:e}=t,{start:r,stop:i,num:s}=e,o=nG(r,i,s);return n.makeTensorInfo([o.length],"float32",o)}},u7=Mn({opSnippet:md+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:rG}),d7={kernelName:g.Log,backendName:"webgl",kernelFunc:u7},f7=Mn({opSnippet:md+"\n  return log(1.0 + x);\n"}),p7={kernelName:g.Log1p,backendName:"webgl",kernelFunc:f7},m7=ai({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),g7={kernelName:g.LogicalAnd,backendName:"webgl",kernelFunc:m7},y7=Mn({opSnippet:"return float(!(x >= 1.0));"}),_7={kernelName:g.LogicalNot,backendName:"webgl",kernelFunc:y7},b7=ai({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),v7={kernelName:g.LogicalOr,backendName:"webgl",kernelFunc:b7};class x7{constructor(n,e,r,i,s){this.variableNames=["x"],this.outputShape=[];const o=e,a=n[3]-1;let l;this.outputShape=n;const c=`float(${r}) + float(${i}) * sum`;l=.5===s?`inversesqrt(${c})`:1===s?`1.0/(${c})`:`exp(log(${c}) * float(-${s}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${o}; j <= ${o}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${a}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${l};\n        setOutput(val);\n      }\n    `}}class w7{constructor(n,e,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=e,a=n[3]-1;let l;this.outputShape=n;const c=`float(${r}) + float(${i}) * sum`;l=.5===s?`inversesqrt(${c})`:1===s?`1.0/(${c})`:`exp(log(${c}) * float(-${s}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${o};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${o}; j <= ${o}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${l};\n        setOutput(result);\n      }\n    `}}const E7={kernelName:g.LRN,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{depthRadius:s,bias:o,alpha:a,beta:l}=r,c=(0,g.env)().getBool("WEBGL_PACK_NORMALIZATION")?new w7(i.shape,s,o,a,l):new x7(i.shape,s,o,a,l);return e.runWebGLProgram(c,[i],i.dtype)}};class S7{constructor(n,e,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${e})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${e} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${i}) * norm + float(${r});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${i})\n                * float(${s})\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${s});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const I7={kernelName:g.LRNGrad,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:r}=t,{x:i,y:s,dy:o}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=r,h=new S7(i.shape,a,l,c,u);return e.runWebGLProgram(h,[i,s,o],i.dtype)}};function _A(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{reductionIndices:s,keepDims:o}=r,a=i.shape.length,l=g.util.parseAxisParam(s,i.shape);let c=l;const u=g.backend_util.getAxesPermutation(c,a),h=null!=u,m=e.shouldExecuteOnCPU([i]);let y=i;if(h){if(m){const fe=e.texData.get(y.dataId).values,ve=new Array(a);for(let dt=0;dt<ve.length;dt++)ve[dt]=i.shape[u[dt]];const Ve=rx(fe,i.shape,i.dtype,u,ve);y=e.makeTensorInfo(ve,i.dtype),e.texData.get(y.dataId).values=Ve}else y=Wg(i,u,e);c=g.backend_util.getInnerMostAxes(c.length,a)}g.backend_util.assertAxesAreInnerMostDims("max",c,a);const[C,k]=g.backend_util.computeOutAndReduceShapes(y.shape,c);let B,P=C;if(o&&(P=g.backend_util.expandShapeToKeepDim(C,l)),m){const fe=e.texData.get(y.dataId).values,ve=iG(fe,g.util.sizeFromShape(k),P,i.dtype);B=e.makeTensorInfo(P,i.dtype),e.texData.get(B.dataId).values=ve}else B=function T7(t,n,e,r){const i=g.util.sizeFromShape(n),a=Ct({inputs:{x:t},attrs:{shape:[g.util.sizeFromShape(t.shape)/i,i]},backend:r}),l=Pc(a,t.dtype,"max",r),c=Ct({inputs:{x:l},attrs:{shape:e},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}(y,k,P,e);return h&&e.disposeIntermediateTensorInfo(y),B}const M7={kernelName:g.Max,backendName:"webgl",kernelFunc:_A},R7=ai({opSnippet:ix+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Oc+"\n  return result;\n",cpuKernelImpl:sG}),k7={kernelName:g.Maximum,backendName:"webgl",kernelFunc:R7},P7={kernelName:g.MaxPool,backendName:"webgl",kernelFunc:function O7(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n;Ef(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r;g.util.assert(g.backend_util.eitherStridesOrDilationsAreOne(o,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);const u=g.backend_util.computePool2DInfo(i.shape,s,o,1,a,l);if(1===u.filterWidth&&1===u.filterHeight&&g.util.arraysEqual(u.inShape,u.outShape))return Ms({inputs:{x:i},backend:e});const h=new Mf(u,"max",!1);return e.runWebGLProgram(h,[i],i.dtype)}},$7={kernelName:g.MaxPool3D,backendName:"webgl",kernelFunc:function F7(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{filterSize:s,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=r,h=g.backend_util.computePool3DInfo(i.shape,s,o,[1,1,1],a,c,l),m=new ox(h,"max",!1);return e.runWebGLProgram(m,[i],i.dtype)}};class L7{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;const s=n.effectiveFilterHeight,o=n.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${s-1-n.padInfo.top}, ${o-1-n.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${s};\n          wR += ${n.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${s*o-1} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${o} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class B7{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;const l=n.effectiveFilterDepth,c=n.effectiveFilterHeight,u=n.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${l-1-n.padInfo.front}, ${c-1-n.padInfo.top}, ${u-1-n.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${l};\n           wD += ${n.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${n.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${c};\n              wR += ${n.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${n.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${l*c*u-1} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${c} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const z7={kernelName:g.MaxPool3DGrad,backendName:"webgl",kernelFunc:function V7(t){const{inputs:n,backend:e,attrs:r}=t,{dy:i,input:s}=n,o=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,m=g.backend_util.computePool3DInfo(o.shape,a,l,[1,1,1],c,u),y=new ox(m,"max",!0),C=e.runWebGLProgram(y,[o],o.dtype),k=new B7(m),P=e.runWebGLProgram(k,[i,C],o.dtype);return e.disposeIntermediateTensorInfo(C),P}},j7={kernelName:g.MaxPoolGrad,backendName:"webgl",kernelFunc:function U7(t){const{inputs:n,backend:e,attrs:r}=t,{dy:i,input:s,output:o}=n,a=s;Ef([s,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,m=g.backend_util.computePool2DInfo(a.shape,l,c,1,u,h),C=new Mf(m,"max",!0),k=e.runWebGLProgram(C,[a],a.dtype),P=new L7(m),B=e.runWebGLProgram(P,[i,k],a.dtype);return e.disposeIntermediateTensorInfo(k),B}},W7={kernelName:g.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{const{x:r}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=n,l=e;g.util.assert(4===r.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];g.util.assert(g.backend_util.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const u=g.backend_util.computePool2DInfo(r.shape,i,s,c,o),[h,m]=function H7(t,n,e,r){let i=new Mf(e,"max",!1);const s=r.runWebGLProgram(i,[t],"float32");return i=new Mf(e,"max",!0,!0,n),[s,r.runWebGLProgram(i,[t],"float32")]}(r,a,u,l);return[h,m]}},K7={kernelName:g.Mean,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{const{x:r}=t,{keepDims:i,axis:s}=n,o=e,a=r.shape.length,l=g.util.parseAxisParam(s,r.shape);let c=l;const u=g.backend_util.getAxesPermutation(c,a),h=null!=u,m=o.shouldExecuteOnCPU([r]),y=[];let C=r;if(h){if(m){const ve=o.texData.get(C.dataId).values,Ve=new Array(a);for(let ht=0;ht<Ve.length;ht++)Ve[ht]=r.shape[u[ht]];const gt=rx(ve,r.shape,r.dtype,u,Ve);C=o.makeTensorInfo(Ve,r.dtype),o.texData.get(C.dataId).values=gt}else C=Wg(r,u,o);y.push(C),c=g.backend_util.getInnerMostAxes(c.length,a)}g.backend_util.assertAxesAreInnerMostDims("sum",c,a);const[k,P]=g.backend_util.computeOutAndReduceShapes(C.shape,c);let B=k;i&&(B=g.backend_util.expandShapeToKeepDim(k,l));const V=function G7(t,n,e,r){const i=g.util.sizeFromShape(n),a=Ct({inputs:{x:t},attrs:{shape:[g.util.sizeFromShape(t.shape)/i,i]},backend:r}),l=Pc(a,"float32","mean",r),c=Ct({inputs:{x:l},attrs:{shape:e},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}(C,P,B,o);for(const fe of y)o.disposeIntermediateTensorInfo(fe);return V}},q7={kernelName:g.Min,backendName:"webgl",kernelFunc:function X7(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{axis:s,keepDims:o}=r,a=i.shape.length,l=g.util.parseAxisParam(s,i.shape);let c=l;const u=g.backend_util.getAxesPermutation(c,a);let h=i;null!=u&&(h=$i({inputs:{x:i},backend:e,attrs:{perm:u}}),c=g.backend_util.getInnerMostAxes(c.length,i.shape.length)),g.backend_util.assertAxesAreInnerMostDims("min",c,a);const[m,y]=g.backend_util.computeOutAndReduceShapes(h.shape,c),k=Ct({inputs:{x:h},backend:e,attrs:{shape:[-1,g.util.sizeFromShape(y)]}}),P=Pc(k,k.dtype,"min",e);let B;return B=Ct(o?{inputs:{x:P},backend:e,attrs:{shape:g.backend_util.expandShapeToKeepDim(m,l)}}:{inputs:{x:P},backend:e,attrs:{shape:m}}),e.disposeIntermediateTensorInfo(k),e.disposeIntermediateTensorInfo(P),null!=u&&e.disposeIntermediateTensorInfo(h),B}},Q7=ai({opSnippet:ix+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Oc+"\n  return result;\n",cpuKernelImpl:oG}),J7={kernelName:g.Minimum,backendName:"webgl",kernelFunc:Q7};class eX{constructor(n,e,r){this.variableNames=["x"],this.outputShape=e.map((u,h)=>u[0]+n[h]+u[1]);const i=n.length,s=Xn(i),o=e.map(u=>u[0]).join(","),a=e.map((u,h)=>u[0]+n[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c="reflect"===r?0:1;this.userCode=1!==i?`\n      ${s} start = ${s}(${o});\n      ${s} end = ${s}(${a});\n\n      void main() {\n        ${s} outC = getOutputCoords();\n        for (int i = 0; i < ${i}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${c};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};\n          }\n        }\n        ${s} coords = outC - start;\n        setOutput(getX(${l}));\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${c};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${c};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class tX{constructor(n,e,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((C,k)=>C[0]+n[k]+C[1]);const i=n.length,s=Xn(i),o=e.map(C=>C[0]).join(","),a=e.map((C,k)=>C[0]+n[k]).join(","),l=Fi("rc",i),c=Fi("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,h=1===i?"source":`vec2(${c.slice(-2).join()})`,m="reflect"===r?0:1;let y="";if(1===i){const C=`\n        ${s} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${m};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${m};\n        }\n        source -= start;\n      `;y=`\n        ${s} rc = outputLoc;\n        ${C}\n        result[0] = getChannel(getX(${c.join()}), ${h});\n        ${l[i-1]} += 1;\n        if(${u}) {\n          ${C}\n          result[1] = getChannel(getX(${c.join()}), ${h});\n        }\n      `}else{const C=`\n        ${s} source = rc;\n        ${s} lt = ${s}(lessThan(source, start));\n        ${s} gte = ${s}(greaterThanEqual(source, end));\n        ${s} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${m}) +\n                gte * ((end - 1) * 2 - source + ${m});\n        source -= start;\n      `;y=`\n        ${s} rc = outputLoc;\n        ${C}\n        result[0] = getChannel(getX(${c.join()}), ${h});\n        ${l[i-1]} += 1;\n        if(${u}) {\n          ${C}\n          result[1] = getChannel(getX(${c.join()}), ${h});\n        }\n        rc = outputLoc;\n        ${l[i-2]} += 1;\n        if(${l[i-2]} < ${this.outputShape[i-2]}) {\n          ${C}\n          result[2] = getChannel(getX(${c.join()}), ${h});\n          ${l[i-1]} += 1;\n          if(${u}) {\n            ${C}\n            result[3] = getChannel(getX(${c.join()}), ${h});\n          }\n        }\n      `}this.userCode=`\n      const ${s} start = ${s}(${o});\n      const ${s} end = ${s}(${a});\n\n      void main() {\n        ${s} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${y}\n        setOutput(result);\n      }\n    `}}const rX={kernelName:g.MirrorPad,backendName:"webgl",kernelFunc:({inputs:t,backend:n,attrs:e})=>{const{x:r}=t,{paddings:i,mode:s}=e,o=(0,g.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tX(r.shape,i,s):new eX(r.shape,i,s);return n.runWebGLProgram(o,[r],r.dtype)}},oX=ai({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+Oc+"\n  return result;\n"}),aX={kernelName:g.Mod,backendName:"webgl",kernelFunc:oX};class lX{constructor(n,e,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[n,r],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${e-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${e-1}));\n      }\n    `}}const bA=ai({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),cX={kernelName:g.RealDiv,backendName:"webgl",kernelFunc:bA},vA="return a - b;",xA=ai({opSnippet:vA,packedOpSnippet:vA,supportsComplex:!0,cpuKernelImpl:IG}),uX={kernelName:g.Sub,backendName:"webgl",kernelFunc:xA};function wA(t){const{inputs:n,backend:e,attrs:r}=t,{logits:i}=n,{dim:s}=r,o=g.util.parseAxisParam([s],i.shape),a=_A({inputs:{x:i},backend:e,attrs:{reductionIndices:o,keepDims:!1}}),l=g.backend_util.expandShapeToKeepDim(a.shape,o),c=Ct({inputs:{x:a},backend:e,attrs:{shape:l}}),u=xA({inputs:{a:i,b:c},backend:e}),h=hA({inputs:{x:u},backend:e}),m=Gg({inputs:{x:h},backend:e,attrs:{axis:o,keepDims:!1}}),y=Ct({inputs:{x:m},backend:e,attrs:{shape:l}}),C=bA({inputs:{a:h,b:y},backend:e});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(y),C}const dX={kernelName:g.Softmax,backendName:"webgl",kernelFunc:wA},fX={kernelName:g.Multinomial,backendName:"webgl",kernelFunc:function hX(t){const{inputs:n,backend:e,attrs:r}=t,{logits:i}=n,{numSamples:s,seed:o,normalized:a}=r,l=a?i:wA({inputs:{logits:i},backend:e,attrs:{dim:i.shape.length-1}}),h=new lX(l.shape[0],l.shape[1],s),y=e.runWebGLProgram(h,[l],"int32",[[o]]);return a||e.disposeIntermediateTensorInfo(l),y}},pX=Xs+"\n  return -x;\n",yX={kernelName:g.Neg,backendName:"webgl",kernelFunc:function gX(t){const{inputs:n,backend:e}=t,{x:r}=n;if(e.shouldExecuteOnCPU([r])){const s=e.texData.get(r.dataId),[o,a]=lG(s.values,r.shape,r.dtype);return e.makeTensorInfo(a,r.dtype,o)}let i;return i=(0,g.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new jl(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new Ea(r.shape,pX),e.runWebGLProgram(i,[r],r.dtype)}},_X=g.kernel_impls.nonMaxSuppressionV3Impl,vX={kernelName:g.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:function bX(t){g.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:n,backend:e,attrs:r}=t,{boxes:i,scores:s}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,c=e.readSync(i.dataId),u=e.readSync(s.dataId),{selectedIndices:h}=_X(c,u,o,a,l);return e.makeTensorInfo([h.length],"int32",new Int32Array(h))}},xX=g.kernel_impls.nonMaxSuppressionV4Impl,CX={kernelName:g.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:function wX(t){g.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:n,backend:e,attrs:r}=t,{boxes:i,scores:s}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=e.readSync(i.dataId),h=e.readSync(s.dataId),{selectedIndices:m,validOutputs:y}=xX(u,h,o,a,l,c);return[e.makeTensorInfo([m.length],"int32",new Int32Array(m)),e.makeTensorInfo([],"int32",new Int32Array([y]))]}},EX=g.kernel_impls.nonMaxSuppressionV5Impl,DX={kernelName:g.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:function SX(t){g.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:n,backend:e,attrs:r}=t,{boxes:i,scores:s}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=e.readSync(i.dataId),h=e.readSync(s.dataId),m=o,y=a,C=l,k=c,{selectedIndices:P,selectedScores:B}=EX(u,h,m,y,C,k);return[e.makeTensorInfo([P.length],"int32",new Int32Array(P)),e.makeTensorInfo([B.length],"float32",new Float32Array(B))]}};class IX{constructor(n,e,r,i){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${i}), float(${r}),\n                      float(index == coords.y)));\n      }\n    `}}const MX={kernelName:g.OneHot,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:r}=t,{indices:i}=n,{dtype:s,depth:o,onValue:a,offValue:l}=r,c=g.util.sizeFromShape(i.shape),u=new IX(c,o,a,l),h=Ct({inputs:{x:i},backend:e,attrs:{shape:[c]}}),m=e.runWebGLProgram(u,[h],s);e.disposeIntermediateTensorInfo(h);const C=Ct({inputs:{x:m},backend:e,attrs:{shape:[...i.shape,o]}});return e.disposeIntermediateTensorInfo(m),C}};function Jg(t){const{inputs:n,backend:e}=t,{x:r}=n;if("complex64"===r.dtype){const i=Af({inputs:{input:r},backend:e}),s=Jg({inputs:{x:i},backend:e}),o=Zg({inputs:{input:r},backend:e}),a=Jg({inputs:{x:o},backend:e}),l=Hl({inputs:{real:s,imag:a},backend:e});return e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}return Rf({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:e})}const AX={kernelName:g.ZerosLike,backendName:"webgl",kernelFunc:Jg},NX={kernelName:g.OnesLike,backendName:"webgl",kernelFunc:function CA(t){const{inputs:n,backend:e}=t,{x:r}=n;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){const i=Af({inputs:{input:r},backend:e}),s=CA({inputs:{x:i},backend:e}),o=Zg({inputs:{input:r},backend:e}),a=Jg({inputs:{x:o},backend:e}),l=Hl({inputs:{real:s,imag:a},backend:e});return e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}return Rf({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:e})}},kX={kernelName:g.Pack,backendName:"webgl",kernelFunc:function RX(t){const{inputs:n,backend:e,attrs:r}=t,{axis:i}=r;if(1===n.length)return cx({inputs:{input:n[0]},backend:e,attrs:{dim:i}});const s=n[0].shape,o=n[0].dtype;n.forEach(u=>{g.util.assertShapesMatch(s,u.shape,"All tensors passed to stack must have matching shapes"),g.util.assert(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],c=tA({inputs:n.map(u=>{const h=cx({inputs:{input:u},backend:e,attrs:{dim:i}});return a.push(h),h}),backend:e,attrs:{axis:i}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}};class OX{constructor(n,e,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((c,u)=>c[0]+n[u]+c[1]);const i=n.length,s=Xn(i),o=e.map(c=>c[0]).join(","),a=e.map((c,u)=>c[0]+n[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);this.userCode=1!==i?`\n      ${s} start = ${s}(${o});\n      ${s} end = ${s}(${a});\n\n      void main() {\n        ${s} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${s} coords = outC - start;\n          setOutput(getX(${l}));\n        }\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class PX{constructor(n,e,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((k,P)=>k[0]+n[P]+k[1]);const i=n.length,s=Xn(i),o=e.map(k=>k[0]).join(","),a=e.map((k,P)=>k[0]+n[P]).join(","),l=Fi("rc",i),c=Fi("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,h=1===i?"source":`vec2(${c.slice(-2).join()})`,m=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;\n       if(${u}) {\n      `,1===i?"":`}\n       rc = outputLoc;\n       ${l[i-2]} += 1;\n       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,1===i?"":`  ${l[i-1]} += 1;\n         if(${u}) {`],y=1===i?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let C="";for(let k=0,P=1===i?2:4;k<P;k++)C+=`\n        ${m[k]}\n        if (${y}) {\n          result[${k}] = float(value);\n        } else {\n          ${s} source = rc - start;\n          result[${k}] = getChannel(getX(${c.join()}), ${h});\n        }\n      `;C+=1===i?"} ":"}}",this.userCode=`\n      const ${s} start = ${s}(${o});\n      const ${s} end = ${s}(${a});\n\n      void main() {\n        ${s} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${C}\n        setOutput(result);\n      }\n    `}}const EA=t=>{const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{paddings:s,constantValue:o}=r;if(0===g.util.sizeFromShape(i.shape))return Rf({backend:e,attrs:{shape:s.map((u,h)=>u[0]+i.shape[h]+u[1]),value:o,dtype:i.dtype}});const a=(0,g.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new PX(i.shape,s,o):new OX(i.shape,s,o);return e.runWebGLProgram(a,[i],i.dtype,[[o]])},FX={kernelName:g.PadV2,backendName:"webgl",kernelFunc:EA},BX=ai({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+Oc+"\n  return result;\n"}),VX={kernelName:g.Pow,backendName:"webgl",kernelFunc:BX},UX={kernelName:g.Prod,backendName:"webgl",kernelFunc:function zX(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{axis:s,keepDims:o}=r,a=i.shape.length,l=[],c=g.util.parseAxisParam(s,i.shape);let u=c;const h=g.backend_util.getAxesPermutation(u,a);let y,m=i;if(null!=h&&(m=$i({inputs:{x:i},backend:e,attrs:{perm:h}}),u=g.backend_util.getInnerMostAxes(u.length,a),l.push(m)),g.backend_util.assertAxesAreInnerMostDims("prod",u,a),e.shouldExecuteOnCPU([m])){const C=e.texData.get(m.dataId).values,{outVals:k,outShape:P,outDtype:B}=uG(m.shape,m.dtype,C,u);y=e.makeTensorInfo(P,B,k)}else{const[C,k]=g.backend_util.computeOutAndReduceShapes(m.shape,u),P=g.util.sizeFromShape(k),B=Ct({inputs:{x:m},backend:e,attrs:{shape:[-1,P]}}),fe=Pc(B,(0,g.sumOutType)(i.dtype),"prod",e);y=Ct({inputs:{x:fe},backend:e,attrs:{shape:C}}),l.push(B),l.push(fe)}if(o){l.push(y);const C=g.backend_util.expandShapeToKeepDim(y.shape,c);y=Ct({inputs:{x:y},backend:e,attrs:{shape:C}})}return l.forEach(C=>e.disposeIntermediateTensorInfo(C)),y}},HX={kernelName:g.RaggedGather,backendName:"webgl",kernelFunc:function jX(t){const{inputs:n,backend:e,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=n,{outputRaggedRank:a}=r,l=i.map(B=>e.readSync(B.dataId)),c=i.map(B=>B.shape),u=e.readSync(s.dataId),h=e.readSync(o.dataId),[m,y,C]=dG(l,c,u,s.shape,s.dtype,h,o.shape,a),k=m.map(B=>e.makeTensorInfo([B.length],"int32",B)),P=e.makeTensorInfo(C,s.dtype,y);return k.concat([P])}},GX={kernelName:g.RaggedRange,backendName:"webgl",kernelFunc:function WX(t){const{inputs:n,backend:e}=t,{starts:r,limits:i,deltas:s}=n,o=e.readSync(r.dataId),a=e.readSync(i.dataId),l=e.readSync(s.dataId),[c,u]=hG(o,r.shape,r.dtype,a,i.shape,l,s.shape);return[e.makeTensorInfo([c.length],"int32",c),e.makeTensorInfo([u.length],r.dtype,u)]}},XX={kernelName:g.RaggedTensorToTensor,backendName:"webgl",kernelFunc:function KX(t){const{inputs:n,backend:e,attrs:r}=t,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=r,c=e.readSync(i.dataId),u=e.readSync(s.dataId),h=e.readSync(o.dataId),m=a.map(P=>e.readSync(P.dataId)),y=a.map(P=>P.shape),[C,k]=fG(c,i.shape,u,s.shape,s.dtype,h,o.shape,m,y,l);return e.makeTensorInfo(C,s.dtype,k)}},SA=t=>{const{backend:n,attrs:e}=t,{start:r,stop:i,step:s,dtype:o}=e,a=pG(r,i,s,o);return n.makeTensorInfo([a.length],o,a)},qX={kernelName:g.Range,backendName:"webgl",kernelFunc:SA},ZX=Mn({opSnippet:"return 1.0 / x;"}),YX={kernelName:g.Reciprocal,backendName:"webgl",kernelFunc:ZX},JX=Mn({opSnippet:Xs+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),e9={kernelName:g.Relu,backendName:"webgl",kernelFunc:JX},n9=Mn({opSnippet:Xs+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),r9={kernelName:g.Relu6,backendName:"webgl",kernelFunc:n9};class i9{constructor(n,e,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=n;this.outputShape=[o,e,r,c];const u=[i&&e>1?a-1:a,i&&r>1?l-1:l],h=[i&&e>1?e-1:e,i&&r>1?r-1:r];let m;m=s?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/h[0]},\n          ${u[1]/h[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${m};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class s9{constructor(n,e,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=n;this.outputShape=[o,e,r,c];const u=[i&&e>1?a-1:a,i&&r>1?l-1:l],h=[i&&e>1?e-1:e,i&&r>1?r-1:r];let m;m=s?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/h[0]},\n          ${u[1]/h[1]},\n          ${u[1]/h[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,\n                                     ${l}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${m};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${c-1};\n        bool hasNextRow = coords.z < ${r-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const a9={kernelName:g.ResizeBilinear,backendName:"webgl",kernelFunc:function o9(t){const{inputs:n,backend:e,attrs:r}=t,{images:i}=n,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,c]=a,u=(0,g.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new s9(i.shape,l,c,s,o):new i9(i.shape,l,c,s,o);return e.runWebGLProgram(u,[i],"float32")}};class l9{constructor(n,e,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,i,s]=e,[,o,a]=n,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],h=l[1]/c[1],m=1/u,y=1/h,C=2*Math.ceil(m)+2,k=2*Math.ceil(y)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${h});\n\n        const float invHeightScale = float(${m});\n        const float invWidthScale = float(${y});\n\n        const int winHeight = int(${C});\n        const int winWidth = int(${k});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const u9={kernelName:g.ResizeBilinearGrad,backendName:"webgl",kernelFunc:function c9(t){const{inputs:n,backend:e,attrs:r}=t,{images:i,dy:s}=n,{alignCorners:o}=r,a=new l9(s.shape,i.shape,o);return e.runWebGLProgram(a,[s],s.dtype)}};class d9{constructor(n,e,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=n;this.outputShape=[o,e,r,c];const u=[i&&e>1?a-1:a,i&&r>1?l-1:l],h=[i&&e>1?e-1:e,i&&r>1?r-1:r];let y;y=s?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/h[0]},\n          ${u[1]/h[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${y};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${i?"0.5":"0.0"})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class h9{constructor(n,e,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=n;this.outputShape=[o,e,r,c];const u=[i&&e>1?a-1:a,i&&r>1?l-1:l],h=[i&&e>1?e-1:e,i&&r>1?r-1:r];let y;y=s?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/h[0]},\n          ${u[1]/h[1]},\n          ${u[1]/h[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,\n                                     ${l}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${y};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${i?"0.5":"0.0"})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${c-1};\n        bool hasNextRow = coords.z < ${r-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const p9={kernelName:g.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:function f9(t){const{inputs:n,backend:e,attrs:r}=t,{images:i}=n,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,c]=a,u=(0,g.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new h9(i.shape,l,c,s,o):new d9(i.shape,l,c,s,o);return e.runWebGLProgram(u,[i],i.dtype)}};class m9{constructor(n,e,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,i,s]=e,[,o,a]=n,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],h=l[1]/c[1],m=1/u,y=1/h,C=2*Math.ceil(m)+2,k=2*Math.ceil(y)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${h});\n\n        const float invHeightScale = float(${m});\n        const float invWidthScale = float(${y});\n\n        const int winHeight = int(${C});\n        const int winWidth = int(${k});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${l[0]}) *\n                (float(dyR) / float(${c[0]}));\n\n            float sourceFracCol =\n                float(${l[1]}) *\n                  (float(dyC) / float(${c[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${i}) - 1),\n                ${r} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${s}) - 1),\n                ${r} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const y9={kernelName:g.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:function g9(t){const{inputs:n,backend:e,attrs:r}=t,{images:i,dy:s}=n,{alignCorners:o}=r,a=new m9(s.shape,i.shape,o);return e.runWebGLProgram(a,[s],s.dtype)}};class _9{constructor(n,e){this.variableNames=["x"];const r=n.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=n,1===r)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${n[0]} - coord - 1));\n        }\n      `);const s=n.map((a,l)=>(a=>-1!==e.indexOf(a)&&1!==n[a]?`${n[a]} - coords[${a}] - 1`:`coords[${a}]`)(l)).join(","),o=Xn(r);this.userCode=`\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${s}));\n      }\n    `}}class b9{constructor(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=n.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=n;const i=Fi("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Xn(r);function m(C){const k=n.map((V,fe)=>function y(C,k){return-1!==e.indexOf(C)&&1!==n[C]?`${n[C]} - ${k[C]} - 1`:`${k[C]}`}(fe,C));return`getChannel(getX(${k.join(",")}), vec2(${k.slice(-2).join(",")}))`}this.userCode=1===r?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${n[0]} - rc - 1),\n            ${n[0]} - rc - 1);\n          if(${s}){\n              result.g = getChannel(getX(${n[0]} - (rc  + 1) - 1),\n                ${n[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${a} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function l(C){return m(C)}(i.slice())};\n          if(${s}){\n            result.g = ${function c(C){return C[r-1]="("+C[r-1]+" + 1)",m(C)}(i.slice())};\n          }\n          if(${o}) {\n            result.b = ${function u(C){return C[r-2]="("+C[r-2]+" + 1)",m(C)}(i.slice())};\n            if(${s}) {\n              result.a = ${function h(C){return C[r-1]="("+C[r-1]+" + 1)",C[r-2]="("+C[r-2]+" + 1)",m(C)}(i.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const x9={kernelName:g.Reverse,backendName:"webgl",kernelFunc:function v9(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{dims:s}=r,o=i.shape.length,a=g.util.parseAxisParam(s,i.shape);if(0===o)return Ms({inputs:{x:i},backend:e});const l=(0,g.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new b9(i.shape,a):new _9(i.shape,a);return e.runWebGLProgram(l,[i],i.dtype)}};class w9{constructor(n,e){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=n[1],i=n[2];this.outputShape=n;let s="";s="number"==typeof e?`float outputValue = ${e.toFixed(2)};`:`\n        vec3 fill = vec3(${e.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${s}\n          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const C9={kernelName:g.RotateWithOffset,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=n,a=e,l=new w9(r.shape,s),[c,u]=g.backend_util.getImageCenter(o,r.shape[1],r.shape[2]),h=[[c,u,Math.sin(i),Math.cos(i)]];return a.runWebGLProgram(l,[r],r.dtype,h)}},E9=Mn({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),S9={kernelName:g.Round,backendName:"webgl",kernelFunc:E9},D9=Mn({opSnippet:"return inversesqrt(x);",cpuKernelImpl:mG}),I9={kernelName:g.Rsqrt,backendName:"webgl",kernelFunc:D9};class dx{constructor(n,e,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=Xn(s.length),u=Xn(o.length);let h="";1===r?h="i":2===r&&(h="i, j");let y="";1===i?y="i":2===i&&(y="i, coords[1]");let k="";l&&(k="coords[0], coords[1]"),this.userCode=`\n        ${c} strides = ${c}(${s});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${n}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${e}; j++) {\n              int index = round(getIndices(${h}));\n              flattenedIndex += index * ${e>1?"strides[j]":"strides"};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += getUpdates(${y});\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(${k}), sum, float(found)));\n        }\n      `}}class T9{constructor(n,e,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=Xn(s.length),u=Xn(o.length);let h="";1===r?h="i":2===r&&(h="i, j");let y="";1===i?y="i":2===i&&(y="i, coords[1]");let k="";l&&(k="coords[0], coords[1]"),this.userCode=`\n        ${c} strides = ${c}(${s});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ${n}; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ${e}; j+=2) {\n              ivec4 index = round(getIndices(${h}));\n              flattenedIndex += index.xz * ${e>1?"strides[j]":"strides"};\n              if (j + 1 < ${e}) {\n                flattenedIndex += index.yw * ${e>1?"strides[j + 1]":"strides"};\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = getUpdates(${y});\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(getDefaultValue(${k}), sum, found));\n        }\n      `}}const A9={kernelName:g.ScatterNd,backendName:"webgl",kernelFunc:function M9(t){const{inputs:n,backend:e,attrs:r}=t,{indices:i,updates:s}=n,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=g.backend_util.calculateShapes(s,i,o),m=[h/c,c];if(0===h)return e.makeTensorInfo(o,i.dtype);const y=Ct({inputs:{x:i},backend:e,attrs:{shape:[l,a]}}),C=Ct({inputs:{x:s},backend:e,attrs:{shape:[l,c]}}),k=e.makeTensorInfo([],"float32",new Float32Array([0]));let P;P=(0,g.env)().getBool("WEBGL_PACK")?new T9(l,a,y.shape.length,C.shape.length,u,m):new dx(l,a,y.shape.length,C.shape.length,u,m);const B=e.runWebGLProgram(P,[C,y,k],C.dtype),V=Ct({inputs:{x:B},backend:e,attrs:{shape:o}});return e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(C),e.disposeIntermediateTensorInfo(B),e.disposeIntermediateTensorInfo(k),V}};class N9{constructor(n,e,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[n,r];const o=`for (int i = 0; i < ${Math.ceil(Math.log2(e+1))}; ++i) { if (left >= right) break;`,a=2===(0,g.env)().getNumber("WEBGL_VERSION")?"while (left < right) {":o;this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${a}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${"left"===i?"<":"<="} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}const k9={kernelName:g.SearchSorted,backendName:"webgl",kernelFunc:function R9(t){const{inputs:n,backend:e,attrs:r}=t,{sortedSequence:i,values:s}=n,{side:o}=r,a=new N9(i.shape[0],i.shape[1],s.shape[1],o);return e.runWebGLProgram(a,[i,s],"int32",[[i.shape[1]]])}};class O9{constructor(n,e,r){let i,s;if(this.variableNames=["c","a","b"],this.outputShape=e,r>4)throw Error(`Where for rank ${r} is not yet supported`);if(1===r)s="resRC",i="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<e.length;u++)c.push(`${a[u]}`),u<n&&l.push(`${a[u]}`);i=l.join(),s=c.join()}const o=Xn(r);this.userCode=`\n      void main() {\n        ${o} resRC = getOutputCoords();\n        float cVal = getC(${i});\n        if (cVal >= 1.0) {\n          setOutput(getA(${s}));\n        } else {\n          setOutput(getB(${s}));\n        }\n      }\n    `}}const F9={kernelName:g.Select,backendName:"webgl",kernelFunc:function P9(t){const{inputs:n,backend:e}=t,{condition:r,t:i,e:s}=n,o=new O9(r.shape.length,i.shape,i.shape.length);return e.runWebGLProgram(o,[r,i,s],(0,g.upcastType)(i.dtype,s.dtype))}},L9=Mn({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${g.backend_util.SELU_SCALEALPHA};\n  float scale = ${g.backend_util.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),B9={kernelName:g.Selu,backendName:"webgl",kernelFunc:L9},z9=Mn({opSnippet:md+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:yG}),U9={kernelName:g.Sigmoid,backendName:"webgl",kernelFunc:z9},j9=Mn({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),H9={kernelName:g.Sign,backendName:"webgl",kernelFunc:j9},K9=Mn({opSnippet:md+"\n  return sin(x);\n",packedOpSnippet:`\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ${Oc}\n  return result;\n`}),X9={kernelName:g.Sin,backendName:"webgl",kernelFunc:K9},q9=Mn({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),Z9={kernelName:g.Sinh,backendName:"webgl",kernelFunc:q9},Y9=Mn({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),Q9={kernelName:g.Softplus,backendName:"webgl",kernelFunc:Y9},eq={kernelName:g.SpaceToBatchND,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{blockShape:s,paddings:o}=r;g.util.assert(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((B,V)=>B*V),l=[[0,0]];l.push(...o);for(let B=1+s.length;B<i.shape.length;++B)l.push([0,0]);const c=[],u=EA({inputs:{x:i},backend:e,attrs:{paddings:l,constantValue:0}}),h=g.backend_util.getReshaped(u.shape,s,a,!1),m=g.backend_util.getPermuted(h.length,s.length,!1),y=g.backend_util.getReshapedPermuted(u.shape,s,a,!1),C=Ct({inputs:{x:u},backend:e,attrs:{shape:h}}),k=$i({inputs:{x:C},backend:e,attrs:{perm:m}}),P=Ct({inputs:{x:k},backend:e,attrs:{shape:y}});return c.push(u),c.push(C),c.push(k),c.forEach(B=>e.disposeIntermediateTensorInfo(B)),P}},nq={kernelName:g.SparseFillEmptyRows,backendName:"webgl",kernelFunc:function tq(t){const{inputs:n,backend:e}=t,{indices:r,values:i,denseShape:s,defaultValue:o}=n;if(1!==s.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${s.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${r.shape}`);if(1!==i.shape.length)throw new Error(`Values must be a vector, saw:\n         ${i.shape}`);if(0!==o.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${o.shape}`);const a=e.readSync(r.dataId),l=e.readSync(i.dataId),c=e.readSync(s.dataId),u=e.readSync(o.dataId)[0],[h,m,y,C,k]=bG(a,r.shape,r.dtype,l,i.dtype,c,u);return[e.makeTensorInfo(m,r.dtype,h),e.makeTensorInfo([m[0]],i.dtype,y),e.makeTensorInfo([C.length],"bool",new Uint8Array(C.map(P=>Number(P)))),e.makeTensorInfo([k.length],r.dtype,new Int32Array(k))]}},iq={kernelName:g.SparseReshape,backendName:"webgl",kernelFunc:function rq(t){const{inputs:n,backend:e}=t,{inputIndices:r,inputShape:i,newShape:s}=n;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==i.shape.length)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(1!==s.shape.length)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(e.readSync(i.dataId)),a=e.readSync(r.dataId),l=Array.from(e.readSync(s.dataId)),[c,u,h]=vG(a,r.shape,r.dtype,o,l);return[e.makeTensorInfo(u,r.dtype,c),e.makeTensorInfo([h.length],s.dtype,new Int32Array(h))]}},oq={kernelName:g.SparseSegmentMean,backendName:"webgl",kernelFunc:function sq(t){const{inputs:n,backend:e}=t,{data:r,indices:i,segmentIds:s}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${i.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${s.shape}`);const o=e.readSync(r.dataId),a=e.readSync(i.dataId),l=e.readSync(s.dataId),[c,u]=AM(o,r.shape,r.dtype,a,l,!0);return e.makeTensorInfo(u,r.dtype,c)}},lq={kernelName:g.SparseSegmentSum,backendName:"webgl",kernelFunc:function aq(t){const{inputs:n,backend:e}=t,{data:r,indices:i,segmentIds:s}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${i.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${s.shape}`);const o=e.readSync(r.dataId),a=e.readSync(i.dataId),l=e.readSync(s.dataId),[c,u]=AM(o,r.shape,r.dtype,a,l);return e.makeTensorInfo(u,r.dtype,c)}},uq={kernelName:g.SparseToDense,backendName:"webgl",kernelFunc:function cq(t){const{inputs:n,backend:e,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:o}=n,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:m}=g.backend_util.calculateShapes(s,i,a);if("string"===s.dtype){const B=e.bufferSync(i),V=e.bufferSync(s),fe=g.util.decodeString(e.readSync(o.dataId)[0]),ve=gG(B,V,a,m,u,c,l,h,fe,!1);return e.makeTensorInfo(a,ve.dtype,ve.values)}const C=new dx(c,l,i.shape.length,s.shape.length,h,[m,1],!1),k=e.runWebGLProgram(C,[s,i,o],s.dtype),P=Ct({inputs:{x:k},backend:e,attrs:{shape:a}});return e.disposeIntermediateTensorInfo(k),P}},hq={kernelName:g.SplitV,backendName:"webgl",kernelFunc:function dq(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{numOrSizeSplits:s,axis:o}=r,a=g.util.parseAxisParam(o,i.shape)[0],l=g.backend_util.prepareSplitSize(i,s,a),u=new Array(i.shape.length).fill(0),h=i.shape.slice();return l.map(m=>{const y=[...h];y[a]=m;const C=gd({inputs:{x:i},backend:e,attrs:{begin:u,size:y}});return u[a]+=m,C})}},DA="return sqrt(x);",fq=Mn({opSnippet:DA,packedOpSnippet:DA,cpuKernelImpl:xG}),pq={kernelName:g.Sqrt,backendName:"webgl",kernelFunc:fq},mq=Mn({opSnippet:"return x * x;"}),gq={kernelName:g.Square,backendName:"webgl",kernelFunc:mq},IA="return (a - b) * (a - b);",yq=ai({opSnippet:IA,packedOpSnippet:IA}),_q={kernelName:g.SquaredDifference,backendName:"webgl",kernelFunc:yq},vq={kernelName:g.StaticRegexReplace,backendName:"webgl",kernelFunc:function bq(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n;if("string"!==i.dtype)throw new Error("Input must be of datatype string");const s=e.readSync(i.dataId),o=g.backend_util.fromUint8ToStringArray(s),a=wG(o,"string",r);return e.makeTensorInfo(i.shape,"string",a)}},wq={kernelName:g.Step,backendName:"webgl",kernelFunc:function xq({inputs:t,attrs:n,backend:e}){const{x:r}=t,s=new Ea(r.shape,Xs+`\n    return x > 0.0 ? 1.0 : float(${n.alpha});\n  `);return e.runWebGLProgram(s,[r],r.dtype)}};class Cq{constructor(n,e,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=Xn(r.length),o=Xn(r.length);let a="";if(1===i)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,1===r.length?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`\n      ${s} begin = ${s}(${n});\n      ${s} strides = ${s}(${e});\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${a}));\n      }\n    `}}const Sq={kernelName:g.StridedSlice,backendName:"webgl",kernelFunc:function Eq(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{begin:s,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:m}=r,{finalShapeSparse:y,finalShape:C,isIdentity:k,sliceDim0:P,isSimpleSlice:B,begin:V,end:fe,strides:ve}=g.slice_util.sliceInfo(i.shape,s,o,a,l,c,u,h,m);let Ve;if(k)Ve=Ct({inputs:{x:i},backend:e,attrs:{shape:C}});else if(P||B){g.util.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const dt=g.slice_util.computeOutShape(V,fe,ve),ht=gd({inputs:{x:i},backend:e,attrs:{begin:V,size:dt}});Ve=Ct({inputs:{x:ht},backend:e,attrs:{shape:C}}),e.disposeIntermediateTensorInfo(ht)}else if(e.shouldExecuteOnCPU([i])){const ht=e.readSync(i.dataId),Gt=(0,g.buffer)(i.shape,i.dtype,ht),zt=CG(y,Gt,ve,V);Ve=e.makeTensorInfo(C,i.dtype,zt.values)}else{const ht=new Cq(V,ve,y);Ve=e.runWebGLProgram(ht,[i],i.dtype)}const gt=Ct({inputs:{x:Ve},backend:e,attrs:{shape:C}});return e.disposeIntermediateTensorInfo(Ve),gt}},Iq={kernelName:g.StringNGrams,backendName:"webgl",kernelFunc:function Dq(t){const{inputs:n,backend:e,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=n,m=e.readSync(u.dataId),y=e.readSync(h.dataId),[C,k]=EG(m,y,i,s,o,a,l,c);return[e.makeTensorInfo([C.length],"string",C),e.makeTensorInfo(h.shape,"int32",k)]}},Mq={kernelName:g.StringSplit,backendName:"webgl",kernelFunc:function Tq(t){const{inputs:n,backend:e,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:o}=n;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(1!==s.shape.length)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=e.readSync(s.dataId),l=e.readSync(o.dataId)[0],[c,u,h]=SG(a,l,i),m=u.length;return[e.makeTensorInfo([m,2],"int32",c),e.makeTensorInfo([m],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(h))]}},Nq={kernelName:g.StringToHashBucketFast,backendName:"webgl",kernelFunc:function Aq(t){const{inputs:n,backend:e,attrs:r}=t,{numBuckets:i}=r,{input:s}=n;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=e.readSync(s.dataId),a=DG(o,i);return e.makeTensorInfo(s.shape,"int32",a)}},Rq=Mn({opSnippet:"return tan(x);"}),kq={kernelName:g.Tan,backendName:"webgl",kernelFunc:Rq},Oq=Mn({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),Pq={kernelName:g.Tanh,backendName:"webgl",kernelFunc:Oq},$q={kernelName:g.TensorScatterUpdate,backendName:"webgl",kernelFunc:function Fq(t){const{inputs:n,backend:e}=t,{tensor:i,indices:s,updates:o}=n,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=g.backend_util.calculateShapes(o,s,i.shape),m=[h/c,c];if(0===h)return e.makeTensorInfo(i.shape,s.dtype);const y=Ct({inputs:{x:s},backend:e,attrs:{shape:[l,a]}}),C=Ct({inputs:{x:o},backend:e,attrs:{shape:[l,c]}}),k=Ct({inputs:{x:i},backend:e,attrs:{shape:m}}),P=new dx(l,a,y.shape.length,C.shape.length,u,m,!1,!0),B=e.runWebGLProgram(P,[C,y,k],k.dtype),V=Ct({inputs:{x:B},backend:e,attrs:{shape:i.shape}});return e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(C),e.disposeIntermediateTensorInfo(k),e.disposeIntermediateTensorInfo(B),V}};class Lq{constructor(n,e){this.variableNames=["A"];const r=new Array(n.length);for(let o=0;o<r.length;o++)r[o]=n[o]*e[o];this.outputShape=r,this.rank=r.length;const i=Xn(this.rank),s=function Bq(t){const n=t.length;if(n>5)throw Error(`Tile for rank ${n} is not yet supported`);if(1===n)return`imod(resRC, ${t[0]})`;const e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${e[i]}, ${t[i]})`);return r.join()}(n);this.userCode=`\n      void main() {\n        ${i} resRC = getOutputCoords();\n        setOutput(getA(${s}));\n      }\n    `}}function TA(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{reps:s}=r;if("string"===i.dtype||i.shape.length>5){const l=e.readSync(i.dataId),c="string"===i.dtype?l.map(m=>g.util.decodeString(m)):l,u=(0,g.buffer)(i.shape,i.dtype,c),h=TG(u,s);return e.makeTensorInfo(h.shape,h.dtype,h.values)}const o=new Lq(i.shape,s);return e.runWebGLProgram(o,[i],i.dtype)}const Vq={kernelName:g.Tile,backendName:"webgl",kernelFunc:TA};class zq{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=n,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class Uq{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=n,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function Fc(t,n){null!==n&&t.disposeIntermediateTensorInfo(n)}function MA(t){let n=1;for(;n<t;)n*=2;return n}const Hq={kernelName:g.TopK,backendName:"webgl",kernelFunc:function jq(t){const{inputs:n,backend:e,attrs:r}=t,{x:i}=n,{k:s,sorted:o}=r,a=(0,g.env)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=(0,g.env)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,u=c[c.length-1];if(e.shouldExecuteOnCPU([i])||u<a||s>l){const zt=e.readSync(i.dataId),[Hn,Ln]=MG(zt,c,i.dtype,s,o);return[e.makeTensorInfo(Hn.shape,Hn.dtype,Hn.values),e.makeTensorInfo(Ln.shape,Ln.dtype,Ln.values)]}if(0===s)return c[c.length-1]=0,[e.makeTensorInfo(c,i.dtype,[]),e.makeTensorInfo(c,"int32",[])];if(1===u)return[i,Rf({attrs:{shape:c,dtype:"int32",value:0},backend:e})];const h=e.texData.get(i.dataId),m=null!==h&&h.isPacked,y=m?e.unpackTensor(i):i,k=g.util.sizeFromShape(c)/u,P=Ct({inputs:{x:y},attrs:{shape:[k,u]},backend:e});m&&Fc(e,y);const B=MA(s),V=MA(u);let fe=null;const ve=()=>null===fe?[P,P]:[P,fe],Ve=(zt,Hn,Ln)=>{const ui=ve(),wi=new zq(Ln),$t=fe;fe=e.runWebGLProgram(wi,ui,"int32",[[u],[null===fe?1:0],[Number.NEGATIVE_INFINITY],[zt],[Hn]]),Fc(e,$t)};for(let zt=1;zt<B;zt*=2){const Hn=2*zt;for(let Ln=zt;Ln>=1;Ln/=2)Ve(Hn,Ln,[k,V])}for(let zt=V;zt>B;zt/=2){const Hn=ve(),Ln=new Uq([k,zt/2]),Vi=fe;fe=e.runWebGLProgram(Ln,Hn,"int32",[[u],[null===fe?1:0],[B]]),Fc(e,Vi);const kt=B/2,$t=2*kt;for(let Ft=kt;Ft>=1;Ft/=2)Ve($t,Ft,fe.shape)}let gt=fe;fe=gd({inputs:{x:fe},backend:e,attrs:{begin:0,size:[k,s]}}),Fc(e,gt);let dt=yA({inputs:{x:P,indices:fe},backend:e,attrs:{axis:1,batchDims:1}});Fc(e,P);const ht=c.slice(0,-1);ht.push(s),gt=fe,fe=Ct({inputs:{x:fe},attrs:{shape:ht},backend:e}),Fc(e,gt);const Gt=dt;return dt=Ct({inputs:{x:dt},attrs:{shape:ht},backend:e}),Fc(e,Gt),[dt,fe]}};class Wq{constructor(n,e,r,i,s,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a="nearest"===r?1:2;let l;switch(i){case"constant":default:l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${l} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${l} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${l} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${n} && 0 <= coordX && coordX < ${e}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${s});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${s});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${e}));\n                float mapY = mapCoord(inY, float(${n}));\n\n                if (${a} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const Kq={kernelName:g.Transform,backendName:"webgl",kernelFunc:function Gq(t){const{inputs:n,backend:e,attrs:r}=t,{image:i,transforms:s}=n,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=r,[u,h,m,y]=i.shape,[C,k]=c??[h,m],B=new Wq(h,m,o,a,l,[u,C,k,y]);return e.runWebGLProgram(B,[i,s],"float32")}},qq={kernelName:g.Unique,backendName:"webgl",kernelFunc:function Xq(t){const{inputs:n,attrs:e,backend:r}=t,{axis:i}=e,{x:s}=n;Ef(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(s.dataId),{outputValues:a,outputShape:l,indices:c}=AG(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}},Yq={kernelName:g.Unpack,backendName:"webgl",kernelFunc:function Zq(t){const{inputs:n,backend:e,attrs:r}=t,{value:i}=n;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i,a=o.shape.length,l=i.shape[s],c=new Array(a-1);let u=0;for(let k=0;k<a;k++)k!==s&&(c[u++]=o.shape[k]);const h=[],m=new Array(a).fill(0),y=o.shape.slice();y[s]=1;const C=new Array(l);for(let k=0;k<C.length;k++){m[s]=k;const P=gd({inputs:{x:o},backend:e,attrs:{begin:m,size:y}}),B=Ct({inputs:{x:P},backend:e,attrs:{shape:c}});C[k]=B,h.push(P)}return h.forEach(k=>e.disposeIntermediateTensorInfo(k)),C}};class Qq{constructor(n,e){this.variableNames=["x","segmentIds"];const r=n.windowSize,i=n.batchSize,s=n.inSize,o=n.numSegments,a=o*Math.ceil(s/r);this.outputShape=[i,a];const u=4*Math.floor(r/4),h=r%4,m="\n        sumValue += dot(values, segFilter);\n    ";let y="";s%r>0&&(y=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return initializationValue;\n        }\n      `);let C="";s%r>0&&(C=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${y}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${C}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${o})) * float(${r}));\n        int currentSeg = int(mod(float(outIdx), float(${o})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${m}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===h}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${m}\n        } else if (${2===h}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${m}\n        } else if (${3===h}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${m}\n        }\n        setOutput(sumValue);\n      }\n    `}}const tZ=[E5,D5,M5,R5,O5,$5,B5,z5,W5,K5,Z5,J5,n6,o6,c6,d6,f6,y6,b6,x6,S6,R6,O6,L6,V6,W6,K6,Y6,a5,e8,s8,c8,m8,_8,v8,w8,E8,T8,A8,k8,P8,$8,B8,U8,H8,X8,Z8,J8,nK,iK,oK,uK,hK,mK,yK,_K,vK,wK,EK,DK,TK,AK,kK,FK,LK,zK,HK,GK,XK,o5,ZK,r8,QK,e7,n7,c5,i7,o7,l7,d7,p7,g7,_7,v7,E7,I7,M7,k7,P7,$7,z7,j7,W7,K7,q7,J7,rX,aX,fX,h5,yX,vX,CX,DX,z6,MX,NX,kX,FX,VX,d5,UX,HX,GX,XX,qX,U6,cX,YX,e9,r9,p5,a9,u9,p9,y9,x9,C9,S9,I9,A9,k9,F9,B9,U9,H9,X9,Z9,A6,dX,Q9,eq,nq,iq,oq,lq,uq,hq,pq,gq,_q,vq,wq,Sq,Iq,Mq,Nq,uX,x5,kq,Pq,$q,Vq,Hq,Kq,w5,qq,Yq,{kernelName:g.UnsortedSegmentSum,backendName:"webgl",kernelFunc:function Jq(t){const{inputs:n,backend:e,attrs:r}=t,{x:i,segmentIds:s}=n,{numSegments:o}=r,a=i.shape.length,l=[];let c=0;const u=g.backend_util.getAxesPermutation([c],a);let h=i;null!=u&&(h=$i({inputs:{x:i},backend:e,attrs:{perm:u}}),l.push(h),c=g.backend_util.getInnerMostAxes(1,a)[0]);const m=g.backend_util.segment_util.computeOutShape(h.shape,c,o),y=g.util.sizeFromShape([h.shape[c]]),C=Ct({inputs:{x:h},backend:e,attrs:{shape:[-1,y]}});l.push(C);const k=(0,g.sumOutType)(i.dtype),P=(ve,Ve,gt,dt,ht)=>{const Gt=ve.shape[0],zt=ve.shape[1],Hn=g.backend_util.segment_util.segOpComputeOptimalWindowSize(zt,ht),ui=new Qq({windowSize:Hn,inSize:zt,batchSize:Gt,numSegments:ht},Ve),wi=e.compileAndRun(ui,[ve,gt],dt);if(l.push(wi),wi.shape[1]===ht)return wi;const Vi=SA({backend:e,attrs:{start:0,stop:ht,step:1,dtype:"float32"}}),kt=TA({inputs:{x:Vi},backend:e,attrs:{reps:[zt/Hn]}});return l.push(Vi),l.push(kt),P(wi,Ve,kt,dt,ht)},V=Ct({inputs:{x:P(C,"unsortedSegmentSum",s,k,o)},backend:e,attrs:{shape:m}});let fe=V;if(null!=u){l.push(V);const ve=g.backend_util.getUndoAxesPermutation(u);fe=$i({inputs:{x:fe},backend:e,attrs:{perm:ve}})}return l.forEach(ve=>e.disposeIntermediateTensorInfo(ve)),fe}},AX];for(const t of tZ)(0,g.registerKernel)(t);const{isArray:rZ}=Array,{getPrototypeOf:iZ,prototype:sZ,keys:oZ}=Object;function AA(t){if(1===t.length){const n=t[0];if(rZ(n))return{args:n,keys:null};if(function aZ(t){return t&&"object"==typeof t&&iZ(t)===sZ}(n)){const e=oZ(n);return{args:e.map(r=>n[r]),keys:e}}}return{args:t,keys:null}}const{isArray:lZ}=Array;function hx(t){return qe(n=>function cZ(t,n){return lZ(n)?t(...n):t(n)}(t,n))}function NA(t,n){return t.reduce((e,r,i)=>(e[r]=n[i],e),{})}function Sa(...t){const n=_s(t),e=ia(t),{args:r,keys:i}=AA(t);if(0===r.length)return dn([],n);const s=new Te(function uZ(t,n,e=Le){return r=>{RA(n,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)RA(n,()=>{const c=dn(t[l],n);let u=!1;c.subscribe(et(r,h=>{s[l]=h,u||(u=!0,a--),a||r.next(e(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,n,i?o=>NA(i,o):Le));return e?s.pipe(hx(e)):s}function RA(t,n,e){t?Di(e,t,n):n()}const ey=H(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ty(...t){return function dZ(){return gs(1)}()(dn(t,_s(t)))}function kA(t){return new Te(n=>{Bn(t()).subscribe(n)})}function _d(t,n){const e=ye(t)?t:()=>t,r=i=>i.error(e());return new Te(n?i=>n.schedule(r,0,i):r)}function fx(){return tt((t,n)=>{let e=null;t._refCount++;const r=et(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const i=t._connection,s=e;e=null,i&&(!s||i===s)&&i.unsubscribe(),n.unsubscribe()});t.subscribe(r),r.closed||(e=t.connect())})}class OA extends Te{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Pe(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new $;const e=this.getSubject();n.add(this.source.subscribe(et(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=$.EMPTY)}return n}refCount(){return fx()(this)}}function ti(t){return t<=0?()=>Lr:tt((n,e)=>{let r=0;n.subscribe(et(e,i=>{++r<=t&&(e.next(i),t<=r&&e.complete())}))})}function ny(...t){const n=_s(t);return tt((e,r)=>{(n?ty(t,e,n):ty(t,e)).subscribe(r)})}function ni(t,n){return tt((e,r)=>{let i=0;e.subscribe(et(r,s=>t.call(n,s,i++)&&r.next(s)))})}function ry(t){return tt((n,e)=>{let r=!1;n.subscribe(et(e,i=>{r=!0,e.next(i)},()=>{r||e.next(t),e.complete()}))})}function PA(t=hZ){return tt((n,e)=>{let r=!1;n.subscribe(et(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(t())))})}function hZ(){return new ey}function $c(t,n){const e=arguments.length>=2;return r=>r.pipe(t?ni((i,s)=>t(i,s,r)):Le,ti(1),e?ry(n):PA(()=>new ey))}function bd(t,n){return ye(n)?er(t,n,1):er(t,1)}function ri(t,n,e){const r=ye(t)||n||e?{next:t,error:n,complete:e}:t;return r?tt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(et(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Le}function Wl(t){return tt((n,e)=>{let s,r=null,i=!1;r=n.subscribe(et(e,void 0,void 0,o=>{s=Bn(t(o,Wl(t)(n))),r?(r.unsubscribe(),r=null,s.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(e))})}function px(t){return t<=0?()=>Lr:tt((n,e)=>{let r=[];n.subscribe(et(e,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function mx(t){return qe(()=>t)}function vd(t){return tt((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function In(t){return tt((n,e)=>{Bn(t).subscribe(et(e,()=>e.complete(),ee)),!e.closed&&n.subscribe(e)})}const pn="primary",kf=Symbol("RouteTitle");class gZ{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function xd(t){return new gZ(t)}function yZ(t,n,e){const r=e.path.split("/");if(r.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Da(t,n){const e=t?Object.keys(t):void 0,r=n?Object.keys(n):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let s=0;s<e.length;s++)if(i=e[s],!FA(t[i],n[i]))return!1;return!0}function FA(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),r=[...n].sort();return e.every((i,s)=>r[s]===i)}return t===n}function $A(t){return t.length>0?t[t.length-1]:null}function Gl(t){return function nZ(t){return!!t&&(t instanceof Te||ye(t.lift)&&ye(t.subscribe))}(t)?t:rf(t)?dn(Promise.resolve(t)):Bt(t)}const bZ={exact:function VA(t,n,e){if(!Lc(t.segments,n.segments)||!iy(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!t.children[r]||!VA(t.children[r],n.children[r],e))return!1;return!0},subset:zA},LA={exact:function vZ(t,n){return Da(t,n)},subset:function xZ(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>FA(t[e],n[e]))},ignored:()=>!0};function BA(t,n,e){return bZ[e.paths](t.root,n.root,e.matrixParams)&&LA[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function zA(t,n,e){return UA(t,n,n.segments,e)}function UA(t,n,e,r){if(t.segments.length>e.length){const i=t.segments.slice(0,e.length);return!(!Lc(i,e)||n.hasChildren()||!iy(i,e,r))}if(t.segments.length===e.length){if(!Lc(t.segments,e)||!iy(t.segments,e,r))return!1;for(const i in n.children)if(!t.children[i]||!zA(t.children[i],n.children[i],r))return!1;return!0}{const i=e.slice(0,t.segments.length),s=e.slice(t.segments.length);return!!(Lc(t.segments,i)&&iy(t.segments,i,r)&&t.children[pn])&&UA(t.children[pn],n,s,r)}}function iy(t,n,e){return n.every((r,i)=>LA[e](t[i].parameters,r.parameters))}class wd{constructor(n=new qn([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xd(this.queryParams)),this._queryParamMap}toString(){return EZ.serialize(this)}}class qn{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sy(this)}}class Of{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=xd(this.parameters)),this._parameterMap}toString(){return WA(this)}}function Lc(t,n){return t.length===n.length&&t.every((e,r)=>e.path===n[r].path)}let Pf=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:function(){return new gx},providedIn:"root"})}return t})();class gx{parse(n){const e=new PZ(n);return new wd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${Ff(n.root,!0)}`,r=function IZ(t){const n=Object.keys(t).map(e=>{const r=t[e];return Array.isArray(r)?r.map(i=>`${oy(e)}=${oy(i)}`).join("&"):`${oy(e)}=${oy(r)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${r}${"string"==typeof n.fragment?`#${function SZ(t){return encodeURI(t)}(n.fragment)}`:""}`}}const EZ=new gx;function sy(t){return t.segments.map(n=>WA(n)).join("/")}function Ff(t,n){if(!t.hasChildren())return sy(t);if(n){const e=t.children[pn]?Ff(t.children[pn],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==pn&&r.push(`${i}:${Ff(s,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function CZ(t,n){let e=[];return Object.entries(t.children).forEach(([r,i])=>{r===pn&&(e=e.concat(n(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==pn&&(e=e.concat(n(i,r)))}),e}(t,(r,i)=>i===pn?[Ff(t.children[pn],!1)]:[`${i}:${Ff(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[pn]?`${sy(t)}/${e[0]}`:`${sy(t)}/(${e.join("//")})`}}function jA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oy(t){return jA(t).replace(/%3B/gi,";")}function yx(t){return jA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ay(t){return decodeURIComponent(t)}function HA(t){return ay(t.replace(/\+/g,"%20"))}function WA(t){return`${yx(t.path)}${function DZ(t){return Object.keys(t).map(n=>`;${yx(n)}=${yx(t[n])}`).join("")}(t.parameters)}`}const TZ=/^[^\/()?;#]+/;function _x(t){const n=t.match(TZ);return n?n[0]:""}const MZ=/^[^\/()?;=#]+/,NZ=/^[^=?&#]+/,kZ=/^[^&#]+/;class PZ{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qn([],{}):new qn([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[pn]=new qn(n,e)),r}parseSegment(){const n=_x(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new je(4009,!1);return this.capture(n),new Of(ay(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=function AZ(t){const n=t.match(MZ);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=_x(this.remaining);i&&(r=i,this.capture(r))}n[ay(e)]=ay(r)}parseQueryParam(n){const e=function RZ(t){const n=t.match(NZ);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const o=function OZ(t){const n=t.match(kZ);return n?n[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=HA(e),s=HA(r);if(n.hasOwnProperty(i)){let o=n[i];Array.isArray(o)||(o=[o],n[i]=o),o.push(s)}else n[i]=s}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=_x(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new je(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):n&&(s=pn);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[pn]:new qn([],o),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new je(4011,!1)}}function GA(t){return t.segments.length>0?new qn([],{[pn]:t}):t}function KA(t){const n={};for(const r of Object.keys(t.children)){const s=KA(t.children[r]);if(r===pn&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))n[o]=a;else(s.segments.length>0||s.hasChildren())&&(n[r]=s)}return function FZ(t){if(1===t.numberOfChildren&&t.children[pn]){const n=t.children[pn];return new qn(t.segments.concat(n.segments),n.children)}return t}(new qn(t.segments,n))}function Bc(t){return t instanceof wd}function XA(t){let n;const i=GA(function e(s){const o={};for(const l of s.children){const c=e(l);o[l.outlet]=c}const a=new qn(s.url,o);return s===t&&(n=a),a}(t.root));return n??i}function qA(t,n,e,r){let i=t;for(;i.parent;)i=i.parent;if(0===n.length)return bx(i,i,i,e,r);const s=function LZ(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new YA(!0,0,t);let n=0,e=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?n++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new YA(e,n,r)}(n);if(s.toRoot())return bx(i,i,new qn([],{}),e,r);const o=function BZ(t,n,e){if(t.isAbsolute)return new cy(n,!0,0);if(!e)return new cy(n,!1,NaN);if(null===e.parent)return new cy(e,!0,0);const r=ly(t.commands[0])?0:1;return function VZ(t,n,e){let r=t,i=n,s=e;for(;s>i;){if(s-=i,r=r.parent,!r)throw new je(4005,!1);i=r.segments.length}return new cy(r,!1,i-s)}(e,e.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Lf(o.segmentGroup,o.index,s.commands):QA(o.segmentGroup,o.index,s.commands);return bx(i,o.segmentGroup,a,e,r)}function ly(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function $f(t){return"object"==typeof t&&null!=t&&t.outlets}function bx(t,n,e,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=t===n?e:ZA(t,n,e);const a=GA(KA(o));return new wd(a,s,i)}function ZA(t,n,e){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===n?e:ZA(s,n,e)}),new qn(t.segments,r)}class YA{constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&ly(r[0]))throw new je(4003,!1);const i=r.find($f);if(i&&i!==$A(r))throw new je(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cy{constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}}function QA(t,n,e){if(t||(t=new qn([],{})),0===t.segments.length&&t.hasChildren())return Lf(t,n,e);const r=function UZ(t,n,e){let r=0,i=n;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=e.length)return s;const o=t.segments[i],a=e[r];if($f(a))break;const l=`${a}`,c=r<e.length-1?e[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!eN(l,c,o))return s;r+=2}else{if(!eN(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,n,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new qn(t.segments.slice(0,r.pathIndex),{});return s.children[pn]=new qn(t.segments.slice(r.pathIndex),t.children),Lf(s,0,i)}return r.match&&0===i.length?new qn(t.segments,{}):r.match&&!t.hasChildren()?vx(t,n,e):r.match?Lf(t,0,i):vx(t,n,e)}function Lf(t,n,e){if(0===e.length)return new qn(t.segments,{});{const r=function zZ(t){return $f(t[0])?t[0].outlets:{[pn]:t}}(e),i={};if(Object.keys(r).some(s=>s!==pn)&&t.children[pn]&&1===t.numberOfChildren&&0===t.children[pn].segments.length){const s=Lf(t.children[pn],n,e);return new qn(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=QA(t.children[s],n,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new qn(t.segments,i)}}function vx(t,n,e){const r=t.segments.slice(0,n);let i=0;for(;i<e.length;){const s=e[i];if($f(s)){const l=jZ(s.outlets);return new qn(r,l)}if(0===i&&ly(e[0])){r.push(new Of(t.segments[n].path,JA(e[0]))),i++;continue}const o=$f(s)?s.outlets[pn]:`${s}`,a=i<e.length-1?e[i+1]:null;o&&a&&ly(a)?(r.push(new Of(o,JA(a))),i+=2):(r.push(new Of(o,{})),i++)}return new qn(r,{})}function jZ(t){const n={};return Object.entries(t).forEach(([e,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(n[e]=vx(new qn([],{}),0,r))}),n}function JA(t){const n={};return Object.entries(t).forEach(([e,r])=>n[e]=`${r}`),n}function eN(t,n,e){return t==e.path&&Da(n,e.parameters)}const Bf="imperative";class Ia{constructor(n,e){this.id=n,this.url=e}}class uy extends Ia{constructor(n,e,r="imperative",i=null){super(n,e),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Kl extends Ia{constructor(n,e,r){super(n,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Vf extends Ia{constructor(n,e,r,i){super(n,e),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Cd extends Ia{constructor(n,e,r,i){super(n,e),this.reason=r,this.code=i,this.type=16}}class dy extends Ia{constructor(n,e,r,i){super(n,e),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tN extends Ia{constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HZ extends Ia{constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WZ extends Ia{constructor(n,e,r,i,s){super(n,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class GZ extends Ia{constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KZ extends Ia{constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XZ{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class qZ{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ZZ{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YZ{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QZ{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JZ{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nN{constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class xx{}class wx{constructor(n){this.url=n}}class eY{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new zf,this.attachRef=null}}let zf=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new eY,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class rN{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=Cx(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){const e=Cx(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=Ex(n,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return Ex(n,this._root).map(e=>e.value)}}function Cx(t,n){if(t===n.value)return n;for(const e of n.children){const r=Cx(t,e);if(r)return r}return null}function Ex(t,n){if(t===n.value)return[n];for(const e of n.children){const r=Ex(t,e);if(r.length)return r.unshift(n),r}return[]}class il{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ed(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class iN extends rN{constructor(n,e){super(n),this.snapshot=e,Sx(this,n)}toString(){return this.snapshot.toString()}}function sN(t,n){const e=function tY(t,n){const o=new hy([],{},{},"",{},pn,n,null,{});return new aN("",new il(o,[]))}(0,n),r=new gn([new Of("",{})]),i=new gn({}),s=new gn({}),o=new gn({}),a=new gn(""),l=new Sd(r,i,o,a,s,pn,n,e.root);return l.snapshot=e.root,new iN(new il(l,[]),e)}class Sd{constructor(n,e,r,i,s,o,a,l){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(qe(c=>c[kf]))??Bt(void 0),this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(qe(n=>xd(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(qe(n=>xd(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function oN(t,n="emptyOnly"){const e=t.pathFromRoot;let r=0;if("always"!==n)for(r=e.length-1;r>=1;){const i=e[r],s=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function nY(t){return t.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class hy{get title(){return this.data?.[kf]}constructor(n,e,r,i,s,o,a,l,c){this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class aN extends rN{constructor(n,e){super(e),this.url=n,Sx(this,e)}toString(){return lN(this._root)}}function Sx(t,n){n.value._routerState=t,n.children.forEach(e=>Sx(t,e))}function lN(t){const n=t.children.length>0?` { ${t.children.map(lN).join(", ")} } `:"";return`${t.value}${n}`}function Dx(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Da(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),Da(n.params,e.params)||t.paramsSubject.next(e.params),function _Z(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!Da(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.urlSubject.next(e.url),Da(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ix(t,n){const e=Da(t.params,n.params)&&function wZ(t,n){return Lc(t,n)&&t.every((e,r)=>Da(e.parameters,n[r].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||Ix(t.parent,n.parent))}let Tx=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=pn,this.activateEvents=new Qn,this.deactivateEvents=new Qn,this.attachEvents=new Qn,this.detachEvents=new Qn,this.parentContexts=ft(zf),this.location=ft(Wo),this.changeDetector=ft(Dc),this.environmentInjector=ft(Us),this.inputBinder=ft(fy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new je(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new je(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new je(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new je(4013,!1);this._activatedRoute=e;const i=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new rY(e,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Rt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[zr]})}return t})();class rY{constructor(n,e,r){this.route=n,this.childContexts=e,this.parent=r}get(n,e){return n===Sd?this.route:n===zf?this.childContexts:this.parent.get(n,e)}}const fy=new ot("");let cN=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:r}=e,i=Sa([r.queryParams,r.params,r.data]).pipe(Nr(([s,o,a],l)=>(a={...s,...o,...a},0===l?Bt(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(e);const o=function Cz(t){const n=bn(t);if(!n)return null;const e=new Yh(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();function Uf(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=n.value;const i=function sY(t,n,e){return n.children.map(r=>{for(const i of e.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Uf(t,r,i);return Uf(t,r)})}(t,n,e);return new il(r,i)}{if(t.shouldAttach(n.value)){const s=t.retrieve(n.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=n.value,o.children=n.children.map(a=>Uf(t,a)),o}}const r=function oY(t){return new Sd(new gn(t.url),new gn(t.params),new gn(t.queryParams),new gn(t.fragment),new gn(t.data),t.outlet,t.component,t)}(n.value),i=n.children.map(s=>Uf(t,s));return new il(r,i)}}const Mx="ngNavigationCancelingError";function uN(t,n){const{redirectTo:e,navigationBehaviorOptions:r}=Bc(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=dN(!1,0,n);return i.url=e,i.navigationBehaviorOptions=r,i}function dN(t,n,e){const r=new Error("NavigationCancelingError: "+(t||""));return r[Mx]=!0,r.cancellationCode=n,e&&(r.url=e),r}function hN(t){return t&&t[Mx]}let fN=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=rr({type:t,selectors:[["ng-component"]],standalone:!0,features:[pI],decls:1,vars:0,template:function(r,i){1&r&&Xt(0,"router-outlet")},dependencies:[Tx],encapsulation:2})}return t})();function Ax(t){const n=t.children&&t.children.map(Ax),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==pn&&(e.component=fN),e}function qo(t){return t.outlet||pn}function jf(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class pY{constructor(n,e,r,i,s){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(n){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),Dx(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){const i=Ed(e);n.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(n,e,r){const i=n.value,s=e?e.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(n,e,o.children)}else this.deactivateChildRoutes(n,e,r);else s&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const r=e.getContext(n.value.outlet),i=r&&n.value.component?r.children:e,s=Ed(n);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:o,route:n,contexts:a})}}deactivateRouteAndOutlet(n,e){const r=e.getContext(n.value.outlet),i=r&&n.value.component?r.children:e,s=Ed(n);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,e,r){const i=Ed(e);n.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new JZ(s.value.snapshot))}),n.children.length&&this.forwardEvent(new YZ(n.value.snapshot))}activateRoutes(n,e,r){const i=n.value,s=e?e.value:null;if(Dx(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,e,o.children)}else this.activateChildRoutes(n,e,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Dx(a.route.value),this.activateChildRoutes(n,null,o.children)}else{const a=jf(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(n,null,o.children)}}else this.activateChildRoutes(n,null,r)}}class pN{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class py{constructor(n,e){this.component=n,this.route=e}}function mY(t,n,e){const r=t._root;return Hf(r,n?n._root:null,e,[r.value])}function Dd(t,n){const e=Symbol(),r=n.get(t,e);return r===e?"function"!=typeof t||function Jt(t){return null!==qt(t)}(t)?n.get(t):t:r}function Hf(t,n,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ed(n);return t.children.forEach(o=>{(function yY(t,n,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=n?n.value:null,a=e?e.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function _Y(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!Lc(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Lc(t.url,n.url)||!Da(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ix(t,n)||!Da(t.queryParams,n.queryParams);default:return!Ix(t,n)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new pN(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Hf(t,n,s.component?a?a.children:null:e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new py(a.outlet.component,o))}else o&&Wf(n,a,i),i.canActivateChecks.push(new pN(r)),Hf(t,null,s.component?a?a.children:null:e,r,i)})(o,s[o.value.outlet],e,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Wf(a,e.getContext(o),i)),i}function Wf(t,n,e){const r=Ed(t),i=t.value;Object.entries(r).forEach(([s,o])=>{Wf(o,i.component?n?n.children.getContext(s):null:n,e)}),e.canDeactivateChecks.push(new py(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}function Gf(t){return"function"==typeof t}function mN(t){return t instanceof ey||"EmptyError"===t?.name}const my=Symbol("INITIAL_VALUE");function Id(){return Nr(t=>Sa(t.map(n=>n.pipe(ti(1),ny(my)))).pipe(qe(n=>{for(const e of n)if(!0!==e){if(e===my)return my;if(!1===e||e instanceof wd)return e}return!0}),ni(n=>n!==my),ti(1)))}function gN(t){return function pe(...t){return _e(t)}(ri(n=>{if(Bc(n))throw uN(0,n)}),qe(n=>!0===n))}class gy{constructor(n){this.segmentGroup=n||null}}class yN{constructor(n){this.urlTree=n}}function Td(t){return _d(new gy(t))}function _N(t){return _d(new yN(t))}class LY{constructor(n,e){this.urlSerializer=n,this.urlTree=e}noMatchError(n){return new je(4002,!1)}lineralizeSegments(n,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Bt(r);if(i.numberOfChildren>1||!i.children[pn])return _d(new je(4e3,!1));i=i.children[pn]}}applyRedirectCommands(n,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,r)}applyRedirectCreateUrlTree(n,e,r,i){const s=this.createSegmentGroup(n,e.root,r,i);return new wd(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const r={};return Object.entries(n).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=e[a]}else r[i]=s}),r}createSegmentGroup(n,e,r,i){const s=this.createSegments(n,e.segments,r,i);let o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(n,l,r,i)}),new qn(s,o)}createSegments(n,e,r,i){return e.map(s=>s.path.startsWith(":")?this.findPosParam(n,s,i):this.findOrReturn(s,r))}findPosParam(n,e,r){const i=r[e.path.substring(1)];if(!i)throw new je(4001,!1);return i}findOrReturn(n,e){let r=0;for(const i of e){if(i.path===n.path)return e.splice(r),i;r++}return n}}const Nx={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function BY(t,n,e,r,i){const s=Rx(t,n,e);return s.matched?(r=function lY(t,n){return t.providers&&!t._injector&&(t._injector=Vv(t.providers,n,`Route: ${t.path}`)),t._injector??n}(n,r),function PY(t,n,e,r){const i=n.canMatch;return i&&0!==i.length?Bt(i.map(o=>{const a=Dd(o,t);return Gl(function EY(t){return t&&Gf(t.canMatch)}(a)?a.canMatch(n,e):t.runInContext(()=>a(n,e)))})).pipe(Id(),gN()):Bt(!0)}(r,n,e).pipe(qe(o=>!0===o?s:{...Nx}))):Bt(s)}function Rx(t,n,e){if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...Nx}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const i=(n.matcher||yZ)(e,t,n);if(!i)return{...Nx};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function bN(t,n,e,r){return e.length>0&&function UY(t,n,e){return e.some(r=>yy(t,n,r)&&qo(r)!==pn)}(t,e,r)?{segmentGroup:new qn(n,zY(r,new qn(e,t.children))),slicedSegments:[]}:0===e.length&&function jY(t,n,e){return e.some(r=>yy(t,n,r))}(t,e,r)?{segmentGroup:new qn(t.segments,VY(t,0,e,r,t.children)),slicedSegments:e}:{segmentGroup:new qn(t.segments,t.children),slicedSegments:e}}function VY(t,n,e,r,i){const s={};for(const o of r)if(yy(t,e,o)&&!i[qo(o)]){const a=new qn([],{});s[qo(o)]=a}return{...i,...s}}function zY(t,n){const e={};e[pn]=n;for(const r of t)if(""===r.path&&qo(r)!==pn){const i=new qn([],{});e[qo(r)]=i}return e}function yy(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}class KY{constructor(n,e,r,i,s,o,a){this.injector=n,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new LY(this.urlSerializer,this.urlTree)}noMatchError(n){return new je(4002,!1)}recognize(){const n=bN(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,pn).pipe(Wl(e=>{if(e instanceof yN)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof gy?this.noMatchError(e):e}),qe(e=>{const r=new hy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pn,this.rootComponentType,null,{}),i=new il(r,e),s=new aN("",i),o=function $Z(t,n,e=null,r=null){return qA(XA(t),n,e,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n.root,pn).pipe(Wl(r=>{throw r instanceof gy?this.noMatchError(r):r}))}inheritParamsAndData(n){const e=n.value,r=oN(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),n.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(n,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,e,r):this.processSegment(n,e,r,r.segments,i,!0)}processChildren(n,e,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return dn(i).pipe(bd(s=>{const o=r.children[s],a=function hY(t,n){const e=t.filter(r=>qo(r)===n);return e.push(...t.filter(r=>qo(r)!==n)),e}(e,s);return this.processSegmentGroup(n,a,o,s)}),function pZ(t,n){return tt(function fZ(t,n,e,r,i){return(s,o)=>{let a=e,l=n,c=0;s.subscribe(et(o,u=>{const h=c++;l=a?t(l,u,h):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(t,n,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),ry(null),function mZ(t,n){const e=arguments.length>=2;return r=>r.pipe(t?ni((i,s)=>t(i,s,r)):Le,px(1),e?ry(n):PA(()=>new ey))}(),er(s=>{if(null===s)return Td(r);const o=vN(s);return function XY(t){t.sort((n,e)=>n.value.outlet===pn?-1:e.value.outlet===pn?1:n.value.outlet.localeCompare(e.value.outlet))}(o),Bt(o)}))}processSegment(n,e,r,i,s,o){return dn(e).pipe(bd(a=>this.processSegmentAgainstRoute(a._injector??n,e,a,r,i,s,o).pipe(Wl(l=>{if(l instanceof gy)return Bt(null);throw l}))),$c(a=>!!a),Wl(a=>{if(mN(a))return function WY(t,n,e){return 0===n.length&&!t.children[e]}(r,i,s)?Bt([]):Td(r);throw a}))}processSegmentAgainstRoute(n,e,r,i,s,o,a){return function HY(t,n,e,r){return!!(qo(t)===r||r!==pn&&yy(n,e,t))&&("**"===t.path||Rx(n,t,e).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,i,e,r,s,o):Td(i):Td(i)}expandSegmentAgainstRouteUsingRedirect(n,e,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?_N(s):this.applyRedirects.lineralizeSegments(r,s).pipe(er(o=>{const a=new qn(o,{});return this.processSegment(n,e,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Rx(e,i,s);if(!a)return Td(e);const h=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith("/")?_N(h):this.applyRedirects.lineralizeSegments(i,h).pipe(er(m=>this.processSegment(n,r,e,m.concat(c),o,!1)))}matchSegmentAgainstRoute(n,e,r,i,s,o){let a;if("**"===r.path){const l=i.length>0?$A(i).parameters:{};a=Bt({snapshot:new hy(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xN(r),qo(r),r.component??r._loadedComponent??null,r,wN(r)),consumedSegments:[],remainingSegments:[]}),e.children={}}else a=BY(e,r,i,n).pipe(qe(({matched:l,consumedSegments:c,remainingSegments:u,parameters:h})=>l?{snapshot:new hy(c,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xN(r),qo(r),r.component??r._loadedComponent??null,r,wN(r)),consumedSegments:c,remainingSegments:u}:null));return a.pipe(Nr(l=>null===l?Td(e):this.getChildConfig(n=r._injector??n,r,i).pipe(Nr(({routes:c})=>{const u=r._loadedInjector??n,{snapshot:h,consumedSegments:m,remainingSegments:y}=l,{segmentGroup:C,slicedSegments:k}=bN(e,m,y,c);if(0===k.length&&C.hasChildren())return this.processChildren(u,c,C).pipe(qe(B=>null===B?null:[new il(h,B)]));if(0===c.length&&0===k.length)return Bt([new il(h,[])]);const P=qo(r)===s;return this.processSegment(u,c,C,k,P?pn:s,!0).pipe(qe(B=>[new il(h,B)]))}))))}getChildConfig(n,e,r){return e.children?Bt({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?Bt({routes:e._loadedRoutes,injector:e._loadedInjector}):function OY(t,n,e,r){const i=n.canLoad;return void 0===i||0===i.length?Bt(!0):Bt(i.map(o=>{const a=Dd(o,t);return Gl(function vY(t){return t&&Gf(t.canLoad)}(a)?a.canLoad(n,e):t.runInContext(()=>a(n,e)))})).pipe(Id(),gN())}(n,e,r).pipe(er(i=>i?this.configLoader.loadChildren(n,e).pipe(ri(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function $Y(t){return _d(dN(!1,3))}())):Bt({routes:[],injector:n})}}function qY(t){const n=t.value.routeConfig;return n&&""===n.path}function vN(t){const n=[],e=new Set;for(const r of t){if(!qY(r)){n.push(r);continue}const i=n.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):n.push(r)}for(const r of e){const i=vN(r.children);n.push(new il(r.value,i))}return n.filter(r=>!e.has(r))}function xN(t){return t.data||{}}function wN(t){return t.resolve||{}}function CN(t){return"string"==typeof t.title||null===t.title}function kx(t){return Nr(n=>{const e=t(n);return e?dn(e).pipe(qe(()=>n)):Bt(n)})}const Md=new ot("ROUTES");let Ox=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ft(s1)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Bt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=Gl(e.loadComponent()).pipe(qe(EN),ri(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),vd(()=>{this.componentLoaders.delete(e)})),i=new OA(r,()=>new De).pipe(fx());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Bt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function nQ(t,n,e,r){return Gl(t.loadChildren()).pipe(qe(EN),er(i=>i instanceof hI||Array.isArray(i)?Bt(i):dn(n.compileModuleAsync(i))),qe(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(e).injector,o=s.get(Md,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ax),injector:s}}))}(r,this.compiler,e,this.onLoadEndListener).pipe(vd(()=>{this.childrenLoaders.delete(r)})),o=new OA(s,()=>new De).pipe(fx());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function EN(t){return function rQ(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let _y=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new De,this.transitionAbortSubject=new De,this.configLoader=ft(Ox),this.environmentInjector=ft(Us),this.urlSerializer=ft(Pf),this.rootContexts=ft(zf),this.inputBindingEnabled=null!==ft(fy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Bt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new qZ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new XZ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e,r,i){return this.transitions=new gn({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:e.urlHandlingStrategy.extract(r),urlAfterRedirects:e.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Bf,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ni(s=>0!==s.id),qe(s=>({...s,extractedUrl:e.urlHandlingStrategy.extract(s.rawUrl)})),Nr(s=>{this.currentTransition=s;let o=!1,a=!1;return Bt(s).pipe(ri(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Nr(l=>{const c=l.currentBrowserUrl.toString(),u=!e.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!u&&"reload"!==(l.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const m="";return this.events.next(new Cd(l.id,this.urlSerializer.serialize(l.rawUrl),m,0)),l.resolve(null),Lr}if(e.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Bt(l).pipe(Nr(m=>{const y=this.transitions?.getValue();return this.events.next(new uy(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?Lr:Promise.resolve(m)}),function ZY(t,n,e,r,i,s){return er(o=>function GY(t,n,e,r,i,s,o="emptyOnly"){return new KY(t,n,e,r,i,o,s).recognize()}(t,n,e,r,o.extractedUrl,i,s).pipe(qe(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),ri(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new tN(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(u&&e.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:m,extractedUrl:y,source:C,restoredState:k,extras:P}=l,B=new uy(m,this.urlSerializer.serialize(y),C,k);this.events.next(B);const V=sN(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:V,urlAfterRedirects:y,extras:{...P,skipLocationChange:!1,replaceUrl:!1}},Bt(s)}{const m="";return this.events.next(new Cd(l.id,this.urlSerializer.serialize(l.extractedUrl),m,1)),l.resolve(null),Lr}}),ri(l=>{const c=new HZ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),qe(l=>(this.currentTransition=s={...l,guards:mY(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function DY(t,n){return er(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?Bt({...e,guardsResult:!0}):function IY(t,n,e,r){return dn(t).pipe(er(i=>function kY(t,n,e,r,i){const s=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return s&&0!==s.length?Bt(s.map(a=>{const l=jf(n)??i,c=Dd(a,l);return Gl(function CY(t){return t&&Gf(t.canDeactivate)}(c)?c.canDeactivate(t,n,e,r):l.runInContext(()=>c(t,n,e,r))).pipe($c())})).pipe(Id()):Bt(!0)}(i.component,i.route,e,n,r)),$c(i=>!0!==i,!0))}(o,r,i,t).pipe(er(a=>a&&function bY(t){return"boolean"==typeof t}(a)?function TY(t,n,e,r){return dn(n).pipe(bd(i=>ty(function AY(t,n){return null!==t&&n&&n(new ZZ(t)),Bt(!0)}(i.route.parent,r),function MY(t,n){return null!==t&&n&&n(new QZ(t)),Bt(!0)}(i.route,r),function RY(t,n,e){const r=n[n.length-1],s=n.slice(0,n.length-1).reverse().map(o=>function gY(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(o)).filter(o=>null!==o).map(o=>kA(()=>Bt(o.guards.map(l=>{const c=jf(o.node)??e,u=Dd(l,c);return Gl(function wY(t){return t&&Gf(t.canActivateChild)}(u)?u.canActivateChild(r,t):c.runInContext(()=>u(r,t))).pipe($c())})).pipe(Id())));return Bt(s).pipe(Id())}(t,i.path,e),function NY(t,n,e){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return Bt(!0);const i=r.map(s=>kA(()=>{const o=jf(n)??e,a=Dd(s,o);return Gl(function xY(t){return t&&Gf(t.canActivate)}(a)?a.canActivate(n,t):o.runInContext(()=>a(n,t))).pipe($c())}));return Bt(i).pipe(Id())}(t,i.route,e))),$c(i=>!0!==i,!0))}(r,s,t,n):Bt(a)),qe(a=>({...e,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),ri(l=>{if(s.guardsResult=l.guardsResult,Bc(l.guardsResult))throw uN(0,l.guardsResult);const c=new WZ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),ni(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),kx(l=>{if(l.guards.canActivateChecks.length)return Bt(l).pipe(ri(c=>{const u=new GZ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Nr(c=>{let u=!1;return Bt(c).pipe(function YY(t,n){return er(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return Bt(e);let s=0;return dn(i).pipe(bd(o=>function QY(t,n,e,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!CN(i)&&(s[kf]=i.title),function JY(t,n,e,r){const i=function eQ(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return Bt({});const s={};return dn(i).pipe(er(o=>function tQ(t,n,e,r){const i=jf(n)??r,s=Dd(t,i);return Gl(s.resolve?s.resolve(n,e):i.runInContext(()=>s(n,e)))}(t[o],n,e,r).pipe($c(),ri(a=>{s[o]=a}))),px(1),mx(s),Wl(o=>mN(o)?Lr:_d(o)))}(s,t,n,r).pipe(qe(o=>(t._resolvedData=o,t.data=oN(t,e).resolve,i&&CN(i)&&(t.data[kf]=i.title),null)))}(o.route,r,t,n)),ri(()=>s++),px(1),er(o=>s===i.length?Bt(e):Lr))})}(e.paramsInheritanceStrategy,this.environmentInjector),ri({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",2)}}))}),ri(c=>{const u=new KZ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),kx(l=>{const c=u=>{const h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(ri(m=>{u.component=m}),qe(()=>{})));for(const m of u.children)h.push(...c(m));return h};return Sa(c(l.targetSnapshot.root)).pipe(ry(),ti(1))}),kx(()=>this.afterPreactivation()),qe(l=>{const c=function iY(t,n,e){const r=Uf(t,n._root,e?e._root:void 0);return new iN(r,n)}(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},s}),ri(()=>{this.events.next(new xx)}),((t,n,e,r)=>qe(i=>(new pY(n,i.targetRouterState,i.currentRouterState,e,r).activate(t),i)))(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ti(1),ri({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Kl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),e.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),In(this.transitionAbortSubject.pipe(ri(l=>{throw l}))),vd(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Wl(l=>{if(a=!0,hN(l))this.events.next(new Vf(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function aY(t){return hN(t)&&Bc(t.url)}(l)?this.events.next(new wx(l.url)):s.resolve(!1);else{this.events.next(new dy(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(e.errorHandler(l))}catch(c){s.reject(c)}}return Lr}))}))}cancelNavigationTransition(e,r,i){const s=new Vf(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(s),e.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function SN(t){return t!==Bf}let DN=(()=>{class t{buildTitle(e){let r,i=e.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===pn);return r}getResolvedTitleForRoute(e){return e.data[kf]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:function(){return ft(iQ)},providedIn:"root"})}return t})(),iQ=(()=>{class t extends DN{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(We(TT))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),sQ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:function(){return ft(aQ)},providedIn:"root"})}return t})();class oQ{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let aQ=(()=>{class t extends oQ{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=K(t)))(i||t)}}();static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const by=new ot("",{providedIn:"root",factory:()=>({})});let lQ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:function(){return ft(cQ)},providedIn:"root"})}return t})(),cQ=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Kf=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Kf||{});function IN(t,n){t.events.pipe(ni(e=>e instanceof Kl||e instanceof Vf||e instanceof dy||e instanceof Cd),qe(e=>e instanceof Kl||e instanceof Cd?Kf.COMPLETE:e instanceof Vf&&(0===e.code||1===e.code)?Kf.REDIRECTING:Kf.FAILED),ni(e=>e!==Kf.REDIRECTING),ti(1)).subscribe(()=>{n()})}function uQ(t){throw t}function dQ(t,n,e){return n.parse("/")}const hQ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fQ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Eo=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=ft(r1),this.isNgZoneEnabled=!1,this._events=new De,this.options=ft(by,{optional:!0})||{},this.pendingTasks=ft(ag),this.errorHandler=this.options.errorHandler||uQ,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||dQ,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=ft(lQ),this.routeReuseStrategy=ft(sQ),this.titleStrategy=ft(DN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ft(Md,{optional:!0})?.flat()??[],this.navigationTransitions=ft(_y),this.urlSerializer=ft(Pf),this.location=ft(sd),this.componentInputBindingEnabled=!!ft(fy,{optional:!0}),this.eventsSubscription=new $,this.isNgZoneEnabled=ft(Mt)instanceof Mt&&Mt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new wd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=sN(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(TN(r)&&this._events.next(r));if(r instanceof uy)SN(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Cd)this.rawUrlTree=i.rawUrl;else if(r instanceof tN){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof xx)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Vf)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof wx){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||SN(i.source)};this.scheduleNavigation(s,Bf,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof dy&&this.restoreHistory(i,!0),r instanceof Kl&&(this.navigated=!0),TN(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Bf,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Ax),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let h,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{h=XA(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),h=this.currentUrlTree.root}return qA(h,e,u,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=Bc(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Bf,null,r)}navigate(e,r={skipLocationChange:!1}){return function pQ(t){for(let n=0;n<t.length;n++)if(null==t[n])throw new je(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?{...hQ}:!1===r?{...fQ}:r,Bc(e))return BA(this.currentUrlTree,e,i);const s=this.parseUrl(e);return BA(this.currentUrlTree,s,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const s=e[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(e,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,m)=>{a=h,l=m});const u=this.pendingTasks.add();return IN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TN(t){return!(t instanceof xx||t instanceof wx)}let vy=(()=>{class t{constructor(e,r,i,s,o,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new De,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof Kl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function vE(t,n,e){return function z2(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?bE:_E}(n,e)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,e,r):i.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Eo),Re(Sd),$e("tabindex"),Re(Za),Re($n),Re(Tc))};static#t=this.\u0275dir=Rt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Mr("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&bi("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",id],skipLocationChange:["skipLocationChange","skipLocationChange",id],replaceUrl:["replaceUrl","replaceUrl",id],routerLink:"routerLink"},standalone:!0,features:[NS,zr]})}return t})(),MN=(()=>{class t{get isActive(){return this._isActive}constructor(e,r,i,s,o){this.router=e,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Qn,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof Kl&&this.update()})}ngAfterContentInit(){Bt(this.links.changes,Bt(null)).pipe(gs()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=dn(e).pipe(gs()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){const r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const e=this.hasActiveLinks();this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const r=function mQ(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&e.isActive(i.urlTree,r)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Eo),Re($n),Re(Za),Re(Dc),Re(vy,8))};static#t=this.\u0275dir=Rt({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(1&r&&Ws(s,vy,5),2&r){let o;hr(o=fr())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[zr]})}return t})();class AN{}let gQ=(()=>{class t{constructor(e,r,i,s,o){this.router=e,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ni(e=>e instanceof Kl),bd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Vv(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return dn(i).pipe(gs())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):Bt(null);const s=i.pipe(er(o=>null===o?Bt(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return r.loadComponent&&!r._loadedComponent?dn([s,this.loader.loadComponent(r)]).pipe(gs()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(We(Eo),We(s1),We(Us),We(AN),We(Ox))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Px=new ot("");let NN=(()=>{class t{constructor(e,r,i,s,o={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof uy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Kl?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Cd&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof nN&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nN(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){ev()};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();function sl(t,n){return{\u0275kind:t,\u0275providers:n}}function kN(){const t=ft(ki);return n=>{const e=t.get($l);if(n!==e.components[0])return;const r=t.get(Eo),i=t.get(ON);1===t.get(Fx)&&r.initialNavigation(),t.get(PN,null,on.Optional)?.setUpPreloading(),t.get(Px,null,on.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const ON=new ot("",{factory:()=>new De}),Fx=new ot("",{providedIn:"root",factory:()=>1}),PN=new ot("");function vQ(t){return sl(0,[{provide:PN,useExisting:gQ},{provide:AN,useExisting:t}])}const FN=new ot("ROUTER_FORROOT_GUARD"),wQ=[sd,{provide:Pf,useClass:gx},Eo,zf,{provide:Sd,useFactory:function RN(t){return t.routerState.root},deps:[Eo]},Ox,[]];function CQ(){return new h1("Router",Eo)}let $N=(()=>{class t{constructor(e){}static forRoot(e,r){return{ngModule:t,providers:[wQ,[],{provide:Md,multi:!0,useValue:e},{provide:FN,useFactory:IQ,deps:[[Eo,new yc,new Oh]]},{provide:by,useValue:r||{}},r?.useHash?{provide:Tc,useClass:Tz}:{provide:Tc,useClass:U1},{provide:Px,useFactory:()=>{const t=ft(GU),n=ft(Mt),e=ft(by),r=ft(_y),i=ft(Pf);return e.scrollOffset&&t.setOffset(e.scrollOffset),new NN(i,r,t,n,e)}},r?.preloadingStrategy?vQ(r.preloadingStrategy).\u0275providers:[],{provide:h1,multi:!0,useFactory:CQ},r?.initialNavigation?TQ(r):[],r?.bindToComponentInputs?sl(8,[cN,{provide:fy,useExisting:cN}]).\u0275providers:[],[{provide:LN,useFactory:kN},{provide:l0,multi:!0,useExisting:LN}]]}}static forChild(e){return{ngModule:t,providers:[{provide:Md,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(r){return new(r||t)(We(FN,8))};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({})}return t})();function IQ(t){return"guarded"}function TQ(t){return["disabled"===t.initialNavigation?sl(3,[{provide:Jv,multi:!0,useFactory:()=>{const n=ft(Eo);return()=>{n.setUpLocationChangeListener()}}},{provide:Fx,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?sl(2,[{provide:Fx,useValue:0},{provide:Jv,multi:!0,deps:[ki],useFactory:n=>{const e=n.get(Dz,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const i=n.get(Eo),s=n.get(ON);IN(i,()=>{r(!0)}),n.get(_y).afterPreactivation=()=>(r(!0),s.closed?Bt(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const LN=new ot("");let $x=(()=>{class t{constructor(e){this.location=e,this.link="/contents",this.mobileMenuActive=!1,this.isOpened=!0,this.isExpanded=!0,this.shouldClick=!0}ngOnInit(){const e=localStorage.getItem("expanded");window.innerWidth<768?(this.shouldClick=!1,this.isExpanded=!0,this.isOpened=!1):(this.shouldClick=!0,this.isExpanded=!e||JSON.parse(e),this.isOpened=!0)}getMargin(){let e="0";return this.isSmallScreen()||(e=this.isExpanded?"13.5":"5"),e}urlPath(e){return this.location.path().includes(e)}saveData(){localStorage.setItem("expanded",JSON.stringify(this.isExpanded))}isSmallScreen(){return window.innerWidth<768}static#e=this.\u0275fac=function(r){return new(r||t)(Re(sd))};static#t=this.\u0275cmp=rr({type:t,selectors:[["app-home"]],decls:37,vars:0,consts:[[1,"container"],[1,"row"],[1,"size-7"],[1,"card-container"],[1,"card-header"],["href","/about-us"],[1,"size-5"],[1,"size-12"],[1,"video-container"],["width","560","height","315","src","https://www.youtube.com/embed/zx04Kl8y4dE?si=KchFrI6FKJtimpZT","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share","allowfullscreen",""],["width","560","height","315","src","https://www.youtube.com/embed/IsAg-JqJnA8?si=VhTbfLVF9gKz956Z&start=6","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share","allowfullscreen",""]],template:function(r,i){1&r&&(pt(0,"div",0)(1,"div",1)(2,"h1"),Et(3,"Home"),ct()(),pt(4,"div",1)(5,"div",2)(6,"div",3)(7,"div",4)(8,"h3"),Et(9,"Introduction"),ct(),pt(10,"a",5),Et(11,"More details >"),ct()(),pt(12,"p"),Et(13," Welcome to Recycling Gate, where environmental responsibility meets technological innovation! Our platform is a dedicated space for conscientious individuals like you to make a positive impact on the planet by recycling and repurposing recyclable waste in your home. "),ct()()(),pt(14,"div",6)(15,"div",3)(16,"div",4)(17,"h3"),Et(18,"Our Mission"),ct(),pt(19,"a",5),Et(20,"More details >"),ct()(),pt(21,"p"),Et(22," Our mission is to provide a convenient and efficient way for you to recycle recyclable waste in your home. We aim to reduce the amount of waste that ends up in landfills. "),ct()()()(),pt(23,"div",7)(24,"div",3)(25,"div",4)(26,"h3"),Et(27,"What is Sustainability?"),ct()(),pt(28,"div",8),Xt(29,"iframe",9),ct()()(),pt(30,"div",7)(31,"div",3)(32,"div",4)(33,"h3"),Et(34,"What is Recycling?"),ct()(),pt(35,"div",8),Xt(36,"iframe",10),ct()()()())},styles:[".video-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%}"]})}return t})(),AQ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=rr({type:t,selectors:[["app-about-us"]],decls:30,vars:0,consts:[[1,"container"],[1,"row"],[1,"size-12"],[1,"card-container"],[1,"card-header"]],template:function(r,i){1&r&&(pt(0,"div",0)(1,"div",1)(2,"h1"),Et(3,"About us"),ct()(),pt(4,"div",2)(5,"div",3)(6,"div",4)(7,"h3"),Et(8,"Introduction"),ct()(),pt(9,"p"),Et(10," Welcome to Recycling Gate, your portal to a greener, more sustainable lifestyle! At Recycling Gate, we invite you to transform the way you manage recyclable waste at home, addressing the impact of unused books and electronic waste on our environment. "),Xt(11,"br")(12,"br"),Et(13," In a world increasingly concerned about environmental challenges, we recognize the pressing need to address the accumulation of recyclable items, including often overlooked contributors like unused books and electronic devices. "),Xt(14,"br")(15,"br"),Et(16," As you explore Recycling Gate, you'll discover user-friendly features designed to simplify the process of donating, recycling, and repurposing. From unused books to electronic waste, every item holds the potential to be part of a positive environmental change. "),Xt(17,"br")(18,"br"),Et(19," Join us in the pursuit of a more sustainable future, where every recyclable item in your home becomes an opportunity to make a difference. Welcome to Recycling Gate \u2013 where your choices reshape the narrative of waste and create a more sustainable tomorrow. "),ct()()(),pt(20,"div",2)(21,"div",3)(22,"div",4)(23,"h3"),Et(24,"Our Mission"),ct()(),pt(25,"p"),Et(26," Recycling Gate isn't just a platform; it's a movement towards responsible living. Our mission is fueled by the commitment to reduce waste and promote sustainability, starting right from your home. Rather than letting unused books gather dust on shelves or old electronic devices clutter drawers, consider these items as valuable recyclable resources waiting for a second life. "),Xt(27,"br")(28,"br"),Et(29," Incorporating these recyclable items into your sustainable lifestyle not only declutters your home but also significantly contributes to environmental preservation. Imagine your old books finding new readers and your outdated electronics being repurposed into something useful. It's a small step for you, but a giant leap towards a cleaner, greener planet. "),ct()()()())}})}return t})();const Xf={_origin:"https://api.emailjs.com"};class VN{constructor(n){this.status=n?n.status:0,this.text=n?n.responseText:"Network Error"}}const OQ_sendForm=(t,n,e,r)=>{const i=r||Xf._userID,s=(t=>{let n;if(n="string"==typeof t?document.querySelector(t):t,!n||"FORM"!==n.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return n})(e);((t,n,e)=>{if(!t)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!n)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(i,t,n);const o=new FormData(s);return o.append("lib_version","3.11.0"),o.append("service_id",t),o.append("template_id",n),o.append("user_id",i),((t,n,e={})=>new Promise((r,i)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const a=new VN(o);200===a.status||"OK"===a.text?r(a):i(a)}),s.addEventListener("error",({target:o})=>{i(new VN(o))}),s.open("POST",Xf._origin+t,!0),Object.keys(e).forEach(o=>{s.setRequestHeader(o,e[o])}),s.send(n)}))("/api/v1.0/email/send-form",o)};function Li(t){return null!=t&&"false"!=`${t}`}function xy(t){return Array.isArray(t)?t:[t]}function Hr(t){return null==t?"":"string"==typeof t?t:`${t}px`}function Xl(t){return t instanceof $n?t.nativeElement:t}let Lx;try{Lx=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Lx=!1}let Ad,li=(()=>{class t{constructor(e){this._platformId=e,this.isBrowser=this._platformId?lT(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Lx)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||t)(We(qa))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const UN=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function jN(){if(Ad)return Ad;if("object"!=typeof document||!document)return Ad=new Set(UN),Ad;let t=document.createElement("input");return Ad=new Set(UN.filter(n=>(t.setAttribute("type",n),t.type===n))),Ad}let qf,wy,Vc,Bx;function Nd(t){return function FQ(){if(null==qf&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>qf=!0}))}finally{qf=qf||!1}return qf}()?t:!!t.capture}function HN(){if(null==Vc){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Vc=!1,Vc;if("scrollBehavior"in document.documentElement.style)Vc=!0;else{const t=Element.prototype.scrollTo;Vc=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return Vc}function Zf(){if("object"!=typeof document||!document)return 0;if(null==wy){const t=document.createElement("div"),n=t.style;t.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";const e=document.createElement("div"),r=e.style;r.width="2px",r.height="1px",t.appendChild(e),document.body.appendChild(t),wy=0,0===t.scrollLeft&&(t.scrollLeft=1,wy=0===t.scrollLeft?1:2),t.remove()}return wy}function ql(t){return t.composedPath?t.composedPath()[0]:t.target}function Vx(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const WN=Nd({passive:!0});let BQ=(()=>{class t{constructor(e,r){this._platform=e,this._ngZone=r,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Lr;const r=Xl(e),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new De,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||r.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&r.classList.contains(o)&&(r.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(r.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",a,WN),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",a,WN)}}),s}stopMonitoring(e){const r=Xl(e),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((e,r)=>this.stopMonitoring(r))}static#e=this.\u0275fac=function(r){return new(r||t)(We(li),We(Mt))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),VQ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({})}return t})();function GN(...t){const n=ia(t),{args:e,keys:r}=AA(t),i=new Te(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let h=!1;Bn(e[u]).subscribe(et(s,m=>{h||(h=!0,c--),a[u]=m},()=>l--,void 0,()=>{(!l||!h)&&(c||s.next(r?NA(r,a):a),s.complete())}))}});return n?i.pipe(hx(n)):i}let KN=(()=>{class t{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Za),Re($n))};static#t=this.\u0275dir=Rt({type:t})}return t})(),zc=(()=>{class t extends KN{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=K(t)))(i||t)}}();static#t=this.\u0275dir=Rt({type:t,features:[wn]})}return t})();const Ta=new ot("NgValueAccessor"),UQ={provide:Ta,useExisting:Sn(()=>Cy),multi:!0},HQ=new ot("CompositionEventMode");let Cy=(()=>{class t extends KN{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jQ(){const t=Ll()?Ll().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Za),Re($n),Re(HQ,8))};static#t=this.\u0275dir=Rt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Mr("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Jn([UQ]),wn]})}return t})();function Zl(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function qN(t){return null!=t&&"number"==typeof t.length}const Bi=new ot("NgValidators"),Yl=new ot("NgAsyncValidators"),WQ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class GQ{static min(n){return function ZN(t){return n=>{if(Zl(n.value)||Zl(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}(n)}static max(n){return function YN(t){return n=>{if(Zl(n.value)||Zl(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}(n)}static required(n){return function QN(t){return Zl(t.value)?{required:!0}:null}(n)}static requiredTrue(n){return function JN(t){return!0===t.value?null:{required:!0}}(n)}static email(n){return function eR(t){return Zl(t.value)||WQ.test(t.value)?null:{email:!0}}(n)}static minLength(n){return function tR(t){return n=>Zl(n.value)||!qN(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function nR(t){return n=>qN(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static pattern(n){return function rR(t){if(!t)return Ey;let n,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),r=>{if(Zl(r.value))return null;const i=r.value;return n.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}(n)}static nullValidator(n){return null}static compose(n){return cR(n)}static composeAsync(n){return uR(n)}}function Ey(t){return null}function iR(t){return null!=t}function sR(t){return rf(t)?dn(t):t}function oR(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function aR(t,n){return n.map(e=>e(t))}function lR(t){return t.map(n=>function KQ(t){return!t.validate}(n)?n:e=>n.validate(e))}function cR(t){if(!t)return null;const n=t.filter(iR);return 0==n.length?null:function(e){return oR(aR(e,n))}}function zx(t){return null!=t?cR(lR(t)):null}function uR(t){if(!t)return null;const n=t.filter(iR);return 0==n.length?null:function(e){return GN(aR(e,n).map(sR)).pipe(qe(oR))}}function Ux(t){return null!=t?uR(lR(t)):null}function dR(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function hR(t){return t._rawValidators}function fR(t){return t._rawAsyncValidators}function jx(t){return t?Array.isArray(t)?t:[t]:[]}function Sy(t,n){return Array.isArray(t)?t.includes(n):t===n}function pR(t,n){const e=jx(n);return jx(t).forEach(i=>{Sy(e,i)||e.push(i)}),e}function mR(t,n){return jx(n).filter(e=>!Sy(t,e))}class gR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=zx(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Ux(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class ls extends gR{get formDirective(){return null}get path(){return null}}class ol extends gR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yR{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let _R=(()=>{class t extends yR{constructor(e){super(e)}static#e=this.\u0275fac=function(r){return new(r||t)(Re(ol,2))};static#t=this.\u0275dir=Rt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Ur("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[wn]})}return t})(),bR=(()=>{class t extends yR{constructor(e){super(e)}static#e=this.\u0275fac=function(r){return new(r||t)(Re(ls,10))};static#t=this.\u0275dir=Rt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Ur("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[wn]})}return t})();const Yf="VALID",Iy="INVALID",Rd="PENDING",Qf="DISABLED";function Gx(t){return(Ty(t)?t.validators:t)||null}function Kx(t,n){return(Ty(n)?n.asyncValidators:t)||null}function Ty(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class CR{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Yf}get invalid(){return this.status===Iy}get pending(){return this.status==Rd}get disabled(){return this.status===Qf}get enabled(){return this.status!==Qf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(pR(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(pR(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(mR(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(mR(n,this._rawAsyncValidators))}hasValidator(n){return Sy(this._rawValidators,n)}hasAsyncValidator(n){return Sy(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Rd,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Qf,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Yf,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yf||this.status===Rd)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qf:Yf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Rd,this._hasOwnPendingAsyncValidator=!0;const e=sR(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(n,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new Qn,this.statusChanges=new Qn}_calculateStatus(){return this._allControlsDisabled()?Qf:this.errors?Iy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rd)?Rd:this._anyControlsHaveStatus(Iy)?Iy:Yf}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Ty(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function YQ(t){return Array.isArray(t)?zx(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function QQ(t){return Array.isArray(t)?Ux(t):t||null}(this._rawAsyncValidators)}}class Xx extends CR{constructor(n,e,r){super(Gx(e),Kx(r,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,r={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){(function wR(t,n,e){t._forEachChild((r,i)=>{if(void 0===e[i])throw new je(1002,"")})})(this,0,n),Object.keys(n).forEach(r=>{(function xR(t,n,e){const r=t.controls;if(!(n?Object.keys(r):r).length)throw new je(1e3,"");if(!r[e])throw new je(1001,"")})(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(r=>{const i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((r,i)=>{r.reset(n?n[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,r)=>(n[r]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&n(r,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(n,e){let r=n;return this._forEachChild((i,s)=>{r=e(r,i,s)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const kd=new ot("CallSetDisabledState",{providedIn:"root",factory:()=>My}),My="always";function Jf(t,n,e=My){qx(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function tJ(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ER(t,n)})}(t,n),function rJ(t,n){const e=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function nJ(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ER(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function eJ(t,n){if(n.valueAccessor.setDisabledState){const e=r=>{n.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function Ny(t,n,e=!0){const r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),ky(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ry(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function qx(t,n){const e=hR(t);null!==n.validator?t.setValidators(dR(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const r=fR(t);null!==n.asyncValidator?t.setAsyncValidators(dR(r,n.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Ry(n._rawValidators,i),Ry(n._rawAsyncValidators,i)}function ky(t,n){let e=!1;if(null!==t){if(null!==n.validator){const i=hR(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==n.validator);s.length!==i.length&&(e=!0,t.setValidators(s))}}if(null!==n.asyncValidator){const i=fR(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==n.asyncValidator);s.length!==i.length&&(e=!0,t.setAsyncValidators(s))}}}const r=()=>{};return Ry(n._rawValidators,r),Ry(n._rawAsyncValidators,r),e}function ER(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function SR(t,n){qx(t,n)}function DR(t,n){t._syncPendingControls(),n.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const lJ={provide:ls,useExisting:Sn(()=>tp)},ep=(()=>Promise.resolve())();let tp=(()=>{class t extends ls{constructor(e,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Qn,this.form=new Xx({},zx(e),Ux(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ep.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),Jf(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ep.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){ep.then(()=>{const r=this._findContainer(e.path),i=new Xx({});SR(i,e),r.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ep.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){ep.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,DR(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Bi,10),Re(Yl,10),Re(kd,8))};static#t=this.\u0275dir=Rt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Mr("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Jn([lJ]),wn]})}return t})();function IR(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function TR(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const MR=class extends CR{constructor(n=null,e,r){super(Gx(e),Kx(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ty(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=TR(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){IR(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){IR(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){TR(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},dJ={provide:ol,useExisting:Sn(()=>Jx)},RR=(()=>Promise.resolve())();let Jx=(()=>{class t extends ol{constructor(e,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new MR,this._registered=!1,this.name="",this.update=new Qn,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Qx(t,n){if(!n)return null;let e,r,i;return Array.isArray(n),n.forEach(s=>{s.constructor===Cy?e=s:function oJ(t){return Object.getPrototypeOf(t.constructor)===zc}(s)?r=s:i=s}),i||r||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function Yx(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Jf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){RR.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,i=0!==r&&id(r);RR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function Ay(t,n){return[...n.path,t]}(e,this._parent):[e]}static#e=this.\u0275fac=function(r){return new(r||t)(Re(ls,9),Re(Bi,10),Re(Yl,10),Re(Ta,10),Re(Dc,8),Re(kd,8))};static#t=this.\u0275dir=Rt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Jn([dJ]),wn,zr]})}return t})(),kR=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Rt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),PR=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({})}return t})();const yJ={provide:ls,useExisting:Sn(()=>Oy)};let Oy=(()=>{class t extends ls{constructor(e,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Qn,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ky(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return Jf(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Ny(e.control||null,e,!1),function aJ(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,DR(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,i=this.form.get(e.path);r!==i&&(Ny(r||null,e),(t=>t instanceof MR)(i)&&(Jf(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);SR(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function iJ(t,n){return ky(t,n)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qx(this.form,this),this._oldForm&&ky(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Bi,10),Re(Yl,10),Re(kd,8))};static#t=this.\u0275dir=Rt({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Mr("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Jn([yJ]),wn,zr]})}return t})(),PJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({imports:[PR]})}return t})(),$J=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:kd,useValue:e.callSetDisabledState??My}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({imports:[PJ]})}return t})();function JR(t){return ni((n,e)=>t<=e)}class WJ extends ${constructor(n,e){super()}schedule(n,e=0){return this}}const Py={setInterval(t,n,...e){const{delegate:r}=Py;return r?.setInterval?r.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=Py;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};class sw extends WJ{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var r;if(this.closed)return this;this.state=n;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,e)),this.pending=!0,this.delay=e,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,e),this}requestAsyncId(n,e,r=0){return Py.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,e,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return e;null!=e&&Py.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let i,r=!1;try{this.work(n)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,T(r,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}const ow={now:()=>(ow.delegate||Date).now(),delegate:void 0};class np{constructor(n,e=np.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,r){return new this.schedulerActionCtor(this,n).schedule(r,e)}}np.now=ow.now;class aw extends np{constructor(n,e=np.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let r;this._active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,r){for(;n=e.shift();)n.unsubscribe();throw r}}}const lw=new aw(sw),GJ=lw;function ek(t,n=lw){return tt((e,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+t,u=n.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);a()}e.subscribe(et(r,c=>{s=c,o=n.now(),i||(i=n.schedule(l,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}const tk=new Set;let jc,KJ=(()=>{class t{constructor(e,r){this._platform=e,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):qJ}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function XJ(t,n){if(!tk.has(t))try{jc||(jc=document.createElement("style"),n&&(jc.nonce=n),jc.setAttribute("type","text/css"),document.head.appendChild(jc)),jc.sheet&&(jc.sheet.insertRule(`@media ${t} {body{ }}`,0),tk.add(t))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(r){return new(r||t)(We(li),We(Pb,8))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qJ(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let ZJ=(()=>{class t{constructor(e,r){this._mediaMatcher=e,this._zone=r,this._queries=new Map,this._destroySubject=new De}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return nk(xy(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let s=Sa(nk(xy(e)).map(o=>this._registerQuery(o).observable));return s=ty(s.pipe(ti(1)),s.pipe(JR(1),ek(0))),s.pipe(qe(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const r=this._mediaMatcher.matchMedia(e),s={observable:new Te(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(ny(r),qe(({matches:o})=>({query:e,matches:o})),In(this._destroySubject)),mql:r};return this._queries.set(e,s),s}static#e=this.\u0275fac=function(r){return new(r||t)(We(KJ),We(Mt))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nk(t){return t.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}let sk=(()=>{class t{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function eee(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const r=function JJ(t){try{return t.frameElement}catch{return null}}(function lee(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(e));if(r&&(-1===ak(r)||!this.isVisible(r)))return!1;let i=e.nodeName.toLowerCase(),s=ak(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function oee(t){let n=t.nodeName.toLowerCase(),e="input"===n&&t.type;return"text"===e||"password"===e||"select"===n||"textarea"===n}(e))&&("audio"===i?!!e.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,r){return function aee(t){return!function nee(t){return function iee(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function tee(t){let n=t.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(t)||function ree(t){return function see(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||ok(t))}(e)&&!this.isDisabled(e)&&(r?.ignoreVisibility||this.isVisible(e))}static#e=this.\u0275fac=function(r){return new(r||t)(We(li))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ok(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let n=t.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function ak(t){if(!ok(t))return null;const n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class cee{get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}constructor(n,e,r,i,s=!1){this._element=n,this._checker=e,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const r=this._getFirstTabbableElement(e);return r?.focus(n),!!r}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){const e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let r=0;r<e.length;r++){const i=e[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[r]):null;if(i)return i}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let r=e.length-1;r>=0;r--){const i=e[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[r]):null;if(i)return i}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._ngZone.isStable?n():this._ngZone.onStable.pipe(ti(1)).subscribe(n)}}let uee=(()=>{class t{constructor(e,r,i){this._checker=e,this._ngZone=r,this._document=i}create(e,r=!1){return new cee(e,this._checker,this._ngZone,this._document,r)}static#e=this.\u0275fac=function(r){return new(r||t)(We(sk),We(Mt),We(_n))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lk(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function ck(t){const n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const dee=new ot("cdk-input-modality-detector-options"),hee={ignoreKeys:[18,17,224,91,16]},Od=Nd({passive:!0,capture:!0});let fee=(()=>{class t{get mostRecentModality(){return this._modality.value}constructor(e,r,i,s){this._platform=e,this._mostRecentTarget=null,this._modality=new gn(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ql(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(lk(o)?"keyboard":"mouse"),this._mostRecentTarget=ql(o))},this._onTouchstart=o=>{ck(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ql(o))},this._options={...hee,...s},this.modalityDetected=this._modality.pipe(JR(1)),this.modalityChanged=this.modalityDetected.pipe(so()),e.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Od),i.addEventListener("mousedown",this._onMousedown,Od),i.addEventListener("touchstart",this._onTouchstart,Od)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Od),document.removeEventListener("mousedown",this._onMousedown,Od),document.removeEventListener("touchstart",this._onTouchstart,Od))}static#e=this.\u0275fac=function(r){return new(r||t)(We(li),We(Mt),We(_n),We(dee,8))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const mee=new ot("cdk-focus-monitor-default-options"),Fy=Nd({passive:!0,capture:!0});let dk=(()=>{class t{constructor(e,r,i,s,o){this._ngZone=e,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new De,this._rootNodeFocusAndBlurListener=a=>{for(let c=ql(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(e,r=!1){const i=Xl(e);if(!this._platform.isBrowser||1!==i.nodeType)return Bt();const s=function LQ(t){if(function $Q(){if(null==Bx){const t=typeof document<"u"?document.head:null;Bx=!(!t||!t.createShadowRoot&&!t.attachShadow)}return Bx}()){const n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new De,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const r=Xl(e),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(e,r,i){const s=Xl(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused","touch"===r),e.classList.toggle("cdk-keyboard-focused","keyboard"===r),e.classList.toggle("cdk-mouse-focused","mouse"===r),e.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const i=this._elementInfo.get(r),s=ql(e);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(e,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(e,r){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Fy),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Fy)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(In(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Fy),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Fy),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,i){this._setClasses(e,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((i,s)=>{(s===e||i.checkChildren&&s.contains(e))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0;return!1}static#e=this.\u0275fac=function(r){return new(r||t)(We(Mt),We(li),We(fee),We(_n,8),We(mee,8))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const hk="cdk-high-contrast-black-on-white",fk="cdk-high-contrast-white-on-black",cw="cdk-high-contrast-active";let gee=(()=>{class t{constructor(e,r){this._platform=e,this._document=r,this._breakpointSubscription=ft(ZJ).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(cw,hk,fk),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?e.add(cw,hk):2===r&&e.add(cw,fk)}}static#e=this.\u0275fac=function(r){return new(r||t)(We(li),We(_n))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const yee=new ot("cdk-dir-doc",{providedIn:"root",factory:function _ee(){return ft(_n)}}),bee=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let $y=(()=>{class t{constructor(e){this.value="ltr",this.change=new Qn,e&&(this.value=function vee(t){const n=t?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?bee.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||t)(We(yee,8))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rp=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({})}return t})();const wee=new ot("mat-sanity-checks",{providedIn:"root",factory:function xee(){return!0}});let ci=(()=>{class t{constructor(e,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Vx()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}static#e=this.\u0275fac=function(r){return new(r||t)(We(gee),We(wee,8),We(_n))};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({imports:[rp,rp]})}return t})();function Cee(t){return class extends t{get disabled(){return this._disabled}set disabled(n){this._disabled=Li(n)}constructor(...n){super(...n),this._disabled=!1}}}function uw(t,n){return class extends t{get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...e){super(...e),this.defaultColor=n,this.color=n}}}function Eee(t){return class extends t{get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=Li(n)}constructor(...n){super(...n),this._disableRipple=!1}}}function See(t){return class extends t{updateErrorState(){const n=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==n&&(this.errorState=s,this.stateChanges.next())}constructor(...n){super(...n),this.errorState=!1}}}let Iee=(()=>{class t{isErrorState(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Tee{constructor(n,e,r,i=!1){this._renderer=n,this.element=e,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const gk=Nd({passive:!0,capture:!0});class Mee{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const e=ql(n);e&&this._events.get(n.type)?.forEach((r,i)=>{(i===e||i.contains(e))&&r.forEach(s=>s.handleEvent(n))})}}addHandler(n,e,r,i){const s=this._events.get(e);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(e,new Map([[r,new Set([i])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,gk)})}removeHandler(n,e,r){const i=this._events.get(n);if(!i)return;const s=i.get(e);s&&(s.delete(r),0===s.size&&i.delete(e),0===i.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,gk)))}}const yk={enterDuration:225,exitDuration:150},_k=Nd({passive:!0,capture:!0}),bk=["mousedown","touchstart"],vk=["mouseup","mouseleave","touchend","touchcancel"];class Ly{static#e=this._eventManager=new Mee;constructor(n,e,r,i){this._target=n,this._ngZone=e,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Xl(r))}fadeInRipple(n,e,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...yk,...r.animation};r.centered&&(n=i.left+i.width/2,e=i.top+i.height/2);const o=r.radius||function Nee(t,n,e){const r=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),i=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(r*r+i*i)}(n,e,i),a=n-i.left,l=e-i.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const h=window.getComputedStyle(u),y=h.transitionDuration,C="none"===h.transitionProperty||"0s"===y||"0s, 0s"===y||0===i.width&&0===i.height,k=new Tee(this,u,r,C);u.style.transform="scale3d(1, 1, 1)",k.state=0,r.persistent||(this._mostRecentTransientRipple=k);let P=null;return!C&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const B=()=>this._finishRippleTransition(k),V=()=>this._destroyRipple(k);u.addEventListener("transitionend",B),u.addEventListener("transitioncancel",V),P={onTransitionEnd:B,onTransitionCancel:V}}),this._activeRipples.set(k,P),(C||!c)&&this._finishRippleTransition(k),k}fadeOutRipple(n){if(2===n.state||3===n.state)return;const e=n.element,r={...yk,...n.config.animation};e.style.transitionDuration=`${r.exitDuration}ms`,e.style.opacity="0",n.state=2,(n._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const e=Xl(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,bk.forEach(r=>{Ly._eventManager.addHandler(this._ngZone,r,e,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{vk.forEach(e=>{this._triggerElement.addEventListener(e,this,_k)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){0===n.state?this._startFadeOutTransition(n):2===n.state&&this._destroyRipple(n)}_startFadeOutTransition(n){const e=n===this._mostRecentTransientRipple,{persistent:r}=n.config;n.state=1,!r&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=3,null!==e&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel)),n.element.remove()}_onMousedown(n){const e=lk(n),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!ck(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=n.changedTouches;if(e)for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(bk.forEach(e=>Ly._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&vk.forEach(e=>n.removeEventListener(e,this,_k)))}}const xk=new ot("mat-ripple-global-options");let Ree=(()=>{class t{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,r,i,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Ly(this,r,e,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,r=0,i){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}static#e=this.\u0275fac=function(r){return new(r||t)(Re($n),Re(Mt),Re(li),Re(xk,8),Re(kl,8))};static#t=this.\u0275dir=Rt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){2&r&&Ur("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return t})(),wk=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({imports:[ci,ci]})}return t})();const Ck={capture:!0},Ek=["focus","click","mouseenter","touchstart"],dw="mat-ripple-loader-uninitialized",hw="mat-ripple-loader-class-name",Sk="mat-ripple-loader-centered",By="mat-ripple-loader-disabled";let kee=(()=>{class t{constructor(){this._document=ft(_n,{optional:!0}),this._animationMode=ft(kl,{optional:!0}),this._globalRippleOptions=ft(xk,{optional:!0}),this._platform=ft(li),this._ngZone=ft(Mt),this._onInteraction=e=>{if(!(e.target instanceof HTMLElement))return;const i=e.target.closest(`[${dw}]`);i&&this.createRipple(i)},this._ngZone.runOutsideAngular(()=>{for(const e of Ek)this._document?.addEventListener(e,this._onInteraction,Ck)})}ngOnDestroy(){for(const e of Ek)this._document?.removeEventListener(e,this._onInteraction,Ck)}configureRipple(e,r){e.setAttribute(dw,""),(r.className||!e.hasAttribute(hw))&&e.setAttribute(hw,r.className||""),r.centered&&e.setAttribute(Sk,""),r.disabled&&e.setAttribute(By,"")}getRipple(e){return e.matRipple?e.matRipple:this.createRipple(e)}setDisabled(e,r){const i=e.matRipple;i?i.disabled=r:r?e.setAttribute(By,""):e.removeAttribute(By)}createRipple(e){if(!this._document)return;e.querySelector(".mat-ripple")?.remove();const r=this._document.createElement("span");r.classList.add("mat-ripple",e.getAttribute(hw)),e.append(r);const i=new Ree(new $n(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return i._isInitialized=!0,i.trigger=e,i.centered=e.hasAttribute(Sk),i.disabled=e.hasAttribute(By),this.attachRipple(e,i),i}attachRipple(e,r){e.removeAttribute(dw),e.matRipple=r}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Oee extends De{constructor(n=1/0,e=1/0,r=ow){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){const{isStopped:e,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;e||(r.push(n),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!n.closed;o+=r?1:2)n.next(s[o]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){const{_bufferSize:n,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*n;if(n<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=e.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}class Fee{constructor(n){this._box=n,this._destroyed=new De,this._resizeSubject=new De,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(n){return this._elementObservables.has(n)||this._elementObservables.set(n,new Te(e=>{const r=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(n,{box:this._box}),()=>{this._resizeObserver?.unobserve(n),r.unsubscribe(),this._elementObservables.delete(n)}}).pipe(ni(e=>e.some(r=>r.target===n)),function Pee(t,n,e){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:n=1/0,refCount:i=!1,scheduler:e}=t):r=t??1/0,Br({connector:()=>new Oee(r,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}({bufferSize:1,refCount:!0}),In(this._destroyed))),this._elementObservables.get(n)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let $ee=(()=>{class t{constructor(){this._observers=new Map,this._ngZone=ft(Mt)}ngOnDestroy(){for(const[,e]of this._observers)e.destroy();this._observers.clear()}observe(e,r){const i=r?.box||"content-box";return this._observers.has(i)||this._observers.set(i,new Fee(i)),this._observers.get(i).observe(e)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Dk{}class Lee{}const al="*";function Vy(t,n){return{type:7,name:t,definitions:n,options:{}}}function Pd(t,n=null){return{type:4,styles:n,timings:t}}function Ik(t,n=null){return{type:2,steps:t,options:n}}function Zo(t){return{type:6,styles:t,offset:null}}function sp(t,n,e){return{type:0,name:t,styles:n,options:e}}function Fd(t,n,e=null){return{type:1,expr:t,animation:n,options:e}}class op{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class Tk{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){const n=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}let Bee=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Vee=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({providers:[Bee]})}return t})();const zee=["notch"],Uee=["matFormFieldNotchedOutline",""],jee=["*"],Hee=["textField"],Wee=["iconPrefixContainer"],Gee=["textPrefixContainer"];function Kee(t,n){1&t&&Xt(0,"span",19)}function Xee(t,n){if(1&t&&(pt(0,"label",17),br(1,1),Gn(2,Kee,1,0,"span",18),ct()),2&t){const e=zo(2);tn("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),bi("for",e._control.id),yn(2),tn("ngIf",!e.hideRequiredMarker&&e._control.required)}}function qee(t,n){1&t&&Gn(0,Xee,3,5,"label",16),2&t&&tn("ngIf",zo()._hasFloatingLabel())}function Zee(t,n){1&t&&Xt(0,"div",20)}function Yee(t,n){}function Qee(t,n){1&t&&Gn(0,Yee,0,0,"ng-template",22),2&t&&(zo(2),tn("ngTemplateOutlet",nf(1)))}function Jee(t,n){if(1&t&&(pt(0,"div",21),Gn(1,Qee,1,1,"ng-template",9),ct()),2&t){const e=zo();tn("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),yn(1),tn("ngIf",!e._forceDisplayInfixLabel())}}function ete(t,n){1&t&&(pt(0,"div",23,24),br(2,2),ct())}function tte(t,n){1&t&&(pt(0,"div",25,26),br(2,3),ct())}function nte(t,n){}function rte(t,n){1&t&&Gn(0,nte,0,0,"ng-template",22),2&t&&(zo(),tn("ngTemplateOutlet",nf(1)))}function ite(t,n){1&t&&(pt(0,"div",27),br(1,4),ct())}function ste(t,n){1&t&&(pt(0,"div",28),br(1,5),ct())}function ote(t,n){1&t&&Xt(0,"div",29)}function ate(t,n){1&t&&(pt(0,"div",30),br(1,6),ct()),2&t&&tn("@transitionMessages",zo()._subscriptAnimationState)}function lte(t,n){if(1&t&&(pt(0,"mat-hint",34),Et(1),ct()),2&t){const e=zo(2);tn("id",e._hintLabelId),yn(1),Av(e.hintLabel)}}function cte(t,n){if(1&t&&(pt(0,"div",31),Gn(1,lte,2,2,"mat-hint",32),br(2,7),Xt(3,"div",33),br(4,8),ct()),2&t){const e=zo();tn("@transitionMessages",e._subscriptAnimationState),yn(1),tn("ngIf",e.hintLabel)}}const ute=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],dte=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let pw=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Rt({type:t,selectors:[["mat-label"]]})}return t})();const hte=new ot("MatError");let fte=0,Mk=(()=>{class t{constructor(){this.align="start",this.id="mat-mdc-hint-"+fte++}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Rt({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,i){2&r&&(Ym("id",i.id),bi("align",null),Ur("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"}})}return t})();const pte=new ot("MatPrefix"),mte=new ot("MatSuffix"),Ak=new ot("FloatingLabelParent");let Nk=(()=>{class t{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=ft($ee),this._ngZone=ft(Mt),this._parent=ft(Ak),this._resizeSubscription=new $}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function gte(t){if(null!==t.offsetParent)return t.scrollWidth;const e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const r=e.scrollWidth;return e.remove(),r}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(r){return new(r||t)(Re($n))};static#t=this.\u0275dir=Rt({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,i){2&r&&Ur("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return t})();const Rk="mdc-line-ripple--active",zy="mdc-line-ripple--deactivating";let kk=(()=>{class t{constructor(e,r){this._elementRef=e,this._handleTransitionEnd=i=>{const s=this._elementRef.nativeElement.classList,o=s.contains(zy);"opacity"===i.propertyName&&o&&s.remove(Rk,zy)},r.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(zy),e.add(Rk)}deactivate(){this._elementRef.nativeElement.classList.add(zy)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(r){return new(r||t)(Re($n),Re(Mt))};static#t=this.\u0275dir=Rt({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return t})(),Ok=(()=>{class t{constructor(e,r){this._elementRef=e,this._ngZone=r,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){this._notch.nativeElement.style.width=this.open&&e?`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(r){return new(r||t)(Re($n),Re(Mt))};static#t=this.\u0275cmp=rr({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(r,i){if(1&r&&Hs(zee,5),2&r){let s;hr(s=fr())&&(i._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,i){2&r&&Ur("mdc-notched-outline--notched",i.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Uee,ngContentSelectors:jee,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(r,i){1&r&&(Uo(),Xt(0,"div",0),pt(1,"div",1,2),br(3),ct(),Xt(4,"div",3))},encapsulation:2,changeDetection:0})}return t})();const yte={transitionMessages:Vy("transitionMessages",[sp("enter",Zo({opacity:1,transform:"translateY(0%)"})),Fd("void => enter",[Zo({opacity:0,transform:"translateY(-5px)"}),Pd("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Pk=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Rt({type:t})}return t})();const Fk=new ot("MatFormField"),_te=new ot("MAT_FORM_FIELD_DEFAULT_OPTIONS");let $k=0,Vk=(()=>{class t{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Li(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const r=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,r,i,s,o,a,l,c){this._elementRef=e,this._changeDetectorRef=r,this._ngZone=i,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=l,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+$k++,this._hintLabelId="mat-mdc-hint-"+$k++,this._subscriptAnimationState="",this._destroyed=new De,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(In(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Oo(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(In(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(In(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const r=this._control?this._control.ngControl:null;return r&&r[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?e.push(r.id):this._hintLabel&&e.push(this._hintLabelId),i&&e.push(i.id)}else this._errorChildren&&e.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const r=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,s=r?.getBoundingClientRect().width??0,o=i?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const r=e.getRootNode();return r&&r!==e}return document.documentElement.contains(e)}static#e=this.\u0275fac=function(r){return new(r||t)(Re($n),Re(Dc),Re(Mt),Re($y),Re(li),Re(_te,8),Re(kl,8),Re(_n))};static#t=this.\u0275cmp=rr({type:t,selectors:[["mat-form-field"]],contentQueries:function(r,i,s){if(1&r&&(Ws(s,pw,5),Ws(s,pw,7),Ws(s,Pk,5),Ws(s,pte,5),Ws(s,mte,5),Ws(s,hte,5),Ws(s,Mk,5)),2&r){let o;hr(o=fr())&&(i._labelChildNonStatic=o.first),hr(o=fr())&&(i._labelChildStatic=o.first),hr(o=fr())&&(i._formFieldControl=o.first),hr(o=fr())&&(i._prefixChildren=o),hr(o=fr())&&(i._suffixChildren=o),hr(o=fr())&&(i._errorChildren=o),hr(o=fr())&&(i._hintChildren=o)}},viewQuery:function(r,i){if(1&r&&(Hs(Hee,5),Hs(Wee,5),Hs(Gee,5),Hs(Nk,5),Hs(Ok,5),Hs(kk,5)),2&r){let s;hr(s=fr())&&(i._textField=s.first),hr(s=fr())&&(i._iconPrefixContainer=s.first),hr(s=fr())&&(i._textPrefixContainer=s.first),hr(s=fr())&&(i._floatingLabel=s.first),hr(s=fr())&&(i._notchedOutline=s.first),hr(s=fr())&&(i._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(r,i){2&r&&Ur("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Jn([{provide:Fk,useExisting:t},{provide:Ak,useExisting:t}])],ngContentSelectors:dte,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(r,i){1&r&&(Uo(ute),Gn(0,qee,1,1,"ng-template",null,0,VI),pt(2,"div",1,2),Mr("click",function(o){return i._control.onContainerClick(o)}),Gn(4,Zee,1,0,"div",3),pt(5,"div",4),Gn(6,Jee,2,2,"div",5),Gn(7,ete,3,0,"div",6),Gn(8,tte,3,0,"div",7),pt(9,"div",8),Gn(10,rte,1,1,"ng-template",9),br(11),ct(),Gn(12,ite,2,0,"div",10),Gn(13,ste,2,0,"div",11),ct(),Gn(14,ote,1,0,"div",12),ct(),pt(15,"div",13),Gn(16,ate,2,1,"div",14),Gn(17,cte,5,2,"div",15),ct()),2&r&&(yn(2),Ur("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),yn(2),tn("ngIf",!i._hasOutline()&&!i._control.disabled),yn(2),tn("ngIf",i._hasOutline()),yn(1),tn("ngIf",i._hasIconPrefix),yn(1),tn("ngIf",i._hasTextPrefix),yn(2),tn("ngIf",!i._hasOutline()||i._forceDisplayInfixLabel()),yn(2),tn("ngIf",i._hasTextSuffix),yn(1),tn("ngIf",i._hasIconSuffix),yn(1),tn("ngIf",!i._hasOutline()),yn(1),Ur("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),tn("ngSwitch",i._getDisplayedMessages()),yn(1),tn("ngSwitchCase","error"),yn(1),tn("ngSwitchCase","hint"))},dependencies:[vf,sT,Sg,rT,Mk,Nk,Ok,kk],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{--mdc-filled-text-field-active-indicator-height:1px;--mdc-filled-text-field-focus-active-indicator-height:2px;--mdc-filled-text-field-container-shape:4px;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined{--mdc-outlined-text-field-outline-width:1px;--mdc-outlined-text-field-focus-outline-width:2px;--mdc-outlined-text-field-container-shape:4px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size) * var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[yte.transitionMessages]},changeDetection:0})}return t})(),zk=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({imports:[ci,Dg,Vee,ci]})}return t})();const xte=new ot("MAT_INPUT_VALUE_ACCESSOR"),wte=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Cte=0;const Ete=See(class{constructor(t,n,e,r){this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=e,this.ngControl=r,this.stateChanges=new De}});let Uk=(()=>{class t extends Ete{get disabled(){return this._disabled}set disabled(e){this._disabled=Li(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(GQ.required)??!1}set required(e){this._required=Li(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&jN().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Li(e)}constructor(e,r,i,s,o,a,l,c,u,h){super(a,s,o,i),this._elementRef=e,this._platform=r,this._autofillMonitor=c,this._formField=h,this._uid="mat-input-"+Cte++,this.focused=!1,this.stateChanges=new De,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(C=>jN().has(C)),this._iOSKeyupListener=C=>{const k=C.target;!k.value&&0===k.selectionStart&&0===k.selectionEnd&&(k.setSelectionRange(1,1),k.setSelectionRange(0,0))};const m=this._elementRef.nativeElement,y=m.nodeName.toLowerCase();this._inputValueAccessor=l||m,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&u.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===y,this._isTextarea="textarea"===y,this._isInFormField=!!h,this._isNativeSelect&&(this.controlType=m.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=e,e?r.setAttribute("placeholder",e):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){wte.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,r=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}static#e=this.\u0275fac=function(r){return new(r||t)(Re($n),Re(li),Re(ol,10),Re(tp,8),Re(Oy,8),Re(Iee),Re(xte,10),Re(BQ),Re(Mt),Re(Fk,8))};static#t=this.\u0275dir=Rt({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(r,i){1&r&&Mr("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&r&&(Ym("id",i.id)("disabled",i.disabled)("required",i.required),bi("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),Ur("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Jn([{provide:Pk,useExisting:t}]),wn,zr]})}return t})(),Ste=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({imports:[ci,zk,zk,VQ,ci]})}return t})();function Dte(t,n){1&t&&(pt(0,"div",17)(1,"h4"),Et(2,"The form was sent successfully."),ct()())}function Ite(t,n){1&t&&(pt(0,"div",18)(1,"h4"),Et(2,"The form could not be sent. Please try again later."),ct()())}let Tte=(()=>{class t{constructor(){this.submittedSuccess=!1,this.submittedFailure=!1}sendEmail(e){e.preventDefault();const r=e.target;OQ_sendForm("service_don1hkb","template_cuanh85",r,"2uNdydOHG5YjFDRwq").then(i=>{console.log(i.text),this.submittedSuccess=!0,r.reset(),setTimeout(()=>{this.submittedSuccess=!1},3e3)},i=>{this.submittedFailure=!0,console.log(i.text),r.reset(),setTimeout(()=>{this.submittedFailure=!1},3e3)})}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=rr({type:t,selectors:[["app-communication"]],decls:82,vars:2,consts:[[1,"container"],[1,"row"],[1,"size-7"],[1,"card-container"],[1,"card-header"],[1,"size-5"],[1,"size-12"],["class","alert-success",4,"ngIf"],["class","alert-danger",4,"ngIf"],[1,"contact-form",3,"submit"],[1,"name-email"],["matInput","","type","text","name","from_name","required",""],["matInput","","type","text","name","from_surname","required",""],["matInput","","type","email","name","from_email","required",""],["matInput","","type","text","name","address","required",""],["matInput","","name","message","required",""],["type","submit","value","Send"],[1,"alert-success"],[1,"alert-danger"]],template:function(r,i){1&r&&(pt(0,"div",0)(1,"div",1)(2,"h1"),Et(3,"Communication"),ct()(),pt(4,"div",1)(5,"div",2)(6,"div",3)(7,"div",4)(8,"h3"),Et(9,"Contact Information"),ct()(),pt(10,"p")(11,"b"),Et(12,"Phone:"),ct(),Et(13," 1-800-123-4567"),Xt(14,"br"),pt(15,"b"),Et(16,"Address:"),ct(),Et(17," 1234 Recycling Gate, Istanbul, Turkey"),Xt(18,"br")(19,"br"),pt(20,"b"),Et(21,"Hours:"),ct(),Et(22," 9:00 AM - 5:00 PM"),Xt(23,"br"),pt(24,"b"),Et(25,"Days:"),ct(),Et(26," Monday - Friday"),Xt(27,"br"),pt(28,"b"),Et(29,"Time Zone:"),ct(),Et(30," Eastern Standard Time (EST)"),Xt(31,"br"),ct()()(),pt(32,"div",5)(33,"div",3)(34,"div",4)(35,"h3"),Et(36,"Mail Address"),ct()(),pt(37,"p")(38,"b"),Et(39,"Turkey:"),ct(),Et(40," info@recyclinggate.com.tr "),Xt(41,"br"),pt(42,"b"),Et(43,"USA:"),ct(),Et(44," info@recyclinggate.com "),Xt(45,"br"),pt(46,"b"),Et(47,"UK:"),ct(),Et(48," info@recyclinggate.com.uk "),Xt(49,"br"),ct()()()(),pt(50,"div",6)(51,"div",3)(52,"div",4)(53,"h3"),Et(54,"Contact with Form"),ct()(),pt(55,"p"),Et(56,"You can contact us by filling out the form and ask any questions you may have. We will get back to you as soon as possible."),ct(),Gn(57,Dte,3,0,"div",7),Gn(58,Ite,3,0,"div",8),pt(59,"form",9),Mr("submit",function(o){return i.sendEmail(o)}),pt(60,"div",10)(61,"mat-form-field")(62,"mat-label"),Et(63,"Name"),ct(),Xt(64,"input",11),ct(),pt(65,"mat-form-field")(66,"mat-label"),Et(67,"Surname"),ct(),Xt(68,"input",12),ct(),pt(69,"mat-form-field")(70,"mat-label"),Et(71,"Email"),ct(),Xt(72,"input",13),ct()(),pt(73,"mat-form-field")(74,"mat-label"),Et(75,"Address"),ct(),Xt(76,"textarea",14),ct(),pt(77,"mat-form-field")(78,"mat-label"),Et(79,"Message"),ct(),Xt(80,"textarea",15),ct(),Xt(81,"input",16),ct()()()()),2&r&&(yn(57),tn("ngIf",i.submittedSuccess),yn(1),tn("ngIf",i.submittedFailure))},dependencies:[vf,Uk,Vk,pw,kR,bR,tp],styles:[".contact-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;margin-top:1rem}.name-email[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:flex-start;gap:1rem}.alert-success[_ngcontent-%COMP%]{margin-block:1rem;padding:.5rem 1rem;color:#155724;background-color:#d4edda}.alert-danger[_ngcontent-%COMP%]{margin-block:1rem;padding:.5rem 1rem;color:#721c24;background-color:#f8d7da}"]})}return t})();class Uy{}class jy{}class Yo{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),s=i.toLowerCase(),o=e.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.setHeaderEntries(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof Yo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new Yo;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Yo?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,e);const i=("a"===n.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const s=n.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const r=(Array.isArray(e)?e:[e]).map(s=>s.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class Mte{encodeKey(n){return jk(n)}encodeValue(n){return jk(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const Nte=/%(\d[a-f0-9])/gi,Rte={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function jk(t){return encodeURIComponent(t).replace(Nte,(n,e)=>Rte[e]??n)}function Hy(t){return`${t}`}class Ql{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new Mte,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ate(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,s)),n.decodeValue(i.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const r=n.fromObject[e],i=Array.isArray(r)?r.map(Hy):[Hy(r)];this.map.set(e,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(r=>{const i=n[r];Array.isArray(i)?i.forEach(s=>{e.push({param:r,value:s,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new Ql({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(Hy(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const i=r.indexOf(Hy(n.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class kte{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function Hk(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Wk(t){return typeof Blob<"u"&&t instanceof Blob}function Gk(t){return typeof FormData<"u"&&t instanceof FormData}class ap{constructor(n,e,r,i){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function Ote(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Yo),this.context||(this.context=new kte),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new Ql,this.urlWithParams=e}serializeBody(){return null===this.body?null:Hk(this.body)||Wk(this.body)||Gk(this.body)||function Pte(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ql?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Gk(this.body)?null:Wk(this.body)?this.body.type||null:Hk(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ql?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,s=void 0!==n.body?n.body:this.body,o=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,a=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let l=n.headers||this.headers,c=n.params||this.params;const u=n.context??this.context;return void 0!==n.setHeaders&&(l=Object.keys(n.setHeaders).reduce((h,m)=>h.set(m,n.setHeaders[m]),l)),n.setParams&&(c=Object.keys(n.setParams).reduce((h,m)=>h.set(m,n.setParams[m]),c)),new ap(e,r,s,{params:c,headers:l,context:u,reportProgress:a,responseType:i,withCredentials:o})}}var $d=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}($d||{});class mw{constructor(n,e=200,r="OK"){this.headers=n.headers||new Yo,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class gw extends mw{constructor(n={}){super(n),this.type=$d.ResponseHeader}clone(n={}){return new gw({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Ld extends mw{constructor(n={}){super(n),this.type=$d.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new Ld({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Kk extends mw{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function yw(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Wy=(()=>{class t{constructor(e){this.handler=e}request(e,r,i={}){let s;if(e instanceof ap)s=e;else{let l,c;l=i.headers instanceof Yo?i.headers:new Yo(i.headers),i.params&&(c=i.params instanceof Ql?i.params:new Ql({fromObject:i.params})),s=new ap(e,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=Bt(s).pipe(bd(l=>this.handler.handle(l)));if(e instanceof ap||"events"===i.observe)return o;const a=o.pipe(ni(l=>l instanceof Ld));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(qe(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(qe(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(qe(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(qe(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new Ql).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,yw(i,r))}post(e,r,i={}){return this.request("POST",e,yw(i,r))}put(e,r,i={}){return this.request("PUT",e,yw(i,r))}static#e=this.\u0275fac=function(r){return new(r||t)(We(Uy))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();function Zk(t,n){return n(t)}function $te(t,n){return(e,r)=>n.intercept(e,{handle:i=>t(i,r)})}const Bte=new ot(""),lp=new ot(""),Yk=new ot("");function Vte(){let t=null;return(n,e)=>{null===t&&(t=(ft(Bte,{optional:!0})??[]).reduceRight($te,Zk));const r=ft(ag),i=r.add();return t(n,e).pipe(vd(()=>r.remove(i)))}}let Qk=(()=>{class t extends Uy{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null,this.pendingTasks=ft(ag)}handle(e){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(lp),...this.injector.get(Yk,[])]));this.chain=i.reduceRight((s,o)=>function Lte(t,n,e){return(r,i)=>e.runInContext(()=>n(r,s=>t(s,i)))}(s,o,this.injector),Zk)}const r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(vd(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||t)(We(jy),We(Us))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();const Hte=/^\)\]\}',?\n/;let eO=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new je(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?dn(r.\u0275loadImpl()):Bt(null)).pipe(Nr(()=>new Te(s=>{const o=r.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((k,P)=>o.setRequestHeader(k,P.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const k=e.detectContentTypeHeader();null!==k&&o.setRequestHeader("Content-Type",k)}if(e.responseType){const k=e.responseType.toLowerCase();o.responseType="json"!==k?k:"text"}const a=e.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const k=o.statusText||"OK",P=new Yo(o.getAllResponseHeaders()),B=function Wte(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||e.url;return l=new gw({headers:P,status:o.status,statusText:k,url:B}),l},u=()=>{let{headers:k,status:P,statusText:B,url:V}=c(),fe=null;204!==P&&(fe=typeof o.response>"u"?o.responseText:o.response),0===P&&(P=fe?200:0);let ve=P>=200&&P<300;if("json"===e.responseType&&"string"==typeof fe){const Ve=fe;fe=fe.replace(Hte,"");try{fe=""!==fe?JSON.parse(fe):null}catch(gt){fe=Ve,ve&&(ve=!1,fe={error:gt,text:fe})}}ve?(s.next(new Ld({body:fe,headers:k,status:P,statusText:B,url:V||void 0})),s.complete()):s.error(new Kk({error:fe,headers:k,status:P,statusText:B,url:V||void 0}))},h=k=>{const{url:P}=c(),B=new Kk({error:k,status:o.status||0,statusText:o.statusText||"Unknown Error",url:P||void 0});s.error(B)};let m=!1;const y=k=>{m||(s.next(c()),m=!0);let P={type:$d.DownloadProgress,loaded:k.loaded};k.lengthComputable&&(P.total=k.total),"text"===e.responseType&&o.responseText&&(P.partialText=o.responseText),s.next(P)},C=k=>{let P={type:$d.UploadProgress,loaded:k.loaded};k.lengthComputable&&(P.total=k.total),s.next(P)};return o.addEventListener("load",u),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),e.reportProgress&&(o.addEventListener("progress",y),null!==a&&o.upload&&o.upload.addEventListener("progress",C)),o.send(a),s.next({type:$d.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",u),o.removeEventListener("timeout",h),e.reportProgress&&(o.removeEventListener("progress",y),null!==a&&o.upload&&o.upload.removeEventListener("progress",C)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||t)(We(uT))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();const _w=new ot("XSRF_ENABLED"),tO=new ot("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),nO=new ot("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class rO{}let Xte=(()=>{class t{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Q1(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||t)(We(_n),We(qa),We(tO))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();function qte(t,n){const e=t.url.toLowerCase();if(!ft(_w)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const r=ft(rO).getToken(),i=ft(nO);return null!=r&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),n(t)}var Jl=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Jl||{});function Zte(...t){const n=[Wy,eO,Qk,{provide:Uy,useExisting:Qk},{provide:jy,useExisting:eO},{provide:lp,useValue:qte,multi:!0},{provide:_w,useValue:!0},{provide:rO,useClass:Xte}];for(const e of t)n.push(...e.\u0275providers);return function Tb(t){return{\u0275providers:t}}(n)}const iO=new ot("LEGACY_INTERCEPTOR_FN");function Yte(){return function Hc(t,n){return{\u0275kind:t,\u0275providers:n}}(Jl.LegacyInterceptors,[{provide:iO,useFactory:Vte},{provide:lp,useExisting:iO,multi:!0}])}let Qte=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({providers:[Zte(Yte())]})}return t})(),sO=(()=>{class t{constructor(e){this.http=e,this.apiUrl="https://api.openai.com/v1/chat/completions",this.documentContext="\n    You are chatting with Recycling Gate's AI chatbot. You can ask questions about Recycling Gate.\n\n    Welcome to Recycling Gate, your gateway to a greener, more sustainable lifestyle! We're on a mission to transform how you manage recyclable waste at home, focusing on unused books and electronic devices' impact on the environment.\n\n    Our user-friendly platform simplifies the process of donating, recycling, and repurposing. From unused books to electronic waste, every item can contribute to positive environmental change.\n    \n    Our Mission:\n    Recycling Gate is a movement toward responsible living. Our mission is to reduce waste and promote sustainability, starting from your home. By incorporating recyclables into your lifestyle, you declutter your home and significantly contribute to environmental preservation.\n    \n    How We Work:\n    User-Friendly Platform: Our intuitive website and mobile app make contributing to sustainability easy.\n    Item Identification: Advanced systems classify each recyclable item, maximizing its potential for reuse or recycling.\n    Donation Channels: Convenient options include drop-off points, collection drives, and doorstep pickups.\n    Collaboration with Partners: Strong ties with recycling facilities ensure responsible handling of your donations.\n    Educational Initiatives: We provide valuable information on environmental impact and inspire conscious choices.\n    Tracking and Impact Assessment: Monitor your recyclables' journey and see the positive impact you've made.\n    Community Engagement: Connect with like-minded individuals through events, workshops, and social media.\n    Continuous Improvement: Your feedback helps us enhance our platform and services continually.\n    \n    Introducing Pick-Up Service:\n    For added convenience, we now offer a Pick-Up Service:\n    Reach Out: Contact us to schedule a pick-up via our website, app, or hotline.\n    Specify Materials: Let us know the types and quantities of recyclables you wish to donate.\n    Schedule Pick-Up: Our team will work with you to find a convenient time for a hassle-free experience.\n    Prepare Your Items: Package your recyclables securely; we'll handle the rest.\n    Track Your Contribution: Use our tracking system to follow your recyclables' journey.\n    \n    Choose our Pick-Up Service for an easy and impactful recycling experience. Contact us today to schedule your pick-up and be part of the Recycling Gate movement toward responsible and effortless recycling. Join us in creating a cleaner, greener future\u2014one pick-up at a time.\n\n    Our Pick-Up service is currently available in the following areas:\n    - Istanbul\n    - Ankara\n    - Izmir\n    - Bursa\n    \n    You can send your recyclings to our centers free of charge by sending you the route our vehicles pass at the beginning of each month, according to the communication form you fill out.\n\n    If you want to bring your own, you can reach them by looking at their locations. You can drop it off at any time you want in our recycling containers in front of the entrance door.\n\n    IoT Integration at Recycling Gate:\nRecycling Gate embraces cutting-edge technology by incorporating IoT (Internet of Things) and IoT 4.0 to enhance the efficiency and effectiveness of our recycling processes. IoT refers to the interconnection of everyday objects and devices to the internet, enabling them to send and receive data. Here's how Recycling Gate leverages IoT for a smarter and more sustainable recycling experience:\n\nSmart Recycling Bins:\nWe have deployed smart recycling bins equipped with IoT sensors at various locations, including homes, offices, and public spaces.\nThese bins are designed to detect and classify recyclable items automatically, ensuring accurate sorting and minimizing contamination.\nReal-time Monitoring:\nIoT sensors continuously monitor the fill level of recycling bins, providing real-time data on their capacity.\nThis information is used to optimize collection routes, reducing unnecessary trips and minimizing carbon footprint.\nItem Tracking and Identification:\nAdvanced IoT systems are integrated into our platform to track the journey of each recyclable item from collection to processing.\nThese systems enhance the accuracy of item identification, ensuring that materials are repurposed or recycled efficiently.\nData-driven Decision Making:\nThe data collected through IoT devices is analyzed to make informed decisions, such as optimizing collection schedules, identifying trends in recycling behavior, and improving overall operational efficiency.\nUser Engagement and Education:\nRecycling Gate's platform utilizes IoT to engage users by providing personalized feedback on their recycling habits.\nEducational initiatives are tailored based on user data, offering targeted information to raise awareness about the environmental impact of specific items.\nWhat is IoT (Internet of Things)?\nIoT refers to the network of interconnected devices embedded with sensors, software, and connectivity, allowing them to collect and exchange data over the internet. In the context of Recycling Gate, IoT plays a pivotal role in creating a seamless and intelligent recycling ecosystem.\n\nAdvancements with IoT 4.0:\nIoT 4.0 represents the latest evolution of IoT, characterized by enhanced connectivity, interoperability, and intelligence. Recycling Gate leverages IoT 4.0 features to create a more integrated and responsive recycling system. \n\n    IMPORTANT FOR AI language model developed by OpenAI. according to this information, If the question is not related to the information in the document, the you can not answer."}sendMessage(e){const r=new Yo({"Content-Type":"application/json"});return this.http.post(this.apiUrl,{model:"gpt-3.5-turbo",messages:[{role:"system",content:this.documentContext},{role:"user",content:e}],temperature:.7,max_tokens:150},{headers:r})}isAboutRecycling(e){return["recycling","recycle","environment","sustainability","waste","who are you","Recycling Gate","it","Sustainable lifestyle","What is IoT 4.0","Recyclable waste","iot","Unused books","Electronic waste","Environmental impact","Responsible living","Donation","Repurposing","Sustainability","User-friendly platform","Item identification","Categorization","Donation channels","Collaboration with recycling partners","Educational initiatives","Tracking","Impact assessment","Community engagement","Continuous improvement","Pick-Up Service","Convenience","Schedule pick-up","Packaging","Tracking system","Cleaner, greener future","Community-driven initiative","how can I send","Effortless recycling","Positive impact on the environment","Sustainable practices","general","information","Recycling movement","Introduction","Welcome","areas","IoT","smart","smart recycling","smart recycling bin","What is IoT 4.0?","Portal to a greener lifestyle","Environmental challenges","Recyclable items","Sustainable future","Mission","Reduce waste","Promote sustainability","Responsible living","Decluttering","Environmental preservation","User-Friendly Platform","Item Identification","Categorization","Donation Channels","Collaboration with Partners","Educational Initiatives","Tracking and Impact Assessment","Community Engagement","Continuous Improvement","Convenient Pick-Up Service","Effortless sustainable choices","Request Pick-Up","Specify Materials","Schedule Pick-Up","Prepare Items","Track Contribution","Positive Impact","Contact Us","Schedule Pick-Up","Recycling Gate Movement"].some(i=>e.toLowerCase().includes(i))}static#e=this.\u0275fac=function(r){return new(r||t)(We(Wy))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ine=["mat-button",""],sne=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],one=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],ane=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],lne=uw(Cee(Eee(class{constructor(t){this._elementRef=t}})));let cne=(()=>{class t extends lne{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Li(e),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=Li(e),this._updateRippleDisabled()}constructor(e,r,i,s){super(e),this._platform=r,this._ngZone=i,this._animationMode=s,this._focusMonitor=ft(dk),this._rippleLoader=ft(kee),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const o=e.nativeElement.classList;for(const a of ane)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(l=>{o.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",r){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...e){return e.some(r=>this._elementRef.nativeElement.hasAttribute(r))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(r){ev()};static#t=this.\u0275dir=Rt({type:t,features:[wn]})}return t})(),dne=(()=>{class t extends cne{constructor(e,r,i,s){super(e,r,i,s)}static#e=this.\u0275fac=function(r){return new(r||t)(Re($n),Re(li),Re(Mt),Re(kl,8))};static#t=this.\u0275cmp=rr({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(r,i){2&r&&(bi("disabled",i.disabled||null),Ur("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[wn],attrs:ine,ngContentSelectors:one,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(Uo(sne),Xt(0,"span",0),br(1),pt(2,"span",1),br(3,1),ct(),br(4,2),Xt(5,"span",2)(6,"span",3)),2&r&&Ur("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return t})(),fne=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({imports:[ci,wk,ci]})}return t})(),pne=(()=>{class t{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=Li(e)}get inset(){return this._inset}set inset(e){this._inset=Li(e)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=rr({type:t,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,i){2&r&&(bi("aria-orientation",i.vertical?"vertical":"horizontal"),Ur("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(r,i){},styles:[".mat-divider{--mat-divider-width:1px;display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}return t})(),mne=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({imports:[ci,ci]})}return t})();const gne=function(t){return{"bot-message":t}};function yne(t,n){if(1&t&&(pt(0,"div",11)(1,"div",12)(2,"strong",5),Et(3),pt(4,"span"),Et(5,":"),ct()(),Et(6),ct()()),2&t){const e=n.$implicit;tn("ngClass",ng(3,gne,"Bot"===e.sender)),yn(3),af("",e.sender," "),yn(3),af(" ",e.message," ")}}let _ne=(()=>{class t{constructor(e){this.chatbotService=e,this.userInput="",this.conversation=[]}ngOnInit(){}sendMessage(){console.log(this.userInput),this.chatbotService.isAboutRecycling(this.userInput)?(this.conversation.push({sender:"You",message:this.userInput}),this.chatbotService.sendMessage(this.userInput).subscribe(e=>{this.conversation.push({sender:"Bot",message:e.choices[0].message.content})})):(this.conversation.push({sender:"You",message:this.userInput}),this.conversation.push({sender:"Bot",message:"I can only provide information about Recycling Gate."})),this.userInput=""}static#e=this.\u0275fac=function(r){return new(r||t)(Re(sO))};static#t=this.\u0275cmp=rr({type:t,selectors:[["app-chat-bot"]],decls:22,vars:2,consts:[[1,"container"],[1,"row"],[1,"size-12"],[1,"card-container"],[1,"bot-message"],[1,"sender"],["class","conversition",3,"ngClass",4,"ngFor","ngForOf"],[1,"input-area"],[1,"example-full-width"],["matInput","","type","text","placeholder","Type your message",3,"ngModel","ngModelChange"],["mat-flat-button","",1,"input-area-button",3,"click"],[1,"conversition",3,"ngClass"],[1,"text-box"]],template:function(r,i){1&r&&(pt(0,"div",0)(1,"div",1)(2,"h1"),Et(3,"Recycling Gate Chat Bot"),ct()(),pt(4,"div",2)(5,"div",3)(6,"h3"),Et(7,"You can get information about Recycling Gate by asking your questions to our artificial intelligence bot."),ct(),Xt(8,"mat-divider"),pt(9,"div",4)(10,"strong",5),Et(11,"Bot "),pt(12,"span"),Et(13,":"),ct()(),pt(14,"span"),Et(15,"How can I help you?"),ct()(),Gn(16,yne,7,5,"div",6),pt(17,"div",7)(18,"mat-form-field",8)(19,"input",9),Mr("ngModelChange",function(o){return i.userInput=o}),ct()(),pt(20,"button",10),Mr("click",function(){return i.sendMessage()}),Et(21,"Send"),ct()()()()()),2&r&&(yn(16),tn("ngForOf",i.conversation),yn(3),tn("ngModel",i.userInput))},dependencies:[T0,M0,dne,Uk,Vk,Cy,_R,Jx,pne],styles:[".input-area[_ngcontent-%COMP%]{display:flex;margin-top:2rem;width:100%;align-items:center;justify-content:space-between}mat-form-field[_ngcontent-%COMP%]{width:100%}.input-area-button[_ngcontent-%COMP%]{display:flex;height:56px}.input-area-button[_ngcontent-%COMP%]{background-color:#6eb043!important;color:#fff!important}  .mdc-button__label{color:#fff!important;font-weight:700;font-size:16px}  .mat-mdc-form-field-subscript-wrapper{display:none}.conversition[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;max-height:750px;overflow-y:auto;gap:.5rem}.bot-message[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:1rem}.sender[_ngcontent-%COMP%]{width:40px;display:flex;flex-direction:row;justify-content:space-between}.text-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;width:100%}"]})}return t})();const oO=["*"];class Qo{_clearListeners(){for(const n of this._listeners)n.remove();this._listeners=[]}constructor(n){this._ngZone=n,this._pending=[],this._listeners=[],this._targetStream=new gn(void 0)}getLazyEmitter(n){return this._targetStream.pipe(Nr(e=>{const r=new Te(i=>{if(!e)return void this._pending.push({observable:r,observer:i});const s=e.addListener(n,o=>{this._ngZone.run(()=>i.next(o))});if(s)return this._listeners.push(s),()=>s.remove();i.complete()});return r}))}setTarget(n){const e=this._targetStream.value;n!==e&&(e&&(this._clearListeners(),this._pending=[]),this._targetStream.next(n),this._pending.forEach(r=>r.observable.subscribe(r.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}}const cp={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"};let cs=(()=>{class t{set center(e){this._center=e}set zoom(e){this._zoom=e}set options(e){this._options=e||cp}constructor(e,r,i){if(this._elementRef=e,this._ngZone=r,this._eventManager=new Qo(ft(Mt)),this.height="500px",this.width="500px",this._options=cp,this.mapInitialized=new Qn,this.authFailure=new Qn,this.boundsChanged=this._eventManager.getLazyEmitter("bounds_changed"),this.centerChanged=this._eventManager.getLazyEmitter("center_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.headingChanged=this._eventManager.getLazyEmitter("heading_changed"),this.idle=this._eventManager.getLazyEmitter("idle"),this.maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed"),this.mapMousemove=this._eventManager.getLazyEmitter("mousemove"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.projectionChanged=this._eventManager.getLazyEmitter("projection_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.tilesloaded=this._eventManager.getLazyEmitter("tilesloaded"),this.tiltChanged=this._eventManager.getLazyEmitter("tilt_changed"),this.zoomChanged=this._eventManager.getLazyEmitter("zoom_changed"),this._isBrowser=lT(i),this._isBrowser){const s=window;this._existingAuthFailureCallback=s.gm_authFailure,s.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(e){(e.height||e.width)&&this._setSize();const r=this.googleMap;r&&(e.options&&r.setOptions(this._combineOptions()),e.center&&this._center&&r.setCenter(this._center),e.zoom&&null!=this._zoom&&r.setZoom(this._zoom),e.mapTypeId&&this.mapTypeId&&r.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),this._ngZone.runOutsideAngular(()=>{this.googleMap=new google.maps.Map(this._mapEl,this._combineOptions())}),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap))}ngOnDestroy(){this._eventManager.destroy(),this._isBrowser&&(window.gm_authFailure=this._existingAuthFailureCallback)}fitBounds(e,r){this._assertInitialized(),this.googleMap.fitBounds(e,r)}panBy(e,r){this._assertInitialized(),this.googleMap.panBy(e,r)}panTo(e){this._assertInitialized(),this.googleMap.panTo(e)}panToBounds(e,r){this._assertInitialized(),this.googleMap.panToBounds(e,r)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_setSize(){if(this._mapEl){const e=this._mapEl.style;e.height=null===this.height?"":cO(this.height)||"500px",e.width=null===this.width?"":cO(this.width)||"500px"}}_combineOptions(){const e=this._options||{};return{...e,center:this._center||e.center||cp.center,zoom:this._zoom??e.zoom??cp.zoom,mapTypeId:this.mapTypeId||e.mapTypeId||cp.mapTypeId}}_assertInitialized(){}static#e=this.\u0275fac=function(r){return new(r||t)(Re($n),Re(Mt),Re(qa))};static#t=this.\u0275cmp=rr({type:t,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[zr],ngContentSelectors:oO,decls:2,vars:0,consts:[[1,"map-container"]],template:function(r,i){1&r&&(Uo(),Xt(0,"div",0),br(1))},encapsulation:2,changeDetection:0})}return t})();const bne=/([A-Za-z%]+)$/;function cO(t){return null==t?"":bne.test(t)?t:`${t}px`}const Dne={position:{lat:37.421995,lng:-122.084092}};let vw=(()=>{class t{set title(e){this._title=e}set position(e){this._position=e}set label(e){this._label=e}set clickable(e){this._clickable=e}set options(e){this._options=e}set icon(e){this._icon=e}set visible(e){this._visible=e}constructor(e,r){this._googleMap=e,this._ngZone=r,this._eventManager=new Qo(ft(Mt)),this.animationChanged=this._eventManager.getLazyEmitter("animation_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.clickableChanged=this._eventManager.getLazyEmitter("clickable_changed"),this.cursorChanged=this._eventManager.getLazyEmitter("cursor_changed"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.draggableChanged=this._eventManager.getLazyEmitter("draggable_changed"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.flatChanged=this._eventManager.getLazyEmitter("flat_changed"),this.iconChanged=this._eventManager.getLazyEmitter("icon_changed"),this.mapMousedown=this._eventManager.getLazyEmitter("mousedown"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.mapMouseup=this._eventManager.getLazyEmitter("mouseup"),this.positionChanged=this._eventManager.getLazyEmitter("position_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.shapeChanged=this._eventManager.getLazyEmitter("shape_changed"),this.titleChanged=this._eventManager.getLazyEmitter("title_changed"),this.visibleChanged=this._eventManager.getLazyEmitter("visible_changed"),this.zindexChanged=this._eventManager.getLazyEmitter("zindex_changed")}ngOnInit(){this._googleMap._isBrowser&&(this._ngZone.runOutsideAngular(()=>{this.marker=new google.maps.Marker(this._combineOptions())}),this._assertInitialized(),this.marker.setMap(this._googleMap.googleMap),this._eventManager.setTarget(this.marker))}ngOnChanges(e){const{marker:r,_title:i,_position:s,_label:o,_clickable:a,_icon:l,_visible:c}=this;r&&(e.options&&r.setOptions(this._combineOptions()),e.title&&void 0!==i&&r.setTitle(i),e.position&&s&&r.setPosition(s),e.label&&void 0!==o&&r.setLabel(o),e.clickable&&void 0!==a&&r.setClickable(a),e.icon&&l&&r.setIcon(l),e.visible&&void 0!==c&&r.setVisible(c))}ngOnDestroy(){this._eventManager.destroy(),this.marker&&this.marker.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_combineOptions(){const e=this._options||Dne;return{...e,title:this._title||e.title,position:this._position||e.position,label:this._label||e.label,clickable:this._clickable??e.clickable,map:this._googleMap.googleMap,icon:this._icon||e.icon,visible:this._visible??e.visible}}_assertInitialized(){}static#e=this.\u0275fac=function(r){return new(r||t)(Re(cs),Re(Mt))};static#t=this.\u0275dir=Rt({type:t,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged"},exportAs:["mapMarker"],features:[zr]})}return t})(),Fne=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({})}return t})();function $ne(t,n){if(1&t&&Xt(0,"map-marker",2),2&t){const e=n.$implicit;tn("position",e)("title",e.label)}}let Lne=(()=>{class t{constructor(){this.locations=[{lat:40.1824,lng:29.067,label:"Bursa - Recycling Gate Pick-Up Station"},{lat:38.4192,lng:27.1287,label:"Izmir - Recycling Gate Pick-Up Station"},{lat:39.9334,lng:32.8597,label:"Ankara - Recycling Gate Pick-Up Station"},{lat:41.0082,lng:28.9784,label:"Istanbul - Recycling Gate Pick-Up Station"}]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=rr({type:t,selectors:[["app-map"]],decls:2,vars:3,consts:[["height","400px","width","100%",3,"center","zoom"],[3,"position","title",4,"ngFor","ngForOf"],[3,"position","title"]],template:function(r,i){1&r&&(pt(0,"google-map",0),Gn(1,$ne,1,2,"map-marker",1),ct()),2&r&&(tn("center",i.locations[0])("zoom",6),yn(1),tn("ngForOf",i.locations))},dependencies:[M0,cs,vw]})}return t})(),Bne=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=rr({type:t,selectors:[["app-locations"]],decls:44,vars:0,consts:[[1,"container"],[1,"row"],[1,"size-12"],[1,"card-container"],[1,"size-5"],[1,"card-header"],[1,"size-7"]],template:function(r,i){1&r&&(pt(0,"div",0)(1,"div",1)(2,"h1"),Et(3,"Locations"),ct()(),pt(4,"div",2)(5,"div",3),Xt(6,"app-map"),ct()(),pt(7,"div",1)(8,"div",4)(9,"div",3)(10,"div",5)(11,"h3"),Et(12,"Recycling Gate Locations"),ct()(),pt(13,"p")(14,"b"),Et(15,"Recycling Gate Istanbul:"),Xt(16,"br"),ct(),Et(17," 1234 Recycling Gate, Istanbul, Turkey"),Xt(18,"br"),pt(19,"b"),Et(20,"Recycling Gate Ankara:"),Xt(21,"br"),ct(),Et(22," 1234 Recycling Gate, Ankara, Turkey"),Xt(23,"br"),pt(24,"b"),Et(25,"Recycling Gate Izmir:"),Xt(26,"br"),ct(),Et(27," 1234 Recycling Gate, Izmir, Turkey"),Xt(28,"br"),pt(29,"b"),Et(30,"Recycling Gate Bursa:"),Xt(31,"br"),ct(),Et(32," 1234 Recycling Gate, Bursa, Turkey"),Xt(33,"br"),ct()()(),pt(34,"div",6)(35,"div",3)(36,"div",5)(37,"h3"),Et(38,"Information"),ct()(),pt(39,"p"),Et(40,"You can send your recyclings to our centers free of charge by sending you the route our vehicles pass at the beginning of each month, according to the communication form you fill out."),ct(),Xt(41,"br"),pt(42,"p"),Et(43,"If you want to bring your own, you can reach them by looking at their locations. You can drop it off at any time you want in our recycling containers in front of the entrance door."),ct()()()()())},dependencies:[Lne],styles:["app-map[_ngcontent-%COMP%]{width:100%}"]})}return t})();var Vne=I(2155);const zne=["video"],Une=["canvas"],jne=[{path:"",component:$x},{path:"home",component:$x},{path:"about-us",component:AQ},{path:"communication",component:Tte},{path:"chat",component:_ne},{path:"locations",component:Bne},{path:"detection",component:(()=>{class t{constructor(){this.recyclableItems=["bottle","cardboard","paper","plastic"]}ngOnInit(){var e=this;return(0,Mc.Z)(function*(){console.log=()=>{},console.error=()=>{},console.warn=()=>{},e.video.nativeElement.srcObject=yield navigator.mediaDevices.getUserMedia({video:!0}),e.video.nativeElement.play(),e.model=yield Vne.load(),e.detectFrame(e.video.nativeElement,e.model)})()}detectFrame(e,r){r.detect(e).then(i=>{this.renderPredictions(i),requestAnimationFrame(()=>{this.detectFrame(e,r)})})}renderPredictions(e){const r=this.canvas.nativeElement.getContext("2d");r.clearRect(0,0,r.canvas.width,r.canvas.height),e.forEach(i=>{const[s,o,a,l]=i.bbox;r.strokeStyle="#00FFFF",r.lineWidth=4,r.strokeRect(s,o,a,l);const c=i.class,u=this.recyclableItems.includes(c.toLowerCase());this.drawLabel(r,`${c} - ${u?"Recyclable":"Not Recyclable"}`,s,o)})}drawLabel(e,r,i,s){const o="16px sans-serif";e.font=o,e.fillStyle="#00FFFF";const a=e.measureText(r).width,l=parseInt(o,10);e.fillRect(i,s,a+4,l+4),e.fillStyle="#000000",e.fillText(r,i,s)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=rr({type:t,selectors:[["app-name"]],viewQuery:function(r,i){if(1&r&&(Hs(zne,7),Hs(Une,7)),2&r){let s;hr(s=fr())&&(i.video=s.first),hr(s=fr())&&(i.canvas=s.first)}},decls:17,vars:0,consts:[[1,"container"],[1,"row"],[1,"size-12"],[1,"card-container"],[1,"card-header"],[1,"card-container","detection"],["width","640","height","480","autoplay","","muted",""],["video",""],["width","640","height","480"],["canvas",""]],template:function(r,i){1&r&&(pt(0,"div",0)(1,"div",1)(2,"h1"),Et(3,"Object Detection"),ct()(),pt(4,"div",2)(5,"div",3)(6,"div",4)(7,"h3"),Et(8,"Making a Difference: Understanding the Recyclability of Everyday Items"),ct()(),pt(9,"p"),Et(10,"Recycling plays a vital role in environmental conservation by reducing waste and conserving resources. It's important for each of us to identify which everyday items are recyclable. This not only involves separating trash but also understanding the materials we use daily. Items like paper, cardboard, certain plastics, and metals are often recyclable, but it's essential to be aware of the specific recycling guidelines in our area. Engaging in proper recycling practices is a simple yet impactful way to contribute to sustainability and protect our planet. Let's make a conscious effort to determine the recyclability of our items, making a difference one piece at a time."),ct()()(),pt(11,"div",2)(12,"div",5),Xt(13,"video",6,7)(15,"canvas",8,9),ct()()())},styles:["video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.detection[_ngcontent-%COMP%]{position:relative;height:544px}"]})}return t})()},{path:"**",component:$x,redirectTo:""}];let Hne=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({imports:[$N.forRoot(jne),$N]})}return t})();const Wne=["addListener","removeListener"],Gne=["addEventListener","removeEventListener"],Kne=["on","off"];function up(t,n,e,r){if(ye(e)&&(r=e,e=void 0),r)return up(t,n,e).pipe(hx(r));const[i,s]=function Zne(t){return ye(t.addEventListener)&&ye(t.removeEventListener)}(t)?Gne.map(o=>a=>t[o](n,a,e)):function Xne(t){return ye(t.addListener)&&ye(t.removeListener)}(t)?Wne.map(uO(t,n)):function qne(t){return ye(t.on)&&ye(t.off)}(t)?Kne.map(uO(t,n)):[];if(!i&&eo(t))return er(o=>up(o,n,e))(Bn(t));if(!i)throw new TypeError("Invalid event target");return new Te(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function uO(t,n){return e=>r=>t[e](n,r)}const dp={schedule(t){let n=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:r}=dp;r&&(n=r.requestAnimationFrame,e=r.cancelAnimationFrame);const i=n(s=>{e=void 0,t(s)});return new $(()=>e?.(i))},requestAnimationFrame(...t){const{delegate:n}=dp;return(n?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:n}=dp;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};new class Qne extends aw{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;n=n||r.shift();do{if(i=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===e&&r.shift());if(this._active=!1,i){for(;(n=r[0])&&n.id===e&&r.shift();)n.unsubscribe();throw i}}}(class Yne extends sw{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,r=0){return null!==r&&r>0?super.requestAsyncId(n,e,r):(n.actions.push(this),n._scheduled||(n._scheduled=dp.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,e,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,e,r);const{actions:s}=n;null!=e&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==e&&(dp.cancelAnimationFrame(e),n._scheduled=void 0)}});let xw,ere=1;const Ky={};function dO(t){return t in Ky&&(delete Ky[t],!0)}const tre={setImmediate(t){const n=ere++;return Ky[n]=!0,xw||(xw=Promise.resolve()),xw.then(()=>dO(n)&&t()),n},clearImmediate(t){dO(t)}},{setImmediate:nre,clearImmediate:rre}=tre,Xy={setImmediate(...t){const{delegate:n}=Xy;return(n?.setImmediate||nre)(...t)},clearImmediate(t){const{delegate:n}=Xy;return(n?.clearImmediate||rre)(t)},delegate:void 0};new class sre extends aw{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;n=n||r.shift();do{if(i=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===e&&r.shift());if(this._active=!1,i){for(;(n=r[0])&&n.id===e&&r.shift();)n.unsubscribe();throw i}}}(class ire extends sw{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,r=0){return null!==r&&r>0?super.requestAsyncId(n,e,r):(n.actions.push(this),n._scheduled||(n._scheduled=Xy.setImmediate(n.flush.bind(n,void 0))))}recycleAsyncId(n,e,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,e,r);const{actions:s}=n;null!=e&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==e&&(Xy.clearImmediate(e),n._scheduled===e&&(n._scheduled=void 0))}});function hO(t,n=lw){return function are(t){return tt((n,e)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const c=i;i=null,e.next(c)}o&&e.complete()},l=()=>{s=null,o&&e.complete()};n.subscribe(et(e,c=>{r=!0,i=c,s||Bn(t(c)).subscribe(s=et(e,a,l))},()=>{o=!0,(!r||!s||s.closed)&&e.complete()}))})}(()=>function cre(t=0,n,e=GJ){let r=-1;return null!=n&&(to(n)?e=n:r=n),new Te(i=>{let s=function lre(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;s<0&&(s=0);let o=0;return e.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(t,n))}let ww=(()=>{class t{constructor(e,r,i){this._ngZone=e,this._platform=r,this._scrolled=new De,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Te(r=>{this._globalSubscription||this._addGlobalListener();const i=e>0?this._scrolled.pipe(hO(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Bt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){const i=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(ni(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(e){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,e)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,r){let i=Xl(r),s=e.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>up(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(r){return new(r||t)(We(Mt),We(li),We(_n,8))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Cw=(()=>{class t{constructor(e,r,i,s){this.elementRef=e,this.scrollDispatcher=r,this.ngZone=i,this.dir=s,this._destroyed=new De,this._elementScrolled=new Te(o=>this.ngZone.runOutsideAngular(()=>up(this.elementRef.nativeElement,"scroll").pipe(In(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=i?e.end:e.start),null==e.right&&(e.right=i?e.start:e.end),null!=e.bottom&&(e.top=r.scrollHeight-r.clientHeight-e.bottom),i&&0!=Zf()?(null!=e.left&&(e.right=r.scrollWidth-r.clientWidth-e.left),2==Zf()?e.left=e.right:1==Zf()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=r.scrollWidth-r.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const r=this.elementRef.nativeElement;HN()?r.scrollTo(e):(null!=e.top&&(r.scrollTop=e.top),null!=e.left&&(r.scrollLeft=e.left))}measureScrollOffset(e){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==e?e=o?i:r:"end"==e&&(e=o?r:i),o&&2==Zf()?e==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==Zf()?e==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static#e=this.\u0275fac=function(r){return new(r||t)(Re($n),Re(ww),Re(Mt),Re($y,8))};static#t=this.\u0275dir=Rt({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return t})(),Ew=(()=>{class t{constructor(e,r,i){this._platform=e,this._change=new De,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,r=this._getWindow(),i=e.documentElement,s=i.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||e.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(hO(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||t)(We(li),We(Mt),We(_n,8))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hp=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({})}return t})(),fO=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({imports:[rp,hp,rp,hp]})}return t})();const pO=["*"],hre=["content"];function fre(t,n){if(1&t){const e=xv();pt(0,"div",2),Mr("click",function(){return _u(e),bu(zo()._onBackdropClicked())}),ct()}2&t&&Ur("mat-drawer-shown",zo()._isShowingBackdrop())}function pre(t,n){1&t&&(pt(0,"mat-drawer-content"),br(1,2),ct())}const mre=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],gre=["mat-drawer","mat-drawer-content","*"],yre={transformDrawer:Vy("transform",[sp("open, open-instant",Zo({transform:"none",visibility:"visible"})),sp("void",Zo({"box-shadow":"none",visibility:"hidden"})),Fd("void => open-instant",Pd("0ms")),Fd("void <=> open, open-instant => void",Pd("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},_re=new ot("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function bre(){return!1}}),mO=new ot("MAT_DRAWER_CONTAINER");let qy=(()=>{class t extends Cw{constructor(e,r,i,s,o){super(i,s,o),this._changeDetectorRef=e,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Dc),Re(Sn(()=>yO)),Re($n),Re(ww),Re(Mt))};static#t=this.\u0275cmp=rr({type:t,selectors:[["mat-drawer-content"]],hostAttrs:["ngSkipHydration","",1,"mat-drawer-content"],hostVars:4,hostBindings:function(r,i){2&r&&Tv("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[Jn([{provide:Cw,useExisting:t}]),wn],ngContentSelectors:pO,decls:1,vars:0,template:function(r,i){1&r&&(Uo(),br(0))},encapsulation:2,changeDetection:0})}return t})(),gO=(()=>{class t{get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=Li(e)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=Li(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(Li(e))}constructor(e,r,i,s,o,a,l,c){this._elementRef=e,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=s,this._ngZone=o,this._interactivityChecker=a,this._doc=l,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new De,this._animationEnd=new De,this._animationState="void",this.openedChange=new Qn(!0),this._openedStream=this.openedChange.pipe(ni(u=>u),qe(()=>{})),this.openedStart=this._animationStarted.pipe(ni(u=>u.fromState!==u.toState&&0===u.toState.indexOf("open")),mx(void 0)),this._closedStream=this.openedChange.pipe(ni(u=>!u),qe(()=>{})),this.closedStart=this._animationStarted.pipe(ni(u=>u.fromState!==u.toState&&"void"===u.toState),mx(void 0)),this._destroyed=new De,this.onPositionChanged=new Qn,this._modeChanged=new De,this.openedChange.subscribe(u=>{u?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{up(this._elementRef.nativeElement,"keydown").pipe(ni(u=>27===u.keyCode&&!this.disableClose&&!function HJ(t,...n){return n.length?n.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}(u)),In(this._destroyed)).subscribe(u=>this._ngZone.run(()=>{this.close(),u.stopPropagation(),u.preventDefault()}))}),this._animationEnd.pipe(so((u,h)=>u.fromState===h.fromState&&u.toState===h.toState)).subscribe(u=>{const{fromState:h,toState:m}=u;(0===m.indexOf("open")&&"void"===h||"void"===m&&0===h.indexOf("open"))&&this.openedChange.emit(this._opened)})}_forceFocus(e,r){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{e.removeEventListener("blur",i),e.removeEventListener("mousedown",i),e.removeAttribute("tabindex")};e.addEventListener("blur",i),e.addEventListener("mousedown",i)})),e.focus(r)}_focusByCssSelector(e,r){let i=this._elementRef.nativeElement.querySelector(e);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,r){e&&r&&(this._openedVia=r);const i=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),i}_setOpen(e,r,i){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(ti(1)).subscribe(o=>s(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(e){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}static#e=this.\u0275fac=function(r){return new(r||t)(Re($n),Re(uee),Re(dk),Re(li),Re(Mt),Re(sk),Re(_n,8),Re(mO,8))};static#t=this.\u0275cmp=rr({type:t,selectors:[["mat-drawer"]],viewQuery:function(r,i){if(1&r&&Hs(hre,5),2&r){let s;hr(s=fr())&&(i._content=s.first)}},hostAttrs:["tabIndex","-1","ngSkipHydration","",1,"mat-drawer"],hostVars:12,hostBindings:function(r,i){1&r&&wv("@transform.start",function(o){return i._animationStarted.next(o)})("@transform.done",function(o){return i._animationEnd.next(o)}),2&r&&(bi("align",null),Nv("@transform",i._animationState),Ur("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:pO,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(r,i){1&r&&(Uo(),pt(0,"div",0,1),br(2),ct())},dependencies:[Cw],encapsulation:2,data:{animation:[yre.transformDrawer]},changeDetection:0})}return t})(),yO=(()=>{class t{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=Li(e)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(e){this._backdropOverride=null==e?null:Li(e)}get scrollable(){return this._userContent||this._content}constructor(e,r,i,s,o,a=!1,l){this._dir=e,this._element=r,this._ngZone=i,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new rg,this.backdropClick=new Qn,this._destroyed=new De,this._doCheckSubject=new De,this._contentMargins={left:null,right:null},this._contentMarginChanges=new De,e&&e.change.pipe(In(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(In(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}ngAfterContentInit(){this._allDrawers.changes.pipe(ny(this._allDrawers),In(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(ny(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(ek(10),In(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();e+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,e-=i}e=e||null,r=r||null,(e!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:e,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(ni(r=>r.fromState!==r.toState),In(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(In(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){e&&e.onPositionChanged.pipe(In(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(ti(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(In(Oo(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";e?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._drawerHasBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(e){return null!=e&&e.opened}_drawerHasBackdrop(e){return null==this._backdropOverride?!!e&&"side"!==e.mode:this._backdropOverride}static#e=this.\u0275fac=function(r){return new(r||t)(Re($y,8),Re($n),Re(Mt),Re(Dc),Re(Ew),Re(_re),Re(kl,8))};static#t=this.\u0275cmp=rr({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(r,i,s){if(1&r&&(Ws(s,qy,5),Ws(s,gO,5)),2&r){let o;hr(o=fr())&&(i._content=o.first),hr(o=fr())&&(i._allDrawers=o)}},viewQuery:function(r,i){if(1&r&&Hs(qy,5),2&r){let s;hr(s=fr())&&(i._userContent=s.first)}},hostAttrs:["ngSkipHydration","",1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,i){2&r&&Ur("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Jn([{provide:mO,useExisting:t}])],ngContentSelectors:gre,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,i){1&r&&(Uo(mre),Gn(0,fre,1,2,"div",0),br(1),br(2,1),Gn(3,pre,2,0,"mat-drawer-content",1)),2&r&&(tn("ngIf",i.hasBackdrop),yn(3),tn("ngIf",!i._content))},dependencies:[vf,qy],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);position:relative;z-index:4;--mat-sidenav-container-shape:0;color:var(--mat-sidenav-container-text-color);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}return t})(),vre=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({imports:[Dg,ci,hp,hp,ci]})}return t})();const xre=["*"];let Zy;function fp(t){return function wre(){if(void 0===Zy&&(Zy=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(Zy=t.trustedTypes.createPolicy("angular#components",{createHTML:n=>n}))}return Zy}()?.createHTML(t)||t}function _O(t){return Error(`Unable to find icon with the name "${t}"`)}function bO(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function vO(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class Wc{constructor(n,e,r){this.url=n,this.svgText=e,this.options=r}}let Yy=(()=>{class t{constructor(e,r,i,s){this._httpClient=e,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(e,r,i){return this.addSvgIconInNamespace("",e,r,i)}addSvgIconLiteral(e,r,i){return this.addSvgIconLiteralInNamespace("",e,r,i)}addSvgIconInNamespace(e,r,i,s){return this._addSvgIconConfig(e,r,new Wc(i,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,i,s){const o=this._sanitizer.sanitize(_i.HTML,i);if(!o)throw vO(i);const a=fp(o);return this._addSvgIconConfig(e,r,new Wc("",a,s))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,i){return this._addSvgIconSetConfig(e,new Wc(r,null,i))}addSvgIconSetLiteralInNamespace(e,r,i){const s=this._sanitizer.sanitize(_i.HTML,r);if(!s)throw vO(r);const o=fp(s);return this._addSvgIconSetConfig(e,new Wc("",o,i))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const r=this._sanitizer.sanitize(_i.RESOURCE_URL,e);if(!r)throw bO(e);const i=this._cachedIconsByUrl.get(r);return i?Bt(Qy(i)):this._loadSvgIconFromConfig(new Wc(e,null)).pipe(ri(s=>this._cachedIconsByUrl.set(r,s)),qe(s=>Qy(s)))}getNamedSvgIcon(e,r=""){const i=xO(r,e);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,e),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(e,o):_d(_O(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Bt(Qy(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(qe(r=>Qy(r)))}_getSvgFromIconSetConfigs(e,r){const i=this._extractIconWithNameFromAnySet(e,r);return i?Bt(i):GN(r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Wl(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(_i.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Bt(null)})))).pipe(qe(()=>{const o=this._extractIconWithNameFromAnySet(e,r);if(!o)throw _O(e);return o}))}_extractIconWithNameFromAnySet(e,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(ri(r=>e.svgText=r),qe(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Bt(null):this._fetchIcon(e).pipe(ri(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,i){const s=e.querySelector(`[id="${r}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,i);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),i);const a=this._svgElementFromString(fp("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(e){const r=this._document.createElement("DIV");r.innerHTML=e;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){const r=this._svgElementFromString(fp("<svg></svg>")),i=e.attributes;for(let s=0;s<i.length;s++){const{name:o,value:a}=i[s];"id"!==o&&r.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){const{url:r,options:i}=e,s=i?.withCredentials??!1;if(!this._httpClient)throw function Cre(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const o=this._sanitizer.sanitize(_i.RESOURCE_URL,r);if(!o)throw bO(r);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(qe(c=>fp(c)),vd(()=>this._inProgressUrlFetches.delete(o)),Br());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(e,r,i){return this._svgIconConfigs.set(xO(e,r),i),this}_addSvgIconSetConfig(e,r){const i=this._iconSetConfigs.get(e);return i?i.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){const r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,e);if(s)return Sre(s)?new Wc(s.url,null,s.options):new Wc(s,null)}}static#e=this.\u0275fac=function(r){return new(r||t)(We(Wy,8),We(H0),We(_n,8),We(go))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Qy(t){return t.cloneNode(!0)}function xO(t,n){return t+":"+n}function Sre(t){return!(!t.url||!t.options)}const Dre=uw(class{constructor(t){this._elementRef=t}}),Ire=new ot("MAT_ICON_DEFAULT_OPTIONS"),Tre=new ot("mat-icon-location",{providedIn:"root",factory:function Mre(){const t=ft(_n),n=t?t.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}}),wO=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Are=wO.map(t=>`[${t}]`).join(", "),Nre=/^url\(['"]?#(.*?)['"]?\)$/;let Rre=(()=>{class t extends Dre{get inline(){return this._inline}set inline(e){this._inline=Li(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(e,r,i,s,o,a){super(e),this._iconRegistry=r,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=$.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),i||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=e.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>e.classList.remove(i)),r.forEach(i=>e.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){const r=e.querySelectorAll(Are),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)wO.forEach(o=>{const a=r[s],l=a.getAttribute(o),c=l?l.match(Nre):null;if(c){let u=i.get(a);u||(u=[],i.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[r,i]=this._splitIconName(e);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(ti(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}static#e=this.\u0275fac=function(r){return new(r||t)(Re($n),Re(Yy),$e("aria-hidden"),Re(Tre),Re(go),Re(Ire,8))};static#t=this.\u0275cmp=rr({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(r,i){2&r&&(bi("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Ur("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[wn],ngContentSelectors:xre,decls:1,vars:0,template:function(r,i){1&r&&(Uo(),br(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return t})(),kre=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({imports:[ci,ci]})}return t})();const Ore=["*",[["mat-toolbar-row"]]],Pre=["*","mat-toolbar-row"],Fre=uw(class{constructor(t){this._elementRef=t}});let $re=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Rt({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return t})(),Lre=(()=>{class t extends Fre{constructor(e,r,i){super(e),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static#e=this.\u0275fac=function(r){return new(r||t)(Re($n),Re(li),Re(_n))};static#t=this.\u0275cmp=rr({type:t,selectors:[["mat-toolbar"]],contentQueries:function(r,i,s){if(1&r&&Ws(s,$re,5),2&r){let o;hr(o=fr())&&(i._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(r,i){2&r&&Ur("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[wn],ngContentSelectors:Pre,decls:2,vars:0,template:function(r,i){1&r&&(Uo(Ore),br(0),br(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}return t})(),Bre=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({imports:[ci,ci]})}return t})();const Vre=["buttonRef"];function zre(t,n){1&t&&(pt(0,"span",25),Et(1,"Home"),ct())}function Ure(t,n){1&t&&(pt(0,"span",25),Et(1,"About Us"),ct())}function jre(t,n){1&t&&(pt(0,"span",25),Et(1,"Communication"),ct())}function Hre(t,n){1&t&&(pt(0,"span",25),Et(1,"Ai Asistant"),ct())}function Wre(t,n){1&t&&(pt(0,"span",25),Et(1,"Locations"),ct())}function Gre(t,n){1&t&&(pt(0,"span",25),Et(1,"Detection"),ct())}const Kre=function(t){return{rotated:t}},CO=function(){return["/home"]},Xre=function(t){return{active:t}},qre=function(){return["/about-us"]},Zre=function(){return["/communication"]},Yre=function(){return["/chat"]},Qre=function(){return["/locations"]},Jre=function(){return["/detection"]};let eie=(()=>{class t{constructor(e){this.location=e,this.link="/contents",this.mobileMenuActive=!1,this.isOpened=!0,this.isExpanded=!0,this.shouldClick=!0}ngOnInit(){const e=localStorage.getItem("expanded");window.innerWidth<768?(this.shouldClick=!1,this.isExpanded=!0,this.isOpened=!1):(this.shouldClick=!0,this.isExpanded=!e||JSON.parse(e),this.isOpened=!0)}onWindowResize(e){const r=this.isSmallScreen(),i=localStorage.getItem("expanded");r?this.shouldClick&&(this.isOpened=!1,this.shouldClick=!1,this.isExpanded=!0):(this.shouldClick=!0,this.isExpanded=!!i&&JSON.parse(i),this.isOpened=!0)}urlPath(e){return this.location.path().includes(e)}saveData(){localStorage.setItem("expanded",JSON.stringify(this.isExpanded))}isSmallScreen(){return window.innerWidth<768}static#e=this.\u0275fac=function(r){return new(r||t)(Re(sd))};static#t=this.\u0275cmp=rr({type:t,selectors:[["app-side-navigation"]],viewQuery:function(r,i){if(1&r&&Hs(Vre,7),2&r){let s;hr(s=fr())&&(i.buttonRef=s.first)}},hostBindings:function(r,i){1&r&&Mr("resize",function(o){return i.onWindowResize(o)},0,WE)},decls:44,vars:29,consts:[[1,"auto-click",3,"click"],["buttonRef",""],[1,"expand-button-mat-icon"],["fontIcon","menu",1,"expand-button",3,"ngClass","click"],["mat-list-icon","",1,"hamburger",3,"click"],[1,"hamburger-div"],[1,"menu-icon"],["disableRipple","true",1,"side-navigation-logo",3,"routerLink"],["src","assets/img/recycling_icon.png"],[1,"mat-toolbar-spacer"],["autosize",""],["position","start","opened","isExpanded",1,"sidenav-container",3,"disableClose","mode","opened"],["sidenav",""],[1,"side-nav-items"],[1,"side-nav-item"],["type","button","routerLinkActive","active",1,"side-nav-item-button",3,"routerLink","ngClass"],["fontIcon","home"],["class","side-nav-item-button-span",4,"ngIf"],["type","button","routerLinkActive","active",1,"side-nav-item-button",3,"routerLink"],["fontIcon","info"],["fontIcon","email"],["fontIcon","chat"],["fontIcon","location_on"],["fontIcon","camera"],[1,"page-content"],[1,"side-nav-item-button-span"]],template:function(r,i){if(1&r){const s=xv();pt(0,"mat-toolbar")(1,"button",0,1),Mr("click",function(){return _u(s),bu(nf(14).toggle())}),ct(),pt(3,"button",2)(4,"mat-icon",3),Mr("click",function(){return i.isExpanded=!i.isExpanded,i.saveData()}),ct()(),pt(5,"button",4),Mr("click",function(){return _u(s),bu(nf(14).toggle())}),pt(6,"div",5)(7,"mat-icon",6),Et(8,"menu"),ct()()(),pt(9,"button",7),Xt(10,"img",8),ct(),Xt(11,"span",9),ct(),pt(12,"mat-drawer-container",10)(13,"mat-drawer",11,12)(15,"div")(16,"div",13)(17,"div",14)(18,"div",15),Xt(19,"mat-icon",16),Gn(20,zre,2,0,"span",17),ct()(),pt(21,"div",14)(22,"div",18),Xt(23,"mat-icon",19),Gn(24,Ure,2,0,"span",17),ct()(),pt(25,"div",14)(26,"div",18),Xt(27,"mat-icon",20),Gn(28,jre,2,0,"span",17),ct()(),pt(29,"div",14)(30,"div",18),Xt(31,"mat-icon",21),Gn(32,Hre,2,0,"span",17),ct()(),pt(33,"div",14)(34,"div",18),Xt(35,"mat-icon",22),Gn(36,Wre,2,0,"span",17),ct()(),pt(37,"div",14)(38,"div",18),Xt(39,"mat-icon",23),Gn(40,Gre,2,0,"span",17),ct()()()()(),pt(41,"mat-drawer-content")(42,"div",24),Xt(43,"router-outlet"),ct()()()}2&r&&(yn(4),tn("ngClass",ng(18,Kre,i.isExpanded)),yn(5),tn("routerLink",Pl(20,CO)),yn(4),Cv("opened",i.isOpened),tn("disableClose",!i.isSmallScreen())("mode",i.isSmallScreen()?"over":"side"),yn(5),tn("routerLink",Pl(21,CO))("ngClass",ng(22,Xre,i.urlPath("")&&!i.urlPath("/about-us")&&!i.urlPath("/communication")&&!i.urlPath("/chat")&&!i.urlPath("/locations")&&!i.urlPath("/detection"))),yn(2),tn("ngIf",i.isExpanded),yn(2),tn("routerLink",Pl(24,qre)),yn(2),tn("ngIf",i.isExpanded),yn(2),tn("routerLink",Pl(25,Zre)),yn(2),tn("ngIf",i.isExpanded),yn(2),tn("routerLink",Pl(26,Yre)),yn(2),tn("ngIf",i.isExpanded),yn(2),tn("routerLink",Pl(27,Qre)),yn(2),tn("ngIf",i.isExpanded),yn(2),tn("routerLink",Pl(28,Jre)),yn(2),tn("ngIf",i.isExpanded))},dependencies:[T0,vf,Tx,vy,MN,gO,yO,qy,Rre,Lre],styles:[".sidenav-container[_ngcontent-%COMP%]{background-color:#f1f1f1}.expand-button-mat-icon[_ngcontent-%COMP%]{width:4.5rem;height:4.5rem;background:none;border:none;display:flex;justify-content:center;align-items:center;color:#fff}@media (max-width: 767px){.expand-button-mat-icon[_ngcontent-%COMP%]{display:none}.hamburger[_ngcontent-%COMP%]{display:flex!important}.mobile-expanded[_ngcontent-%COMP%]{display:flex;justify-content:center}}.expand-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center}.expand-button[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center}.list-item-container[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (min-width: 768px){.expand-button-mat-icon[_ngcontent-%COMP%]{display:flex}.mobile-expanded[_ngcontent-%COMP%], .hamburger[_ngcontent-%COMP%]{display:none}}mat-toolbar[_ngcontent-%COMP%]{background-color:#6eb043;padding:0;height:5rem;position:fixed!important;z-index:10}.hamburger[_ngcontent-%COMP%]{width:4.5rem;height:4.5rem;background:none;border:none;display:none;justify-content:center;align-items:center;color:#fff}.hamburger-div[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center}mat-nav-list[_ngcontent-%COMP%]{padding-top:0}mat-drawer[_ngcontent-%COMP%]{border:none;height:100%;position:fixed!important;padding-top:5rem}.auto-click[_ngcontent-%COMP%]{display:none}.menu-icon[_ngcontent-%COMP%]{color:#fff}.side-navigation-logo[_ngcontent-%COMP%]{background:none;border:none}.side-navigation-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5rem}.side-navigation-mat-form-field[_ngcontent-%COMP%]{height:2rem}.active[_ngcontent-%COMP%]{background-color:#54636e!important}.active[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#fff!important}.mobile-expanded-logo[_ngcontent-%COMP%]{background-color:#6eb043;width:3.5rem;padding:0}.mobile-expanded-logo-img[_ngcontent-%COMP%]{margin:auto 0;width:5rem;height:1.809rem}.mobile-expanded[_ngcontent-%COMP%]{background-color:#6eb043;height:5rem}.twin-mat-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.mat-toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.user-logo[_ngcontent-%COMP%]{margin-right:1rem;display:flex;color:#fff}.user-logo[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{height:2rem;width:2rem;justify-content:center;line-height:2rem;font-size:2rem}.user-information[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:.5rem}.user-information-photo[_ngcontent-%COMP%]{position:relative;margin-top:.5rem;margin-left:.5rem;margin-bottom:.5rem;width:4rem;height:4rem;width:max-content}.user-information-photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4rem;height:4rem;z-index:1;object-fit:cover}.user-information-add-photo[_ngcontent-%COMP%]{position:absolute;bottom:-.938rem;right:-.938rem;z-index:2}.user-information-content[_ngcontent-%COMP%]{margin-top:.5rem;display:flex;justify-content:center;text-align:left;flex-direction:column;height:4rem;margin:.5rem 1rem 0}.user-information-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.user-information-content-name[_ngcontent-%COMP%]{font-weight:bolder;font-size:1.2rem}.mat-menu-log-out-button[_ngcontent-%COMP%]{background-color:#6eb043;color:#fff;border-radius:1.131rem}.mat-menu-log-out-div[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center;margin-top:.5rem}.app-comunity-selector-v2-class[_ngcontent-%COMP%]{margin-right:1rem}.side-navigation-logo-extended[_ngcontent-%COMP%]{background:none;border:none;width:8.5rem;padding:0;padding-left:.55rem}.side-navigation-logo-extended[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5rem;margin-left:1.95rem}.menu-item-button[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 1.3rem;height:4rem;cursor:pointer}.side-nav-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;gap:.25rem;margin-top:.5rem}.side-nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;margin-inline:1rem}.side-nav-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.side-nav-item-button[_ngcontent-%COMP%]{display:flex;align-items:center;height:2.5rem;cursor:pointer;border-radius:.3rem;padding:0 .5rem}.side-nav-item-button-span[_ngcontent-%COMP%]{padding-right:.5rem;padding-left:.5rem;width:8.5rem}  .side-navigation-logo.ng-star-inserted{display:flex;align-items:center;justify-content:center}.page-content[_ngcontent-%COMP%]{padding-top:5rem;min-height:100vh}.side-nav-item[_ngcontent-%COMP%]{color:#54636e}.side-nav-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-weight:700}"]})}return t})(),tie=(()=>{class t{constructor(){this.title="reycle-page"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=rr({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&Xt(0,"app-side-navigation")},dependencies:[eie]})}return t})();function EO(t){return new je(3e3,!1)}function ec(t){switch(t.length){case 0:return new op;case 1:return t[0];default:return new Tk(t)}}function SO(t,n,e=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(n.forEach(l=>{const c=l.get("offset"),u=c==o,h=u&&a||new Map;l.forEach((m,y)=>{let C=y,k=m;if("offset"!==y)switch(C=t.normalizePropertyName(C,i),k){case"!":k=e.get(y);break;case al:k=r.get(y);break;default:k=t.normalizeStyleValue(y,C,k,i)}h.set(C,k)}),u||s.push(h),a=h,o=c}),i.length)throw function Eie(t){return new je(3502,!1)}();return s}function Sw(t,n,e,r){switch(n){case"start":t.onStart(()=>r(e&&Dw(e,"start",t)));break;case"done":t.onDone(()=>r(e&&Dw(e,"done",t)));break;case"destroy":t.onDestroy(()=>r(e&&Dw(e,"destroy",t)))}}function Dw(t,n,e){const s=Iw(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),o=t._data;return null!=o&&(s._data=o),s}function Iw(t,n,e,r,i="",s=0,o){return{element:t,triggerName:n,fromState:e,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function qs(t,n,e){let r=t.get(n);return r||t.set(n,r=e),r}function DO(t){const n=t.indexOf(":");return[t.substring(1,n),t.slice(n+1)]}const Fie=(()=>typeof document>"u"?null:document.documentElement)();function Tw(t){const n=t.parentNode||t.host||null;return n===Fie?null:n}let Gc=null,IO=!1;function TO(t,n){for(;n;){if(n===t)return!0;n=Tw(n)}return!1}function MO(t,n,e){if(e)return Array.from(t.querySelectorAll(n));const r=t.querySelector(n);return r?[r]:[]}let AO=(()=>{class t{validateStyleProperty(e){return function Lie(t){Gc||(Gc=function Bie(){return typeof document<"u"?document.body:null}()||{},IO=!!Gc.style&&"WebkitAppearance"in Gc.style);let n=!0;return Gc.style&&!function $ie(t){return"ebkit"==t.substring(1,6)}(t)&&(n=t in Gc.style,!n&&IO&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Gc.style)),n}(e)}matchesElement(e,r){return!1}containsElement(e,r){return TO(e,r)}getParentElement(e){return Tw(e)}query(e,r,i){return MO(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,s,o,a=[],l){return new op(i,s)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})(),Mw=(()=>{class t{static#e=this.NOOP=new AO}return t})();const Vie=1e3,Aw="ng-enter",Jy="ng-leave",e_="ng-trigger",t_=".ng-trigger",RO="ng-animating",Nw=".ng-animating";function ll(t){if("number"==typeof t)return t;const n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:Rw(parseFloat(n[1]),n[2])}function Rw(t,n){return"s"===n?t*Vie:t}function n_(t,n,e){return t.hasOwnProperty("duration")?t:function Uie(t,n,e){let i,s=0,o="";if("string"==typeof t){const a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return n.push(EO()),{duration:0,delay:0,easing:""};i=Rw(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=Rw(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=t;if(!e){let a=!1,l=n.length;i<0&&(n.push(function nie(){return new je(3100,!1)}()),a=!0),s<0&&(n.push(function rie(){return new je(3101,!1)}()),a=!0),a&&n.splice(l,0,EO())}return{duration:i,delay:s,easing:o}}(t,n,e)}function pp(t,n={}){return Object.keys(t).forEach(e=>{n[e]=t[e]}),n}function kO(t){const n=new Map;return Object.keys(t).forEach(e=>{n.set(e,t[e])}),n}function tc(t,n=new Map,e){if(e)for(let[r,i]of e)n.set(r,i);for(let[r,i]of t)n.set(r,i);return n}function Ma(t,n,e){n.forEach((r,i)=>{const s=Ow(i);e&&!e.has(i)&&e.set(i,t.style[s]),t.style[s]=r})}function Kc(t,n){n.forEach((e,r)=>{const i=Ow(r);t.style[i]=""})}function mp(t){return Array.isArray(t)?1==t.length?t[0]:Ik(t):t}const kw=new RegExp("{{\\s*(.+?)\\s*}}","g");function PO(t){let n=[];if("string"==typeof t){let e;for(;e=kw.exec(t);)n.push(e[1]);kw.lastIndex=0}return n}function gp(t,n,e){const r=t.toString(),i=r.replace(kw,(s,o)=>{let a=n[o];return null==a&&(e.push(function sie(t){return new je(3003,!1)}()),a=""),a.toString()});return i==r?t:i}function r_(t){const n=[];let e=t.next();for(;!e.done;)n.push(e.value),e=t.next();return n}const Wie=/-+([a-z0-9])/g;function Ow(t){return t.replace(Wie,(...n)=>n[1].toUpperCase())}function Zs(t,n,e){switch(n.type){case 7:return t.visitTrigger(n,e);case 0:return t.visitState(n,e);case 1:return t.visitTransition(n,e);case 2:return t.visitSequence(n,e);case 3:return t.visitGroup(n,e);case 4:return t.visitAnimate(n,e);case 5:return t.visitKeyframes(n,e);case 6:return t.visitStyle(n,e);case 8:return t.visitReference(n,e);case 9:return t.visitAnimateChild(n,e);case 10:return t.visitAnimateRef(n,e);case 11:return t.visitQuery(n,e);case 12:return t.visitStagger(n,e);default:throw function oie(t){return new je(3004,!1)}()}}function FO(t,n){return window.getComputedStyle(t)[n]}const i_="*";function Xie(t,n){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(r=>function qie(t,n,e){if(":"==t[0]){const l=function Zie(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return n.push(function vie(t){return new je(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof l)return void n.push(l);t=l}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function bie(t){return new je(3015,!1)}()),n;const i=r[1],s=r[2],o=r[3];n.push($O(i,o));"<"==s[0]&&!(i==i_&&o==i_)&&n.push($O(o,i))}(r,e,n)):e.push(t),e}const s_=new Set(["true","1"]),o_=new Set(["false","0"]);function $O(t,n){const e=s_.has(t)||o_.has(t),r=s_.has(n)||o_.has(n);return(i,s)=>{let o=t==i_||t==i,a=n==i_||n==s;return!o&&e&&"boolean"==typeof i&&(o=i?s_.has(t):o_.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?s_.has(n):o_.has(n)),o&&a}}const Yie=new RegExp("s*:selfs*,?","g");function Pw(t,n,e,r){return new Qie(t).build(n,e,r)}class Qie{constructor(n){this._driver=n}build(n,e,r){const i=new tse(e);return this._resetContextStyleTimingState(i),Zs(this,mp(n),i)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let r=e.queryCount=0,i=e.depCount=0;const s=[],o=[];return"@"==n.name.charAt(0)&&e.errors.push(function lie(){return new je(3006,!1)}()),n.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);r+=l.queryCount,i+=l.depCount,o.push(l)}else e.errors.push(function cie(){return new je(3007,!1)}())}),{type:7,name:n.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(n,e){const r=this.visitStyle(n.styles,e),i=n.options&&n.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{PO(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(r_(s.values()),e.errors.push(function uie(t,n){return new je(3008,!1)}()))}return{type:0,name:n.name,style:r,options:i?{params:i}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const r=Zs(this,mp(n.animation),e);return{type:1,matchers:Xie(n.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Xc(n.options)}}visitSequence(n,e){return{type:2,steps:n.steps.map(r=>Zs(this,r,e)),options:Xc(n.options)}}visitGroup(n,e){const r=e.currentTime;let i=0;const s=n.steps.map(o=>{e.currentTime=r;const a=Zs(this,o,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:3,steps:s,options:Xc(n.options)}}visitAnimate(n,e){const r=function rse(t,n){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return Fw(n_(t,n).duration,0,"");const e=t;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Fw(0,0,"");return s.dynamic=!0,s.strValue=e,s}const i=n_(e,n);return Fw(i.duration,i.delay,i.easing)}(n.timings,e.errors);e.currentAnimateTimings=r;let i,s=n.styles?n.styles:Zo({});if(5==s.type)i=this.visitKeyframes(s,e);else{let o=n.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=Zo(c)}e.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,i=l}return e.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(n,e){const r=this._makeStyleAst(n,e);return this._validateStyleAst(r,e),r}_makeStyleAst(n,e){const r=[],i=Array.isArray(n.styles)?n.styles:[n.styles];for(let a of i)"string"==typeof a?a===al?r.push(a):e.errors.push(new je(3002,!1)):r.push(kO(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:n.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(n,e){const r=e.currentAnimateTimings;let i=e.currentTime,s=e.currentTime;r&&s>0&&(s-=r.duration+r.delay),n.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=e.collectedStyles.get(e.currentQuerySelector),u=c.get(l);let h=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(e.errors.push(function hie(t,n,e,r,i){return new je(3010,!1)}()),h=!1),s=u.startTime),h&&c.set(l,{startTime:s,endTime:i}),e.options&&function Hie(t,n,e){const r=n.params||{},i=PO(t);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||e.push(function iie(t){return new je(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(n,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function fie(){return new je(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,c=0;const u=n.steps.map(B=>{const V=this._makeStyleAst(B,e);let fe=null!=V.offset?V.offset:function nse(t){if("string"==typeof t)return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const r=e;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(V.styles),ve=0;return null!=fe&&(s++,ve=V.offset=fe),l=l||ve<0||ve>1,a=a||ve<c,c=ve,o.push(ve),V});l&&e.errors.push(function pie(){return new je(3012,!1)}()),a&&e.errors.push(function mie(){return new je(3200,!1)}());const h=n.steps.length;let m=0;s>0&&s<h?e.errors.push(function gie(){return new je(3202,!1)}()):0==s&&(m=1/(h-1));const y=h-1,C=e.currentTime,k=e.currentAnimateTimings,P=k.duration;return u.forEach((B,V)=>{const fe=m>0?V==y?1:m*V:o[V],ve=fe*P;e.currentTime=C+k.delay+ve,k.duration=ve,this._validateStyleAst(B,e),B.offset=fe,r.styles.push(B)}),r}visitReference(n,e){return{type:8,animation:Zs(this,mp(n.animation),e),options:Xc(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:9,options:Xc(n.options)}}visitAnimateRef(n,e){return{type:10,animation:this.visitReference(n.animation,e),options:Xc(n.options)}}visitQuery(n,e){const r=e.currentQuerySelector,i=n.options||{};e.queryCount++,e.currentQuery=n;const[s,o]=function Jie(t){const n=!!t.split(/\s*,\s*/).find(e=>":self"==e);return n&&(t=t.replace(Yie,"")),t=t.replace(/@\*/g,t_).replace(/@\w+/g,e=>t_+"-"+e.slice(1)).replace(/:animating/g,Nw),[t,n]}(n.selector);e.currentQuerySelector=r.length?r+" "+s:s,qs(e.collectedStyles,e.currentQuerySelector,new Map);const a=Zs(this,mp(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:n.selector,options:Xc(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function yie(){return new je(3013,!1)}());const r="full"===n.timings?{duration:0,delay:0,easing:"full"}:n_(n.timings,e.errors,!0);return{type:12,animation:Zs(this,mp(n.animation),e),timings:r,options:null}}}class tse{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Xc(t){return t?(t=pp(t)).params&&(t.params=function ese(t){return t?pp(t):null}(t.params)):t={},t}function Fw(t,n,e){return{duration:t,delay:n,easing:e}}function $w(t,n,e,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class a_{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const ose=new RegExp(":enter","g"),lse=new RegExp(":leave","g");function Lw(t,n,e,r,i,s=new Map,o=new Map,a,l,c=[]){return(new cse).buildKeyframes(t,n,e,r,i,s,o,a,l,c)}class cse{buildKeyframes(n,e,r,i,s,o,a,l,c,u=[]){c=c||new a_;const h=new Bw(n,e,c,i,s,u,[]);h.options=l;const m=l.delay?ll(l.delay):0;h.currentTimeline.delayNextStep(m),h.currentTimeline.setStyles([o],null,h.errors,l),Zs(this,r,h);const y=h.timelines.filter(C=>C.containsAnimation());if(y.length&&a.size){let C;for(let k=y.length-1;k>=0;k--){const P=y[k];if(P.element===e){C=P;break}}C&&!C.allowOnlyTimelineStyles()&&C.setStyles([a],null,h.errors,l)}return y.length?y.map(C=>C.buildKeyframes()):[$w(e,[],[],[],0,m,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const r=e.subInstructions.get(e.element);if(r){const i=e.createSubContext(n.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=n}visitAnimateRef(n,e){const r=e.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,r),this.visitReference(n.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,r){for(const i of n){const s=i?.delay;if(s){const o="number"==typeof s?s:ll(gp(s,i?.params??{},e.errors));r.delayNextStep(o)}}}_visitSubInstructions(n,e,r){let s=e.currentTimeline.currentTime;const o=null!=r.duration?ll(r.duration):null,a=null!=r.delay?ll(r.delay):null;return 0!==o&&n.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(n,e){e.updateOptions(n.options,!0),Zs(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const r=e.subContextCount;let i=e;const s=n.options;if(s&&(s.params||s.delay)&&(i=e.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=l_);const o=ll(s.delay);i.delayNextStep(o)}n.steps.length&&(n.steps.forEach(o=>Zs(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const r=[];let i=e.currentTimeline.currentTime;const s=n.options&&n.options.delay?ll(n.options.delay):0;n.steps.forEach(o=>{const a=e.createSubContext(n.options);s&&a.delayNextStep(s),Zs(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(i),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const r=n.strValue;return n_(e.params?gp(r,e.params,e.errors):r,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const r=e.currentAnimateTimings=this._visitTiming(n.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());const s=n.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(r.duration),this.visitStyle(s,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(s):r.setStyles(n.styles,s,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const r=e.currentAnimateTimings,i=e.currentTimeline.duration,s=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,n.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(i+s),e.previousNode=n}visitQuery(n,e){const r=e.currentTimeline.currentTime,i=n.options||{},s=i.delay?ll(i.delay):0;s&&(6===e.previousNode.type||0==r&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=l_);let o=r;const a=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;const h=e.createSubContext(n.options,c);s&&h.delayNextStep(s),c===e.element&&(l=h.currentTimeline),Zs(this,n.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const r=e.parentContext,i=e.currentTimeline,s=n.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const u=e.currentTimeline;l&&u.delayNextStep(l);const h=u.currentTime;Zs(this,n.animation,e),e.previousNode=n,r.currentStaggerTime=i.currentTime-h+(i.startTime-r.currentTimeline.startTime)}}const l_={};class Bw{constructor(n,e,r,i,s,o,a,l){this._driver=n,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=l_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new c_(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const r=n;let i=this.options;null!=r.duration&&(i.duration=ll(r.duration)),null!=r.delay&&(i.delay=ll(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=gp(s[a],o,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const r=n.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return n}createSubContext(n=null,e,r){const i=e||this.element,s=new Bw(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(n),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(n){return this.previousNode=l_,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,r){const i={duration:e??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},s=new use(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,i,n.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,r,i,s,o){let a=[];if(i&&a.push(this.element),n.length>0){n=(n=n.replace(ose,"."+this._enterClassName)).replace(lse,"."+this._leaveClassName);let c=this._driver.query(this.element,n,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function _ie(t){return new je(3014,!1)}()),a}}class c_{constructor(n,e,r,i){this._driver=n,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new c_(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||al),this._currentKeyframe.set(e,al);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,r,i){e&&this._previousKeyframe.set("easing",e);const s=i&&i.params||{},o=function dse(t,n){const e=new Map;let r;return t.forEach(i=>{if("*"===i){r=r||n.keys();for(let s of r)e.set(s,al)}else tc(i,e)}),e}(n,this._globalTimelineStyles);for(let[a,l]of o){const c=gp(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??al),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,r)=>{const i=this._styleSummary.get(r);(!i||e.time>i.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=tc(a,new Map,this._backFill);c.forEach((u,h)=>{"!"===u?n.add(h):u===al&&e.add(h)}),r||c.set("offset",l/this.duration),i.push(c)});const s=n.size?r_(n.values()):[],o=e.size?r_(e.values()):[];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return $w(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class use extends c_{constructor(n,e,r,i,s,o,a=!1){super(n,e,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=r+e,a=e/o,l=tc(n[0]);l.set("offset",0),s.push(l);const c=tc(n[0]);c.set("offset",VO(a)),s.push(c);const u=n.length-1;for(let h=1;h<=u;h++){let m=tc(n[h]);const y=m.get("offset");m.set("offset",VO((e+y*r)/o)),s.push(m)}r=o,e=0,i="",n=s}return $w(this.element,n,this.preStyleProps,this.postStyleProps,r,e,i,!0)}}function VO(t,n=3){const e=Math.pow(10,n-1);return Math.round(t*e)/e}class Vw{}const hse=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class fse extends Vw{normalizePropertyName(n,e){return Ow(n)}normalizeStyleValue(n,e,r,i){let s="";const o=r.toString().trim();if(hse.has(e)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function aie(t,n){return new je(3005,!1)}())}return o+s}}function zO(t,n,e,r,i,s,o,a,l,c,u,h,m){return{type:0,element:t,triggerName:n,isRemovalTransition:i,fromState:e,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:m}}const zw={};class UO{constructor(n,e,r){this._triggerName=n,this.ast=e,this._stateStyles=r}match(n,e,r,i){return function pse(t,n,e,r,i){return t.some(s=>s(n,e,r,i))}(this.ast.matchers,n,e,r,i)}buildStyles(n,e,r){let i=this._stateStyles.get("*");return void 0!==n&&(i=this._stateStyles.get(n?.toString())||i),i?i.buildStyles(e,r):new Map}build(n,e,r,i,s,o,a,l,c,u){const h=[],m=this.ast.options&&this.ast.options.params||zw,C=this.buildStyles(r,a&&a.params||zw,h),k=l&&l.params||zw,P=this.buildStyles(i,k,h),B=new Set,V=new Map,fe=new Map,ve="void"===i,Ve={params:mse(k,m),delay:this.ast.options?.delay},gt=u?[]:Lw(n,e,this.ast.animation,s,o,C,P,Ve,c,h);let dt=0;if(gt.forEach(Gt=>{dt=Math.max(Gt.duration+Gt.delay,dt)}),h.length)return zO(e,this._triggerName,r,i,ve,C,P,[],[],V,fe,dt,h);gt.forEach(Gt=>{const zt=Gt.element,Hn=qs(V,zt,new Set);Gt.preStyleProps.forEach(ui=>Hn.add(ui));const Ln=qs(fe,zt,new Set);Gt.postStyleProps.forEach(ui=>Ln.add(ui)),zt!==e&&B.add(zt)});const ht=r_(B.values());return zO(e,this._triggerName,r,i,ve,C,P,gt,ht,V,fe,dt)}}function mse(t,n){const e=pp(n);for(const r in t)t.hasOwnProperty(r)&&null!=t[r]&&(e[r]=t[r]);return e}class gse{constructor(n,e,r){this.styles=n,this.defaultParams=e,this.normalizer=r}buildStyles(n,e){const r=new Map,i=pp(this.defaultParams);return Object.keys(n).forEach(s=>{const o=n[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=gp(o,i,e));const l=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,l,o,e),r.set(a,o)})}),r}}class _se{constructor(n,e,r){this.name=n,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states=new Map,e.states.forEach(i=>{this.states.set(i.name,new gse(i.style,i.options&&i.options.params||{},r))}),jO(this.states,"true","1"),jO(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new UO(n,i,this.states))}),this.fallbackTransition=function bse(t,n,e){return new UO(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,r,i){return this.transitionFactories.find(o=>o.match(n,e,r,i))||null}matchStyles(n,e,r){return this.fallbackTransition.buildStyles(n,e,r)}}function jO(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}const vse=new a_;class xse{constructor(n,e,r){this.bodyNode=n,this._driver=e,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const r=[],s=Pw(this._driver,e,r,[]);if(r.length)throw function Sie(t){return new je(3503,!1)}();this._animations.set(n,s)}_buildPlayer(n,e,r){const i=n.element,s=SO(this._normalizer,n.keyframes,e,r);return this._driver.animate(i,s,n.duration,n.delay,n.easing,[],!0)}create(n,e,r={}){const i=[],s=this._animations.get(n);let o;const a=new Map;if(s?(o=Lw(this._driver,e,s,Aw,Jy,new Map,new Map,r,vse,i),o.forEach(u=>{const h=qs(a,u.element,new Map);u.postStyleProps.forEach(m=>h.set(m,null))})):(i.push(function Die(){return new je(3300,!1)}()),o=[]),i.length)throw function Iie(t){return new je(3504,!1)}();a.forEach((u,h)=>{u.forEach((m,y)=>{u.set(y,this._driver.computeStyle(h,y,al))})});const c=ec(o.map(u=>{const h=a.get(u.element);return this._buildPlayer(u,new Map,h)}));return this._playersById.set(n,c),c.onDestroy(()=>this.destroy(n)),this.players.push(c),c}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function Tie(t){return new je(3301,!1)}();return e}listen(n,e,r,i){const s=Iw(e,"","","");return Sw(this._getPlayer(n),r,s,i),()=>{}}command(n,e,r,i){if("register"==r)return void this.register(n,i[0]);if("create"==r)return void this.create(n,e,i[0]||{});const s=this._getPlayer(n);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(n)}}}const HO="ng-animate-queued",Uw="ng-animate-disabled",Dse=[],WO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ise={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Jo="__ng_removed";class jw{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const r=n&&n.hasOwnProperty("value");if(this.value=function Nse(t){return t??null}(r?n.value:n),r){const s=pp(n);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const r=this.options.params;Object.keys(e).forEach(i=>{null==r[i]&&(r[i]=e[i])})}}}const yp="void",Hw=new jw(yp);class Tse{constructor(n,e,r){this.id=n,this.hostElement=e,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,So(e,this._hostClassName)}listen(n,e,r,i){if(!this._triggers.has(e))throw function Mie(t,n){return new je(3302,!1)}();if(null==r||0==r.length)throw function Aie(t){return new je(3303,!1)}();if(!function Rse(t){return"start"==t||"done"==t}(r))throw function Nie(t,n){return new je(3400,!1)}();const s=qs(this._elementListeners,n,[]),o={name:e,phase:r,callback:i};s.push(o);const a=qs(this._engine.statesByElement,n,new Map);return a.has(e)||(So(n,e_),So(n,e_+"-"+e),a.set(e,Hw)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function Rie(t){return new je(3401,!1)}();return e}trigger(n,e,r,i=!0){const s=this._getTrigger(e),o=new Ww(this.id,e,n);let a=this._engine.statesByElement.get(n);a||(So(n,e_),So(n,e_+"-"+e),this._engine.statesByElement.set(n,a=new Map));let l=a.get(e);const c=new jw(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=Hw),c.value!==yp&&l.value===c.value){if(!function Pse(t,n){const e=Object.keys(t),r=Object.keys(n);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){const s=e[i];if(!n.hasOwnProperty(s)||t[s]!==n[s])return!1}return!0}(l.params,c.params)){const k=[],P=s.matchStyles(l.value,l.params,k),B=s.matchStyles(c.value,c.params,k);k.length?this._engine.reportError(k):this._engine.afterFlush(()=>{Kc(n,P),Ma(n,B)})}return}const m=qs(this._engine.playersByElement,n,[]);m.forEach(k=>{k.namespaceId==this.id&&k.triggerName==e&&k.queued&&k.destroy()});let y=s.matchTransition(l.value,c.value,n,c.params),C=!1;if(!y){if(!i)return;y=s.fallbackTransition,C=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:y,fromState:l,toState:c,player:o,isFallbackTransition:C}),C||(So(n,HO),o.onStart(()=>{Bd(n,HO)})),o.onDone(()=>{let k=this.players.indexOf(o);k>=0&&this.players.splice(k,1);const P=this._engine.playersByElement.get(n);if(P){let B=P.indexOf(o);B>=0&&P.splice(B,1)}}),this.players.push(o),m.push(o),o}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const r=this._engine.driver.query(n,t_,!0);r.forEach(i=>{if(i[Jo])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(n,e,r,i){const s=this._engine.statesByElement.get(n),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(n,c,yp,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,o),r&&ec(a).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(e&&r){const i=new Set;e.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,c=r.get(o)||Hw,u=new jw(yp),h=new Ww(this.id,o,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:o,transition:l,fromState:c,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(n,e){const r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(n):[];if(s&&s.length)i=!0;else{let o=n;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(n),i)r.markElementAsRemoved(this.id,n,!1,e);else{const s=n[Jo];(!s||s===WO)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,e))}}insertNode(n,e){So(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=Iw(s,r.triggerName,r.fromState.value,r.toState.value);l._data=n,Sw(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class Mse{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,r){this.bodyNode=n,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,e){const r=new Tse(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,e){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,n),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(n)}else r.push(n);return i.set(e,n),n}register(n,e){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,e)),r}registerTrigger(n,e,r){let i=this._namespaceLookup[n];i&&i.register(e,r)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(n);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,r=this.statesByElement.get(n);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&e.add(s)}return e}trigger(n,e,r,i){if(u_(e)){const s=this._fetchNamespace(n);if(s)return s.trigger(e,r,i),!0}return!1}insertNode(n,e,r,i){if(!u_(e))return;const s=e[Jo];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(n){const o=this._fetchNamespace(n);o&&o.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),So(n,Uw)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Bd(n,Uw))}removeNode(n,e,r){if(u_(e)){const i=n?this._fetchNamespace(n):null;i?i.removeNode(e,r):this.markElementAsRemoved(n,e,!1,r);const s=this.namespacesByHostElement.get(e);s&&s.id!==n&&s.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(n,e,r,i,s){this.collectedLeaveElements.push(e),e[Jo]={namespaceId:n,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(n,e,r,i,s){return u_(e)?this._fetchNamespace(n).listen(e,r,i,s):()=>{}}_buildInstruction(n,e,r,i,s){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,i,n.fromState.options,n.toState.options,e,s)}destroyInnerAnimations(n){let e=this.driver.query(n,t_,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,Nw,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return ec(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[Jo];if(e&&e.setForRemoval){if(n[Jo]=WO,e.namespaceId){this.destroyInnerAnimations(n);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(Uw)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)So(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,n)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?ec(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(n){throw function kie(t){return new je(3402,!1)}()}_flushAnimations(n,e){const r=new a_,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(kt=>{u.add(kt);const $t=this.driver.query(kt,".ng-animate-queued",!0);for(let Ft=0;Ft<$t.length;Ft++)u.add($t[Ft])});const h=this.bodyNode,m=Array.from(this.statesByElement.keys()),y=XO(m,this.collectedEnterElements),C=new Map;let k=0;y.forEach((kt,$t)=>{const Ft=Aw+k++;C.set($t,Ft),kt.forEach(mn=>So(mn,Ft))});const P=[],B=new Set,V=new Set;for(let kt=0;kt<this.collectedLeaveElements.length;kt++){const $t=this.collectedLeaveElements[kt],Ft=$t[Jo];Ft&&Ft.setForRemoval&&(P.push($t),B.add($t),Ft.hasAnimation?this.driver.query($t,".ng-star-inserted",!0).forEach(mn=>B.add(mn)):V.add($t))}const fe=new Map,ve=XO(m,Array.from(B));ve.forEach((kt,$t)=>{const Ft=Jy+k++;fe.set($t,Ft),kt.forEach(mn=>So(mn,Ft))}),n.push(()=>{y.forEach((kt,$t)=>{const Ft=C.get($t);kt.forEach(mn=>Bd(mn,Ft))}),ve.forEach((kt,$t)=>{const Ft=fe.get($t);kt.forEach(mn=>Bd(mn,Ft))}),P.forEach(kt=>{this.processLeaveNode(kt)})});const Ve=[],gt=[];for(let kt=this._namespaceList.length-1;kt>=0;kt--)this._namespaceList[kt].drainQueuedTransitions(e).forEach(Ft=>{const mn=Ft.player,pr=Ft.element;if(Ve.push(mn),this.collectedEnterElements.length){const zi=pr[Jo];if(zi&&zi.setForMove){if(zi.previousTriggersValues&&zi.previousTriggersValues.has(Ft.triggerName)){const Zc=zi.previousTriggersValues.get(Ft.triggerName),Io=this.statesByElement.get(Ft.element);if(Io&&Io.has(Ft.triggerName)){const p_=Io.get(Ft.triggerName);p_.value=Zc,Io.set(Ft.triggerName,p_)}}return void mn.destroy()}}const Ci=!h||!this.driver.containsElement(h,pr),di=fe.get(pr),Do=C.get(pr),mr=this._buildInstruction(Ft,r,Do,di,Ci);if(mr.errors&&mr.errors.length)return void gt.push(mr);if(Ci)return mn.onStart(()=>Kc(pr,mr.fromStyles)),mn.onDestroy(()=>Ma(pr,mr.toStyles)),void i.push(mn);if(Ft.isFallbackTransition)return mn.onStart(()=>Kc(pr,mr.fromStyles)),mn.onDestroy(()=>Ma(pr,mr.toStyles)),void i.push(mn);const Vd=[];mr.timelines.forEach(zi=>{zi.stretchStartingKeyframe=!0,this.disabledNodes.has(zi.element)||Vd.push(zi)}),mr.timelines=Vd,r.append(pr,mr.timelines),o.push({instruction:mr,player:mn,element:pr}),mr.queriedElements.forEach(zi=>qs(a,zi,[]).push(mn)),mr.preStyleProps.forEach((zi,Zc)=>{if(zi.size){let Io=l.get(Zc);Io||l.set(Zc,Io=new Set),zi.forEach((p_,Yw)=>Io.add(Yw))}}),mr.postStyleProps.forEach((zi,Zc)=>{let Io=c.get(Zc);Io||c.set(Zc,Io=new Set),zi.forEach((p_,Yw)=>Io.add(Yw))})});if(gt.length){const kt=[];gt.forEach($t=>{kt.push(function Oie(t,n){return new je(3505,!1)}())}),Ve.forEach($t=>$t.destroy()),this.reportError(kt)}const dt=new Map,ht=new Map;o.forEach(kt=>{const $t=kt.element;r.has($t)&&(ht.set($t,$t),this._beforeAnimationBuild(kt.player.namespaceId,kt.instruction,dt))}),i.forEach(kt=>{const $t=kt.element;this._getPreviousPlayers($t,!1,kt.namespaceId,kt.triggerName,null).forEach(mn=>{qs(dt,$t,[]).push(mn),mn.destroy()})});const Gt=P.filter(kt=>ZO(kt,l,c)),zt=new Map;KO(zt,this.driver,V,c,al).forEach(kt=>{ZO(kt,l,c)&&Gt.push(kt)});const Ln=new Map;y.forEach((kt,$t)=>{KO(Ln,this.driver,new Set(kt),l,"!")}),Gt.forEach(kt=>{const $t=zt.get(kt),Ft=Ln.get(kt);zt.set(kt,new Map([...$t?.entries()??[],...Ft?.entries()??[]]))});const ui=[],wi=[],Vi={};o.forEach(kt=>{const{element:$t,player:Ft,instruction:mn}=kt;if(r.has($t)){if(u.has($t))return Ft.onDestroy(()=>Ma($t,mn.toStyles)),Ft.disabled=!0,Ft.overrideTotalTime(mn.totalTime),void i.push(Ft);let pr=Vi;if(ht.size>1){let di=$t;const Do=[];for(;di=di.parentNode;){const mr=ht.get(di);if(mr){pr=mr;break}Do.push(di)}Do.forEach(mr=>ht.set(mr,pr))}const Ci=this._buildAnimation(Ft.namespaceId,mn,dt,s,Ln,zt);if(Ft.setRealPlayer(Ci),pr===Vi)ui.push(Ft);else{const di=this.playersByElement.get(pr);di&&di.length&&(Ft.parentPlayer=ec(di)),i.push(Ft)}}else Kc($t,mn.fromStyles),Ft.onDestroy(()=>Ma($t,mn.toStyles)),wi.push(Ft),u.has($t)&&i.push(Ft)}),wi.forEach(kt=>{const $t=s.get(kt.element);if($t&&$t.length){const Ft=ec($t);kt.setRealPlayer(Ft)}}),i.forEach(kt=>{kt.parentPlayer?kt.syncPlayerEvents(kt.parentPlayer):kt.destroy()});for(let kt=0;kt<P.length;kt++){const $t=P[kt],Ft=$t[Jo];if(Bd($t,Jy),Ft&&Ft.hasAnimation)continue;let mn=[];if(a.size){let Ci=a.get($t);Ci&&Ci.length&&mn.push(...Ci);let di=this.driver.query($t,Nw,!0);for(let Do=0;Do<di.length;Do++){let mr=a.get(di[Do]);mr&&mr.length&&mn.push(...mr)}}const pr=mn.filter(Ci=>!Ci.destroyed);pr.length?kse(this,$t,pr):this.processLeaveNode($t)}return P.length=0,ui.forEach(kt=>{this.players.push(kt),kt.onDone(()=>{kt.destroy();const $t=this.players.indexOf(kt);this.players.splice($t,1)}),kt.play()}),ui}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,r,i,s){let o=[];if(e){const a=this.playersByQueriedElement.get(n);a&&(o=a)}else{const a=this.playersByElement.get(n);if(a){const l=!s||s==yp;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(n,e,r){const s=e.element,o=e.isRemovalTransition?void 0:n,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,u=c!==s,h=qs(r,c,[]);this._getPreviousPlayers(c,u,o,a,e.toState).forEach(y=>{const C=y.getRealPlayer();C.beforeDestroy&&C.beforeDestroy(),y.destroy(),h.push(y)})}Kc(s,e.fromStyles)}_buildAnimation(n,e,r,i,s,o){const a=e.triggerName,l=e.element,c=[],u=new Set,h=new Set,m=e.timelines.map(C=>{const k=C.element;u.add(k);const P=k[Jo];if(P&&P.removedBeforeQueried)return new op(C.duration,C.delay);const B=k!==l,V=function Ose(t){const n=[];return qO(t,n),n}((r.get(k)||Dse).map(dt=>dt.getRealPlayer())).filter(dt=>!!dt.element&&dt.element===k),fe=s.get(k),ve=o.get(k),Ve=SO(this._normalizer,C.keyframes,fe,ve),gt=this._buildPlayer(C,Ve,V);if(C.subTimeline&&i&&h.add(k),B){const dt=new Ww(n,a,k);dt.setRealPlayer(gt),c.push(dt)}return gt});c.forEach(C=>{qs(this.playersByQueriedElement,C.element,[]).push(C),C.onDone(()=>function Ase(t,n,e){let r=t.get(n);if(r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&t.delete(n)}return r}(this.playersByQueriedElement,C.element,C))}),u.forEach(C=>So(C,RO));const y=ec(m);return y.onDestroy(()=>{u.forEach(C=>Bd(C,RO)),Ma(l,e.toStyles)}),h.forEach(C=>{qs(i,C,[]).push(y)}),y}_buildPlayer(n,e,r){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,r):new op(n.duration,n.delay)}}class Ww{constructor(n,e,r){this.namespaceId=n,this.triggerName=e,this.element=r,this._player=new op,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>Sw(n,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){qs(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function u_(t){return t&&1===t.nodeType}function GO(t,n){const e=t.style.display;return t.style.display=n??"none",e}function KO(t,n,e,r,i){const s=[];e.forEach(l=>s.push(GO(l)));const o=[];r.forEach((l,c)=>{const u=new Map;l.forEach(h=>{const m=n.computeStyle(c,h,i);u.set(h,m),(!m||0==m.length)&&(c[Jo]=Ise,o.push(c))}),t.set(c,u)});let a=0;return e.forEach(l=>GO(l,s[a++])),o}function XO(t,n){const e=new Map;if(t.forEach(a=>e.set(a,[])),0==n.length)return e;const i=new Set(n),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return n.forEach(a=>{const l=o(a);1!==l&&e.get(l).push(a)}),e}function So(t,n){t.classList?.add(n)}function Bd(t,n){t.classList?.remove(n)}function kse(t,n,e){ec(e).onDone(()=>t.processLeaveNode(n))}function qO(t,n){for(let e=0;e<t.length;e++){const r=t[e];r instanceof Tk?qO(r.players,n):n.push(r)}}function ZO(t,n,e){const r=e.get(t);if(!r)return!1;let i=n.get(t);return i?r.forEach(s=>i.add(s)):n.set(t,r),e.delete(t),!0}class d_{constructor(n,e,r){this.bodyNode=n,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Mse(n,e,r),this._timelineEngine=new xse(n,e,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(n,e,r,i,s){const o=n+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],u=Pw(this._driver,s,l,[]);if(l.length)throw function Cie(t,n){return new je(3404,!1)}();a=function yse(t,n,e){return new _se(t,n,e)}(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,i,a)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,r,i){this._transitionEngine.insertNode(n,e,r,i)}onRemove(n,e,r){this._transitionEngine.removeNode(n,e,r)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,r,i){if("@"==r.charAt(0)){const[s,o]=DO(r);this._timelineEngine.command(s,e,o,i)}else this._transitionEngine.trigger(n,e,r,i)}listen(n,e,r,i,s){if("@"==r.charAt(0)){const[o,a]=DO(r);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(n,e,r,i,s)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}let $se=(()=>{class t{static#e=this.initialStylesByElement=new WeakMap;constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i,this._state=0;let s=t.initialStylesByElement.get(e);s||t.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ma(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ma(this._element,this._initialStyles),this._endStyles&&(Ma(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Kc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Kc(this._element,this._endStyles),this._endStyles=null),Ma(this._element,this._initialStyles),this._state=3)}}return t})();function Gw(t){let n=null;return t.forEach((e,r)=>{(function Lse(t){return"display"===t||"position"===t})(r)&&(n=n||new Map,n.set(r,e))}),n}class YO{constructor(n,e,r,i){this.element=n,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const e=[];return n.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(n,e,r){return n.animate(this._convertKeyframesToObject(e),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&n.set(i,this._finished?r:FO(this.element,i))}),this.currentSnapshot=n}triggerCallback(n){const e="start"===n?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class Bse{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,e){return!1}containsElement(n,e){return TO(n,e)}getParentElement(n){return Tw(n)}query(n,e,r){return MO(n,e,r)}computeStyle(n,e,r){return window.getComputedStyle(n)[e]}animate(n,e,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(y=>y instanceof YO);(function Gie(t,n){return 0===t||0===n})(r,i)&&u.forEach(y=>{y.currentSnapshot.forEach((C,k)=>c.set(k,C))});let h=function jie(t){return t.length?t[0]instanceof Map?t:t.map(n=>kO(n)):[]}(e).map(y=>tc(y));h=function Kie(t,n,e){if(e.size&&n.length){let r=n[0],i=[];if(e.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<n.length;s++){let o=n[s];i.forEach(a=>o.set(a,FO(t,a)))}}return n}(n,h,c);const m=function Fse(t,n){let e=null,r=null;return Array.isArray(n)&&n.length?(e=Gw(n[0]),n.length>1&&(r=Gw(n[n.length-1]))):n instanceof Map&&(e=Gw(n)),e||r?new $se(t,e,r):null}(n,h);return new YO(n,h,l,m)}}let Vse=(()=>{class t extends Dk{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:Kr.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(e)?Ik(e):e;return QO(this._renderer,null,r,"register",[i]),new zse(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||t)(We(Gh),We(_n))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();class zse extends Lee{constructor(n,e){super(),this._id=n,this._renderer=e}create(n,e){return new Use(this._id,n,e||{},this._renderer)}}class Use{constructor(n,e,r,i){this.id=n,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(n,e){return this._renderer.listen(this.element,`@@${this.id}:${n}`,e)}_command(n,...e){return QO(this._renderer,this.element,this.id,n,e)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function QO(t,n,e,r,i){return t.setProperty(n,`@@${e}:${r}`,i)}const JO="@.disabled";let jse=(()=>{class t{constructor(e,r,i){this.delegate=e,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(e,r){const s=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let u=this._rendererCache.get(s);return u||(u=new eP("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,u)),u}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,e,u.name,u)};return r.data.animation.forEach(l),new Hse(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,i){e>=0&&e<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||t)(We(Gh),We(d_),We(Mt))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();class eP{constructor(n,e,r,i){this.namespaceId=n,this.delegate=e,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,r,i=!0){this.delegate.insertBefore(n,e,r),this.engine.onInsert(this.namespaceId,e,n,i)}removeChild(n,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,r,i){this.delegate.setAttribute(n,e,r,i)}removeAttribute(n,e,r){this.delegate.removeAttribute(n,e,r)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,r,i){this.delegate.setStyle(n,e,r,i)}removeStyle(n,e,r){this.delegate.removeStyle(n,e,r)}setProperty(n,e,r){"@"==e.charAt(0)&&e==JO?this.disableAnimations(n,!!r):this.delegate.setProperty(n,e,r)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,r){return this.delegate.listen(n,e,r)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class Hse extends eP{constructor(n,e,r,i,s){super(e,r,i,s),this.factory=n,this.namespaceId=e}setProperty(n,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==JO?this.disableAnimations(n,r=void 0===r||!!r):this.engine.process(this.namespaceId,n,e.slice(1),r):this.delegate.setProperty(n,e,r)}listen(n,e,r){if("@"==e.charAt(0)){const i=function Wse(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(n);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Gse(t){const n=t.indexOf(".");return[t.substring(0,n),t.slice(n+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(n,e,r)}}const tP=[{provide:Dk,useClass:Vse},{provide:Vw,useFactory:function Xse(){return new fse}},{provide:d_,useClass:(()=>{class t extends d_{constructor(e,r,i,s){super(e.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||t)(We(_n),We(Mw),We(Vw),We($l))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})()},{provide:Gh,useFactory:function qse(t,n,e){return new jse(t,n,e)},deps:[V0,d_,Mt]}],Kw=[{provide:Mw,useFactory:()=>new Bse},{provide:kl,useValue:"BrowserAnimations"},...tP],nP=[{provide:Mw,useClass:AO},{provide:kl,useValue:"NoopAnimations"},...tP];let Zse=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?nP:Kw}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({providers:Kw,imports:[IT]})}return t})();class Xw{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class Yse extends Xw{constructor(n,e,r,i,s){super(),this.component=n,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=s}}class Qse extends Xw{constructor(n,e,r,i){super(),this.templateRef=n,this.viewContainerRef=e,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class Jse extends Xw{constructor(n){super(),this.element=n instanceof $n?n.nativeElement:n}}class eoe{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof Yse?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof Qse?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof Jse?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class toe extends eoe{constructor(n,e,r,i,s){super(),this.outletElement=n,this._componentFactoryResolver=e,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(n){const r=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component);let i;return n.viewContainerRef?(i=n.viewContainerRef.createComponent(r,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector,n.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(n.injector||this._defaultInjector||ki.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=n,i}attachTemplatePortal(n){let e=n.viewContainerRef,r=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=e.indexOf(r);-1!==i&&e.remove(i)}),this._attachedPortal=n,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let noe=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({})}return t})();const rP=HN();class roe{constructor(n,e){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=Hr(-this._previousScrollPosition.left),n.style.top=Hr(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const n=this._document.documentElement,r=n.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),rP&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),rP&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}}class ioe{constructor(n,e,r,i){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef=n}enable(){if(this._scrollSubscription)return;const n=this._scrollDispatcher.scrolled(0).pipe(ni(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class iP{enable(){}disable(){}attach(){}}function qw(t,n){return n.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function sP(t,n){return n.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class soe{constructor(n,e,r,i){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(n){this._overlayRef=n}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();qw(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ooe=(()=>{class t{constructor(e,r,i,s){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new iP,this.close=o=>new ioe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new roe(this._viewportRuler,this._document),this.reposition=o=>new soe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(r){return new(r||t)(We(ww),We(Ew),We(Mt),We(_n))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class aoe{constructor(n){if(this.scrollStrategy=new iP,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){const e=Object.keys(n);for(const r of e)void 0!==n[r]&&(this[r]=n[r])}}}class loe{constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}}let oP=(()=>{class t{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(r){return new(r||t)(We(_n))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),coe=(()=>{class t extends oP{constructor(e,r){super(e),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(i)):a.next(i);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(r){return new(r||t)(We(_n),We(Mt,8))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),uoe=(()=>{class t extends oP{constructor(e,r,i){super(e),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=ql(s)},this._clickListener=s=>{const o=ql(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(e){if(super.add(e),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(r){return new(r||t)(We(_n),We(li),We(Mt,8))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),aP=(()=>{class t{constructor(e,r){this._platform=r,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Vx()){const i=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(e),Vx()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}static#e=this.\u0275fac=function(r){return new(r||t)(We(_n),We(li))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class doe{constructor(n,e,r,i,s,o,a,l,c,u=!1){this._portalOutlet=n,this._host=e,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new De,this._attachments=new De,this._detachments=new De,this._locationChanges=$.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new De,this._outsidePointerEvents=new De,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ti(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){const n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config={...this._config,...n},this._updateElementSize()}setDirection(n){this._config={...this._config,direction:n},this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){const n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const n=this._pane.style;n.width=Hr(this._config.width),n.height=Hr(this._config.height),n.minWidth=Hr(this._config.minWidth),n.minHeight=Hr(this._config.minHeight),n.maxWidth=Hr(this._config.maxWidth),n.maxHeight=Hr(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){const n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const n=this._backdropElement;if(n){if(this._animationsDisabled)return void this._disposeBackdrop(n);n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,e,r){const i=xy(e||[]).filter(s=>!!s);i.length&&(r?n.classList.add(...i):n.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const n=this._ngZone.onStable.pipe(In(Oo(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){const n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const lP="cdk-overlay-connected-position-bounding-box",hoe=/([A-Za-z%]+)$/;class foe{get positions(){return this._preferredPositions}constructor(n,e,r,i,s){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new De,this._resizeSubscription=$.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}attach(n){this._validatePositions(),n.hostElement.classList.add(lP),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._originRect,e=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(n,i,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,r,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,r)?s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&qc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(lP),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,r){let i,s;if("center"==r.originX)i=n.left+n.width/2;else{const o=this._isRtl()?n.right:n.left,a=this._isRtl()?n.left:n.right;i="start"==r.originX?o:a}return e.left<0&&(i-=e.left),s="center"==r.originY?n.top+n.height/2:"top"==r.originY?n.top:n.bottom,e.top<0&&(s-=e.top),{x:i,y:s}}_getOverlayPoint(n,e,r){let i,s;return i="center"==r.overlayX?-e.width/2:"start"===r.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==r.overlayY?-e.height/2:"top"==r.overlayY?0:-e.height,{x:n.x+i,y:n.y+s}}_getOverlayFit(n,e,r,i){const s=uP(e);let{x:o,y:a}=n,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(o+=l),c&&(a+=c);let m=0-a,y=a+s.height-r.height,C=this._subtractOverflows(s.width,0-o,o+s.width-r.width),k=this._subtractOverflows(s.height,m,y),P=C*k;return{visibleArea:P,isCompletelyWithinViewport:s.width*s.height===P,fitsInViewportVertically:k===s.height,fitsInViewportHorizontally:C==s.width}}_canFitWithFlexibleDimensions(n,e,r){if(this._hasFlexibleDimensions){const i=r.bottom-e.y,s=r.right-e.x,o=cP(this._overlayRef.getConfig().minHeight),a=cP(this._overlayRef.getConfig().minWidth);return(n.fitsInViewportVertically||null!=o&&o<=i)&&(n.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(n,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};const i=uP(e),s=this._viewportRect,o=Math.max(n.x+i.width-s.width,0),a=Math.max(n.y+i.height-s.height,0),l=Math.max(s.top-r.top-n.y,0),c=Math.max(s.left-r.left-n.x,0);let u=0,h=0;return u=i.width<=s.width?c||-o:n.x<this._viewportMargin?s.left-r.left-n.x:0,h=i.height<=s.height?l||-a:n.y<this._viewportMargin?s.top-r.top-n.y:0,this._previousPushAmount={x:u,y:h},{x:n.x+u,y:n.y+h}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._lastPosition=n,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new loe(n,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=n.overlayY;r="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(n,e){const r=this._viewportRect,i=this._isRtl();let s,o,a,u,h,m;if("top"===e.overlayY)o=n.y,s=r.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=r.height-n.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const y=Math.min(r.bottom-n.y+r.top,n.y),C=this._lastBoundingBoxSize.height;s=2*y,o=n.y-y,s>C&&!this._isInitialRender&&!this._growAfterOpen&&(o=n.y-C/2)}if("end"===e.overlayX&&!i||"start"===e.overlayX&&i)m=r.width-n.x+this._viewportMargin,u=n.x-this._viewportMargin;else if("start"===e.overlayX&&!i||"end"===e.overlayX&&i)h=n.x,u=r.right-n.x;else{const y=Math.min(r.right-n.x+r.left,n.x),C=this._lastBoundingBoxSize.width;u=2*y,h=n.x-y,u>C&&!this._isInitialRender&&!this._growAfterOpen&&(h=n.x-C/2)}return{top:o,left:h,bottom:a,right:m,width:u,height:s}}_setBoundingBoxStyles(n,e){const r=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=Hr(r.height),i.top=Hr(r.top),i.bottom=Hr(r.bottom),i.width=Hr(r.width),i.left=Hr(r.left),i.right=Hr(r.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Hr(s)),o&&(i.maxWidth=Hr(o))}this._lastBoundingBoxSize=r,qc(this._boundingBox.style,i)}_resetBoundingBoxStyles(){qc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){qc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const u=this._viewportRuler.getViewportScrollPosition();qc(r,this._getExactOverlayY(e,n,u)),qc(r,this._getExactOverlayX(e,n,u))}else r.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=Hr(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=Hr(o.maxWidth):s&&(r.maxWidth="")),qc(this._pane.style,r)}_getExactOverlayY(n,e,r){let i={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,n);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===n.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Hr(s.y),i}_getExactOverlayX(n,e,r){let o,i={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,n);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Hr(s.x),i}_getScrollVisibility(){const n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:sP(n,r),isOriginOutsideView:qw(n,r),isOverlayClipped:sP(e,r),isOverlayOutsideView:qw(e,r)}}_subtractOverflows(n,...e){return e.reduce((r,i)=>r-Math.max(i,0),n)}_getNarrowedViewportRect(){const n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+n-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return"x"===e?null==n.offsetX?this._offsetX:n.offsetX:null==n.offsetY?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&xy(n).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){const n=this._origin;if(n instanceof $n)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();const e=n.width||0,r=n.height||0;return{top:n.y,bottom:n.y+r,left:n.x,right:n.x+e,height:r,width:e}}}function qc(t,n){for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function cP(t){if("number"!=typeof t&&null!=t){const[n,e]=t.split(hoe);return e&&"px"!==e?null:parseFloat(n)}return t||null}function uP(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const dP="cdk-global-overlay-wrapper";class poe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(n){const e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(dP),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,h=this._xOffset,m="rtl"===this._overlayRef.getConfig().direction;let y="",C="",k="";l?k="flex-start":"center"===u?(k="center",m?C=h:y=h):m?"left"===u||"end"===u?(k="flex-end",y=h):("right"===u||"start"===u)&&(k="flex-start",C=h):"left"===u||"start"===u?(k="flex-start",y=h):("right"===u||"end"===u)&&(k="flex-end",C=h),n.position=this._cssPosition,n.marginLeft=l?"0":y,n.marginTop=c?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=l?"0":C,e.justifyContent=k,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(dP),r.justifyContent=r.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}let moe=(()=>{class t{constructor(e,r,i,s){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new poe}flexibleConnectedTo(e){return new foe(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(r){return new(r||t)(We(Ew),We(_n),We(li),We(aP))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),goe=0,Zw=(()=>{class t{constructor(e,r,i,s,o,a,l,c,u,h,m,y){this.scrollStrategies=e,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=h,this._outsideClickDispatcher=m,this._animationsModuleType=y}create(e){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new aoe(e);return o.direction=o.direction||this._directionality.value,new doe(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const r=this._document.createElement("div");return r.id="cdk-overlay-"+goe++,r.classList.add("cdk-overlay-pane"),e.appendChild(r),r}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get($l)),new toe(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(r){return new(r||t)(We(ooe),We(aP),We(Wh),We(moe),We(coe),We(ki),We(Mt),We(_n),We($y),We(sd),We(uoe),We(kl,8))};static#t=this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const boe={provide:new ot("cdk-connected-overlay-scroll-strategy"),deps:[Zw],useFactory:function _oe(t){return()=>t.scrollStrategies.reposition()}};let voe=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({providers:[Zw,boe],imports:[rp,noe,fO,fO]})}return t})();const Eoe={provide:new ot("mat-menu-scroll-strategy"),deps:[Zw],useFactory:function Coe(t){return()=>t.scrollStrategies.reposition()}};let Soe=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t});static#n=this.\u0275inj=yt({providers:[Eoe],imports:[Dg,wk,ci,voe,hp,ci]})}return t})(),Doe=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Tn({type:t,bootstrap:[tie]});static#n=this.\u0275inj=yt({providers:[sO],imports:[IT,Hne,Zse,fne,vre,kre,Bre,Soe,Ste,$J,Qte,mne,Fne]})}return t})();$4().bootstrapModule(Doe).catch(t=>console.error(t))},2155:function(st,Oe,I){var ce=I(7156).default;!function(ye,H,q){"use strict";const T={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class ${constructor(ne,G){this.modelPath=G||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(ne)}/model.json`}getPrefix(ne){return"lite_mobilenet_v2"===ne?`ssd${ne}`:`ssd_${ne}`}load(){var ne=this;return ce(function*(){ne.model=yield H.loadGraphModel(ne.modelPath);const G=q.zeros([1,300,300,3],"int32"),te=yield ne.model.executeAsync(G);yield Promise.all(te.map(Y=>Y.data())),te.map(Y=>Y.dispose()),G.dispose()})()}infer(ne,G,te){var Y=this;return ce(function*(){const S=q.tidy(()=>(ne instanceof q.Tensor||(ne=q.browser.fromPixels(ne)),q.expandDims(ne))),ee=S.shape[1],Se=S.shape[2],he=yield Y.model.executeAsync(S),Ne=he[0].dataSync(),Qe=he[1].dataSync();S.dispose(),q.dispose(he);const[Ke,_t]=Y.calculateMaxScores(Ne,he[0].shape[1],he[0].shape[2]),Ze=q.getBackend();"webgl"===q.getBackend()&&q.setBackend("cpu");const re=q.tidy(()=>{const Je=q.tensor2d(Qe,[he[1].shape[1],he[1].shape[3]]);return q.image.nonMaxSuppression(Je,Ke,G,te,te)}),ze=re.dataSync();return re.dispose(),Ze!==q.getBackend()&&q.setBackend(Ze),Y.buildDetectedObjects(Se,ee,Qe,Ke,ze,_t)})()}buildDetectedObjects(ne,G,te,Y,S,ee){const Se=S.length,he=[];for(let Ne=0;Ne<Se;Ne++){const Qe=[];for(let ze=0;ze<4;ze++)Qe[ze]=te[4*S[Ne]+ze];const Ke=Qe[0]*G,_t=Qe[1]*ne,Ze=Qe[2]*G,re=Qe[3]*ne;Qe[0]=_t,Qe[1]=Ke,Qe[2]=re-_t,Qe[3]=Ze-Ke,he.push({bbox:Qe,class:T[ee[S[Ne]]+1].displayName,score:Y[S[Ne]]})}return he}calculateMaxScores(ne,G,te){const Y=[],S=[];for(let ee=0;ee<G;ee++){let Se=Number.MIN_VALUE,he=-1;for(let Ne=0;Ne<te;Ne++)ne[ee*te+Ne]>Se&&(Se=ne[ee*te+Ne],he=Ne);Y[ee]=Se,S[ee]=he}return[Y,S]}detect(ne,G=20,te=.5){var Y=this;return ce(function*(){return Y.infer(ne,G,te)})()}dispose(){null!=this.model&&this.model.dispose()}}ye.ObjectDetection=$,ye.load=ce(function*(se={}){if(null==q)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");const ne=se.base||"lite_mobilenet_v2",G=se.modelUrl;if(-1===["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(ne))throw new Error(`ObjectDetection constructed with invalid base model ${ne}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);const te=new $(ne,G);return yield te.load(),te}),ye.version="2.2.3",Object.defineProperty(ye,"__esModule",{value:!0})}(Oe,I(7926),I(3557))},7926:(st,Oe,I)=>{"use strict";I.r(Oe),I.d(Oe,{GraphModel:()=>bs,deregisterOp:()=>Ae,loadGraphModel:()=>aa,loadGraphModelSync:()=>Xi,registerOp:()=>Q,version_converter:()=>Fo});var ce={};I.r(ce),I.d(ce,{json:()=>De});var ye={};I.r(ye),I.d(ye,{json:()=>Ye});var H={};I.r(H),I.d(H,{json:()=>Pe});var q={};I.r(q),I.d(q,{json:()=>tt});var T={};I.r(T),I.d(T,{json:()=>et});var $={};I.r($),I.d($,{json:()=>mt});var se={};I.r(se),I.d(se,{json:()=>qe});var ne={};I.r(ne),I.d(ne,{json:()=>At});var G={};I.r(G),I.d(G,{json:()=>Wn});var te={};I.r(te),I.d(te,{json:()=>Ut});var Y={};I.r(Y),I.d(Y,{json:()=>ge});var S={};I.r(S),I.d(S,{json:()=>Be});var ee={};I.r(ee),I.d(ee,{json:()=>Xe});var Se={};I.r(Se),I.d(Se,{json:()=>vt});var he={};I.r(he),I.d(he,{json:()=>cn});var Ne={};I.r(Ne),I.d(Ne,{json:()=>un});var Qe={};I.r(Qe),I.d(Qe,{json:()=>kn});var Ke={};I.r(Ke),I.d(Ke,{json:()=>Cn});var _t={};I.r(_t),I.d(_t,{json:()=>lr});var Ze={};I.r(Ze),I.d(Ze,{OP_SCOPE_SUFFIX:()=>xe.zvA,abs:()=>xe.WnP,acos:()=>xe.Khb,acosh:()=>xe.__u,add:()=>xe.IHx,addN:()=>xe.QBD,all:()=>xe.$6P,any:()=>xe.YjB,argMax:()=>xe.NqF,argMin:()=>xe.vHJ,asin:()=>xe.ZRM,asinh:()=>xe.VfV,atan:()=>xe.z4N,atan2:()=>xe.fvJ,atanh:()=>xe.C80,avgPool:()=>xe.wS1,avgPool3d:()=>xe.uR5,basicLSTMCell:()=>xe.zEQ,batchNorm:()=>xe.tgs,batchNorm2d:()=>xe.Dxk,batchNorm3d:()=>xe.JY5,batchNorm4d:()=>xe.p3b,batchToSpaceND:()=>xe.E4h,bincount:()=>xe.yE8,bitwiseAnd:()=>xe.ycw,booleanMaskAsync:()=>xe.anm,broadcastArgs:()=>xe.XsQ,broadcastTo:()=>xe.UFq,buffer:()=>xe.f3b,cast:()=>xe.pju,ceil:()=>xe.mDi,clipByValue:()=>xe.iUl,clone:()=>xe.d9v,complex:()=>xe.PYB,concat:()=>xe.zoF,concat1d:()=>xe.gME,concat2d:()=>xe.Izb,concat3d:()=>xe.MNy,concat4d:()=>xe.ZaL,conv1d:()=>xe.PAt,conv2d:()=>xe.Tek,conv2dTranspose:()=>xe.bc,conv3d:()=>xe.pdZ,conv3dTranspose:()=>xe.$QV,cos:()=>xe.mCk,cosh:()=>xe.f9Y,cosineWindow:()=>xe.mew,cumprod:()=>xe.$Gn,cumsum:()=>xe.zbp,denseBincount:()=>xe.ppE,depthToSpace:()=>xe.nTT,depthwiseConv2d:()=>xe.B10,diag:()=>xe.Ka3,dilation2d:()=>xe.WmZ,div:()=>xe.hiC,divNoNan:()=>xe.NTj,dot:()=>xe.AKD,dropout:()=>xe.rvX,einsum:()=>xe.WYO,elu:()=>xe.pyx,enclosingPowerOfTwo:()=>xe.GRh,ensureShape:()=>xe.EDe,equal:()=>xe.DgJ,erf:()=>xe.qNN,euclideanNorm:()=>xe.d2q,exp:()=>xe.Qqt,expandDims:()=>xe.dt4,expm1:()=>xe.t$B,eye:()=>xe.iyy,fft:()=>xe.kp_,fill:()=>xe.hlL,floor:()=>xe.GWj,floorDiv:()=>xe.qPi,fused:()=>xe.imm,gather:()=>xe.Iqj,gatherND:()=>xe.dbB,greater:()=>xe.pjt,greaterEqual:()=>xe.brS,ifft:()=>xe.Sxn,imag:()=>xe.asL,image:()=>xe.BHj,inTopKAsync:()=>xe.V3u,irfft:()=>xe.wx0,isFinite:()=>xe.xVT,isInf:()=>xe.UWc,isNaN:()=>xe.i2d,leakyRelu:()=>xe.hi7,less:()=>xe.d9m,lessEqual:()=>xe.zN1,linalg:()=>xe.$r2,linspace:()=>xe.SX3,localResponseNormalization:()=>xe.G9k,log:()=>xe.cM7,log1p:()=>xe.Krr,logSigmoid:()=>xe.e_t,logSoftmax:()=>xe.CmS,logSumExp:()=>xe.l_t,logicalAnd:()=>xe.HvI,logicalNot:()=>xe.hJK,logicalOr:()=>xe.K5V,logicalXor:()=>xe.egP,losses:()=>xe.MB5,lowerBound:()=>xe.eab,matMul:()=>xe.OI3,max:()=>xe.Fp7,maxPool:()=>xe._sB,maxPool3d:()=>xe.YQQ,maxPoolWithArgmax:()=>xe.Ip$,maximum:()=>xe.gWQ,mean:()=>xe.J69,meshgrid:()=>xe.ry_,min:()=>xe.VV$,minimum:()=>xe.LTh,mirrorPad:()=>xe.VdP,mod:()=>xe.wQq,moments:()=>xe.Gi7,movingAverage:()=>xe.p_,mul:()=>xe.dC7,multiRNNCell:()=>xe.rq4,multinomial:()=>xe.SJ_,neg:()=>xe.W76,norm:()=>xe.KOy,notEqual:()=>xe.Quu,oneHot:()=>xe.lfX,ones:()=>xe.iUs,onesLike:()=>xe.JpU,op:()=>xe.op,outerProduct:()=>xe.N2O,pad:()=>xe.vku,pad1d:()=>xe.pNR,pad2d:()=>xe.koy,pad3d:()=>xe.t1L,pad4d:()=>xe.lGY,pool:()=>xe.d_R,pow:()=>xe.sQ3,prelu:()=>xe.AL3,print:()=>xe.S0v,prod:()=>xe.WVs,raggedGather:()=>xe.$gW,raggedRange:()=>xe.VT$,raggedTensorToTensor:()=>xe.N89,rand:()=>xe.TN_,randomGamma:()=>xe.wzB,randomNormal:()=>xe.nGf,randomStandardNormal:()=>xe.ruB,randomUniform:()=>xe.LGj,randomUniformInt:()=>xe.pe5,range:()=>xe.w6H,real:()=>xe.kwC,reciprocal:()=>xe.M25,relu:()=>xe.UYe,relu6:()=>xe.btT,reshape:()=>xe.XLQ,reverse:()=>xe.GYS,reverse1d:()=>xe.SDf,reverse2d:()=>xe.diP,reverse3d:()=>xe.sx7,reverse4d:()=>xe.mG2,rfft:()=>xe.QEs,round:()=>xe.NMM,rsqrt:()=>xe.bp0,scalar:()=>xe.iD$,scatterND:()=>xe.snQ,searchSorted:()=>xe.zcT,selu:()=>xe.U8D,separableConv2d:()=>xe.U_I,setdiff1dAsync:()=>xe.ODp,sigmoid:()=>xe.XD2,sign:()=>xe.Xxe,signal:()=>xe.tdS,sin:()=>xe.O$l,sinh:()=>xe.R_K,slice:()=>xe.tPi,slice1d:()=>xe.jZU,slice2d:()=>xe.SmN,slice3d:()=>xe.CnO,slice4d:()=>xe.p0P,softmax:()=>xe.XAC,softplus:()=>xe.Wvh,spaceToBatchND:()=>xe.fBT,sparse:()=>xe.rVs,sparseToDense:()=>xe.ers,spectral:()=>xe.uN7,split:()=>xe.Vl2,sqrt:()=>xe._b3,square:()=>xe.h62,squaredDifference:()=>xe.$i,squeeze:()=>xe.L9e,stack:()=>xe.knu,step:()=>xe.Nbs,stridedSlice:()=>xe.NXj,string:()=>xe.Z_8,sub:()=>xe.luU,sum:()=>xe.Smz,tan:()=>xe.ORZ,tanh:()=>xe.AEp,tensor:()=>xe.XeE,tensor1d:()=>xe.RRF,tensor2d:()=>xe.odF,tensor3d:()=>xe.wOQ,tensor4d:()=>xe.yXz,tensor5d:()=>xe.Bfx,tensor6d:()=>xe.xZs,tensorScatterUpdate:()=>xe.Pg0,tile:()=>xe.Gg6,topk:()=>xe.hg7,transpose:()=>xe.p4s,truncatedNormal:()=>xe.Xu6,unique:()=>xe.Two,unsortedSegmentSum:()=>xe.pUJ,unstack:()=>xe.HHK,upperBound:()=>xe.GaM,variable:()=>xe.VD$,where:()=>xe.arb,whereAsync:()=>xe.itS,zeros:()=>xe.lls,zerosLike:()=>xe.P84});var re=I(3557);(0,re.env)().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,f=>{f&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var ie,Je=I(5861),ue=function(f){return f[f.DT_INVALID=0]="DT_INVALID",f[f.DT_FLOAT=1]="DT_FLOAT",f[f.DT_DOUBLE=2]="DT_DOUBLE",f[f.DT_INT32=3]="DT_INT32",f[f.DT_UINT8=4]="DT_UINT8",f[f.DT_INT16=5]="DT_INT16",f[f.DT_INT8=6]="DT_INT8",f[f.DT_STRING=7]="DT_STRING",f[f.DT_COMPLEX64=8]="DT_COMPLEX64",f[f.DT_INT64=9]="DT_INT64",f[f.DT_BOOL=10]="DT_BOOL",f[f.DT_QINT8=11]="DT_QINT8",f[f.DT_QUINT8=12]="DT_QUINT8",f[f.DT_QINT32=13]="DT_QINT32",f[f.DT_BFLOAT16=14]="DT_BFLOAT16",f[f.DT_QINT16=15]="DT_QINT16",f[f.DT_QUINT16=16]="DT_QUINT16",f[f.DT_UINT16=17]="DT_UINT16",f[f.DT_COMPLEX128=18]="DT_COMPLEX128",f[f.DT_HALF=19]="DT_HALF",f[f.DT_RESOURCE=20]="DT_RESOURCE",f[f.DT_VARIANT=21]="DT_VARIANT",f[f.DT_UINT32=22]="DT_UINT32",f[f.DT_UINT64=23]="DT_UINT64",f[f.DT_FLOAT_REF=101]="DT_FLOAT_REF",f[f.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",f[f.DT_INT32_REF=103]="DT_INT32_REF",f[f.DT_UINT8_REF=104]="DT_UINT8_REF",f[f.DT_INT16_REF=105]="DT_INT16_REF",f[f.DT_INT8_REF=106]="DT_INT8_REF",f[f.DT_STRING_REF=107]="DT_STRING_REF",f[f.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",f[f.DT_INT64_REF=109]="DT_INT64_REF",f[f.DT_BOOL_REF=110]="DT_BOOL_REF",f[f.DT_QINT8_REF=111]="DT_QINT8_REF",f[f.DT_QUINT8_REF=112]="DT_QUINT8_REF",f[f.DT_QINT32_REF=113]="DT_QINT32_REF",f[f.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",f[f.DT_QINT16_REF=115]="DT_QINT16_REF",f[f.DT_QUINT16_REF=116]="DT_QUINT16_REF",f[f.DT_UINT16_REF=117]="DT_UINT16_REF",f[f.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",f[f.DT_HALF_REF=119]="DT_HALF_REF",f[f.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",f[f.DT_VARIANT_REF=121]="DT_VARIANT_REF",f[f.DT_UINT32_REF=122]="DT_UINT32_REF",f[f.DT_UINT64_REF=123]="DT_UINT64_REF",f}(ue||{});!function(f){let d;var p;(p=d=f.CheckpointFormatVersion||(f.CheckpointFormatVersion={}))[p.LEGACY=0]="LEGACY",p[p.V1=1]="V1",p[p.V2=2]="V2"}(ie||(ie={}));const N={};function Q(f,d){N[f]={tfOpName:f,category:"custom",inputs:[],attrs:[],customExecutor:d}}function le(f){return N[f]}function Ae(f){delete N[f]}function v(f,d,p,w,z){const U=d.inputParams[f];if(U&&void 0!==U.inputIndexStart){const X=U.inputIndexStart,Ee=0===U.inputIndexEnd?void 0:void 0===U.inputIndexEnd?X+1:U.inputIndexEnd,rt=X<0?d.inputNames.length+X:X;if("tensor"===U.type)return Le(d.inputNames[rt],p,w,z);if("tensors"===U.type){const bt=d.inputs.slice(X,Ee);return d.inputNames.slice(X,Ee).filter((qt,Jt)=>{var Nt;return"NoOp"!==(null===(Nt=bt[Jt])||void 0===Nt?void 0:Nt.op)}).map(qt=>Le(qt,p,w,z))}const nt=Le(d.inputNames[rt],p,w,z),Fe=nt.dataSync();return"number"===U.type?Fe[0]:re.util.toNestedArray(nt.shape,Fe)}const J=d.attrParams[f];return J&&J.value}function Le(f,d,p,w){const[z,U]=Ie(f,p);if(null!=w){const X=w.getHashTableHandleByName(z);if(null!=X)return X}const J=p.currentContextIds.find(X=>!!d[Te(z,X)]);return void 0!==J?d[Te(z,J)][U]:void 0}function pe(f,d,p){return d[Te(f,p.currentContextId)]}function _e(f,d){const[p,w,z]=Ie(f,d);return[Te(p,d&&d.currentContextId),w,z]}function Te(f,d){return d?`${f}-${d}`:f}function Ie(f,d){if(""===f)return["",0,void 0];const p=null!=d&&null!=d.parseNodeNameCache;if(p){const U=d.parseNodeNameCache.get(f);if(null!=U)return U}const w=f.split(":");let z;if(1===w.length)z=[f,0,void 0];else{const J=3===w.length?w[1]:void 0;z=[w[0],Number(w[w.length-1]),J]}return p&&d.parseNodeNameCache.set(f,z),z}function ut(f,d,p){let w=v("pad",f,d,p);if("explicit"===w){w=v("explicitPaddings",f,d,p);const z=[[0,0],[0,0],[0,0],[0,0]];for(let U=0;U<4;U++)z[U][0]=w[2*U],z[U][1]=w[2*U+1];return z}return w}function Ce(f){return f.kept?f:(0,re.clone)(f)}const De=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Ye=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Pe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],tt=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],et=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],mt=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],qe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],At=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Wn=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Ut=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],ge=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Be=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Xe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],vt=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],cn=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],un=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],kn=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Cn=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],lr=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class hi{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const p=[].concat(...[ce,ye,H,q,T,$,se,ne,G,te,Y,S,ee,Se,he,Ne,Qe,Ke,_t].map(w=>w.json));this.opMappers=p.reduce((w,z)=>(w[z.tfOpName]=z,w),{})}transformGraph(d,p={}){const z=[],U=[],J=[],X=d.node.reduce((Jt,Nt)=>(Jt[Nt.name]=this.mapNode(Nt),Nt.op.startsWith("Placeholder")?z.push(Jt[Nt.name]):"Const"===Nt.op?U.push(Jt[Nt.name]):(null==Nt.input||0===Nt.input.length)&&J.push(Jt[Nt.name]),Jt),{});let Ee=[];const rt=[];let nt={},Fe={};null!=p&&(nt=this.mapSignatureEntries(p.inputs),Fe=this.mapSignatureEntries(p.outputs));const bt=Object.keys(X);bt.forEach(Jt=>{const Nt=X[Jt];Nt.inputNames.forEach((sn,Kn)=>{const[Cr,,Vr]=_e(sn),Nn=X[Cr];if(null!=Nn.outputs){const ao=Nn.outputs.indexOf(Vr);-1!==ao&&(Nt.inputNames[Kn]=`${Cr}:${ao}`)}Nt.inputs.push(Nn),Nn.children.push(Nt)})}),0===Object.keys(Fe).length?bt.forEach(Jt=>{const Nt=X[Jt];0===Nt.children.length&&rt.push(Nt)}):Object.keys(Fe).forEach(Jt=>{const[Nt]=_e(Jt),sn=X[Nt];null!=sn&&(sn.signatureKey=Fe[Jt],rt.push(sn))}),Object.keys(nt).length>0?Object.keys(nt).forEach(Jt=>{const[Nt]=_e(Jt),sn=X[Nt];sn&&(sn.signatureKey=nt[Jt],Ee.push(sn))}):Ee=z;let yt={};null!=d.library&&null!=d.library.function&&(yt=d.library.function.reduce((Jt,Nt)=>(Jt[Nt.signature.name]=this.mapFunction(Nt),Jt),{}));const qt={nodes:X,inputs:Ee,outputs:rt,weights:U,placeholders:z,signature:p,functions:yt};return J.length>0&&(qt.initNodes=J),qt}mapSignatureEntries(d){return Object.keys(d||{}).reduce((p,w)=>(p[d[w].name]=w,p),{})}mapNode(d){const p=le(d.op)||this.opMappers[d.op]||{};null==d.attr&&(d.attr={});const w={name:d.name,op:d.op,category:p.category,inputNames:(d.input||[]).map(z=>z.startsWith("^")?z.slice(1):z),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:d.attr,outputs:p.outputs};return null!=p.inputs&&(w.inputParams=p.inputs.reduce((z,U)=>(z[U.name]={type:U.type,inputIndexStart:U.start,inputIndexEnd:U.end},z),{})),null!=p.attrs&&(w.attrParams=p.attrs.reduce((z,U)=>{const J=U.type;let X;switch(U.type){case"string":X=us(d.attr,U.tfName,U.defaultValue),void 0===X&&U.tfDeprecatedName&&(X=us(d.attr,U.tfDeprecatedName,U.defaultValue));break;case"string[]":X=hs(d.attr,U.tfName,U.defaultValue),void 0===X&&U.tfDeprecatedName&&(X=hs(d.attr,U.tfDeprecatedName,U.defaultValue));break;case"number":X=To(d.attr,U.tfName,U.defaultValue||0),void 0===X&&U.tfDeprecatedName&&(X=To(d.attr,U.tfDeprecatedName,U.defaultValue));break;case"number[]":X=Rs(d.attr,U.tfName,U.defaultValue),void 0===X&&U.tfDeprecatedName&&(X=Rs(d.attr,U.tfDeprecatedName,U.defaultValue));break;case"bool":X=ds(d.attr,U.tfName,U.defaultValue),void 0===X&&U.tfDeprecatedName&&(X=ds(d.attr,U.tfDeprecatedName,U.defaultValue));break;case"bool[]":X=Ao(d.attr,U.tfName,U.defaultValue),void 0===X&&U.tfDeprecatedName&&(X=Ao(d.attr,U.tfDeprecatedName,U.defaultValue));break;case"shape":X=Js(d.attr,U.tfName,U.defaultValue),void 0===X&&U.tfDeprecatedName&&(X=Js(d.attr,U.tfDeprecatedName,U.defaultValue));break;case"shape[]":X=Ei(d.attr,U.tfName,U.defaultValue),void 0===X&&U.tfDeprecatedName&&(X=Ei(d.attr,U.tfDeprecatedName,U.defaultValue));break;case"dtype":X=$r(d.attr,U.tfName,U.defaultValue),void 0===X&&U.tfDeprecatedName&&(X=$r(d.attr,U.tfDeprecatedName,U.defaultValue));break;case"dtype[]":X=Ys(d.attr,U.tfName,U.defaultValue),void 0===X&&U.tfDeprecatedName&&(X=Ys(d.attr,U.tfDeprecatedName,U.defaultValue));break;case"func":X=Mo(d.attr,U.tfName,U.defaultValue),void 0===X&&U.tfDeprecatedName&&(X=Mo(d.attr,U.tfDeprecatedName,U.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${U.type} for op: ${d.op}`)}return z[U.name]={value:X,type:J},z},{})),w}mapFunction(d){const p=d.nodeDef,z=[];let U={};null!=p&&(U=p.reduce((Fe,bt)=>(Fe[bt.name]=this.mapNode(bt),"Const"===bt.op&&z.push(Fe[bt.name]),Fe),{}));const J=[],X=[];d.signature.inputArg.forEach(Fe=>{const[bt]=_e(Fe.name),yt={name:bt,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:Ns(Fe.type),type:"dtype"}},children:[]};yt.signatureKey=Fe.name,J.push(yt),U[bt]=yt}),Object.keys(U).forEach(Fe=>{const bt=U[Fe];bt.inputNames.forEach((yt,qt)=>{const[Jt,,Nt]=_e(yt),sn=U[Jt];if(null!=sn.outputs){const Kn=sn.outputs.indexOf(Nt);-1!==Kn&&(bt.inputNames[qt]=`${Jt}:${Kn}`)}bt.inputs.push(sn),sn.children.push(bt)})});const rt=d.ret;d.signature.outputArg.forEach(Fe=>{const[bt,yt]=_e(rt[Fe.name]),qt=U[bt];null!=qt&&(qt.defaultOutput=yt,X.push(qt))});const nt=this.mapArgsToSignature(d);return{nodes:U,inputs:J,outputs:X,weights:z,placeholders:[],signature:nt}}mapArgsToSignature(d){return{methodName:d.signature.name,inputs:d.signature.inputArg.reduce((p,w)=>(p[w.name]=this.mapArgToTensorInfo(w),p),{}),outputs:d.signature.outputArg.reduce((p,w)=>(p[w.name]=this.mapArgToTensorInfo(w,d.ret),p),{})}}mapArgToTensorInfo(d,p){let w=d.name;return null!=p&&(w=p[w]),{name:w,dtype:d.type}}}function As(f,d){const p=Array.isArray(f)?String.fromCharCode.apply(null,f):function nr(f){const d=(0,re.env)().global;if(typeof d.atob<"u")return d.atob(f);if(typeof Buffer<"u")return new Buffer(f,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(f);return d?p:p.toLowerCase()}function us(f,d,p,w=!1){const z=f[d];return null!=z?As(z.s,w):p}function ds(f,d,p){const w=f[d];return w?w.b:p}function To(f,d,p){const w=f[d]||{},z=null!=w.i?w.i:null!=w.f?w.f:p;return"number"==typeof z?z:parseInt(z,10)}function Ns(f){switch("string"==typeof f&&(f=ue[f]),f){case ue.DT_FLOAT:case ue.DT_HALF:return"float32";case ue.DT_INT32:case ue.DT_INT64:case ue.DT_INT8:case ue.DT_UINT8:return"int32";case ue.DT_BOOL:return"bool";case ue.DT_DOUBLE:return"float32";case ue.DT_STRING:return"string";default:return null}}function Mo(f,d,p){const w=f[d];return w&&w.func?w.func.name:p}function $r(f,d,p){const w=f[d];return w&&w.type?Ns(w.type):p}function Ys(f,d,p){const w=f[d];return w&&w.list&&w.list.type?w.list.type.map(z=>Ns(z)):p}function Qs(f){if(!f.unknownRank)return null!=f.dim?f.dim.map(d=>"number"==typeof d.size?d.size:parseInt(d.size,10)):[]}function Js(f,d,p){const w=f[d];return w&&w.shape?Qs(w.shape):p}function Rs(f,d,p){const w=f[d];return w?((w.list.f&&w.list.f.length?w.list.f:w.list.i)||[]).map(z=>"number"==typeof z?z:parseInt(z,10)):p}function hs(f,d,p,w=!1){const z=f[d];return z&&z.list&&z.list.s?z.list.s.map(U=>As(U,w)):p}function Ei(f,d,p){const w=f[d];return w&&w.list&&w.list.shape?w.list.shape.map(z=>Qs(z)):p}function Ao(f,d,p){const w=f[d];return w&&w.list&&w.list.b?w.list.b:p}class fs{constructor(d,p,w){this.node=d,this.tensorMap=p,this.context=w,this.inputs=[],this.attrs={},this.inputs=d.inputNames.map(z=>this.getInput(z)),null!=d.rawAttrs&&(this.attrs=Object.keys(d.rawAttrs).reduce((z,U)=>(z[U]=this.getAttr(U),z),{}))}getInput(d){return Le(d,this.tensorMap,this.context)}getAttr(d,p){const w=this.node.rawAttrs[d];if(null!=w.tensor)return Le(d,this.tensorMap,this.context);if(null!=w.i||null!=w.f)return To(this.node.rawAttrs,d,p);if(null!=w.s)return us(this.node.rawAttrs,d,p);if(null!=w.b)return ds(this.node.rawAttrs,d,p);if(null!=w.shape)return Js(this.node.rawAttrs,d,p);if(null!=w.type)return $r(this.node.rawAttrs,d,p);if(null!=w.list){if(null!=w.list.i||null!=w.list.f)return Rs(this.node.rawAttrs,d,p);if(null!=w.list.s)return hs(this.node.rawAttrs,d,p);if(null!=w.list.shape)return Ei(this.node.rawAttrs,d,p);if(null!=w.list.b)return Ao(this.node.rawAttrs,d,p);if(null!=w.list.type)return Ys(this.node.rawAttrs,d,p)}return p}}var xe=I(9678);function gr(f,d,p=""){if("number"!=typeof f&&"number"!=typeof d){re.util.assert(f.length===d.length,()=>p+` Shapes ${f} and ${d} must match`);for(let w=0;w<f.length;w++){const z=f[w],U=d[w];re.util.assert(z<0||U<0||z===U,()=>p+` Shapes ${f} and ${d} must match`)}}}function eo(f){return!("number"==typeof f||f.some(d=>d<0))}function ms(f,d,p){let w=fi(f,p);const z=!eo(w);if(z&&0===d.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${w}`);if(z&&d.forEach(U=>{w=fi(U.shape,w)}),!eo(w))throw new Error(`Non-fully-defined elementShape: ${w}`);return w}function fi(f,d){if("number"==typeof f)return d;if("number"==typeof d)return f;if(f.length!==d.length)throw new Error(`Incompatible ranks during merge: ${f} vs. ${d}`);const p=[];for(let w=0;w<f.length;++w){const z=f[w],U=d[w];if(z>=0&&U>=0&&z!==U)throw new Error(`Incompatible shape during merge: ${f} vs. ${d}`);p[w]=z>=0?z:U}return p}class ea{constructor(d,p,w,z,U,J,X){this.name=d,this.dtype=p,this.maxSize=w,this.elementShape=z,this.identicalElementShapes=U,this.dynamicSize=J,this.clearAfterRead=X,this.tensors=[],this.closed_=!1,this.idTensor=(0,re.scalar)(0),(0,re.keep)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(d){this.tensors.forEach(p=>{(null==d||!d.has(p.tensor.id))&&p.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(d){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(d<0||d>=this.size())throw new Error(`Tried to read from index ${d}, but array size is: ${this.size()}`);const p=this.tensors[d];if(p.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${d} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(p.cleared=!0),p.read=!0,p.tensor}readMany(d){return d.map(p=>this.read(p))}write(d,p){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(d<0||!this.dynamicSize&&d>=this.maxSize)throw new Error(`Tried to write to index ${d}, but array is not resizeable and size is: ${this.maxSize}`);const w=this.tensors[d]||{};if(p.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${d},\n          because the value dtype is ${p.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=p.shape),gr(this.elementShape,p.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${d}.`),w.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${d}, because it has already been read.`);if(w.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${d}, because it has already been written.`);w.tensor=p,(0,re.keep)(p),w.written=!0,this.tensors[d]=w}writeMany(d,p){if(d.length!==p.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${d.length} is not the same as tensors size: ${p.length}.`);d.forEach((w,z)=>this.write(w,p[z]))}gather(d,p){if(p&&p!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${p}`);if(d)d=d.slice(0,this.size());else{d=[];for(let z=0;z<this.size();z++)d.push(z)}if(0===d.length)return(0,re.tensor)([],[0].concat(this.elementShape));const w=this.readMany(d);return gr(this.elementShape,w[0].shape,"TensorArray shape mismatch: "),(0,re.stack)(w,0)}concat(d){if(d&&d!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${d}`);if(0===this.size())return(0,re.tensor)([],[0].concat(this.elementShape));const p=[];for(let z=0;z<this.size();z++)p.push(z);const w=this.readMany(p);return gr(this.elementShape,w[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${w[0].shape})`),(0,re.concat)(w,0)}scatter(d,p){if(p.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${p.dtype}`);if(d.length!==p.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${d.length} vs. ${p.shape[0]}`);const w=Math.max(...d);if(!this.dynamicSize&&w>=this.maxSize)throw new Error(`Max index must be < array size (${w}  vs. ${this.maxSize})`);this.writeMany(d,(0,re.unstack)(p,0))}split(d,p){if(p.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${p.dtype}`);let w=0;const z=d.map(Ee=>(w+=Ee,w));if(w!==p.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${w}, and tensor's shape is: ${p.shape}`);if(!this.dynamicSize&&d.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${d.length}), and the TensorArray is not marked as dynamically resizeable`);const U=0===w?0:p.size/w,J=[];(0,re.tidy)(()=>{p=(0,re.reshape)(p,[1,w,U]);for(let Ee=0;Ee<d.length;++Ee)J[Ee]=(0,re.reshape)((0,re.slice)(p,[0,0===Ee?0:z[Ee-1],0],[1,d[Ee],U]),this.elementShape);return J});const X=[];for(let Ee=0;Ee<d.length;Ee++)X[Ee]=Ee;this.writeMany(X,J)}}class Pt{get id(){return this.idTensor.id}constructor(d,p,w,z=-1){this.tensors=d,this.elementShape=p,this.elementDtype=w,d?.forEach(U=>{if(w!==U.dtype)throw new Error(`Invalid data types; op elements ${w}, but list elements ${U.dtype}`);gr(p,U.shape,"TensorList shape mismatch: "),(0,re.keep)(U)}),this.idTensor=(0,re.scalar)(0),this.maxNumElements=z,(0,re.keep)(this.idTensor)}copy(){return new Pt([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(d){this.tensors.forEach(p=>{(null==d||!d.has(p.id))&&p.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(d,p,w=-1){if(p!==this.elementDtype)throw new Error(`Invalid data types; op elements ${p}, but list elements ${this.elementDtype}`);if(-1!==w&&this.tensors.length!==w)throw new Error(`Operation expected a list with ${w} elements but got a list with ${this.tensors.length} elements.`);gr(d,this.elementShape,"TensorList shape mismatch: ");const z=ms(this.elementShape,this.tensors,d);return(0,re.tidy)(()=>{const U=this.tensors.map(J=>(0,re.reshape)(J,z));return(0,re.stack)(U,0)})}popBack(d,p){if(p!==this.elementDtype)throw new Error(`Invalid data types; op elements ${p}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const w=ms(this.elementShape,this.tensors,d),z=this.tensors.pop();return z.kept=!1,gr(z.shape,d,"TensorList shape mismatch: "),(0,re.reshape)(z,w)}pushBack(d){if(d.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${d.dtype}, but list elements ${this.elementDtype}`);if(gr(d.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,re.keep)(d),this.tensors.push(d)}resize(d){if(d<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${d}`);if(-1!==this.maxNumElements&&d>this.maxNumElements)throw new Error(`TensorListResize input size ${d} is greater maxNumElement ${this.maxNumElements}.`);const p=new Pt([],this.elementShape,this.elementDtype,this.maxNumElements);p.tensors.length=d;for(let w=0;w<Math.min(this.tensors.length,d);++w)p.tensors[w]=this.tensors[w];return p}getItem(d,p,w){if(w!==this.elementDtype)throw new Error(`Invalid data types; op elements ${w}, but list elements ${this.elementDtype}`);if(d<0||d>this.tensors.length)throw new Error(`Trying to access element ${d} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[d])throw new Error(`element at index ${d} is null.`);gr(this.tensors[d].shape,p,"TensorList shape mismatch: ");const z=ms(this.elementShape,this.tensors,p);return(0,re.reshape)(this.tensors[d],z)}setItem(d,p){if(p.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${p.dtype}, but list elements ${this.elementDtype}`);if(d<0||-1!==this.maxNumElements&&d>=this.maxNumElements)throw new Error(`Trying to set element ${d} in a list with max ${this.maxNumElements} elements.`);gr(this.elementShape,p.shape,"TensorList shape mismatch: "),(0,re.keep)(p),null!=this.tensors[d]&&(this.tensors[d].kept=!1),this.tensors[d]=p}gather(d,p,w){if(p!==this.elementDtype)throw new Error(`Invalid data types; op elements ${p}, but list elements ${this.elementDtype}`);gr(this.elementShape,w,"TensorList shape mismatch: "),d=d.slice(0,this.size());const z=ms(this.elementShape,this.tensors,w);return 0===d.length?(0,re.tensor)([],[0].concat(z)):(0,re.tidy)(()=>{const U=d.map(J=>(0,re.reshape)(this.tensors[J],z));return(0,re.stack)(U,0)})}concat(d,p){if(d&&d!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${d}`);gr(this.elementShape,p,"TensorList shape mismatch: ");const w=ms(this.elementShape,this.tensors,p);return 0===this.size()?(0,re.tensor)([],[0].concat(w)):(0,re.tidy)(()=>{const z=this.tensors.map(U=>(0,re.reshape)(U,w));return(0,re.concat)(z,0)})}}const Si=function(){var f=(0,Je.Z)(function*(d,p,w){switch(d.op){case"If":case"StatelessIf":{const z=v("thenBranch",d,p,w),U=v("elseBranch",d,p,w),J=v("cond",d,p,w),X=v("args",d,p,w);return(yield J.data())[0]?w.functionMap[z].executeFunctionAsync(X,w.tensorArrayMap,w.tensorListMap):w.functionMap[U].executeFunctionAsync(X,w.tensorArrayMap,w.tensorListMap)}case"While":case"StatelessWhile":{const z=v("body",d,p,w),U=v("cond",d,p,w),J=v("args",d,p,w),X=yield w.functionMap[U].executeFunctionAsync(J,w.tensorArrayMap,w.tensorListMap),Ee=J.map(Fe=>Fe.id);let rt=yield X[0].data();X.forEach(Fe=>{!Fe.kept&&-1===Ee.indexOf(Fe.id)&&Fe.dispose()});let nt=J;for(;rt[0];){const Fe=nt;nt=yield w.functionMap[z].executeFunctionAsync(nt,w.tensorArrayMap,w.tensorListMap);const bt=nt.map(qt=>qt.id);Fe.forEach(qt=>{!qt.kept&&-1===Ee.indexOf(qt.id)&&-1===bt.indexOf(qt.id)&&qt.dispose()});const yt=yield w.functionMap[U].executeFunctionAsync(nt,w.tensorArrayMap,w.tensorListMap);rt=yield yt[0].data(),yt.forEach(qt=>{!qt.kept&&-1===Ee.indexOf(qt.id)&&-1===bt.indexOf(qt.id)&&qt.dispose()})}return nt}case"LoopCond":return[Ce(v("pred",d,p,w))];case"Switch":{const z=v("pred",d,p,w);let U=v("data",d,p,w);return U.kept||(U=Ce(U)),(yield z.data())[0]?[void 0,U]:[U,void 0]}case"Merge":{const z=d.inputNames.find(U=>void 0!==Le(U,p,w));return z?[Ce(Le(z,p,w))]:void 0}case"Enter":{const z=v("frameName",d,p,w),U=v("tensor",d,p,w);return w.enterFrame(z),[Ce(U)]}case"Exit":{const z=v("tensor",d,p,w);return w.exitFrame(),[Ce(z)]}case"NextIteration":{const z=v("tensor",d,p,w);return w.nextIteration(),[Ce(z)]}case"TensorArrayV3":{const z=v("size",d,p,w),U=v("dtype",d,p,w),J=v("elementShape",d,p,w),X=v("dynamicSize",d,p,w),Ee=v("clearAfterRead",d,p,w),rt=v("identicalElementShapes",d,p,w),nt=v("name",d,p,w),Fe=new ea(nt,U,z,J,rt,X,Ee);return w.addTensorArray(Fe),[Fe.idTensor,(0,re.scalar)(1)]}case"TensorArrayWriteV3":{const z=v("tensorArrayId",d,p,w),U=v("index",d,p,w),J=v("tensor",d,p,w),X=w.getTensorArray(z.id);return X.write(U,J),[X.idTensor]}case"TensorArrayReadV3":{const z=v("tensorArrayId",d,p,w),U=v("index",d,p,w);return[w.getTensorArray(z.id).read(U)]}case"TensorArrayGatherV3":{const z=v("tensorArrayId",d,p,w),U=v("indices",d,p,w),J=v("dtype",d,p,w);return[w.getTensorArray(z.id).gather(U,J)]}case"TensorArrayScatterV3":{const z=v("tensorArrayId",d,p,w),U=v("indices",d,p,w),J=v("tensor",d,p,w),X=w.getTensorArray(z.id);return X.scatter(U,J),[X.idTensor]}case"TensorArrayConcatV3":{const z=v("tensorArrayId",d,p,w),U=w.getTensorArray(z.id),J=v("dtype",d,p,w);return[U.concat(J)]}case"TensorArraySplitV3":{const z=v("tensorArrayId",d,p,w),U=v("tensor",d,p,w),J=v("lengths",d,p,w),X=w.getTensorArray(z.id);return X.split(J,U),[X.idTensor]}case"TensorArraySizeV3":{const z=v("tensorArrayId",d,p,w),U=w.getTensorArray(z.id);return[(0,re.scalar)(U.size(),"int32")]}case"TensorArrayCloseV3":{const z=v("tensorArrayId",d,p,w),U=w.getTensorArray(z.id);return U.clearAndClose(),[U.idTensor]}case"TensorListSetItem":{const z=v("tensorListId",d,p,w),U=v("index",d,p,w),J=v("tensor",d,p,w),X=w.getTensorList(z.id);return X.setItem(U,J),[X.idTensor]}case"TensorListGetItem":{const z=v("tensorListId",d,p,w),U=v("index",d,p,w),J=v("elementShape",d,p,w),X=v("elementDType",d,p,w);return[w.getTensorList(z.id).getItem(U,J,X)]}case"TensorListScatterV2":case"TensorListScatter":{const z=v("indices",d,p,w),Ee=function rn(f,d,p,w){if(d.length!==f.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${d.length} vs. ${f.shape[0]}`);const z=Math.max(...d);if(null!=w&&-1!==w&&z>=w)throw new Error(`Max index must be < array size (${z}  vs. ${w})`);const U=new Pt([],p,f.dtype,w),J=(0,re.unstack)(f,0);return d.forEach((X,Ee)=>{U.setItem(X,J[Ee])}),U}(v("tensor",d,p,w),z,v("elementShape",d,p,w),v("numElements",d,p,w));return w.addTensorList(Ee),[Ee.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const z=v("elementShape",d,p,w),U=v("elementDType",d,p,w);let J;J="TensorListReserve"===d.op?"numElements":"maxNumElements";const X=v(J,d,p,w),rt=function Wr(f,d,p,w){return new Pt([],f,d,w)}(z,U,0,"TensorListReserve"===d.op?-1:X);return w.addTensorList(rt),[rt.idTensor]}case"TensorListGather":{const z=v("tensorListId",d,p,w),U=v("indices",d,p,w),J=v("elementShape",d,p,w),X=v("elementDType",d,p,w);return[w.getTensorList(z.id).gather(U,X,J)]}case"TensorListStack":{const z=v("tensorListId",d,p,w),U=v("elementShape",d,p,w),J=v("elementDType",d,p,w),X=v("numElements",d,p,w);return[w.getTensorList(z.id).stack(U,J,X)]}case"TensorListFromTensor":{const X=function xn(f,d,p){const w=f.dtype;if(f.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${f.shape}`);if(f.dtype!==p)throw new Error(`Invalid data types; op elements ${f.dtype}, but list elements ${p}`);gr(f.shape.slice(1),d,"TensorList shape mismatch: ");const U=(0,re.unstack)(f);return new Pt(U,d,w)}(v("tensor",d,p,w),v("elementShape",d,p,w),v("elementDType",d,p,w));return w.addTensorList(X),[X.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const z=v("tensorListId",d,p,w),U=w.getTensorList(z.id),J=v("dtype",d,p,w),X=v("elementShape",d,p,w);return[U.concat(J,X)]}case"TensorListPushBack":{const z=v("tensorListId",d,p,w),U=v("tensor",d,p,w),J=w.getTensorList(z.id);return J.pushBack(U),[J.idTensor]}case"TensorListPopBack":{const z=v("tensorListId",d,p,w),U=v("elementShape",d,p,w),J=v("elementDType",d,p,w);return[w.getTensorList(z.id).popBack(U,J)]}case"TensorListSplit":{const z=v("tensor",d,p,w),U=v("elementShape",d,p,w),X=function Ui(f,d,p){let w=0;const z=d.map(nt=>(w+=nt,w));if(w!==f.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${w}, and tensor's shape is: ${f.shape}`);const J=fi(f.shape.slice(1),p),X=0===w?0:f.size/w,Ee=(0,re.tidy)(()=>{const nt=[];f=(0,re.reshape)(f,[1,w,X]);for(let Fe=0;Fe<d.length;++Fe)nt[Fe]=(0,re.reshape)((0,re.slice)(f,[0,0===Fe?0:z[Fe-1],0],[1,d[Fe],X]),J);return f.dispose(),nt}),rt=new Pt([],p,f.dtype,d.length);for(let nt=0;nt<Ee.length;nt++)rt.setItem(nt,Ee[nt]);return rt}(z,v("lengths",d,p,w),U);return w.addTensorList(X),[X.idTensor]}case"TensorListLength":{const z=v("tensorListId",d,p,w),U=w.getTensorList(z.id);return[(0,re.scalar)(U.size(),"int32")]}case"TensorListResize":{const z=v("tensorListId",d,p,w),U=v("size",d,p,w),X=w.getTensorList(z.id).resize(U);return w.addTensorList(X),[X.idTensor]}default:throw TypeError(`Node type ${d.op} is not implemented`)}});return function(p,w,z){return f.apply(this,arguments)}}();function pi(f,d,p){const[w,z]=v("fusedOps",f,d,p),U="biasadd"===w,J=!U,X="prelu"===z,Ee="fusedbatchnorm"===w,rt=v("numArgs",f,d,p);if(U){if(X&&2!==rt)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!X&&U&&1!==rt)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(Ee)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const nt=v("strides",f,d,p),Fe=ut(f,d,p),bt=v("dataFormat",f,d,p).toUpperCase(),yt=v("dilations",f,d,p);let[qt,Jt]=v("args",f,d,p);return J&&(Jt=qt,qt=void 0),{stride:nt,pad:Fe,dataFormat:bt,dilations:yt,biasArg:qt,preluArg:Jt,activationFunc:z,leakyreluAlpha:v("leakyreluAlpha",f,d,p)}}function ii(f,d,p){return{boxes:v("boxes",f,d,p),scores:v("scores",f,d,p),maxOutputSize:v("maxOutputSize",f,d,p),iouThreshold:v("iouThreshold",f,d,p),scoreThreshold:v("scoreThreshold",f,d,p),softNmsSigma:v("softNmsSigma",f,d,p)}}const na=function(){var f=(0,Je.Z)(function*(d,p,w,z,U=Ze){switch(d.op){case"NonMaxSuppressionV5":{const{boxes:J,scores:X,maxOutputSize:Ee,iouThreshold:rt,scoreThreshold:nt,softNmsSigma:Fe}=ii(d,p,w),bt=yield U.image.nonMaxSuppressionWithScoreAsync(J,X,Ee,rt,nt,Fe);return[bt.selectedIndices,bt.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:J,scores:X,maxOutputSize:Ee,iouThreshold:rt,scoreThreshold:nt}=ii(d,p,w),Fe=v("padToMaxOutputSize",d,p,w),bt=yield U.image.nonMaxSuppressionPaddedAsync(J,X,Ee,rt,nt,Fe);return[bt.selectedIndices,bt.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:J,scores:X,maxOutputSize:Ee,iouThreshold:rt,scoreThreshold:nt}=ii(d,p,w);return[yield U.image.nonMaxSuppressionAsync(J,X,Ee,rt,nt)]}case"Where":{const J=U.cast(v("condition",d,p,w),"bool"),X=[yield U.whereAsync(J)];return J.dispose(),X}case"ListDiff":return U.setdiff1dAsync(v("x",d,p,w),v("y",d,p,w));default:throw TypeError(`Node type ${d.op} is not implemented`)}});return function(p,w,z,U){return f.apply(this,arguments)}}();var Aa=I(8661);class ys{get id(){return this.handle.id}constructor(d,p){this.keyDType=d,this.valueDType=p,this.handle=(0,re.scalar)(0),this.tensorMap=new Map,(0,re.keep)(this.handle)}clearAndClose(){this.tensorMap.forEach(d=>d.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Aa.i(this.size(),"int32")}import(d,p){var w=this;return(0,Je.Z)(function*(){w.checkKeyAndValueTensor(d,p);const z=yield d.data();return w.tensorMap.forEach(U=>U.dispose()),w.tensorMap.clear(),(0,re.tidy)(()=>{const U=(0,re.unstack)(p),J=z.length,X=U.length;re.util.assert(J===X,()=>`The number of elements doesn't match, keys has ${J} elements, the values has ${X} elements.`);for(let Ee=0;Ee<J;Ee++){const rt=z[Ee],nt=U[Ee];(0,re.keep)(nt),w.tensorMap.set(rt,nt)}return w.handle})})()}find(d,p){var w=this;return(0,Je.Z)(function*(){w.checkKeyAndValueTensor(d,p);const z=yield d.data();return(0,re.tidy)(()=>{const U=[];for(let J=0;J<z.length;J++){const Ee=w.findWithDefault(z[J],p);U.push(Ee)}return(0,re.stack)(U)})})()}findWithDefault(d,p){return this.tensorMap.get(d)??p}checkKeyAndValueTensor(d,p){if(d.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${d.dtype}`);if(p.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${p.dtype}`)}}const to=function(){var f=(0,Je.Z)(function*(d,p,w,z){switch(d.op){case"HashTable":case"HashTableV2":{const U=z.getHashTableHandleByName(d.name);if(null!=U)return[U];{const J=v("keyDType",d,p,w),X=v("valueDType",d,p,w),Ee=new ys(J,X);return z.addHashTable(d.name,Ee),[Ee.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const U=v("tableHandle",d,p,w,z),J=v("keys",d,p,w),X=v("values",d,p,w);return[yield z.getHashTableById(U.id).import(J,X)]}case"LookupTableFind":case"LookupTableFindV2":{const U=v("tableHandle",d,p,w,z),J=v("keys",d,p,w),X=v("defaultValue",d,p,w);return[yield z.getHashTableById(U.id).find(J,X)]}case"LookupTableSize":case"LookupTableSizeV2":{const U=v("tableHandle",d,p,w,z);return[z.getHashTableById(U.id).tensorSize()]}default:throw TypeError(`Node type ${d.op} is not implemented`)}});return function(p,w,z,U){return f.apply(this,arguments)}}();function Hi(f,d,p,w,z=re.tidy){const U=((J,X,Ee)=>{switch(J.category){case"arithmetic":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"BiasAdd":case"AddV2":case"Add":return[w.add(v("a",f,d,p),v("b",f,d,p))];case"AddN":return[w.addN(v("tensors",f,d,p))];case"FloorMod":case"Mod":return[w.mod(v("a",f,d,p),v("b",f,d,p))];case"Mul":return[w.mul(v("a",f,d,p),v("b",f,d,p))];case"RealDiv":case"Div":return[w.div(v("a",f,d,p),v("b",f,d,p))];case"DivNoNan":return[w.divNoNan(v("a",f,d,p),v("b",f,d,p))];case"FloorDiv":return[w.floorDiv(v("a",f,d,p),v("b",f,d,p))];case"Sub":return[w.sub(v("a",f,d,p),v("b",f,d,p))];case"Minimum":return[w.minimum(v("a",f,d,p),v("b",f,d,p))];case"Maximum":return[w.maximum(v("a",f,d,p),v("b",f,d,p))];case"Pow":return[w.pow(v("a",f,d,p),v("b",f,d,p))];case"SquaredDifference":return[w.squaredDifference(v("a",f,d,p),v("b",f,d,p))];default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"basic_math":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"Abs":case"ComplexAbs":return[w.abs(v("x",f,d,p))];case"Acos":return[w.acos(v("x",f,d,p))];case"Acosh":return[w.acosh(v("x",f,d,p))];case"Asin":return[w.asin(v("x",f,d,p))];case"Asinh":return[w.asinh(v("x",f,d,p))];case"Atan":return[w.atan(v("x",f,d,p))];case"Atan2":return[w.atan2(v("x",f,d,p),v("y",f,d,p))];case"Atanh":return[w.atanh(v("x",f,d,p))];case"Ceil":return[w.ceil(v("x",f,d,p))];case"Complex":return[w.complex(v("real",f,d,p),v("imag",f,d,p))];case"Cos":return[w.cos(v("x",f,d,p))];case"Cosh":return[w.cosh(v("x",f,d,p))];case"Elu":return[w.elu(v("x",f,d,p))];case"Erf":return[w.erf(v("x",f,d,p))];case"Exp":return[w.exp(v("x",f,d,p))];case"Expm1":return[w.expm1(v("x",f,d,p))];case"Floor":return[w.floor(v("x",f,d,p))];case"Log":return[w.log(v("x",f,d,p))];case"Log1p":return[w.log1p(v("x",f,d,p))];case"Imag":return[w.imag(v("x",f,d,p))];case"Neg":return[w.neg(v("x",f,d,p))];case"Reciprocal":return[w.reciprocal(v("x",f,d,p))];case"Real":return[w.real(v("x",f,d,p))];case"Relu":return[w.relu(v("x",f,d,p))];case"Round":return[w.round(v("x",f,d,p))];case"Selu":return[w.selu(v("x",f,d,p))];case"Sigmoid":return[w.sigmoid(v("x",f,d,p))];case"Sin":return[w.sin(v("x",f,d,p))];case"Sign":return[w.sign(v("x",f,d,p))];case"Sinh":return[w.sinh(v("x",f,d,p))];case"Softplus":return[w.softplus(v("x",f,d,p))];case"Sqrt":return[w.sqrt(v("x",f,d,p))];case"Square":return[w.square(v("x",f,d,p))];case"Tanh":return[w.tanh(v("x",f,d,p))];case"Tan":return[w.tan(v("x",f,d,p))];case"ClipByValue":return[w.clipByValue(v("x",f,d,p),v("clipValueMin",f,d,p),v("clipValueMax",f,d,p))];case"Relu6":return[w.relu6(v("x",f,d,p))];case"Rsqrt":return[w.rsqrt(Le(f.inputNames[0],d,p))];case"LeakyRelu":return[w.leakyRelu(v("x",f,d,p),v("alpha",f,d,p))];case"Prelu":return[w.prelu(v("x",f,d,p),v("alpha",f,d,p))];case"IsNan":return[w.isNaN(Le(f.inputNames[0],d,p))];case"IsInf":return[w.isInf(Le(f.inputNames[0],d,p))];case"IsFinite":return[w.isFinite(Le(f.inputNames[0],d,p))];default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"control":return Si(J,X,Ee);case"convolution":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"Conv1D":{const z=v("stride",f,d,p),U=v("pad",f,d,p),J=v("dataFormat",f,d,p).toUpperCase(),X=v("dilation",f,d,p);return[w.conv1d(v("x",f,d,p),v("filter",f,d,p),z,U,J,X)]}case"Conv2D":{const z=v("strides",f,d,p),U=ut(f,d,p),J=v("dataFormat",f,d,p).toUpperCase(),X=v("dilations",f,d,p);return[w.conv2d(v("x",f,d,p),v("filter",f,d,p),[z[1],z[2]],U,J,[X[1],X[2]])]}case"_FusedConv2D":{const{stride:z,pad:U,dataFormat:J,dilations:X,biasArg:Ee,preluArg:rt,activationFunc:nt,leakyreluAlpha:Fe}=pi(f,d,p);return[w.fused.conv2d({x:v("x",f,d,p),filter:v("filter",f,d,p),strides:[z[1],z[2]],pad:U,dataFormat:J,dilations:[X[1],X[2]],bias:Ee,activation:nt,preluActivationWeights:rt,leakyreluAlpha:Fe})]}case"FusedDepthwiseConv2dNative":{const{stride:z,pad:U,dataFormat:J,dilations:X,biasArg:Ee,preluArg:rt,activationFunc:nt,leakyreluAlpha:Fe}=pi(f,d,p);return[w.fused.depthwiseConv2d({x:v("x",f,d,p),filter:v("filter",f,d,p),strides:[z[1],z[2]],pad:U,dataFormat:J,dilations:[X[1],X[2]],bias:Ee,activation:nt,preluActivationWeights:rt,leakyreluAlpha:Fe})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const z=v("outputShape",f,d,p),U=v("strides",f,d,p),J=ut(f,d,p);return[w.conv2dTranspose(v("x",f,d,p),v("filter",f,d,p),z,[U[1],U[2]],J)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const z=v("strides",f,d,p),U=ut(f,d,p),J=v("dilations",f,d,p),X=v("dataFormat",f,d,p).toUpperCase();return[w.depthwiseConv2d(v("input",f,d,p),v("filter",f,d,p),[z[1],z[2]],U,X,[J[1],J[2]])]}case"Conv3D":{const z=v("strides",f,d,p),U=v("pad",f,d,p),J=v("dataFormat",f,d,p).toUpperCase(),X=v("dilations",f,d,p);return[w.conv3d(v("x",f,d,p),v("filter",f,d,p),[z[1],z[2],z[3]],U,J,[X[1],X[2],X[3]])]}case"AvgPool":{const z=v("strides",f,d,p),U=v("pad",f,d,p),J=v("kernelSize",f,d,p);return[w.avgPool(v("x",f,d,p),[J[1],J[2]],[z[1],z[2]],U)]}case"MaxPool":{const z=v("strides",f,d,p),U=v("pad",f,d,p),J=v("kernelSize",f,d,p);return[w.maxPool(v("x",f,d,p),[J[1],J[2]],[z[1],z[2]],U)]}case"MaxPoolWithArgmax":{const z=v("strides",f,d,p),U=v("pad",f,d,p),J=v("kernelSize",f,d,p),X=v("includeBatchInIndex",f,d,p),{result:Ee,indexes:rt}=w.maxPoolWithArgmax(v("x",f,d,p),[J[1],J[2]],[z[1],z[2]],U,X);return[Ee,rt]}case"AvgPool3D":{const z=v("strides",f,d,p),U=v("pad",f,d,p),J=v("kernelSize",f,d,p);return[w.avgPool3d(v("x",f,d,p),[J[1],J[2],J[3]],[z[1],z[2],z[3]],U)]}case"MaxPool3D":{const z=v("strides",f,d,p),U=v("pad",f,d,p),J=v("kernelSize",f,d,p);return[w.maxPool3d(v("x",f,d,p),[J[1],J[2],J[3]],[z[1],z[2],z[3]],U)]}case"Dilation2D":{const z=v("strides",f,d,p),U=v("pad",f,d,p),J=v("dilations",f,d,p),X=z[1],Ee=z[2],rt=J[1],nt=J[2];return[w.dilation2d(v("x",f,d,p),v("filter",f,d,p),[X,Ee],U,[rt,nt],"NHWC")]}default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"creation":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"Fill":{const z=v("shape",f,d,p),U=v("dtype",f,d,p),J=v("value",f,d,p);return[w.fill(z,J,U)]}case"LinSpace":{const z=v("start",f,d,p),U=v("stop",f,d,p),J=v("num",f,d,p);return[w.linspace(z,U,J)]}case"Multinomial":{const z=v("logits",f,d,p),U=v("numSamples",f,d,p),J=v("seed",f,d,p);return[w.multinomial(z,U,J)]}case"OneHot":{const z=v("indices",f,d,p),U=v("depth",f,d,p),J=v("onValue",f,d,p),X=v("offValue",f,d,p),Ee=v("dtype",f,d,p);return[w.oneHot(z,U,J,X,Ee)]}case"Ones":return[w.ones(v("shape",f,d,p),v("dtype",f,d,p))];case"OnesLike":return[w.onesLike(v("x",f,d,p))];case"RandomStandardNormal":return[w.randomStandardNormal(v("shape",f,d,p),v("dtype",f,d,p),v("seed",f,d,p))];case"RandomUniform":return[w.randomUniform(v("shape",f,d,p),v("minval",f,d,p),v("maxval",f,d,p),v("dtype",f,d,p))];case"RandomUniformInt":return[w.randomUniformInt(v("shape",f,d,p),v("minval",f,d,p),v("maxval",f,d,p),v("seed",f,d,p))];case"Range":{const z=v("start",f,d,p),U=v("stop",f,d,p),J=v("step",f,d,p);return[w.range(z,U,J,v("dtype",f,d,p))]}case"TruncatedNormal":{const z=v("shape",f,d,p),U=v("mean",f,d,p),J=v("stdDev",f,d,p),X=v("seed",f,d,p);return[w.truncatedNormal(z,U,J,v("dtype",f,d,p),X)]}case"Zeros":return[w.zeros(v("shape",f,d,p),v("dtype",f,d,p))];case"ZerosLike":return[w.zerosLike(v("x",f,d,p))];default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"dynamic":return na(J,X,Ee);case"evaluation":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"LowerBound":{const z=v("sortedSequence",f,d,p),U=v("values",f,d,p);return[w.lowerBound(z,U)]}case"TopKV2":{const z=v("x",f,d,p),U=v("k",f,d,p),J=v("sorted",f,d,p),X=w.topk(z,U,J);return[X.values,X.indices]}case"UpperBound":{const z=v("sortedSequence",f,d,p),U=v("values",f,d,p);return[w.upperBound(z,U)]}case"Unique":{const z=v("x",f,d,p),U=w.unique(z);return[U.values,U.indices]}case"UniqueV2":{const z=v("x",f,d,p),U=v("axis",f,d,p),J=w.unique(z,U);return[J.values,J.indices]}default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"image":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"ResizeBilinear":{const z=v("images",f,d,p),U=v("size",f,d,p),J=v("alignCorners",f,d,p),X=v("halfPixelCenters",f,d,p);return[w.image.resizeBilinear(z,[U[0],U[1]],J,X)]}case"ResizeNearestNeighbor":{const z=v("images",f,d,p),U=v("size",f,d,p),J=v("alignCorners",f,d,p),X=v("halfPixelCenters",f,d,p);return[w.image.resizeNearestNeighbor(z,[U[0],U[1]],J,X)]}case"CropAndResize":{const z=v("image",f,d,p),U=v("boxes",f,d,p),J=v("boxInd",f,d,p),X=v("cropSize",f,d,p),Ee=v("method",f,d,p),rt=v("extrapolationValue",f,d,p);return[w.image.cropAndResize(z,U,J,X,Ee,rt)]}case"ImageProjectiveTransformV3":{const z=v("images",f,d,p),U=v("transforms",f,d,p),J=v("outputShape",f,d,p),X=v("fillValue",f,d,p),Ee=v("interpolation",f,d,p),rt=v("fillMode",f,d,p);return[w.image.transform(z,U,Ee.toLowerCase(),rt.toLowerCase(),X,J)]}default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"graph":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"Const":return d[f.name];case"PlaceholderWithDefault":const z=v("default",f,d,p);return[Le(f.name,d,p)||z];case"Placeholder":return[Le(f.name,d,p)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[Ce(v("x",f,d,p))];case"IdentityN":return v("x",f,d,p).map(nt=>Ce(nt));case"Shape":return[w.tensor1d(v("x",f,d,p).shape,"int32")];case"ShapeN":return v("x",f,d,p).map(nt=>w.tensor1d(nt.shape));case"Size":return[w.scalar(v("x",f,d,p).size,"int32")];case"Rank":return[w.scalar(v("x",f,d,p).rank,"int32")];case"NoOp":return[w.scalar(1)];case"Print":const J=v("x",f,d,p),X=v("data",f,d,p),Ee=v("message",f,d,p),rt=v("summarize",f,d,p);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(Ee);for(let nt=0;nt<X.length;nt++)console.log(Array.prototype.slice.call(X[nt].dataSync()).slice(0,rt));return[J];default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"logical":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"Equal":return[w.equal(v("a",f,d,p),v("b",f,d,p))];case"NotEqual":return[w.notEqual(v("a",f,d,p),v("b",f,d,p))];case"Greater":return[w.greater(v("a",f,d,p),v("b",f,d,p))];case"GreaterEqual":return[w.greaterEqual(v("a",f,d,p),v("b",f,d,p))];case"Less":return[w.less(v("a",f,d,p),v("b",f,d,p))];case"LessEqual":return[w.lessEqual(v("a",f,d,p),v("b",f,d,p))];case"LogicalAnd":return[w.logicalAnd(v("a",f,d,p),v("b",f,d,p))];case"LogicalNot":return[w.logicalNot(v("a",f,d,p))];case"LogicalOr":return[w.logicalOr(v("a",f,d,p),v("b",f,d,p))];case"Select":case"SelectV2":return[w.where(v("condition",f,d,p),v("a",f,d,p),v("b",f,d,p))];case"BitwiseAnd":return[w.bitwiseAnd(v("a",f,d,p),v("b",f,d,p))];default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"matrices":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[w.matMul(v("a",f,d,p),v("b",f,d,p),v("transposeA",f,d,p),v("transposeB",f,d,p))];case"Einsum":return[w.einsum(v("equation",f,d,p),...v("tensors",f,d,p))];case"Transpose":return[w.transpose(v("x",f,d,p),v("perm",f,d,p))];case"_FusedMatMul":const[z,U]=v("fusedOps",f,d,p),J="biasadd"===z,X="prelu"===U,Ee=v("numArgs",f,d,p),rt=v("leakyreluAlpha",f,d,p);if(J){if(X&&2!==Ee)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!X&&1!==Ee)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[nt,Fe]=v("args",f,d,p);return[w.fused.matMul({a:v("a",f,d,p),b:v("b",f,d,p),transposeA:v("transposeA",f,d,p),transposeB:v("transposeB",f,d,p),bias:nt,activation:U,preluActivationWeights:Fe,leakyreluAlpha:rt})];case"MatrixBandPart":return[w.linalg.bandPart(v("a",f,d,p),v("numLower",f,d,p),v("numUpper",f,d,p))];default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"normalization":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"EuclideanNorm":return[w.euclideanNorm(v("x",f,d,p),v("axis",f,d,p),v("keepDims",f,d,p))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[w.batchNorm(v("x",f,d,p),v("mean",f,d,p),v("variance",f,d,p),v("offset",f,d,p),v("scale",f,d,p),v("epsilon",f,d,p))];case"LRN":return[w.localResponseNormalization(v("x",f,d,p),v("radius",f,d,p),v("bias",f,d,p),v("alpha",f,d,p),v("beta",f,d,p))];case"Softmax":return[w.softmax(v("x",f,d,p))];case"LogSoftmax":return[w.logSoftmax(v("x",f,d,p))];default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"ragged":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"RaggedGather":{const{outputNestedSplits:z,outputDenseValues:U}=w.raggedGather(v("paramsNestedSplits",f,d,p),v("paramsDenseValues",f,d,p),v("indices",f,d,p),v("outputRaggedRank",f,d,p));return z.concat(U)}case"RaggedRange":{const{rtNestedSplits:z,rtDenseValues:U}=w.raggedRange(v("starts",f,d,p),v("limits",f,d,p),v("splits",f,d,p));return[z,U]}case"RaggedTensorToTensor":return[w.raggedTensorToTensor(v("shape",f,d,p),v("values",f,d,p),v("defaultValue",f,d,p),v("rowPartitionTensors",f,d,p),v("rowPartitionTypes",f,d,p))];default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"reduction":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"Max":{const X=v("axis",f,d,p),Ee=v("keepDims",f,d,p);return[w.max(v("x",f,d,p),X,Ee)]}case"Mean":{const X=v("axis",f,d,p),Ee=v("keepDims",f,d,p);return[w.mean(v("x",f,d,p),X,Ee)]}case"Min":{const X=v("axis",f,d,p),Ee=v("keepDims",f,d,p);return[w.min(v("x",f,d,p),X,Ee)]}case"Sum":{const X=v("axis",f,d,p),Ee=v("keepDims",f,d,p);return[w.sum(v("x",f,d,p),X,Ee)]}case"All":{const X=v("axis",f,d,p),Ee=v("keepDims",f,d,p);return[w.all(v("x",f,d,p),X,Ee)]}case"Any":{const X=v("axis",f,d,p),Ee=v("keepDims",f,d,p);return[w.any(v("x",f,d,p),X,Ee)]}case"ArgMax":{const X=v("axis",f,d,p);return[w.argMax(v("x",f,d,p),X)]}case"ArgMin":{const X=v("axis",f,d,p);return[w.argMin(v("x",f,d,p),X)]}case"Prod":{const X=v("axis",f,d,p),Ee=v("keepDims",f,d,p);return[w.prod(v("x",f,d,p),X,Ee)]}case"Cumprod":{const X=v("axis",f,d,p),Ee=v("exclusive",f,d,p),rt=v("reverse",f,d,p);return[w.cumprod(v("x",f,d,p),X,Ee,rt)]}case"Cumsum":{const X=v("axis",f,d,p),Ee=v("exclusive",f,d,p),rt=v("reverse",f,d,p);return[w.cumsum(v("x",f,d,p),X,Ee,rt)]}case"Bincount":const z=v("x",f,d,p),U=v("weights",f,d,p),J=v("size",f,d,p);return[w.bincount(z,U,J)];case"DenseBincount":{const X=v("x",f,d,p),Ee=v("weights",f,d,p),rt=v("size",f,d,p),nt=v("binaryOutput",f,d,p);return[w.denseBincount(X,Ee,rt,nt)]}default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"slice_join":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"ConcatV2":case"Concat":{const z=v("n",f,d,p),U=v("axis",f,d,p);let J=v("tensors",f,d,p);return J=J.slice(0,z),[w.concat(J,U)]}case"Gather":{const z=v("x",f,d,p),U=v("indices",f,d,p);return[w.gather(z,w.cast(U,"int32"),0)]}case"GatherV2":{const z=v("axis",f,d,p),U=v("batchDims",f,d,p),J=v("x",f,d,p),X=v("indices",f,d,p);return[w.gather(J,w.cast(X,"int32"),z,U)]}case"Reverse":{const z=v("dims",f,d,p),U=[];for(let X=0;X<z.length;X++)z[X]&&U.push(X);const J=v("x",f,d,p);return[w.reverse(J,U)]}case"ReverseV2":{const z=v("axis",f,d,p),U=v("x",f,d,p);return[w.reverse(U,z)]}case"Slice":{const z=v("begin",f,d,p),U=v("size",f,d,p);return[w.slice(v("x",f,d,p),z,U)]}case"StridedSlice":{const z=v("begin",f,d,p),U=v("end",f,d,p),J=v("strides",f,d,p),X=v("beginMask",f,d,p),Ee=v("endMask",f,d,p),rt=v("ellipsisMask",f,d,p),nt=v("newAxisMask",f,d,p),Fe=v("shrinkAxisMask",f,d,p),bt=v("x",f,d,p);return[w.stridedSlice(bt,z,U,J,X,Ee,rt,nt,Fe)]}case"Pack":return(0,re.tidy)(()=>{const z=v("axis",f,d,p),U=v("tensors",f,d,p),J=U[0].shape,X=w.squeeze(U[0]).shape,Ee=U.map(rt=>{const nt=re.util.arraysEqual(rt.shape,J);if(!nt&&!re.util.arraysEqual(w.squeeze(rt).shape,X))throw new Error("the input tensors shape does not match");return nt?rt:w.reshape(rt,J)});return[w.stack(Ee,z)]});case"Unpack":{const z=v("axis",f,d,p),U=v("tensor",f,d,p);return w.unstack(U,z)}case"Tile":{const z=v("reps",f,d,p);return[w.tile(v("x",f,d,p),z)]}case"Split":case"SplitV":{const z=v("axis",f,d,p),U=v("numOrSizeSplits",f,d,p),J=v("x",f,d,p);return w.split(J,U,z)}case"ScatterNd":{const z=v("indices",f,d,p),U=v("values",f,d,p),J=v("shape",f,d,p);return[w.scatterND(z,U,J)]}case"GatherNd":{const z=v("x",f,d,p),U=v("indices",f,d,p);return[w.gatherND(z,U)]}case"SparseToDense":{const z=v("sparseIndices",f,d,p),U=v("outputShape",f,d,p),J=v("sparseValues",f,d,p),X=v("defaultValue",f,d,p);return[w.sparseToDense(z,J,U,J.dtype===X.dtype?X:w.cast(X,J.dtype))]}case"TensorScatterUpdate":{const z=v("indices",f,d,p),U=v("values",f,d,p),J=v("tensor",f,d,p);return[w.tensorScatterUpdate(J,z,U)]}default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"sparse":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"SparseFillEmptyRows":{const{outputIndices:z,outputValues:U,emptyRowIndicator:J,reverseIndexMap:X}=w.sparse.sparseFillEmptyRows(v("indices",f,d,p),v("values",f,d,p),v("denseShape",f,d,p),v("defaultValue",f,d,p));return[z,U,J,X]}case"SparseReshape":{const{outputIndices:z,outputShape:U}=w.sparse.sparseReshape(v("inputIndices",f,d,p),v("inputShape",f,d,p),v("newShape",f,d,p));return[z,U]}case"SparseSegmentMean":return[w.sparse.sparseSegmentMean(v("data",f,d,p),v("indices",f,d,p),v("segmentIds",f,d,p))];case"SparseSegmentSum":return[w.sparse.sparseSegmentSum(v("data",f,d,p),v("indices",f,d,p),v("segmentIds",f,d,p))];default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"spectral":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"FFT":return[w.fft(v("x",f,d,p))];case"IFFT":return[w.ifft(v("x",f,d,p))];case"RFFT":return[w.rfft(v("x",f,d,p))];case"IRFFT":return[w.irfft(v("x",f,d,p))];default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"string":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"StaticRegexReplace":return[w.string.staticRegexReplace(v("input",f,d,p),v("pattern",f,d,p),v("rewrite",f,d,p),v("replaceGlobal",f,d,p))];case"StringNGrams":{const{nGrams:z,nGramsSplits:U}=w.string.stringNGrams(v("data",f,d,p),v("dataSplits",f,d,p),v("separator",f,d,p),v("nGramWidths",f,d,p),v("leftPad",f,d,p),v("rightPad",f,d,p),v("padWidth",f,d,p),v("preserveShortSequences",f,d,p));return[z,U]}case"StringSplit":{const{indices:z,values:U,shape:J}=w.string.stringSplit(v("input",f,d,p),v("delimiter",f,d,p),v("skipEmpty",f,d,p));return[z,U,J]}case"StringToHashBucketFast":return[w.string.stringToHashBucketFast(v("input",f,d,p),v("numBuckets",f,d,p))];default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"transformation":return z(()=>((f,d,p,w=Ze)=>{switch(f.op){case"Cast":return[w.cast(v("x",f,d,p),v("dtype",f,d,p))];case"ExpandDims":{const z=v("axis",f,d,p);return[w.expandDims(v("x",f,d,p),z)]}case"Squeeze":{const z=v("axis",f,d,p);return[w.squeeze(v("x",f,d,p),z)]}case"Reshape":return[w.reshape(v("x",f,d,p),v("shape",f,d,p))];case"EnsureShape":return[w.ensureShape(v("x",f,d,p),v("shape",f,d,p))];case"MirrorPad":return[w.mirrorPad(v("x",f,d,p),v("padding",f,d,p),v("mode",f,d,p))];case"PadV2":case"Pad":return[w.pad(v("x",f,d,p),v("padding",f,d,p),v("constantValue",f,d,p))];case"SpaceToBatchND":{const z=v("blockShape",f,d,p),U=v("paddings",f,d,p);return[w.spaceToBatchND(v("x",f,d,p),z,U)]}case"BatchToSpaceND":{const z=v("blockShape",f,d,p),U=v("crops",f,d,p);return[w.batchToSpaceND(v("x",f,d,p),z,U)]}case"DepthToSpace":{const z=v("blockSize",f,d,p),U=v("dataFormat",f,d,p).toUpperCase();return[w.depthToSpace(v("x",f,d,p),z,U)]}case"BroadcastTo":return[w.broadcastTo(v("x",f,d,p),v("shape",f,d,p))];case"BroadcastArgs":return[w.broadcastArgs(v("s0",f,d,p),v("s1",f,d,p))];default:throw TypeError(`Node type ${f.op} is not implemented`)}})(J,X,Ee));case"hash_table":return to(J,X,Ee,w);case"custom":const rt=le(J.op);if(rt&&rt.customExecutor)return rt.customExecutor(new fs(J,X,Ee));throw TypeError(`Custom op ${J.op} is not registered.`);default:throw TypeError(`Unknown op '${J.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(f,d,p);return re.util.isPromise(U)?U.then(J=>[].concat(J)):[].concat(U)}class An{constructor(d={},p={},w={},z={},U){this.weightMap=d,this.tensorArrayMap=p,this.tensorListMap=w,this.functionMap=z,this.parseNodeNameCache=U,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(d,p){return{id:d,frameName:p,iterationId:0}}set currentContext(d){this.contexts!==d&&(this.contexts=d,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const d=[];for(let p=0;p<this.contexts.length-1;p++){const w=this.contexts.slice(0,this.contexts.length-p);d.push(this.contextIdforContexts(w))}d.push(""),this._currentContextIds=d}contextIdforContexts(d){return d?d.map(p=>0===p.id&&0===p.iterationId?"":`${p.frameName}-${p.iterationId}`).join("/"):""}enterFrame(d){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,d)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const d=Object.assign({},this.contexts[this.contexts.length-1]);d.iterationId+=1,d.id=this.lastId,this.contexts.splice(-1,1,d),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(d){return this.weightMap[d]}addTensorArray(d){this.tensorArrayMap[d.id]=d}getTensorArray(d){return this.tensorArrayMap[d]}addTensorList(d){this.tensorListMap[d.id]=d}getTensorList(d){return this.tensorListMap[d]}dispose(d){for(const p in this.tensorArrayMap)this.tensorArrayMap[p].clearAndClose(d);for(const p in this.tensorListMap)this.tensorListMap[p].clearAndClose(d)}}function oo(f,d,p,w){const z=new Set,U=[];let J=null,X=null;const Ee=new Set,rt=new Set(Object.keys(f).map(bt=>Ie(bt)[0]));w=w||[];const nt=new Set(w.map(bt=>Ie(bt.name)[0])),Fe=[...d];for(;Fe.length>0;){const bt=Fe.pop();if((Rr(bt)||Kt(bt)||Ht(bt))&&null==J&&(J=bt,X=J.children.map(yt=>yt.name).filter(yt=>z.has(yt))),z.add(bt.name),null==p[bt.name]&&!rt.has(bt.name)&&!nt.has(bt.name)){if(0===bt.inputs.length){U.push(bt.name);continue}bt.inputs.forEach(yt=>{Ee.has(yt.name)||(Ee.add(yt.name),Fe.push(yt))})}}return{inputs:f,outputs:d,usedNodes:z,missingInputs:U,dynamicNode:J,syncInputs:X}}class jt extends Error{constructor(d){super(`NodesExecutionOrderError: ${d}`)}}const oa=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Gi=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),je=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Rr(f){return oa.has(f.op)}function Kt(f){return Gi.has(f.op)}function Ht(f){return je.has(f.op)}class Ki{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(d){const p=Object.keys(d).map(w=>d[w].map(z=>z.id));this._weightIds=[].concat(...p),this._weightMap=d}set resourceManager(d){this._resourceManager=d}get inputs(){return this._inputs.map(d=>({name:d.name,shape:d.attrParams.shape?d.attrParams.shape.value:void 0,dtype:d.attrParams.dtype?d.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(d=>({name:d.name,shape:d.attrParams.shape?d.attrParams.shape.value:void 0,dtype:d.attrParams.dtype?d.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(d=>d.signatureKey||d.name)}get outputNodes(){return this._outputs.map(d=>{const p=d.signatureKey||d.name;return d.defaultOutput?`${p}:${d.defaultOutput}`:p})}get functions(){return Object.keys(this._functions).reduce((d,p)=>(d[p]=this._functions[p].signature,d),{})}constructor(d,p){this.graph=d,this.parent=p,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=d.outputs,this._inputs=d.inputs,this._initNodes=d.initNodes,this._signature=d.signature,this._functions=d.functions,null!=d.functions&&Object.keys(d.functions).forEach(w=>{this._functionExecutorMap[w]=new Ki(d.functions[w],this)})}getCompilationKey(d,p){const w=d.map(U=>U.name).sort(),z=p.map(U=>U.name).sort();return w.join(this.SEPARATOR)+"--"+z.join(this.SEPARATOR)}compile(d,p){const w=oo(d,p,this.weightMap,this._initNodes),{missingInputs:z,dynamicNode:U,syncInputs:J}=w;if(null!=U)throw new Error(`This execution contains the node '${U.name}', which has the dynamic op '${U.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${J}]`);if(z.length>0){const rt=p.map(Fe=>Fe.name),nt=Object.keys(d);throw new Error(`Cannot compute the outputs [${rt}] from the provided inputs [${nt}]. Missing the following inputs: [${z}]`)}const X=function Oa(f,d){const{usedNodes:p,inputs:w}=d,J=Nt=>p.has("string"==typeof Nt?Nt:Nt.name);function X(Nt){return[...new Map(Nt.map(sn=>[sn.name,sn])).values()]}const Ee=X([...Object.keys(w).map(Nt=>Ie(Nt)[0]).map(Nt=>f.nodes[Nt]),...f.weights,...f.initNodes||[]]).filter(J),rt=X([...Ee,...Object.values(f.nodes)]).filter(J),nt=new Map(rt.map(Nt=>[Nt.name,Nt])),Fe={};for(const Nt of rt){Fe[Nt.name]=Fe[Nt.name]||0;for(const sn of Nt.children)J(sn)||(Fe[sn.name]=Number.POSITIVE_INFINITY),Fe[sn.name]=(Fe[sn.name]||0)+1}const bt=Object.entries(Fe).filter(([,Nt])=>0===Nt).map(([Nt])=>Nt),yt=[...bt];for(;bt.length>0;){const Nt=bt.pop(),sn=nt.get(Nt);for(const Kn of sn.children.filter(J))0==--Fe[Kn.name]&&(yt.push(Kn.name),bt.push(Kn.name))}const Jt=function Sn(f,d){const p=new Map(f.map(J=>[J.name,J])),w=d.map(J=>J.name),z=new Set(w);for(;w.length>0;){const J=w.pop(),X=p.get(J);for(const Ee of X.children)!p.has(Ee.name)||z.has(Ee.name)||(z.add(Ee.name),w.push(Ee.name))}return f.filter(J=>z.has(J.name))}(yt.map(Nt=>nt.get(Nt)),Ee);return function ks(f,d){const p=new Map(f.map((X,Ee)=>[X.name,Ee])),w=new Set(d.map(X=>X.name)),z=X=>w.has("string"==typeof X?X:X.name),U=new Set(f.map(X=>X.name)),J=X=>U.has("string"==typeof X?X:X.name);for(const X of f){for(const Ee of X.children.filter(J)){if(!p.has(Ee.name))throw new jt(`Child ${Ee.name} of node ${X.name} is unreachable.`);if(p.get(X.name)>p.get(Ee.name))throw new jt(`Node ${X.name} is scheduled to run after its child ${Ee.name}.`)}if(!z(X))for(const Ee of X.inputs){if(!p.has(Ee.name))throw new jt(`Input ${Ee.name} of node ${X.name} is unreachable.`);if(p.get(Ee.name)>p.get(X.name))throw new jt(`Node ${X.name} is scheduled to run before its input ${Ee.name}.`)}}}(Jt,Ee),Jt}(this.graph,w),Ee=function Wi(f){const d=new Map(f.map((X,Ee)=>[X.name,Ee])),p=Number.MAX_SAFE_INTEGER,w=f.map((X,Ee)=>Rr(X)?p:Ee),z=X=>w[d.get(X.name)]??-1,U=f.map((X,Ee)=>X.children.map(z).reduce((rt,nt)=>Math.max(rt,nt),w[Ee])),J=new Map;for(let X=0;X<f.length;++X){const Ee=U[X];if(Ee===p)continue;const rt=f[X],nt=f[Ee];J.has(nt.name)||J.set(nt.name,[]),J.get(nt.name).push(rt)}return J}(X);return{orderedNodes:X,nodeLiveUntilMap:Ee}}cloneAndKeepTensor(d){if(null==d)return null;const p=d.clone();return(0,re.keep)(p),p}cloneTensorList(d){return d?d.map(w=>this.cloneAndKeepTensor(w)):null}cloneTensorMap(d){return Object.fromEntries(Object.entries(d).map(([p,w])=>[p,this.cloneTensorList(w)]))}execute(d,p){this.disposeIntermediateTensors(),d=this.mapInputs(d);const w=Object.keys(d).sort();this.checkInputs(d),this.checkInputShapeAndType(d),p=this.mapOutputs(p),this.checkOutputs(p);const z=w.map(bt=>this.graph.nodes[Ie(bt)[0]]),U=p.map(bt=>Ie(bt)[0]),J=new Set(U);let X=U.map(bt=>this.graph.nodes[bt]);0===X.length&&(X=this._outputs);const Ee=this.getCompilationKey(z,X);let rt=this.compiledMap.get(Ee);null==rt&&(rt=this.compile(d,X),this.compiledMap.set(Ee,rt));try{this.keepIntermediateTensors=(0,re.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(bt){this.keepIntermediateTensors=!1,console.warn(bt.message)}const nt={},Fe={};return(0,re.tidy)(()=>{const bt=new An(this.weightMap,nt,Fe,this.functionExecutorMap,this.parseNodeNameCache),yt=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(d).forEach(sn=>{const[Kn,Cr]=Ie(sn,bt),Vr=[];Vr[Cr]=d[sn],yt[Kn]=Vr,this.keepIntermediateTensors&&(this.clonedTensorsMap[Kn]=this.cloneTensorList(Vr))});const qt=this.getFrozenTensorIds(yt),{orderedNodes:Jt,nodeLiveUntilMap:Nt}=rt;for(const sn of Jt){if(yt[sn.name])continue;const Kn=Hi(sn,yt,bt,this._resourceManager);if(re.util.isPromise(Kn))throw new Error(`The execution of the op '${sn.op}' returned a promise. Please use model.executeAsync() instead.`);yt[sn.name]=Kn,this.keepIntermediateTensors&&(this.clonedTensorsMap[sn.name]=this.cloneTensorList(Kn)),this.checkTensorForDisposalWithNodeLiveUntilInfo(sn,yt,bt,qt,J,Nt.get(sn.name))}return null==this.parent&&bt.dispose(qt),p.map(sn=>Le(sn,yt,bt))})}getFrozenTensorIds(d){const p=[].concat.apply([],Object.keys(d).map(w=>d[w]).map(w=>w.map(z=>z.id)));return new Set(p)}checkTensorForDisposal(d,p,w,z,U,J,X){if(!Rr(p)&&!J.has(d)){for(const Ee of w[d])null!=Ee&&(X[Ee.id]=(X[Ee.id]||0)+p.children.length);for(const Ee of p.inputs){if(Rr(Ee))continue;const rt=pe(Ee.name,w,z);if(null!=rt)for(const nt of rt){if(!nt||nt.kept||U.has(nt.id))continue;const Fe=X[nt.id];1===Fe?(nt.dispose(),delete X[nt.id]):null!=Fe&&X[nt.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(d,p,w,z,U,J){function X(Ee){return Rr(Ee)||U.has(Ee.name)}if(!Rr(d)&&null!=J)for(const Ee of J){if(X(Ee))continue;const rt=pe(Ee.name,p,w);for(const nt of rt)!nt||nt.kept||z.has(nt.id)||nt.dispose()}}executeAsync(d,p){var w=this;return(0,Je.Z)(function*(){return w._executeAsync(d,p)})()}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(d=>{for(const p of d)p&&!p.isDisposed&&p.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}_executeAsync(d,p,w=!1,z={},U={}){var J=this;return(0,Je.Z)(function*(){J.disposeIntermediateTensors(),w||(d=J.mapInputs(d),J.checkInputs(d),J.checkInputShapeAndType(d),p=J.mapOutputs(p),J.checkOutputs(p));try{J.keepIntermediateTensors=(0,re.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(yt){J.keepIntermediateTensors=!1,console.warn(yt.message)}const X=new An(J.weightMap,z,U,J.functionExecutorMap,J.parseNodeNameCache);J.keepIntermediateTensors&&(J.clonedTensorsMap=J.cloneTensorMap(J.weightMap));const Ee=yield J.executeWithControlFlow(d,X,p,w),rt=p.map(yt=>Le(yt,Ee,X)),nt=rt.map(yt=>yt.id),Fe=Object.keys(d).map(yt=>d[yt].id),bt=new Set([...nt,...Fe,...J.weightIds]);return Object.values(Ee).forEach(yt=>{yt.forEach(qt=>{qt&&!qt.isDisposed&&!bt.has(qt.id)&&qt.dispose()})}),null==J.parent&&X.dispose(bt),rt})()}executeFunctionAsync(d,p,w){var z=this;return(0,Je.Z)(function*(){const U=d.reduce((J,X,Ee)=>(J[z.inputs[Ee].name]=X,J),{});return z._executeAsync(U,z.outputNodes,!0,p,w)})()}executeWithControlFlow(d,p,w,z){var U=this;return(0,Je.Z)(function*(){const J=Object.keys(d),X=J.map(Nn=>U.graph.nodes[Ie(Nn)[0]]),Ee=w.map(Nn=>Ie(Nn)[0]),rt=new Set(Ee);let nt=Ee.map(Nn=>U.graph.nodes[Nn]);0===nt.length&&(nt=U._outputs);const{usedNodes:Fe,missingInputs:bt,dynamicNode:yt,syncInputs:qt}=oo(d,nt,U.weightMap,U._initNodes),Jt=[...X,...U.graph.weights,...U._initNodes||[]].map(Nn=>({node:Nn,contexts:p.currentContext})),Nt=Object.assign({},U.weightMap);Object.keys(d).forEach(Nn=>{const[ao,on]=Ie(Nn),lo=[];lo[on]=d[Nn],Nt[ao]=lo});const sn={},Kn=U.getFrozenTensorIds(Nt),Cr={};for(;Jt.length>0;){const Nn=U.processStack(X,Jt,p,Nt,Cr,Kn,rt,sn,Fe);yield Promise.all(Nn)}null==yt&&!z&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const Vr=nt.filter(Nn=>!Rr(Nn)&&!Le(Nn.name,Nt,p)).map(Nn=>Nn.name);if(Vr.length>0){let Nn="";throw null!=yt&&(Nn=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${qt}]`),new Error(`Cannot compute the outputs [${Vr}] from the provided inputs [${J}]. Consider providing the following inputs: [${bt}]. ${Nn}`)}return Nt})()}processStack(d,p,w,z,U,J,X,Ee,rt){const nt=[];for(;p.length>0;){const Fe=p.pop();w.currentContext=Fe.contexts;let bt="";if("Enter"===Fe.node.op&&v("isConstant",Fe.node,z,w)&&([bt]=_e(Fe.node.name,w)),null==z[Fe.node.name]){const yt=Hi(Fe.node,z,w,this._resourceManager);bt||([bt]=_e(Fe.node.name,w));const qt=w.currentContext;re.util.isPromise(yt)?nt.push(yt.then(Jt=>(z[bt]=Jt,this.keepIntermediateTensors&&(this.clonedTensorsMap[bt]=this.cloneTensorList(Jt)),w.currentContext=qt,this.checkTensorForDisposal(bt,Fe.node,z,w,J,X,Ee),this.processChildNodes(Fe.node,p,w,z,U,rt),Jt))):(z[bt]=yt,this.keepIntermediateTensors&&(this.clonedTensorsMap[bt]=this.cloneTensorList(yt)),this.checkTensorForDisposal(bt,Fe.node,z,w,J,X,Ee),this.processChildNodes(Fe.node,p,w,z,U,rt))}else this.processChildNodes(Fe.node,p,w,z,U,rt)}return nt}processChildNodes(d,p,w,z,U,J){d.children.forEach(X=>{const[Ee]=_e(X.name,w);U[Ee]||!J.has(X.name)||("Merge"===X.op?X.inputNames.some(rt=>!!Le(rt,z,w))&&(U[Ee]=!0,p.push({contexts:w.currentContext,node:X})):X.inputNames.every(rt=>!!Le(rt,z,w))&&(U[Ee]=!0,p.push({contexts:w.currentContext,node:X})))})}dispose(){Object.keys(this.weightMap).forEach(d=>this.weightMap[d].forEach(p=>p.dispose()))}checkInputShapeAndType(d){Object.keys(d).forEach(p=>{const w=d[p],[z]=Ie(p),U=this.graph.nodes[z];if(U.attrParams.shape&&U.attrParams.shape.value){const J=U.attrParams.shape.value,X=J.length===w.shape.length&&w.shape.every((Ee,rt)=>-1===J[rt]||J[rt]===Ee);re.util.assert(X,()=>`The shape of dict['${U.name}'] provided in model.execute(dict) must be [${J}], but was [${w.shape}]`)}U.attrParams.dtype&&U.attrParams.dtype.value&&re.util.assert(w.dtype===U.attrParams.dtype.value,()=>`The dtype of dict['${U.name}'] provided in model.execute(dict) must be ${U.attrParams.dtype.value}, but was ${w.dtype}`)})}mapInputs(d){var p,w;const z={};for(const U in d){const J=null===(w=null===(p=this._signature)||void 0===p?void 0:p.inputs)||void 0===w?void 0:w[U];null!=J?z[J.name]=d[U]:z[U]=d[U]}return z}checkInputs(d){const p=Object.keys(d).filter(w=>{const[z]=Ie(w);return null==this.graph.nodes[z]});if(p.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${p}] that are not part of graph`)}mapOutputs(d){return d.map(p=>{var w,z;const U=null===(z=null===(w=this._signature)||void 0===w?void 0:w.outputs)||void 0===z?void 0:z[p];return null!=U?U.name:p},{})}checkOutputs(d){d.forEach(p=>{const[w]=Ie(p);if(!this.graph.nodes[w])throw new Error(`The output '${p}' is not found in the graph`)})}}class Po{constructor(d={},p={}){this.hashTableNameToHandle=d,this.hashTableMap=p}addHashTable(d,p){this.hashTableNameToHandle[d]=p.handle,this.hashTableMap[p.id]=p}getHashTableHandleByName(d){return this.hashTableNameToHandle[d]}getHashTableById(d){return this.hashTableMap[d]}dispose(){for(const d in this.hashTableMap)this.hashTableMap[d].clearAndClose(),delete this.hashTableMap[d];for(const d in this.hashTableNameToHandle)this.hashTableNameToHandle[d].dispose(),delete this.hashTableNameToHandle[d]}}var On=I(8339);const Ti="?tfjs-format=file",wr="model.json";class bs{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(d,p={},w=re.io){this.modelUrl=d,this.loadOptions=p,this.version="n/a",this.io=w,null==p&&(this.loadOptions={}),this.resourceManager=new Po}findIOHandler(){const d=this.modelUrl;if(null!=d.load)this.handler=d;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(d,this.loadOptions);else{const p=this.io.getLoadHandlers(d,this.loadOptions);if(0===p.length)p.push(this.io.browserHTTPRequest(d,this.loadOptions));else if(p.length>1)throw new Error(`Found more than one (${p.length}) load handlers for URL '${[d]}'`);this.handler=p[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const d=this.handler.load();return re.util.isPromise(d)?d.then(p=>null==p.getWeightStream?this.loadSync(p):this.loadStreaming(p)):this.loadSync(d)}loadSync(d){const p=this.io.decodeWeights(d.weightData,d.weightSpecs);return this.loadWithWeightMap(d,p)}loadStreaming(d){var p=this;return(0,Je.Z)(function*(){if(null==d.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const w=yield(0,On.r)(d.getWeightStream(),d.weightSpecs);return p.loadWithWeightMap(d,w)})()}loadWithWeightMap(d,p){this.artifacts=d;const w=this.artifacts.modelTopology;let z=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const U=this.artifacts.userDefinedMetadata;null!=U.signature&&(z=U.signature),null!=U.structuredOutputKeys&&(this.structuredOutputKeys=U.structuredOutputKeys)}if(this.signature=z,this.version=`${w.versions.producer}.${w.versions.minConsumer}`,this.executor=new Ki(hi.Instance.transformGraph(w,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(p),this.executor.resourceManager=this.resourceManager,null!=d.modelInitializer&&null!=d.modelInitializer.node){const U=hi.Instance.transformGraph(d.modelInitializer);this.initializer=new Ki(U),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=d.initializerSignature}return!0}save(d,p){var w=this;return(0,Je.Z)(function*(){if("string"==typeof d){const z=w.io.getSaveHandlers(d);if(0===z.length)throw new Error(`Cannot find any save handlers for URL '${d}'`);if(z.length>1)throw new Error(`Found more than one (${z.length}) save handlers for URL '${d}'`);d=z[0]}if(null==d.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return d.save(w.artifacts)})()}addStructuredOutputNames(d){if(this.structuredOutputKeys){const w={};return(d instanceof re.Tensor?[d]:d).forEach((z,U)=>w[this.structuredOutputKeys[U]]=z),w}return d}predict(d,p){const w=this.execute(d,this.outputNodes);return this.addStructuredOutputNames(w)}predictAsync(d,p){var w=this;return(0,Je.Z)(function*(){const z=yield w.executeAsync(d,w.outputNodes);return w.addStructuredOutputNames(z)})()}normalizeInputs(d){var p;if(!(d instanceof re.Tensor||Array.isArray(d))){const U=null===(p=this.signature)||void 0===p?void 0:p.inputs;if(null!=U)for(const J in U){const X=U[J];null!=X.resourceId&&(d[J]=this.resourceIdToCapturedInput[X.resourceId])}return d}d=Array.isArray(d)?d:[d];const w=Object.keys(this.resourceIdToCapturedInput).length;if(d.length+w!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-w} non-resource placeholders, while there are ${d.length} input tensors provided.`);let z=0;return this.inputNodes.reduce((U,J)=>{var X,Ee,rt;const nt=null===(rt=null===(Ee=null===(X=this.signature)||void 0===X?void 0:X.inputs)||void 0===Ee?void 0:Ee[J])||void 0===rt?void 0:rt.resourceId;return U[J]=null!=nt?this.resourceIdToCapturedInput[nt]:d[z++],U},{})}normalizeOutputs(d){return d=d||this.outputNodes,Array.isArray(d)?d:[d]}executeInitializerGraph(){return null==this.initializer?[]:this.initializer.execute({},null==this.initializerSignature?[]:Object.keys(this.initializerSignature.outputs))}executeInitializerGraphAsync(){var d=this;return(0,Je.Z)(function*(){return null==d.initializer?[]:d.initializer.executeAsync({},null==d.initializerSignature?[]:Object.keys(d.initializerSignature.outputs))})()}setResourceIdToCapturedInput(d){if(this.resourceIdToCapturedInput={},this.initializerSignature){const p=this.initializerSignature.outputs,w=Object.keys(p);for(let z=0;z<w.length;z++)this.resourceIdToCapturedInput[p[w[z]].resourceId]=d[z]}}execute(d,p){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),d=this.normalizeInputs(d),p=this.normalizeOutputs(p);const w=this.executor.execute(d,p);return w.length>1?w:w[0]}executeAsync(d,p){var w=this;return(0,Je.Z)(function*(){null==w.resourceIdToCapturedInput&&w.setResourceIdToCapturedInput(yield w.executeInitializerGraphAsync()),d=w.normalizeInputs(d),p=w.normalizeOutputs(p);const z=yield w.executor.executeAsync(d,p);return z.length>1?z:z[0]})()}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(d){return Object.keys(d).reduce((p,w)=>(p[w]=[d[w]],p),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&(0,re.dispose)(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}function aa(f){return la.apply(this,arguments)}function la(){return(la=(0,Je.Z)(function*(f,d={},p=re.io){if(null==f)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==d&&(d={}),d.fromTFHub&&"string"==typeof f&&(f=function vs(f){return f.endsWith("/")||(f+="/"),`${f}${wr}${Ti}`}(f));const w=new bs(f,d,p);return yield w.load(),w})).apply(this,arguments)}function Xi(f){if(null==f)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let d;if(f instanceof Array){const[w,z]=f;if(!w)throw new Error("modelJSON must be the first element of the array");if(!(z&&z instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in w))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in w))throw new Error("Model JSON is missing 'weightsManifest'");const U=re.io.getWeightSpecs(w.weightsManifest),J=re.io.getModelArtifactsForJSONSync(w,U,z);d=re.io.fromMemorySync(J)}else if("load"in f)d=f;else{if(!("modelTopology"in f&&"weightSpecs"in f&&"weightData"in f))throw new Error("Unknown model format");d=re.io.fromMemorySync(f)}const p=new bs(d);return p.load(),p}const Fo="4.15.0"},7173:(st,Oe,I)=>{"use strict";I.d(Oe,{JL:()=>H,Zu:()=>q});class H{constructor(se,ne){this.backend=se,this.dataMover=ne,this.data=new WeakMap,this.dataIdsCount=0}get(se){return this.data.has(se)||this.dataMover.moveData(this.backend,se),this.data.get(se)}set(se,ne){this.dataIdsCount++,this.data.set(se,ne)}has(se){return this.data.has(se)}delete(se){return this.dataIdsCount--,this.data.delete(se)}numDataIds(){return this.dataIdsCount}}class q{refCount(se){return T("refCount")}incRef(se){return T("incRef")}timerAvailable(){return!0}time(se){return T("time")}read(se){return T("read")}readSync(se){return T("readSync")}readToGPU(se,ne){return T("readToGPU")}numDataIds(){return T("numDataIds")}disposeData(se,ne){return T("disposeData")}write(se,ne,G){return T("write")}move(se,ne,G,te,Y){return T("move")}createTensorFromGPUData(se,ne,G){return T("createTensorFromGPUData")}memory(){return T("memory")}floatPrecision(){return T("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return T("dispose")}}function T($){throw new Error(`'${$}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}},7228:(st,Oe,I)=>{"use strict";function ce(S,ee,Se){const he=function ye(S,ee,Se){return function q(S,ee,Se){let he=0,Ne=S.length,Qe=0,Ke=!1;for(;he<Ne;){Qe=he+(Ne-he>>>1);const _t=Se(ee,S[Qe]);_t>0?he=Qe+1:(Ne=Qe,Ke=!_t)}return Ke?he:-he-1}(S,ee,Se||H)}(S,ee,Se);S.splice(he<0?-(he+1):he,0,ee)}function H(S,ee){return S>ee?1:S<ee?-1:0}function T(S,ee,Se,he,Ne){return ne(S,ee,Se,he,Ne,0)}function $(S,ee,Se,he,Ne,Qe){return ne(S,ee,Se,he,Ne,0,!1,Qe,!0)}function se(S,ee,Se,he,Ne,Qe){return ne(S,ee,Se,he,Ne,Qe,!0)}function ne(S,ee,Se,he,Ne,Qe,Ke=!1,_t=!1,Ze=!1){const re=[];for(let le=0;le<ee.length;le++)ee[le]>Ne&&re.push({score:ee[le],boxIndex:le,suppressBeginIndex:0});re.sort(Y);const ze=Qe>0?-.5/Qe:0,Je=[],ue=[];for(;Je.length<Se&&re.length>0;){const le=re.pop(),{score:Ae,boxIndex:v,suppressBeginIndex:Le}=le;if(Ae<Ne)break;let pe=!1;for(let _e=Je.length-1;_e>=Le;--_e){const Te=G(S,v,Je[_e]);if(Te>=he){pe=!0;break}if(le.score=le.score*te(he,ze,Te),le.score<=Ne)break}le.suppressBeginIndex=Je.length,pe||(le.score===Ae?(Je.push(v),ue.push(le.score)):le.score>Ne&&ce(re,le,Y))}const ie=Je.length,N=Se-ie;_t&&N>0&&(Je.push(...new Array(N).fill(0)),ue.push(...new Array(N).fill(0)));const Q={selectedIndices:Je};return Ke&&(Q.selectedScores=ue),Ze&&(Q.validOutputs=ie),Q}function G(S,ee,Se){const he=S.subarray(4*ee,4*ee+4),Ne=S.subarray(4*Se,4*Se+4),Qe=Math.min(he[0],he[2]),Ke=Math.min(he[1],he[3]),_t=Math.max(he[0],he[2]),Ze=Math.max(he[1],he[3]),re=Math.min(Ne[0],Ne[2]),ze=Math.min(Ne[1],Ne[3]),Je=Math.max(Ne[0],Ne[2]),ue=Math.max(Ne[1],Ne[3]),ie=(_t-Qe)*(Ze-Ke),N=(Je-re)*(ue-ze);if(ie<=0||N<=0)return 0;const Q=Math.max(Qe,re),le=Math.max(Ke,ze),Ae=Math.min(_t,Je),v=Math.min(Ze,ue),Le=Math.max(Ae-Q,0)*Math.max(v-le,0);return Le/(ie+N-Le)}function te(S,ee,Se){const he=Math.exp(ee*Se*Se);return Se<=S?he:0}function Y(S,ee){return S.score-ee.score||S.score===ee.score&&ee.boxIndex-S.boxIndex}I.d(Oe,{GP:()=>T,qP:()=>$,pA:()=>se})},7349:(st,Oe,I)=>{"use strict";I.d(Oe,{Z:()=>ye});var ce=I(582);function ye(H,q){const T=[];for(let ne=0;ne<q.length;ne++)q[ne]&&T.push(ne);const $=(0,ce.f)(H,"int32"),se=(0,ce.f)([T.length,H.length],"int32");for(let ne=0;ne<T.length;ne++){const G=$.indexToLoc(T[ne]);se.values.set(G,ne*H.length)}return se.toTensor()}},687:(st,Oe,I)=>{"use strict";I.d(Oe,{BV:()=>ze,wv:()=>re});var ce=I(5861),ye=I(7173),H=I(5527),q=I(2918),T=I(4251),$=I(8987),se=I(2932),ne=I(1153),G=I(5359);class te{constructor(ie,N){this.backendTimer=ie,this.logger=N,null==N&&(this.logger=new S)}profileKernel(ie,N,Q){let le;const Ae=()=>{le=Q()};let v;const Le=ne.now();if(this.backendTimer.timerAvailable())v=this.backendTimer.time(Ae);else{Ae();for(const _e of le)_e.dataSync();v=Promise.resolve({kernelMs:ne.now()-Le})}if((0,H.OB)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let _e=0;_e<le.length;_e++){const Te=le[_e];Te.data().then(Ie=>{Y(Ie,Te.dtype,ie)})}return{kernelName:ie,outputs:le,inputs:N,timeMs:v.then(_e=>_e.kernelMs),extraInfo:v.then(_e=>null!=_e.getExtraProfileInfo?_e.getExtraProfileInfo():"")}}logKernelProfile(ie){const{kernelName:N,outputs:Q,timeMs:le,inputs:Ae,extraInfo:v}=ie;Q.forEach(Le=>{Promise.all([Le.data(),le,v]).then(pe=>{this.logger.logKernelProfile(N,Le,pe[0],pe[1],Ae,pe[2])})})}}function Y(ue,ie,N){if("float32"!==ie)return!1;for(let Q=0;Q<ue.length;Q++){const le=ue[Q];if(isNaN(le)||!isFinite(le))return console.warn(`Found ${le} in the result of '${N}'`),!0}return!1}class S{logKernelProfile(ie,N,Q,le,Ae,v){const Le="number"==typeof le?G.oj(`${le}ms`,9):le.error,pe=G.oj(ie,25),_e=N.rank,Te=N.size,Ie=G.oj(N.shape.toString(),14);let be="";for(const ut in Ae){const Ce=Ae[ut];if(null!=Ce){const De=Ce.shape||N.shape,Ye=De.length;be+=`${ut}: ${Ye}D ${Ye>0?De:""} `}}console.log(`%c${pe}\t%c${Le}\t%c${_e}D ${Ie}\t%c${Te}\t%c${be}\t%c${v}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}var he=I(4945),Ne=I(7664);function Qe(ue){return null!=ue.kernelName}class Ke{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(ie=>ie.name)))}}}dispose(){for(const ie in this.registeredVariables)this.registeredVariables[ie].dispose()}}let _t=(()=>{class ue{constructor(N){this.ENV=N,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Ke}ready(){var N=this;return(0,ce.Z)(function*(){if(null!=N.pendingBackendInit)return N.pendingBackendInit.then(()=>{});if(null!=N.backendInstance)return;const Q=N.getSortedBackends();for(let le=0;le<Q.length;le++){const Ae=Q[le];if(yield N.initializeBackend(Ae).success)return void(yield N.setBackend(Ae))}throw new Error("Could not initialize any backends, all backend initializations failed.")})()}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:N,asyncInit:Q}=this.initializeBackendsAndReturnBest();if(Q)throw new Error(`The highest priority backend '${N}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(N)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(N){if(!(N in this.registry)){if(!(N in this.registryFactory))return null;{const{asyncInit:Q}=this.initializeBackend(N);if(Q)return null}}return this.registry[N]}findBackendFactory(N){return N in this.registryFactory?this.registryFactory[N].factory:null}registerBackend(N,Q,le=1){return N in this.registryFactory?(se.Z(`${N} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[N]={factory:Q,priority:le},!0)}setBackend(N){var Q=this;return(0,ce.Z)(function*(){if(null==Q.registryFactory[N])throw new Error(`Backend name '${N}' not found in registry`);if(Q.backendName=N,null==Q.registry[N]){Q.backendInstance=null;const{success:le,asyncInit:Ae}=Q.initializeBackend(N);if(!(Ae?yield le:le))return!1}return Q.backendInstance=Q.registry[N],Q.setupRegisteredKernels(),Q.profiler=new te(Q.backendInstance),!0})()}setupRegisteredKernels(){(0,$.tr)(this.backendName).forEach(Q=>{null!=Q.setupFunc&&Q.setupFunc(this.backendInstance)})}disposeRegisteredKernels(N){(0,$.tr)(N).forEach(le=>{null!=le.disposeFunc&&le.disposeFunc(this.registry[N])})}initializeBackend(N){const Q=this.registryFactory[N];if(null==Q)throw new Error(`Cannot initialize backend ${N}, no registration found.`);try{const le=Q.factory();if(!le||le instanceof ye.Zu||"function"!=typeof le.then)return this.registry[N]=le,{success:!0,asyncInit:!1};{const Ae=++this.pendingBackendInitId,v=le.then(Le=>!(Ae<this.pendingBackendInitId||(this.registry[N]=Le,this.pendingBackendInit=null,0))).catch(Le=>(Ae<this.pendingBackendInitId||(this.pendingBackendInit=null,se.Z(`Initialization of backend ${N} failed`),se.Z(Le.stack||Le.message)),!1));return this.pendingBackendInit=v,{success:v,asyncInit:!0}}}catch(le){return se.Z(`Initialization of backend ${N} failed`),se.Z(le.stack||le.message),{success:!1,asyncInit:!1}}}removeBackend(N){if(!(N in this.registryFactory))throw new Error(`${N} backend not found in registry`);this.backendName===N&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,N in this.registry&&(this.disposeRegisteredKernels(N),this.registry[N].dispose(),delete this.registry[N]),delete this.registryFactory[N],this.backendName===N&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((N,Q)=>this.registryFactory[Q].priority-this.registryFactory[N].priority)}initializeBackendsAndReturnBest(){const N=this.getSortedBackends();for(let Q=0;Q<N.length;Q++){const le=N[Q],{success:Ae,asyncInit:v}=this.initializeBackend(le);if(v||Ae)return{name:le,asyncInit:v}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(N,Q){const le=this.state.tensorInfo.get(Q),Ae=le.backend,v=this.readSync(Q),Le=Ae.refCount(Q);Ae.disposeData(Q,!0),le.backend=N,N.move(Q,v,le.shape,le.dtype,Le),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(N,Q){let Ae,le=null;if(null==Q){if("function"!=typeof N)throw new Error("Please provide a function to tidy()");Q=N}else{if("string"!=typeof N&&!(N instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof Q)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");le=N}return this.scopedRun(()=>this.startScope(le),()=>this.endScope(Ae),()=>(Ae=Q(),Ae instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Ae))}scopedRun(N,Q,le){N();try{const Ae=le();return Q(),Ae}catch(Ae){throw Q(),Ae}}nextTensorId(){return ue.nextTensorId++}nextVariableId(){return ue.nextVariableId++}clone(N){const Q=ze.runKernel(T.iJz,{x:N});return this.addTapeNode(this.state.activeScope.name,{x:N},[Q],Le=>({x:()=>ze.runKernel(T.RFZ,{x:Le},{dtype:"float32"})}),[],{}),Q}runKernel(N,Q,le){if(null==(0,$.pI)(N,this.backendName))throw new Error(`Kernel '${N}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:N,inputs:Q,attrs:le})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(N,Q,le){const Ae=this.backend.numDataIds();let v=0;le.forEach(_e=>{v+="complex64"===_e.dtype?3:1});const pe=Ae-Q-v-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(pe>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${pe} data ids) after running '${N}'`)}runKernelFunc(N){let Q,le=[];const Ae=this.isTapeOn(),v=this.state.numBytes,Le=this.state.numTensors;let pe,_e;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const Te=Qe(N)?N.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Qe(N)){const{kernelName:De,inputs:Ye,attrs:Pe}=N,tt=(0,$.pI)(De,this.backendName);G.hu(null!=tt,()=>`Cannot find registered kernel '${De}' for backend '${this.backendName}'`),pe=()=>{const et=this.backend.numDataIds();_e=tt.kernelFunc({inputs:Ye,attrs:Pe,backend:this.backend});const mt=Array.isArray(_e)?_e:[_e];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(De,et,mt);const qe=mt.map(At=>null!=At.rank?At:this.makeTensorFromTensorInfo(At));if(Ae){const At=this.getTensorsForGradient(De,Ye,qe);le=this.saveTensorsForBackwardMode(At)}return qe}}else{const{forwardFunc:De}=N,Ye=Pe=>{Ae&&(le=Pe.map(tt=>this.keep(this.clone(tt))))};pe=()=>{const Pe=this.backend.numDataIds();_e=this.tidy(()=>De(this.backend,Ye));const tt=Array.isArray(_e)?_e:[_e];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(Te,Pe,tt),tt}}const{inputs:Ie,attrs:be}=N,ut=Qe(N)?null:N.backwardsFunc;let Ce;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(Ce=this.profiler.profileKernel(Te,Ie,()=>pe()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(Ce),Q=Ce.outputs):Q=pe()}),Ae&&this.addTapeNode(Te,Ie,Q,ut,le,be),this.state.profiling&&this.state.activeProfile.kernels.push({name:Te,bytesAdded:this.state.numBytes-v,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-Le,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(Ie).map(De=>null!=Ie[De]?Ie[De].shape:null),outputShapes:Q.map(De=>De.shape),kernelTimeMs:Ce.timeMs,extraInfo:Ce.extraInfo}),Array.isArray(_e)?Q:Q[0]}saveTensorsForBackwardMode(N){return N.map(le=>this.keep(this.clone(le)))}getTensorsForGradient(N,Q,le){const Ae=(0,$.uk)(N);if(null!=Ae){const v=Ae.inputsToSave||[],Le=Ae.outputsToSave||[];let pe;Ae.saveAllInputs?(G.hu(Array.isArray(Q),()=>"saveAllInputs is true, expected inputs to be an array."),pe=Object.keys(Q).map(Te=>Q[Te])):pe=v.map(Te=>Q[Te]);const _e=le.filter((Te,Ie)=>Le[Ie]);return pe.concat(_e)}return[]}makeTensor(N,Q,le,Ae){if(null==N)throw new Error("Values passed to engine.makeTensor() are null");Ae=Ae||this.backend;let v=N;"string"===(le=le||"float32")&&G.HD(N[0])&&(v=N.map(_e=>ne.encodeString(_e)));const Le=Ae.write(v,Q,le),pe=new he.es(Q,le,Le,this.nextTensorId());if(this.trackTensor(pe,Ae),"string"===le){const _e=this.state.tensorInfo.get(Le),Te=(0,G.Ub)(v);this.state.numBytes+=Te-_e.bytes,_e.bytes=Te}return pe}makeTensorFromDataId(N,Q,le,Ae){return this.makeTensorFromTensorInfo({dataId:N,shape:Q,dtype:le=le||"float32"},Ae)}makeTensorFromTensorInfo(N,Q){const{dataId:le,shape:Ae,dtype:v}=N,Le=new he.es(Ae,v,le,this.nextTensorId());return this.trackTensor(Le,Q),Le}makeVariable(N,Q=!0,le,Ae){le=le||this.nextVariableId().toString(),null!=Ae&&Ae!==N.dtype&&(N=N.cast(Ae));const v=new he._w(N,Q,le,this.nextTensorId());if(null!=this.state.registeredVariables[v.name])throw new Error(`Variable with name ${v.name} was already registered`);return this.state.registeredVariables[v.name]=v,this.incRef(v,this.backend),v}trackTensor(N,Q){this.state.numTensors++,"string"===N.dtype&&this.state.numStringTensors++;let le=0;"complex64"!==N.dtype&&"string"!==N.dtype&&(le=N.size*G.bT(N.dtype)),this.state.numBytes+=le,this.state.tensorInfo.has(N.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(N.dataId,{backend:Q||this.backend,dtype:N.dtype,shape:N.shape,bytes:le})),N instanceof he._w||this.track(N)}incRef(N,Q){this.trackTensor(N,Q),this.backend.incRef(N.dataId)}removeDataId(N,Q){this.state.tensorInfo.has(N)&&this.state.tensorInfo.get(N).backend===Q&&(this.state.tensorInfo.delete(N),this.state.numDataBuffers--)}disposeTensor(N){if(!this.state.tensorInfo.has(N.dataId))return;const Q=this.state.tensorInfo.get(N.dataId);if(this.state.numTensors--,"string"===N.dtype&&(this.state.numStringTensors--,this.state.numBytes-=Q.bytes),"complex64"!==N.dtype&&"string"!==N.dtype){const le=N.size*G.bT(N.dtype);this.state.numBytes-=le}Q.backend.disposeData(N.dataId)&&this.removeDataId(N.dataId,Q.backend)}disposeVariables(){for(const N in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[N])}disposeVariable(N){this.disposeTensor(N),null!=this.state.registeredVariables[N.name]&&delete this.state.registeredVariables[N.name]}memory(){const N=this.backend.memory();return N.numTensors=this.state.numTensors,N.numDataBuffers=this.state.numDataBuffers,N.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(N.unreliable=!0,null==N.reasons&&(N.reasons=[]),N.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),N}profile(N){var Q=this;return(0,ce.Z)(function*(){Q.state.profiling=!0;const le=Q.state.numBytes,Ae=Q.state.numTensors;Q.state.activeProfile.kernels=[],Q.state.activeProfile.result=yield N(),Q.state.profiling=!1,Q.state.activeProfile.peakBytes=Math.max(...Q.state.activeProfile.kernels.map(v=>v.totalBytesSnapshot)),Q.state.activeProfile.newBytes=Q.state.numBytes-le,Q.state.activeProfile.newTensors=Q.state.numTensors-Ae;for(const v of Q.state.activeProfile.kernels)v.kernelTimeMs=yield v.kernelTimeMs,v.extraInfo=yield v.extraInfo;return Q.state.activeProfile})()}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(N,Q,le,Ae,v,Le){const pe={id:this.state.nextTapeNodeId++,kernelName:N,inputs:Q,outputs:le,saved:v},_e=(0,$.uk)(N);null!=_e&&(Ae=_e.gradFunc),null!=Ae&&(pe.gradient=Te=>(Te=Te.map((Ie,be)=>{if(null==Ie){const ut=le[be],Ce=G.wT(ut.size,ut.dtype);return this.makeTensor(Ce,ut.shape,ut.dtype)}return Ie}),Ae(Te.length>1?Te:Te[0],v,Le))),this.state.activeTape.push(pe)}keep(N){return N.kept=!0,N}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(N){const Q={track:[],name:"unnamed scope",id:this.state.nextScopeId++};N&&(Q.name=N),this.state.scopeStack.push(Q),this.state.activeScope=Q}endScope(N){const Q=(0,Ne.getTensorsInContainer)(N),le=new Set(Q.map(v=>v.id));for(let v=0;v<this.state.activeScope.track.length;v++){const Le=this.state.activeScope.track[v];!Le.kept&&!le.has(Le.id)&&Le.dispose()}const Ae=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],Q.forEach(v=>{!v.kept&&v.scopeId===Ae.id&&this.track(v)})}gradients(N,Q,le,Ae=!1){if(G.hu(Q.length>0,()=>"gradients() received an empty list of xs."),null!=le&&"float32"!==le.dtype)throw new Error(`dy must have 'float32' dtype, but has '${le.dtype}'`);const v=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",N));G.hu(v instanceof he.es,()=>"The result y returned by f() must be a tensor.");const Le=function ee(ue,ie,N){const Q={},le={};for(let pe=0;pe<ie.length;pe++)Q[ie[pe].id]=!0;for(let pe=0;pe<ue.length;pe++){const _e=ue[pe],Te=_e.inputs;for(const Ie in Te){const be=Te[Ie];let ut=!1;for(let Ce=0;Ce<ie.length;Ce++)if(Q[be.id]){_e.outputs.forEach(De=>Q[De.id]=!0),ut=!0,le[_e.id]=!0;break}if(ut)break}}const Ae={};Ae[N.id]=!0;const v={};for(let pe=ue.length-1;pe>=0;pe--){const _e=ue[pe],Te=_e.inputs;for(let Ie=0;Ie<_e.outputs.length;Ie++)if(Ae[_e.outputs[Ie].id]){for(const be in Te)Ae[Te[be].id]=!0,v[_e.id]=!0;break}}const Le=[];for(let pe=0;pe<ue.length;pe++){const _e=ue[pe];if(le[_e.id]&&v[_e.id]){const Te={};for(const be in _e.inputs){const ut=_e.inputs[be];Q[ut.id]&&(Te[be]=ut)}const Ie=Object.assign({},_e);Ie.inputs=Te,Ie.outputs=_e.outputs,Le.push(Ie)}}return Le}(this.state.activeTape,Q,v);if(!Ae&&0===Le.length&&Q.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const pe={};pe[v.id]=le??function Ze(ue){const ie=(0,G.p8)((0,G.NA)(ue),"float32");return ze.makeTensor(ie,ue,"float32")}(v.shape),function Se(ue,ie,N,Q){for(let le=ie.length-1;le>=0;le--){const Ae=ie[le],v=[];if(Ae.outputs.forEach(pe=>{const _e=ue[pe.id];v.push(null!=_e?_e:null)}),null==Ae.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${Ae.kernelName}.`);const Le=Ae.gradient(v);for(const pe in Ae.inputs){if(!(pe in Le))throw new Error(`Cannot backprop through input ${pe}. Available gradients found: ${Object.keys(Le)}.`);const _e=N(()=>Le[pe]());if("float32"!==_e.dtype)throw new Error(`Error in gradient for op ${Ae.kernelName}. The gradient of input ${pe} must have 'float32' dtype, but has '${_e.dtype}'`);const Te=Ae.inputs[pe];if(!G.cO(_e.shape,Te.shape))throw new Error(`Error in gradient for op ${Ae.kernelName}. The gradient of input '${pe}' has shape '${_e.shape}', which does not match the shape of the input '${Te.shape}'`);if(null==ue[Te.id])ue[Te.id]=_e;else{const Ie=ue[Te.id];ue[Te.id]=Q(Ie,_e),Ie.dispose()}}}}(pe,Le,Te=>this.tidy(Te),Je);const _e=Q.map(Te=>pe[Te.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(Te=>{for(const Ie of Te.saved)Ie.dispose()}),this.state.activeTape=null),{value:v,grads:_e}})}customGrad(N){return G.hu(G.mf(N),()=>"The f passed in customGrad(f) must be a function."),(...Q)=>{let le;G.hu(Q.every(pe=>pe instanceof he.es),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const Ae={};return Q.forEach((pe,_e)=>{Ae[_e]=pe}),this.runKernelFunc({forwardFunc:(pe,_e)=>(le=N(...Q,_e),G.hu(le.value instanceof he.es,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),G.hu(G.mf(le.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),le.value),backwardsFunc:(pe,_e)=>{const Te=le.gradFunc(pe,_e),Ie=Array.isArray(Te)?Te:[Te];G.hu(Ie.length===Q.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),G.hu(Ie.every(ut=>ut instanceof he.es),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const be={};return Ie.forEach((ut,Ce)=>{be[Ce]=()=>ut}),be},inputs:Ae})}}readSync(N){return this.state.tensorInfo.get(N).backend.readSync(N)}read(N){return this.state.tensorInfo.get(N).backend.read(N)}readToGPU(N,Q){return this.state.tensorInfo.get(N).backend.readToGPU(N,Q)}time(N){var Q=this;return(0,ce.Z)(function*(){const le=(0,ne.now)(),Ae=yield Q.backend.time(N);return Ae.wallMs=(0,ne.now)()-le,Ae})()}track(N){return null!=this.state.activeScope&&(N.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(N)),N}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Ke;for(const N in this.registry)this.disposeRegisteredKernels(N),this.registry[N].dispose(),delete this.registry[N];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return ue.nextTensorId=0,ue.nextVariableId=0,ue})();function re(){const ue=(0,q.D)();if(null==ue._tfengine){const ie=new H.qA(ue);ue._tfengine=new _t(ie)}return(0,H.iG)(ue._tfengine.ENV),(0,he.Vi)(()=>ue._tfengine),ue._tfengine}const ze=re();function Je(ue,ie){return ze.runKernel(T.mm_,{a:ue,b:ie})}},5527:(st,Oe,I)=>{"use strict";I.d(Oe,{OB:()=>ne,Vi:()=>G,iG:()=>te,qA:()=>q});var ce=I(5861),ye=I(5359);const H="tfjsflags";class q{constructor(S){this.global=S,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=T,this.populateURLFlags()}setPlatform(S,ee){null!=this.platform&&(ne().getBool("IS_TEST")||ne().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${S}.`)),this.platformName=S,this.platform=ee}registerFlag(S,ee,Se){if(this.flagRegistry[S]={evaluationFn:ee,setHook:Se},null!=this.urlFlags[S]){const he=this.urlFlags[S];ne().getBool("IS_TEST")||ne().getBool("PROD")||console.warn(`Setting feature override from URL ${S}: ${he}.`),this.set(S,he)}}getAsync(S){var ee=this;return(0,ce.Z)(function*(){return S in ee.flags||(ee.flags[S]=yield ee.evaluateFlag(S)),ee.flags[S]})()}get(S){if(S in this.flags)return this.flags[S];const ee=this.evaluateFlag(S);if((0,ye.tI)(ee))throw new Error(`Flag ${S} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[S]=ee,this.flags[S]}getNumber(S){return this.get(S)}getBool(S){return this.get(S)}getString(S){return this.get(S)}getFlags(){return this.flags}get features(){return this.flags}set(S,ee){if(null==this.flagRegistry[S])throw new Error(`Cannot set flag ${S} as it has not been registered.`);this.flags[S]=ee,null!=this.flagRegistry[S].setHook&&this.flagRegistry[S].setHook(ee)}evaluateFlag(S){if(null==this.flagRegistry[S])throw new Error(`Cannot evaluate flag '${S}': no evaluation function found.`);return this.flagRegistry[S].evaluationFn()}setFlags(S){this.flags=Object.assign({},S)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const S=this.getQueryParams(this.global.location.search);H in S&&S[H].split(",").forEach(Se=>{const[he,Ne]=Se.split(":");this.urlFlags[he]=function se(Y,S){const ee=S.toLowerCase();return"true"===ee||"false"===ee?"true"===ee:""+ +ee===ee?+ee:S}(0,Ne)})}}function T(Y){const S={};return Y.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(ee,...Se)=>(function $(Y,S,ee){Y[decodeURIComponent(S)]=decodeURIComponent(ee||"")}(S,Se[0],Se[1]),Se.join("="))),S}function ne(){return G}let G=null;function te(Y){G=Y}},2918:(st,Oe,I)=>{"use strict";let ce;function ye(){if(null==ce){let T;if(typeof window<"u")T=window;else if(typeof global<"u")T=global;else if(typeof process<"u")T=process;else{if(!(typeof self<"u"))throw new Error("Could not find a global object");T=self}ce=T}return ce}function q(T,$){const se=function H(){const T=ye();return null==T._tfGlobals&&(T._tfGlobals=new Map),T._tfGlobals}();if(se.has(T))return se.get(T);{const ne=$();return se.set(T,ne),se.get(T)}}I.d(Oe,{D:()=>ye,R:()=>q})},2773:(st,Oe,I)=>{"use strict";I.d(Oe,{B9:()=>Se,CQ:()=>Qe,Cd:()=>Ke,Cn:()=>he,G4:()=>T,MX:()=>ne,N5:()=>S,N8:()=>G,N_:()=>_t,R:()=>$,SR:()=>te,VY:()=>ie,XV:()=>Ne,cF:()=>se,cj:()=>Ze,jq:()=>Je,lu:()=>ee,sq:()=>Y,x3:()=>re,y3:()=>ue,ze:()=>ze});var ce=I(687),ye=I(5527),H=I(4945),q=I(7664);function T(){(0,ye.OB)().set("PROD",!0)}function $(){(0,ye.OB)().set("DEBUG",!0)}function se(){(0,ye.OB)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function ne(N){(0,ye.OB)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(N+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function G(){ce.BV.disposeVariables()}function te(){return ce.BV}function Y(){return ce.BV.memory()}function S(N){return ce.BV.profile(N)}function ee(N,Q){return ce.BV.tidy(N,Q)}function Se(N){(0,q.getTensorsInContainer)(N).forEach(le=>le.dispose())}function he(N){return ce.BV.keep(N)}function Ne(N){return ce.BV.time(N)}function Qe(N){return ce.BV.setBackend(N)}function Ke(){return ce.BV.ready()}function _t(){return ce.BV.backendName}function Ze(N){ce.BV.removeBackend(N)}function re(N){return ce.BV.findBackend(N)}function ze(N){return ce.BV.findBackendFactory(N)}function Je(N,Q,le=1){return ce.BV.registerBackend(N,Q,le)}function ue(){return ce.BV.backend}function ie(N,Q){(0,ye.OB)().setPlatform(N,Q)}(0,H.FZ)(ne)},3537:(st,Oe,I)=>{"use strict";I.d(Oe,{UQ:()=>T,cb:()=>te,fN:()=>ne,h7:()=>se,pn:()=>G,ti:()=>$});var ce=I(687),ye=I(4945),H=I(1257),q=I(5359);function T(S){return q.hu(q.mf(S),()=>"The f passed in grad(f) must be a function"),(ee,Se)=>{const he=(0,H._1)(ee,"x","tf.grad","string_or_numeric"),Ne=null!=Se?(0,H._1)(Se,"dy","tf.grad"):null;return ce.BV.tidy(()=>{const{value:Qe,grads:Ke}=ce.BV.gradients(()=>S(he),[he],Ne);return null!=Ne&&q.k5(Qe.shape,Ne.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Y(Ke),Ke[0]})}}function $(S){return q.hu(q.mf(S),()=>"The f passed in grads(f) must be a function"),(ee,Se)=>{q.hu(Array.isArray(ee),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const he=(0,H.sI)(ee,"args","tf.grads","string_or_numeric"),Ne=null!=Se?(0,H._1)(Se,"dy","tf.grads"):null;return ce.BV.tidy(()=>{const{value:Qe,grads:Ke}=ce.BV.gradients(()=>S(...he),he,Ne);return null!=Ne&&q.k5(Qe.shape,Ne.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Y(Ke),Ke})}}function se(S){return q.hu(q.mf(S),()=>"The f passed in valueAndGrad(f) must be a function"),(ee,Se)=>{q.hu(ee instanceof ye.es,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),q.hu(null==Se||Se instanceof ye.es,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:he,value:Ne}=ce.BV.gradients(()=>S(ee),[ee],Se);return Y(he),{grad:he[0],value:Ne}}}function ne(S){return q.hu(q.mf(S),()=>"The f passed in valueAndGrads(f) must be a function"),(ee,Se)=>{q.hu(Array.isArray(ee)&&ee.every(Ne=>Ne instanceof ye.es),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),q.hu(null==Se||Se instanceof ye.es,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const he=ce.BV.gradients(()=>S(...ee),ee,Se);return null!=Se&&q.k5(he.value.shape,Se.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Y(he.grads),he}}function G(S,ee){q.hu(q.mf(S),()=>"The f passed in variableGrads(f) must be a function"),q.hu(null==ee||Array.isArray(ee)&&ee.every(re=>re instanceof ye._w),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const Se=null!=ee;if(!Se){ee=[];for(const re in ce.BV.registeredVariables)ee.push(ce.BV.registeredVariables[re])}const he=Se?ee.filter(re=>!re.trainable):null,Ne=ee.length;ee=ee.filter(re=>re.trainable),q.hu(ee.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${Ne} variables is trainable.`);const{value:Ke,grads:_t}=ce.BV.gradients(S,ee,null,!0);q.hu(_t.some(re=>null!=re),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),q.hu(0===Ke.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${Ke.rank} tensor`);const Ze={};return ee.forEach((re,ze)=>{null!=_t[ze]&&(Ze[re.name]=_t[ze])}),he?.forEach(re=>Ze[re.name]=null),{value:Ke,grads:Ze}}function te(S){return ce.BV.customGrad(S)}function Y(S){if(S.filter(Se=>null==Se).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}},3557:(st,Oe,I)=>{"use strict";I.r(Oe),I.d(Oe,{Abs:()=>f.SYM,Acos:()=>f.VGw,Acosh:()=>f.SpW,AdadeltaOptimizer:()=>er,AdagradOptimizer:()=>Lr,AdamOptimizer:()=>to,AdamaxOptimizer:()=>_s,Add:()=>f.mm_,AddN:()=>f.Xze,All:()=>f.oT6,Any:()=>f.IKK,ArgMax:()=>f.sJF,ArgMin:()=>f.aJk,Asin:()=>f.M2y,Asinh:()=>f.qw7,Atan:()=>f.jMg,Atan2:()=>f.QCc,Atanh:()=>f.Oyi,AvgPool:()=>f.JhU,AvgPool3D:()=>f._k9,AvgPool3DGrad:()=>f.IMb,AvgPoolGrad:()=>f.ROF,BatchMatMul:()=>f.XLW,BatchToSpaceND:()=>f.zws,Bincount:()=>f.zvY,BitwiseAnd:()=>f.hCO,BroadcastArgs:()=>f.eEB,BroadcastTo:()=>f.Ly9,Cast:()=>f.RFZ,Ceil:()=>f.gJX,ClipByValue:()=>f.xnO,Complex:()=>f.Zz9,ComplexAbs:()=>f.yj2,Concat:()=>f.Eh3,Conv2D:()=>f.mhS,Conv2DBackpropFilter:()=>f.wUP,Conv2DBackpropInput:()=>f.wm,Conv3D:()=>f.x12,Conv3DBackpropFilterV2:()=>f.o2y,Conv3DBackpropInputV2:()=>f.ik2,Cos:()=>f.mc4,Cosh:()=>f.TR1,CropAndResize:()=>f.VcC,Cumprod:()=>f.Byc,Cumsum:()=>f.iHb,DataStorage:()=>ac.JL,DenseBincount:()=>f.QRR,DepthToSpace:()=>f.T0n,DepthwiseConv2dNative:()=>f.cie,DepthwiseConv2dNativeBackpropFilter:()=>f.sL$,DepthwiseConv2dNativeBackpropInput:()=>f.y7R,Diag:()=>f.$w,Dilation2D:()=>f.p4S,Dilation2DBackpropFilter:()=>f.Vn9,Dilation2DBackpropInput:()=>f.ekb,Draw:()=>f.hGc,ENV:()=>Ke.Vi,Einsum:()=>f.$g6,Elu:()=>f.SX0,EluGrad:()=>f.HEU,Environment:()=>Ke.qA,Equal:()=>f.hdR,Erf:()=>f.Omj,Exp:()=>f.NEP,ExpandDims:()=>f.YFo,Expm1:()=>f.Y0y,FFT:()=>f.vwp,Fill:()=>f.deh,FlipLeftRight:()=>f.Uyb,Floor:()=>f.OR,FloorDiv:()=>f.jeX,FromPixels:()=>f.eBW,FusedBatchNorm:()=>f.sHE,FusedConv2D:()=>f._V0,FusedDepthwiseConv2D:()=>f.luS,GatherNd:()=>f.q1x,GatherV2:()=>f.qi_,Greater:()=>f.iZT,GreaterEqual:()=>f.Acj,IFFT:()=>f.Qg5,Identity:()=>f.iJz,Imag:()=>f.J_u,IsFinite:()=>f.avt,IsInf:()=>f.iWB,IsNan:()=>f.r7n,KernelBackend:()=>ac.Zu,LRN:()=>f.eZ0,LRNGrad:()=>f.Hhh,LeakyRelu:()=>f.J$2,Less:()=>f.vtC,LessEqual:()=>f.CAk,LinSpace:()=>f.e7N,Log:()=>f.ZbH,Log1p:()=>f.kU,LogSoftmax:()=>f.qCd,LogicalAnd:()=>f.PYm,LogicalNot:()=>f.VfG,LogicalOr:()=>f.MZg,LogicalXor:()=>f.w6g,LowerBound:()=>f.qIC,MatrixBandPart:()=>f.J7O,Max:()=>f.YoZ,MaxPool:()=>f.mTV,MaxPool3D:()=>f.OAf,MaxPool3DGrad:()=>f.OU7,MaxPoolGrad:()=>f.OV7,MaxPoolWithArgmax:()=>f.vFR,Maximum:()=>f.BMI,Mean:()=>f.q2K,Min:()=>f.c17,Minimum:()=>f.q8u,MirrorPad:()=>f.jQs,Mod:()=>f.Vbg,MomentumOptimizer:()=>Ro,Multinomial:()=>f.NZg,Multiply:()=>f.wYn,Neg:()=>f.kuV,NonMaxSuppressionV3:()=>f.uv1,NonMaxSuppressionV4:()=>f.cye,NonMaxSuppressionV5:()=>f.W0H,NotEqual:()=>f.yQU,OP_SCOPE_SUFFIX:()=>we.zvA,OneHot:()=>f.we_,OnesLike:()=>f.qWM,Optimizer:()=>Ii,OptimizerConstructors:()=>$a,Pack:()=>f.QiL,PadV2:()=>f.lyA,Pool:()=>f.Kgp,Pow:()=>f.pe_,Prelu:()=>f.o0g,Prod:()=>f.DlI,RMSPropOptimizer:()=>ro,RaggedGather:()=>f.dDz,RaggedRange:()=>f.CQl,RaggedTensorToTensor:()=>f.BiW,Range:()=>f.e6w,Rank:()=>Bo.yw,Real:()=>f.xJR,RealDiv:()=>f.oHH,Reciprocal:()=>f.$HU,Reduction:()=>Xd.I,Relu:()=>f.qkr,Relu6:()=>f.SbG,Reshape:()=>f.HZH,ResizeBilinear:()=>f._Yw,ResizeBilinearGrad:()=>f.zbQ,ResizeNearestNeighbor:()=>f.dpD,ResizeNearestNeighborGrad:()=>f.Hmb,Reverse:()=>f.mKl,RotateWithOffset:()=>f.b9H,Round:()=>f.e07,Rsqrt:()=>f.bV0,SGDOptimizer:()=>no,ScatterNd:()=>f.xQA,SearchSorted:()=>f.nr8,Select:()=>f.PhF,Selu:()=>f.oFR,Sigmoid:()=>f.a5O,Sign:()=>f.i5y,Sin:()=>f.RQH,Sinh:()=>f.wYB,Slice:()=>f.p2w,Softmax:()=>f.Gcp,Softplus:()=>f.MRv,SpaceToBatchND:()=>f.TQc,SparseFillEmptyRows:()=>f.O3z,SparseReshape:()=>f.nhH,SparseSegmentMean:()=>f.w3H,SparseSegmentSum:()=>f.ZjV,SparseToDense:()=>f.D2d,SplitV:()=>f.L8s,Sqrt:()=>f.FKq,Square:()=>f.bK0,SquaredDifference:()=>f._tC,StaticRegexReplace:()=>f.e0R,Step:()=>f.h8e,StridedSlice:()=>f.jQk,StringNGrams:()=>f._JP,StringSplit:()=>f.s1s,StringToHashBucketFast:()=>f.XkS,Sub:()=>f.Tr8,Sum:()=>f.GBy,Tan:()=>f.sEM,Tanh:()=>f.MIZ,Tensor:()=>fi.es,TensorBuffer:()=>fi.YD,TensorScatterUpdate:()=>f.SIB,Tile:()=>f.n9L,TopK:()=>f.cWu,Transform:()=>f.wx7,Transpose:()=>f.G3Y,Unique:()=>f.kpP,Unpack:()=>f.ToN,UnsortedSegmentSum:()=>f.Qvg,UpperBound:()=>f.XDQ,Variable:()=>fi._w,ZerosLike:()=>f.RuY,_FusedMatMul:()=>f.usg,abs:()=>we.WnP,acos:()=>we.Khb,acosh:()=>we.__u,add:()=>we.IHx,addN:()=>we.QBD,all:()=>we.$6P,any:()=>we.YjB,argMax:()=>we.NqF,argMin:()=>we.vHJ,asin:()=>we.ZRM,asinh:()=>we.VfV,atan:()=>we.z4N,atan2:()=>we.fvJ,atanh:()=>we.C80,avgPool:()=>we.wS1,avgPool3d:()=>we.uR5,backend:()=>Pt.y3,backend_util:()=>te,basicLSTMCell:()=>we.zEQ,batchNorm:()=>we.tgs,batchNorm2d:()=>we.Dxk,batchNorm3d:()=>we.JY5,batchNorm4d:()=>we.p3b,batchToSpaceND:()=>we.E4h,bincount:()=>we.yE8,bitwiseAnd:()=>we.ycw,booleanMaskAsync:()=>we.anm,broadcastArgs:()=>we.XsQ,broadcastTo:()=>we.UFq,broadcast_util:()=>Fo,browser:()=>T,buffer:()=>we.f3b,cast:()=>we.pju,ceil:()=>we.mDi,clipByValue:()=>we.iUl,clone:()=>we.d9v,complex:()=>we.PYB,concat:()=>we.zoF,concat1d:()=>we.gME,concat2d:()=>we.Izb,concat3d:()=>we.MNy,concat4d:()=>we.ZaL,conv1d:()=>we.PAt,conv2d:()=>we.Tek,conv2dTranspose:()=>we.bc,conv3d:()=>we.pdZ,conv3dTranspose:()=>we.$QV,copyRegisteredKernels:()=>d.T3,cos:()=>we.mCk,cosh:()=>we.f9Y,cosineWindow:()=>we.mew,cumprod:()=>we.$Gn,cumsum:()=>we.zbp,customGrad:()=>pi.cb,denseBincount:()=>we.ppE,deprecationWarn:()=>Pt.MX,depthToSpace:()=>we.nTT,depthwiseConv2d:()=>we.B10,device_util:()=>ce,diag:()=>we.Ka3,dilation2d:()=>we.WmZ,disableDeprecationWarnings:()=>Pt.cF,dispose:()=>Pt.B9,disposeVariables:()=>Pt.N8,div:()=>we.hiC,divNoNan:()=>we.NTj,dot:()=>we.AKD,dropout:()=>we.rvX,einsum:()=>we.WYO,elu:()=>we.pyx,enableDebugMode:()=>Pt.R,enableProdMode:()=>Pt.G4,enclosingPowerOfTwo:()=>we.GRh,engine:()=>Pt.SR,ensureShape:()=>we.EDe,env:()=>Ke.OB,equal:()=>we.DgJ,erf:()=>we.qNN,euclideanNorm:()=>we.d2q,exp:()=>we.Qqt,expandDims:()=>we.dt4,expm1:()=>we.t$B,eye:()=>we.iyy,fft:()=>we.kp_,fill:()=>we.hlL,findBackend:()=>Pt.x3,findBackendFactory:()=>Pt.ze,floor:()=>we.GWj,floorDiv:()=>we.qPi,fused:()=>we.imm,gather:()=>we.Iqj,gatherND:()=>we.dbB,gather_util:()=>$,getBackend:()=>Pt.N_,getGradient:()=>d.uk,getKernel:()=>d.pI,getKernelsForBackend:()=>d.tr,grad:()=>pi.UQ,grads:()=>pi.ti,greater:()=>we.pjt,greaterEqual:()=>we.brS,ifft:()=>we.Sxn,imag:()=>we.asL,image:()=>we.BHj,inTopKAsync:()=>we.V3u,io:()=>H,irfft:()=>we.wx0,isFinite:()=>we.xVT,isInf:()=>we.UWc,isNaN:()=>we.i2d,keep:()=>Pt.Cn,kernel_impls:()=>Y,leakyRelu:()=>we.hi7,less:()=>we.d9m,lessEqual:()=>we.zN1,linalg:()=>we.$r2,linspace:()=>we.SX3,localResponseNormalization:()=>we.G9k,log:()=>we.cM7,log1p:()=>we.Krr,logSigmoid:()=>we.e_t,logSoftmax:()=>we.CmS,logSumExp:()=>we.l_t,logicalAnd:()=>we.HvI,logicalNot:()=>we.hJK,logicalOr:()=>we.K5V,logicalXor:()=>we.egP,losses:()=>we.MB5,lowerBound:()=>we.eab,matMul:()=>we.OI3,math:()=>q,max:()=>we.Fp7,maxPool:()=>we._sB,maxPool3d:()=>we.YQQ,maxPoolWithArgmax:()=>we.Ip$,maximum:()=>we.gWQ,mean:()=>we.J69,memory:()=>Pt.sq,meshgrid:()=>we.ry_,min:()=>we.VV$,minimum:()=>we.LTh,mirrorPad:()=>we.VdP,mod:()=>we.wQq,moments:()=>we.Gi7,movingAverage:()=>we.p_,mul:()=>we.dC7,multiRNNCell:()=>we.rq4,multinomial:()=>we.SJ_,neg:()=>we.W76,nextFrame:()=>Ps,norm:()=>we.KOy,notEqual:()=>we.Quu,oneHot:()=>we.lfX,ones:()=>we.iUs,onesLike:()=>we.JpU,op:()=>we.op,outerProduct:()=>we.N2O,pad:()=>we.vku,pad1d:()=>we.pNR,pad2d:()=>we.koy,pad3d:()=>we.t1L,pad4d:()=>we.lGY,pool:()=>we.d_R,pow:()=>we.sQ3,prelu:()=>we.AL3,print:()=>we.S0v,prod:()=>we.WVs,profile:()=>Pt.N5,raggedGather:()=>we.$gW,raggedRange:()=>we.VT$,raggedTensorToTensor:()=>we.N89,rand:()=>we.TN_,randomGamma:()=>we.wzB,randomNormal:()=>we.nGf,randomStandardNormal:()=>we.ruB,randomUniform:()=>we.LGj,randomUniformInt:()=>we.pe5,range:()=>we.w6H,ready:()=>Pt.Cd,real:()=>we.kwC,reciprocal:()=>we.M25,registerBackend:()=>Pt.jq,registerGradient:()=>d.Li,registerKernel:()=>d.wC,relu:()=>we.UYe,relu6:()=>we.btT,removeBackend:()=>Pt.cj,reshape:()=>we.XLQ,reverse:()=>we.GYS,reverse1d:()=>we.SDf,reverse2d:()=>we.diP,reverse3d:()=>we.sx7,reverse4d:()=>we.mG2,rfft:()=>we.QEs,round:()=>we.NMM,rsqrt:()=>we.bp0,scalar:()=>we.iD$,scatterND:()=>we.snQ,scatter_util:()=>Cr,searchSorted:()=>we.zcT,selu:()=>we.U8D,separableConv2d:()=>we.U_I,serialization:()=>ye,setBackend:()=>Pt.CQ,setPlatform:()=>Pt.VY,setdiff1dAsync:()=>we.ODp,sigmoid:()=>we.XD2,sign:()=>we.Xxe,signal:()=>we.tdS,sin:()=>we.O$l,sinh:()=>we.R_K,slice:()=>we.tPi,slice1d:()=>we.jZU,slice2d:()=>we.SmN,slice3d:()=>we.CnO,slice4d:()=>we.p0P,slice_util:()=>se,softmax:()=>we.XAC,softplus:()=>we.Wvh,spaceToBatchND:()=>we.fBT,sparse:()=>we.rVs,sparseToDense:()=>we.ers,spectral:()=>we.uN7,split:()=>we.Vl2,sqrt:()=>we._b3,square:()=>we.h62,squaredDifference:()=>we.$i,squeeze:()=>we.L9e,stack:()=>we.knu,step:()=>we.Nbs,stridedSlice:()=>we.NXj,string:()=>we.Z_8,sub:()=>we.luU,sum:()=>we.Smz,sumOutType:()=>Bo.z4,tan:()=>we.ORZ,tanh:()=>we.AEp,tensor:()=>we.XeE,tensor1d:()=>we.RRF,tensor2d:()=>we.odF,tensor3d:()=>we.wOQ,tensor4d:()=>we.yXz,tensor5d:()=>we.Bfx,tensor6d:()=>we.xZs,tensorScatterUpdate:()=>we.Pg0,tensor_util:()=>bp,test_util:()=>ne,tidy:()=>Pt.lu,tile:()=>we.Gg6,time:()=>Pt.XV,topk:()=>we.hg7,train:()=>qd,transpose:()=>we.p4s,truncatedNormal:()=>we.Xu6,unique:()=>we.Two,unregisterGradient:()=>d.bt,unregisterKernel:()=>d.nE,unsortedSegmentSum:()=>we.pUJ,unstack:()=>we.HHK,upcastType:()=>Bo.x8,upperBound:()=>we.GaM,util:()=>an,valueAndGrad:()=>pi.h7,valueAndGrads:()=>pi.fN,variable:()=>we.VD$,variableGrads:()=>pi.pn,version_core:()=>ft,where:()=>we.arb,whereAsync:()=>we.itS,zeros:()=>we.lls,zerosLike:()=>we.P84});var ce={};I.r(ce),I.d(ce,{isBrowser:()=>Qe,isMobile:()=>Ne,mockIsMobile:()=>he});var ye={};I.r(ye),I.d(ye,{Serializable:()=>ta,SerializationMap:()=>ii,getRegisteredName:()=>Di,registerClass:()=>na});var H={};I.r(H),I.d(H,{CompositeArrayBuffer:()=>Q.w,browserFiles:()=>Bt,browserHTTPRequest:()=>Gi,concatenateArrayBuffers:()=>re.JY,copyModel:()=>Ys,decodeWeights:()=>re.dI,decodeWeightsStream:()=>re.r,encodeWeights:()=>re.yz,fromMemory:()=>Ht,fromMemorySync:()=>Ki,getLoadHandlers:()=>N,getModelArtifactsForJSON:()=>re.jN,getModelArtifactsForJSONSync:()=>re.ji,getModelArtifactsInfoForJSON:()=>re.Q,getSaveHandlers:()=>ie,getWeightSpecs:()=>re.hu,http:()=>oa,isHTTPScheme:()=>ks,listModels:()=>To,loadWeights:()=>En,moveModel:()=>Js,registerLoadRouter:()=>ue,registerSaveRouter:()=>Je,removeModel:()=>Mo,weightsLoaderFactory:()=>An,withSaveHandler:()=>Po,withSaveHandlerSync:()=>On});var q={};I.r(q),I.d(q,{confusionMatrix:()=>vs});var T={};I.r(T),I.d(T,{draw:()=>Nt,fromPixels:()=>sn,fromPixelsAsync:()=>nt,toPixels:()=>qt});var $={};I.r($),I.d($,{prepareAndValidate:()=>Kn});var se={};I.r(se),I.d(se,{assertParamsValid:()=>ao,computeFlatOffset:()=>xs,computeOutShape:()=>lo,getNormalizedAxes:()=>_p,isSliceContinous:()=>ml,maskToAxes:()=>on,parseSliceParams:()=>qi,sliceInfo:()=>jd,startForAxis:()=>ot,startIndicesWithElidedDims:()=>Vn,stopForAxis:()=>pl,stopIndicesWithElidedDims:()=>zd,stridesForAxis:()=>Ud,stridesWithElidedDims:()=>$o});var ne={};I.r(ne),I.d(ne,{TEST_EPSILON_FLOAT16:()=>Wd,createVideoElement:()=>bl,encodeStrings:()=>Os,expectArrayBuffersEqual:()=>Kd,expectArraysClose:()=>Fa,expectArraysEqual:()=>Gd,expectNumbersClose:()=>Yc,expectPromiseToFail:()=>yl,expectValuesInRange:()=>Lo,play:()=>We,testEpsilon:()=>ca});var G={};I.r(G),I.d(G,{collectGatherOpShapeInfo:()=>ur,computeOutShape:()=>co,segOpComputeOptimalWindowSize:()=>Zr});var te={};I.r(te),I.d(te,{ERF_A1:()=>Jd,ERF_A2:()=>Ji,ERF_A3:()=>eh,ERF_A4:()=>ru,ERF_A5:()=>th,ERF_P:()=>Qd,PARALLELIZE_THRESHOLD:()=>vl,RowPartitionType:()=>Qi,SELU_SCALE:()=>sc,SELU_SCALEALPHA:()=>Yd,applyActivation:()=>Yi.QH,assertAndGetBroadcastShape:()=>Fo.assertAndGetBroadcastShape,assertAxesAreInnerMostDims:()=>Zi.lB,assertParamsConsistent:()=>Kr,assignToTypedArray:()=>oh,axesAreInnerMostDims:()=>Zi.YB,calculateShapes:()=>Cr.calculateShapes,checkEinsumDimSizes:()=>si,checkPadOnDimRoundingMode:()=>Zt.m,combineLocations:()=>Zi.Vh,combineRaggedTensorToTensorShapes:()=>rc,complexWithEvenIndex:()=>iu,complexWithOddIndex:()=>ih,computeConv2DInfo:()=>Zt.Ix,computeConv3DInfo:()=>Zt.jw,computeDefaultPad:()=>Zt.aO,computeDilation2DInfo:()=>Zt.Rf,computeOptimalWindowSize:()=>Qc,computeOutAndReduceShapes:()=>Zi.kz,computeOutShape:()=>Xr,computePool2DInfo:()=>Zt.Xw,computePool3DInfo:()=>Zt.pl,convertConv2DDataFormat:()=>Zt.sl,decodeEinsumEquation:()=>au,eitherStridesOrDilationsAreOne:()=>Zt.jT,expandShapeToKeepDim:()=>Zi.rv,exponent:()=>ah,exponents:()=>rr,fromStringArrayToUint8:()=>pa,fromUint8ToStringArray:()=>uo,getAxesPermutation:()=>Zi.Q3,getBroadcastDims:()=>Fo.getBroadcastDims,getComplexWithIndex:()=>sh,getEinsumComputePath:()=>bn,getEinsumPermutation:()=>Rt,getFusedBiasGradient:()=>Yi.pf,getFusedDyActivation:()=>Yi.Fr,getImageCenter:()=>ic,getInnerMostAxes:()=>Zi.sY,getPermuted:()=>eu,getRaggedRank:()=>Fs,getReductionAxes:()=>Fo.getReductionAxes,getReshaped:()=>Jc,getReshapedPermuted:()=>Va,getRowPartitionTypesHelper:()=>La,getSliceBeginCoords:()=>tu,getSliceSize:()=>nu,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>mi,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>lu,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>cu,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>ch,getSparseReshapeInputOutputMismatchErrorMessage:()=>St,getSparseReshapeInputOutputMultipleErrorMessage:()=>ir,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>xl,getSparseReshapeNegativeOutputDimErrorMessage:()=>lh,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>wl,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>en,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>Zn,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>es,getUndoAxesPermutation:()=>Zi.LJ,isIdentityPermutation:()=>kr,log:()=>ha.c,mergeRealAndImagArrays:()=>nh,prepareAndValidate:()=>Kn,prepareSplitSize:()=>fa,segment_util:()=>G,shouldFuse:()=>Yi.uy,slice_util:()=>se,splitRealAndImagArrays:()=>rh,stridesOrDilationsArePositive:()=>Zt.U3,tupleValuesAreOne:()=>Zt.I0,upcastType:()=>Bo.x8,validateDefaultValueShape:()=>Ba,validateInput:()=>Cr.validateInput,validateUpdateShape:()=>Cr.validateUpdateShape,warn:()=>ha.Z});var Y={};I.r(Y),I.d(Y,{nonMaxSuppressionV3Impl:()=>Yt.GP,nonMaxSuppressionV4Impl:()=>Yt.qP,nonMaxSuppressionV5Impl:()=>Yt.pA,whereImpl:()=>za.Z});var S=I(687);let Se;function he(R){Se=R}function Ne(R){if(void 0!==Se)return Se;if(R||function ee(){return typeof navigator<"u"&&null!=navigator}()){if(R||(R=navigator),"ReactNative"===R.product)return!0;const x=R.userAgent||R.vendor||(typeof window<"u"?window.opera:"");return x?/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(x)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(x.substr(0,4)):R.userAgentData&&R.userAgentData.mobile}return!1}function Qe(){return typeof window<"u"&&null!=window.document||typeof WorkerGlobalScope<"u"}var Ke=I(5527);const _t=(0,Ke.OB)();_t.registerFlag("DEBUG",()=>!1,R=>{R&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),_t.registerFlag("IS_BROWSER",()=>Qe()),_t.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"),_t.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),_t.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),_t.registerFlag("PROD",()=>!1),_t.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>_t.getBool("DEBUG")),_t.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),_t.registerFlag("IS_TEST",()=>!1),_t.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>_t.getBool("DEBUG")),_t.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),_t.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),_t.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);var Ze=I(5861),re=I(8339);class ze{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==ze.instance&&(ze.instance=new ze),ze.instance}static registerSaveRouter(x){ze.getInstance().saveRouters.push(x)}static registerLoadRouter(x){ze.getInstance().loadRouters.push(x)}static getSaveHandlers(x){return ze.getHandlers(x,"save")}static getLoadHandlers(x,M){return ze.getHandlers(x,"load",M)}static getHandlers(x,M,F){const j=[];return("load"===M?ze.getInstance().loadRouters:ze.getInstance().saveRouters).forEach(me=>{const Me=me(x,F);null!==Me&&j.push(Me)}),j}}const Je=R=>ze.registerSaveRouter(R),ue=R=>ze.registerLoadRouter(R),ie=R=>ze.getSaveHandlers(R),N=(R,x)=>ze.getLoadHandlers(R,x);var Q=I(7864);const le="tensorflowjs",v="models_store",Le="model_info_store";function Te(){if(!(0,Ke.OB)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const R=typeof window>"u"?self:window,x=R.indexedDB||R.mozIndexedDB||R.webkitIndexedDB||R.msIndexedDB||R.shimIndexedDB;if(null==x)throw new Error("The current browser does not appear to support IndexedDB.");return x}function Ie(R){const x=R.result;x.createObjectStore(v,{keyPath:"modelPath"}),x.createObjectStore(Le,{keyPath:"modelPath"})}let be=(()=>{class R{constructor(M){if(this.indexedDB=Te(),null==M||!M)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=M}save(M){var F=this;return(0,Ze.Z)(function*(){if(M.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return F.databaseAction(F.modelPath,M)})()}load(){var M=this;return(0,Ze.Z)(function*(){return M.databaseAction(M.modelPath)})()}databaseAction(M,F){return new Promise((j,oe)=>{const me=this.indexedDB.open(le,1);me.onupgradeneeded=()=>Ie(me),me.onsuccess=()=>{const Me=me.result;if(null==F){const Ue=Me.transaction(v,"readonly"),xt=Ue.objectStore(v).get(this.modelPath);xt.onsuccess=()=>{if(null==xt.result)return Me.close(),oe(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));j(xt.result.modelArtifacts)},xt.onerror=He=>(Me.close(),oe(xt.error)),Ue.oncomplete=()=>Me.close()}else{F.weightData=Q.w.join(F.weightData);const Ue=(0,re.Q)(F),Ge=Me.transaction(Le,"readwrite");let He,at,xt=Ge.objectStore(Le);try{He=xt.put({modelPath:this.modelPath,modelArtifactsInfo:Ue})}catch(Ot){return oe(Ot)}He.onsuccess=()=>{at=Me.transaction(v,"readwrite");const Ot=at.objectStore(v);let Wt;try{Wt=Ot.put({modelPath:this.modelPath,modelArtifacts:F,modelArtifactsInfo:Ue})}catch(ln){return oe(ln)}Wt.onsuccess=()=>j({modelArtifactsInfo:Ue}),Wt.onerror=ln=>{xt=Ge.objectStore(Le);const Rn=xt.delete(this.modelPath);Rn.onsuccess=()=>(Me.close(),oe(Wt.error)),Rn.onerror=vr=>(Me.close(),oe(Wt.error))}},He.onerror=Ot=>(Me.close(),oe(He.error)),Ge.oncomplete=()=>{null==at?Me.close():at.oncomplete=()=>Me.close()}}},me.onerror=Me=>oe(me.error)})}}return R.URL_SCHEME="indexeddb://",R})();const ut=R=>(0,Ke.OB)().getBool("IS_BROWSER")&&!Array.isArray(R)&&R.startsWith(be.URL_SCHEME)?function Ce(R){return new be(R)}(R.slice(be.URL_SCHEME.length)):null;ze.registerSaveRouter(ut),ze.registerLoadRouter(ut);class Ye{constructor(){this.indexedDB=Te()}listModels(){var x=this;return(0,Ze.Z)(function*(){return new Promise((M,F)=>{const j=x.indexedDB.open(le,1);j.onupgradeneeded=()=>Ie(j),j.onsuccess=()=>{const oe=j.result,me=oe.transaction(Le,"readonly"),Ue=me.objectStore(Le).getAll();Ue.onsuccess=()=>{const Ge={};for(const xt of Ue.result)Ge[xt.modelPath]=xt.modelArtifactsInfo;M(Ge)},Ue.onerror=Ge=>(oe.close(),F(Ue.error)),me.oncomplete=()=>oe.close()},j.onerror=oe=>F(j.error)})})()}removeModel(x){var M=this;return(0,Ze.Z)(function*(){return x=function De(R){return R.startsWith(be.URL_SCHEME)?R.slice(be.URL_SCHEME.length):R}(x),new Promise((F,j)=>{const oe=M.indexedDB.open(le,1);oe.onupgradeneeded=()=>Ie(oe),oe.onsuccess=()=>{const me=oe.result,Me=me.transaction(Le,"readwrite"),Ue=Me.objectStore(Le),Ge=Ue.get(x);let xt;Ge.onsuccess=()=>{if(null==Ge.result)return me.close(),j(new Error(`Cannot find model with path '${x}' in IndexedDB.`));{const He=Ue.delete(x),at=()=>{xt=me.transaction(v,"readwrite");const Wt=xt.objectStore(v).delete(x);Wt.onsuccess=()=>F(Ge.result.modelArtifactsInfo),Wt.onerror=ln=>j(Ge.error)};He.onsuccess=at,He.onerror=Ot=>(at(),me.close(),j(Ge.error))}},Ge.onerror=He=>(me.close(),j(Ge.error)),Me.oncomplete=()=>{null==xt?me.close():xt.oncomplete=()=>me.close()}},oe.onerror=me=>j(oe.error)})})()}}var Pe=I(5359);const tt="/",et="tensorflowjs_models",mt="info",qe="model_topology",At="weight_specs",Wn="weight_data",Ut="model_metadata";function Be(R){return{info:[et,R,mt].join(tt),topology:[et,R,qe].join(tt),weightSpecs:[et,R,At].join(tt),weightData:[et,R,Wn].join(tt),modelMetadata:[et,R,Ut].join(tt)}}function Xe(R){for(const x of Object.values(R))window.localStorage.removeItem(x)}function vt(R){const x=R.split(tt);if(x.length<3)throw new Error(`Invalid key format: ${R}`);return x.slice(1,x.length-1).join(tt)}let un=(()=>{class R{constructor(M){if(!(0,Ke.OB)().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==M||!M)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=M,this.keys=Be(this.modelPath)}save(M){var F=this;return(0,Ze.Z)(function*(){if(M.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const j=JSON.stringify(M.modelTopology),oe=JSON.stringify(M.weightSpecs),me=(0,re.Q)(M),Me=Q.w.join(M.weightData);try{return F.LS.setItem(F.keys.info,JSON.stringify(me)),F.LS.setItem(F.keys.topology,j),F.LS.setItem(F.keys.weightSpecs,oe),F.LS.setItem(F.keys.weightData,(0,re._n)(Me)),F.LS.setItem(F.keys.modelMetadata,JSON.stringify({format:M.format,generatedBy:M.generatedBy,convertedBy:M.convertedBy,signature:null!=M.signature?M.signature:void 0,userDefinedMetadata:null!=M.userDefinedMetadata?M.userDefinedMetadata:void 0,modelInitializer:null!=M.modelInitializer?M.modelInitializer:void 0,initializerSignature:null!=M.initializerSignature?M.initializerSignature:void 0,trainingConfig:null!=M.trainingConfig?M.trainingConfig:void 0})),{modelArtifactsInfo:me}}catch{throw Xe(F.keys),new Error(`Failed to save model '${F.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${me.modelTopologyBytes}, weightSpecsBytes=${me.weightSpecsBytes}, weightDataBytes=${me.weightDataBytes}.`)}}})()}load(){var M=this;return(0,Ze.Z)(function*(){const F=JSON.parse(M.LS.getItem(M.keys.info));if(null==F)throw new Error(`In local storage, there is no model with name '${M.modelPath}'`);if("JSON"!==F.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const j={},oe=JSON.parse(M.LS.getItem(M.keys.topology));if(null==oe)throw new Error(`In local storage, the topology of model '${M.modelPath}' is missing.`);j.modelTopology=oe;const me=JSON.parse(M.LS.getItem(M.keys.weightSpecs));if(null==me)throw new Error(`In local storage, the weight specs of model '${M.modelPath}' are missing.`);j.weightSpecs=me;const Me=M.LS.getItem(M.keys.modelMetadata);if(null!=Me){const Ge=JSON.parse(Me);j.format=Ge.format,j.generatedBy=Ge.generatedBy,j.convertedBy=Ge.convertedBy,null!=Ge.signature&&(j.signature=Ge.signature),null!=Ge.userDefinedMetadata&&(j.userDefinedMetadata=Ge.userDefinedMetadata),null!=Ge.modelInitializer&&(j.modelInitializer=Ge.modelInitializer),null!=Ge.initializerSignature&&(j.initializerSignature=Ge.initializerSignature),null!=Ge.trainingConfig&&(j.trainingConfig=Ge.trainingConfig)}const Ue=M.LS.getItem(M.keys.weightData);if(null==Ue)throw new Error(`In local storage, the binary weight values of model '${M.modelPath}' are missing.`);return j.weightData=(0,re.n7)(Ue),j})()}}return R.URL_SCHEME="localstorage://",R})();const kn=R=>(0,Ke.OB)().getBool("IS_BROWSER")&&!Array.isArray(R)&&R.startsWith(un.URL_SCHEME)?function Cn(R){return new un(R)}(R.slice(un.URL_SCHEME.length)):null;ze.registerSaveRouter(kn),ze.registerLoadRouter(kn);class lr{constructor(){(0,Pe.hu)((0,Ke.OB)().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),(0,Pe.hu)(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){var x=this;return(0,Ze.Z)(function*(){const M={},F=et+tt,j=tt+mt;for(let oe=0;oe<x.LS.length;++oe){const me=x.LS.key(oe);me.startsWith(F)&&me.endsWith(j)&&(M[vt(me)]=JSON.parse(x.LS.getItem(me)))}return M})()}removeModel(x){var M=this;return(0,Ze.Z)(function*(){const F=Be(x=function cn(R){return R.startsWith(un.URL_SCHEME)?R.slice(un.URL_SCHEME.length):R}(x));if(null==M.LS.getItem(F.info))throw new Error(`Cannot find model at path '${x}'`);const j=JSON.parse(M.LS.getItem(F.info));return Xe(F),j})()}}const hi="://";class nr{constructor(){this.managers={}}static getInstance(){return null==nr.instance&&(nr.instance=new nr),nr.instance}static registerManager(x,M){(0,Pe.hu)(null!=x,()=>"scheme must not be undefined or null."),x.endsWith(hi)&&(x=x.slice(0,x.indexOf(hi))),(0,Pe.hu)(x.length>0,()=>"scheme must not be an empty string.");const F=nr.getInstance();(0,Pe.hu)(null==F.managers[x],()=>`A model store manager is already registered for scheme '${x}'.`),F.managers[x]=M}static getManager(x){const M=nr.getInstance().managers[x];if(null==M)throw new Error(`Cannot find model manager for scheme '${x}'`);return M}static getSchemes(){return Object.keys(nr.getInstance().managers)}}function As(R){if(-1===R.indexOf(hi))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${nr.getSchemes().join(",")}`);return{scheme:R.split(hi)[0],path:R.split(hi)[1]}}function us(R,x){return ds.apply(this,arguments)}function ds(){return(ds=(0,Ze.Z)(function*(R,x,M=!1){(0,Pe.hu)(R!==x,()=>`Old path and new path are the same: '${R}'`);const F=ze.getLoadHandlers(R);(0,Pe.hu)(F.length>0,()=>`Copying failed because no load handler is found for source URL ${R}.`),(0,Pe.hu)(F.length<2,()=>`Copying failed because more than one (${F.length}) load handlers for source URL ${R}.`);const j=F[0],oe=ze.getSaveHandlers(x);(0,Pe.hu)(oe.length>0,()=>`Copying failed because no save handler is found for destination URL ${x}.`),(0,Pe.hu)(oe.length<2,()=>`Copying failed because more than one (${F.length}) save handlers for destination URL ${x}.`);const me=oe[0],Me=As(R).scheme,Ue=As(R).path,Ge=Me===As(R).scheme,xt=yield j.load();M&&Ge&&(yield nr.getManager(Me).removeModel(Ue));const He=yield me.save(xt);return M&&!Ge&&(yield nr.getManager(Me).removeModel(Ue)),He.modelArtifactsInfo})).apply(this,arguments)}function To(){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,Ze.Z)(function*(){const R=nr.getSchemes(),x={};for(const M of R){const F=yield nr.getManager(M).listModels();for(const j in F)x[M+hi+j]=F[j]}return x})).apply(this,arguments)}function Mo(R){return $r.apply(this,arguments)}function $r(){return($r=(0,Ze.Z)(function*(R){const x=As(R);return nr.getManager(x.scheme).removeModel(x.path)})).apply(this,arguments)}function Ys(R,x){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,Ze.Z)(function*(R,x){return us(R,x,!1)})).apply(this,arguments)}function Js(R,x){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,Ze.Z)(function*(R,x){return us(R,x,!0)})).apply(this,arguments)}var hs=I(4705);class Ei{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(x,M){return fetch(x,M)}now(){return performance.now()}encode(x,M){if("utf-8"!==M&&"utf8"!==M)throw new Error(`Browser's encoder only supports utf-8, but got ${M}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(x)}decode(x,M){return new TextDecoder(M).decode(x)}setTimeoutCustom(x,M){typeof window>"u"||!(0,Ke.OB)().getBool("USE_SETTIMEOUTCUSTOM")?setTimeout(x,M):(this.functionRefs.push(x),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},M),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",F=>{F.source===window&&F.data.name===this.messageName&&(F.stopPropagation(),(0,this.functionRefs[F.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0))},!0)))}isTypedArray(x){return(0,hs.j)(x)}}if((0,Ke.OB)().get("IS_BROWSER")){(0,Ke.OB)().setPlatform("browser",new Ei);try{nr.registerManager(un.URL_SCHEME,new lr)}catch{}try{nr.registerManager(be.URL_SCHEME,new Ye)}catch{}}let fs;(0,Ke.OB)().get("IS_NODE")&&!(0,Ke.OB)().get("IS_BROWSER")&&(0,Ke.OB)().setPlatform("node",new class ps{constructor(){this.util=I(8628),this.textEncoder=new this.util.TextEncoder}fetch(x,M){return null!=(0,Ke.OB)().global.fetch?(0,Ke.OB)().global.fetch(x,M):(null==fs&&(fs=I(5410)),fs(x,M))}now(){const x=process.hrtime();return 1e3*x[0]+x[1]/1e6}encode(x,M){if("utf-8"!==M&&"utf8"!==M)throw new Error(`Node built-in encoder only supports utf-8, but got ${M}`);return this.textEncoder.encode(x)}decode(x,M){return 0===x.length?"":new this.util.TextDecoder(M).decode(x)}isTypedArray(x){return this.util.types.isFloat32Array(x)||this.util.types.isInt32Array(x)||this.util.types.isUint8Array(x)||this.util.types.isUint8ClampedArray(x)}});var ul=I(582),gr=I(3062),eo=I(7315),ms=I(3006),fi=I(4945);(0,S.wv)(),(0,fi.Vp)({buffer:ul.f,cast:gr.p,clone:eo.d,print:ms.S});var Pt=I(2773),xn=I(7066),Wr=I(3530),rn=I(8737),Ui=I(930),Si=I(7527),Bn=I(3143),pi=I(3537),ji=I(8661);const dl=new Map,No=new Map;class ta{getClassName(){return this.constructor.className}static fromConfig(x,M){return new x(M)}}class ii{constructor(){this.classNameMap={}}static getMap(){return null==ii.instance&&(ii.instance=new ii),ii.instance}static register(x){ii.getMap().classNameMap[x.className]=[x,x.fromConfig]}}function na(R,x,M){(0,Pe.hu)(null!=R.className,()=>"Class being registered does not have the static className property defined."),(0,Pe.hu)("string"==typeof R.className,()=>"className is required to be a string, but got type "+typeof R.className),(0,Pe.hu)(R.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof x>"u"&&(x="Custom"),typeof M>"u"&&(M=R.className);const j=x+">"+M;return ii.register(R),dl.set(j,R),No.set(R,j),R}function Di(R){return No.has(R)?No.get(R):R.className}class Ii extends ta{minimize(x,M=!1,F){const{value:j,grads:oe}=this.computeGradients(x,F);if(null!=F){const me=F.map(Me=>({name:Me.name,tensor:oe[Me.name]}));this.applyGradients(me)}else this.applyGradients(oe);return(0,Pt.B9)(oe),M?j:(j.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(x,M){return(0,pi.pn)(x,M)}dispose(){null!=this.iterations_&&(0,Pt.B9)(this.iterations_)}saveIterations(){var x=this;return(0,Ze.Z)(function*(){return null==x.iterations_&&(x.iterations_=0),{name:"iter",tensor:(0,ji.i)(x.iterations_,"int32")}})()}getWeights(){return(0,Ze.Z)(function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})()}setWeights(x){var M=this;return(0,Ze.Z)(function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${M.getClassName()}`)})()}extractIterations(x){var M=this;return(0,Ze.Z)(function*(){return M.iterations_=(yield x[0].tensor.data())[0],x.slice(1)})()}}Object.defineProperty(Ii,Symbol.hasInstance,{value:R=>null!=R.minimize&&null!=R.computeGradients&&null!=R.applyGradients});class er extends Ii{static get className(){return"Adadelta"}constructor(x,M,F=null){super(),this.learningRate=x,this.rho=M,this.epsilon=F,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==F&&(this.epsilon=S.BV.backend.epsilon())}applyGradients(x){(Array.isArray(x)?x.map(F=>F.name):Object.keys(x)).forEach((F,j)=>{const oe=S.BV.registeredVariables[F];null==this.accumulatedGrads[j]&&(this.accumulatedGrads[j]={originalName:`${F}/accum_grad`,variable:(0,Pt.lu)(()=>(0,Bn.P)(oe).variable(!1))}),null==this.accumulatedUpdates[j]&&(this.accumulatedUpdates[j]={originalName:`${F}/accum_var`,variable:(0,Pt.lu)(()=>(0,Bn.P)(oe).variable(!1))});const Me=Array.isArray(x)?x[j].tensor:x[F];if(null==Me)return;const Ue=this.accumulatedGrads[j].variable,Ge=this.accumulatedUpdates[j].variable;(0,Pt.lu)(()=>{const xt=(0,xn.I)((0,rn.d)(Ue,this.rho),(0,rn.d)((0,Si.h)(Me),1-this.rho)),He=(0,rn.d)((0,Wr.h)((0,Ui._)((0,xn.I)(Ge,this.epsilon)),(0,Ui._)((0,xn.I)(Ue,this.epsilon))),Me),at=(0,xn.I)((0,rn.d)(Ge,this.rho),(0,rn.d)((0,Si.h)(He),1-this.rho));Ue.assign(xt),Ge.assign(at);const Ot=(0,xn.I)((0,rn.d)(He,-this.learningRate),oe);oe.assign(Ot)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&((0,Pt.B9)(this.accumulatedGrads.map(x=>x.variable)),(0,Pt.B9)(this.accumulatedUpdates.map(x=>x.variable)))}getWeights(){var x=this;return(0,Ze.Z)(function*(){const M=[...x.accumulatedGrads,...x.accumulatedUpdates];return[yield x.saveIterations()].concat(M.map(F=>({name:F.originalName,tensor:F.variable})))})()}setWeights(x){var M=this;return(0,Ze.Z)(function*(){const F=(x=yield M.extractIterations(x)).length/2;M.accumulatedGrads=x.slice(0,F).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(!1)})),M.accumulatedUpdates=x.slice(F,2*F).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(!1)}))})()}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(x,M){return new x(M.learningRate,M.rho,M.epsilon)}}var gs=I(2787);class Lr extends Ii{static get className(){return"Adagrad"}constructor(x,M=.1){super(),this.learningRate=x,this.initialAccumulatorValue=M,this.accumulatedGrads=[]}applyGradients(x){(Array.isArray(x)?x.map(F=>F.name):Object.keys(x)).forEach((F,j)=>{const oe=S.BV.registeredVariables[F];null==this.accumulatedGrads[j]&&(this.accumulatedGrads[j]={originalName:`${F}/accumulator`,variable:(0,Pt.lu)(()=>(0,gs.h)(oe.shape,this.initialAccumulatorValue).variable(!1))});const me=Array.isArray(x)?x[j].tensor:x[F];if(null==me)return;const Me=this.accumulatedGrads[j].variable;(0,Pt.lu)(()=>{const Ue=(0,xn.I)(Me,(0,Si.h)(me));Me.assign(Ue);const Ge=(0,xn.I)((0,rn.d)((0,Wr.h)(me,(0,Ui._)((0,xn.I)(Ue,S.BV.backend.epsilon()))),-this.learningRate),oe);oe.assign(Ge)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&(0,Pt.B9)(this.accumulatedGrads.map(x=>x.variable))}getWeights(){var x=this;return(0,Ze.Z)(function*(){return[yield x.saveIterations()].concat(x.accumulatedGrads.map(M=>({name:M.originalName,tensor:M.variable})))})()}setWeights(x){var M=this;return(0,Ze.Z)(function*(){x=yield M.extractIterations(x),M.accumulatedGrads=x.map(j=>({originalName:j.name,variable:j.tensor.variable(!1)}))})()}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(x,M){return new x(M.learningRate,M.initialAccumulatorValue)}}var Aa=I(2962),ys=I(1191);class to extends Ii{static get className(){return"Adam"}constructor(x,M,F,j=null){super(),this.learningRate=x,this.beta1=M,this.beta2=F,this.epsilon=j,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],(0,Pt.lu)(()=>{this.accBeta1=(0,ji.i)(M).variable(),this.accBeta2=(0,ji.i)(F).variable()}),null==j&&(this.epsilon=S.BV.backend.epsilon())}applyGradients(x){const M=Array.isArray(x)?x.map(F=>F.name):Object.keys(x);(0,Pt.lu)(()=>{const F=(0,ys.l)(1,this.accBeta1),j=(0,ys.l)(1,this.accBeta2);M.forEach((oe,me)=>{const Me=S.BV.registeredVariables[oe];null==this.accumulatedFirstMoment[me]&&(this.accumulatedFirstMoment[me]={originalName:`${oe}/m`,variable:(0,Pt.lu)(()=>(0,Bn.P)(Me).variable(!1))}),null==this.accumulatedSecondMoment[me]&&(this.accumulatedSecondMoment[me]={originalName:`${oe}/v`,variable:(0,Pt.lu)(()=>(0,Bn.P)(Me).variable(!1))});const Ge=Array.isArray(x)?x[me].tensor:x[oe];if(null==Ge)return;const xt=this.accumulatedFirstMoment[me].variable,He=this.accumulatedSecondMoment[me].variable,at=(0,xn.I)((0,rn.d)(xt,this.beta1),(0,rn.d)(Ge,1-this.beta1)),Ot=(0,xn.I)((0,rn.d)(He,this.beta2),(0,rn.d)((0,Si.h)(Ge),1-this.beta2)),Wt=(0,Wr.h)(at,F),ln=(0,Wr.h)(Ot,j);xt.assign(at),He.assign(Ot);const Rn=(0,xn.I)((0,rn.d)((0,Wr.h)(Wt,(0,xn.I)((0,Ui._)(ln),this.epsilon)),-this.learningRate),Me);Me.assign(Rn)}),this.accBeta1.assign((0,rn.d)(this.accBeta1,this.beta1)),this.accBeta2.assign((0,rn.d)(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,Pt.B9)(this.accumulatedFirstMoment.map(x=>x.variable)),null!=this.accumulatedSecondMoment&&(0,Pt.B9)(this.accumulatedSecondMoment.map(x=>x.variable))}getWeights(){var x=this;return(0,Ze.Z)(function*(){const M=[...x.accumulatedFirstMoment,...x.accumulatedSecondMoment];return[yield x.saveIterations()].concat(M.map(F=>({name:F.originalName,tensor:F.variable})))})()}setWeights(x){var M=this;return(0,Ze.Z)(function*(){x=yield M.extractIterations(x),(0,Pt.lu)(()=>{M.accBeta1.assign((0,Aa.s)(M.beta1,M.iterations_+1)),M.accBeta2.assign((0,Aa.s)(M.beta2,M.iterations_+1))});const F=x.length/2;M.accumulatedFirstMoment=x.slice(0,F).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(!1)})),M.accumulatedSecondMoment=x.slice(F,2*F).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(!1)}))})()}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(x,M){return new x(M.learningRate,M.beta1,M.beta2,M.epsilon)}}var ra=I(6989),ia=I(765);class _s extends Ii{static get className(){return"Adamax"}constructor(x,M,F,j=null,oe=0){super(),this.learningRate=x,this.beta1=M,this.beta2=F,this.epsilon=j,this.decay=oe,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],(0,Pt.lu)(()=>{this.iteration=(0,ji.i)(0).variable(),this.accBeta1=(0,ji.i)(M).variable()}),null==j&&(this.epsilon=S.BV.backend.epsilon())}applyGradients(x){const M=Array.isArray(x)?x.map(F=>F.name):Object.keys(x);(0,Pt.lu)(()=>{const F=(0,ys.l)(1,this.accBeta1),j=(0,Wr.h)(-this.learningRate,(0,xn.I)((0,rn.d)(this.iteration,this.decay),1));M.forEach((oe,me)=>{const Me=S.BV.registeredVariables[oe];null==this.accumulatedFirstMoment[me]&&(this.accumulatedFirstMoment[me]={originalName:`${oe}/m`,variable:(0,Bn.P)(Me).variable(!1)}),null==this.accumulatedWeightedInfNorm[me]&&(this.accumulatedWeightedInfNorm[me]={originalName:`${oe}/v`,variable:(0,Bn.P)(Me).variable(!1)});const Ge=Array.isArray(x)?x[me].tensor:x[oe];if(null==Ge)return;const xt=this.accumulatedFirstMoment[me].variable,He=this.accumulatedWeightedInfNorm[me].variable,at=(0,xn.I)((0,rn.d)(xt,this.beta1),(0,rn.d)(Ge,1-this.beta1)),Ot=(0,rn.d)(He,this.beta2),Wt=(0,ra.W)(Ge),ln=(0,ia.g)(Ot,Wt);xt.assign(at),He.assign(ln);const Rn=(0,xn.I)((0,rn.d)((0,Wr.h)(j,F),(0,Wr.h)(at,(0,xn.I)(ln,this.epsilon))),Me);Me.assign(Rn)}),this.iteration.assign((0,xn.I)(this.iteration,1)),this.accBeta1.assign((0,rn.d)(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,Pt.B9)(this.accumulatedFirstMoment.map(x=>x.variable)),null!=this.accumulatedWeightedInfNorm&&(0,Pt.B9)(this.accumulatedWeightedInfNorm.map(x=>x.variable))}getWeights(){return(0,Ze.Z)(function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})()}setWeights(x){return(0,Ze.Z)(function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})()}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(x,M){return new x(M.learningRate,M.beta1,M.beta2,M.epsilon,M.decay)}}class no extends Ii{static get className(){return"SGD"}constructor(x){super(),this.learningRate=x,this.setLearningRate(x)}applyGradients(x){(Array.isArray(x)?x.map(F=>F.name):Object.keys(x)).forEach((F,j)=>{const oe=Array.isArray(x)?x[j].tensor:x[F];if(null==oe)return;const me=S.BV.registeredVariables[F];(0,Pt.lu)(()=>{const Me=(0,xn.I)((0,rn.d)(this.c,oe),me);me.assign(Me)})}),this.incrementIterations()}setLearningRate(x){this.learningRate=x,null!=this.c&&this.c.dispose(),this.c=(0,Pt.Cn)((0,ji.i)(-x))}dispose(){this.c.dispose()}getWeights(){var x=this;return(0,Ze.Z)(function*(){return[yield x.saveIterations()]})()}setWeights(x){var M=this;return(0,Ze.Z)(function*(){if(0!==(x=yield M.extractIterations(x)).length)throw new Error("SGD optimizer does not have settable weights.")})()}getConfig(){return{learningRate:this.learningRate}}static fromConfig(x,M){return new x(M.learningRate)}}class Ro extends no{static get className(){return"Momentum"}constructor(x,M,F=!1){super(x),this.learningRate=x,this.momentum=M,this.useNesterov=F,this.accumulations=[],this.m=(0,ji.i)(this.momentum)}applyGradients(x){(Array.isArray(x)?x.map(F=>F.name):Object.keys(x)).forEach((F,j)=>{const oe=S.BV.registeredVariables[F];null==this.accumulations[j]&&(this.accumulations[j]={originalName:`${F}/momentum`,variable:(0,Pt.lu)(()=>(0,Bn.P)(oe).variable(!1))});const me=this.accumulations[j].variable,Me=Array.isArray(x)?x[j].tensor:x[F];null!=Me&&(0,Pt.lu)(()=>{let Ue;const Ge=(0,xn.I)((0,rn.d)(this.m,me),Me);Ue=(0,xn.I)((0,rn.d)(this.c,this.useNesterov?(0,xn.I)(Me,(0,rn.d)(Ge,this.m)):Ge),oe),me.assign(Ge),oe.assign(Ue)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&(0,Pt.B9)(this.accumulations.map(x=>x.variable))}setMomentum(x){this.momentum=x}getWeights(){var x=this;return(0,Ze.Z)(function*(){return[yield x.saveIterations()].concat(x.accumulations.map(M=>({name:M.originalName,tensor:M.variable})))})()}setWeights(x){var M=this;return(0,Ze.Z)(function*(){x=yield M.extractIterations(x),M.accumulations=x.map(j=>({originalName:j.name,variable:j.tensor.variable(!1)}))})()}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(x,M){return new x(M.learningRate,M.momentum,M.useNesterov)}}class ro extends Ii{static get className(){return"RMSProp"}constructor(x,M=.9,F=0,j=null,oe=!1){if(super(),this.learningRate=x,this.decay=M,this.momentum=F,this.epsilon=j,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=oe,null==j&&(this.epsilon=S.BV.backend.epsilon()),null==x)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(x){(Array.isArray(x)?x.map(F=>F.name):Object.keys(x)).forEach((F,j)=>{const oe=S.BV.registeredVariables[F];null==this.accumulatedMeanSquares[j]&&(this.accumulatedMeanSquares[j]={originalName:`${F}/rms`,variable:(0,Pt.lu)(()=>(0,Bn.P)(oe).variable(!1))}),null==this.accumulatedMoments[j]&&(this.accumulatedMoments[j]={originalName:`${F}/momentum`,variable:(0,Pt.lu)(()=>(0,Bn.P)(oe).variable(!1))}),null==this.accumulatedMeanGrads[j]&&this.centered&&(this.accumulatedMeanGrads[j]={originalName:`${F}/mg`,variable:(0,Pt.lu)(()=>(0,Bn.P)(oe).variable(!1))});const Me=Array.isArray(x)?x[j].tensor:x[F];if(null==Me)return;const Ue=this.accumulatedMeanSquares[j].variable,Ge=this.accumulatedMoments[j].variable;(0,Pt.lu)(()=>{const xt=(0,xn.I)((0,rn.d)(Ue,this.decay),(0,rn.d)((0,Si.h)(Me),1-this.decay));if(this.centered){const He=this.accumulatedMeanGrads[j].variable,at=(0,xn.I)((0,rn.d)(He,this.decay),(0,rn.d)(Me,1-this.decay)),Ot=(0,Wr.h)((0,rn.d)(Me,this.learningRate),(0,Ui._)((0,ys.l)(xt,(0,xn.I)((0,Si.h)(at),this.epsilon)))),Wt=(0,xn.I)((0,rn.d)(Ge,this.momentum),Ot);Ue.assign(xt),He.assign(at),Ge.assign(Wt);const ln=(0,ys.l)(oe,Wt);oe.assign(ln)}else{const He=(0,xn.I)((0,rn.d)(Ue,this.decay),(0,rn.d)((0,Si.h)(Me),1-this.decay)),at=(0,xn.I)((0,rn.d)(Ge,this.momentum),(0,Wr.h)((0,rn.d)(Me,this.learningRate),(0,Ui._)((0,xn.I)(He,this.epsilon))));Ue.assign(He),Ge.assign(at);const Ot=(0,ys.l)(oe,at);oe.assign(Ot)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&(0,Pt.B9)(this.accumulatedMeanSquares.map(x=>x.variable)),null!=this.accumulatedMeanGrads&&this.centered&&(0,Pt.B9)(this.accumulatedMeanGrads.map(x=>x.variable)),null!=this.accumulatedMoments&&(0,Pt.B9)(this.accumulatedMoments.map(x=>x.variable))}getWeights(){var x=this;return(0,Ze.Z)(function*(){const M=[...x.accumulatedMeanSquares,...x.accumulatedMoments];return x.centered&&M.push(...x.accumulatedMeanGrads),[yield x.saveIterations()].concat(M.map(F=>({name:F.originalName,tensor:F.variable})))})()}setWeights(x){var M=this;return(0,Ze.Z)(function*(){x=yield M.extractIterations(x);const F=M.centered?x.length/3:x.length/2,j=!1;M.accumulatedMeanSquares=x.slice(0,F).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(j)})),M.accumulatedMoments=x.slice(F,2*F).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(j)})),M.centered&&(M.accumulatedMeanGrads=x.slice(2*F,3*F).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(j)})))})()}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(x,M){return new x(M.learningRate,M.decay,M.momentum,M.epsilon,M.centered)}}const hl=[er,Lr,to,_s,Ro,ro,no];function sa(R){return new Promise(x=>setTimeout(x)).then(R)}let cr=(()=>{class R{constructor(M){if(!(0,Ke.OB)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");M.startsWith(R.URL_SCHEME)&&(M=M.slice(R.URL_SCHEME.length)),(null==M||0===M.length)&&(M="model"),this.modelJsonFileName=M+".json",this.weightDataFileName=M+".weights.bin"}save(M){var F=this;return(0,Ze.Z)(function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const j=Q.w.join(M.weightData),oe=window.URL.createObjectURL(new Blob([j],{type:"application/octet-stream"}));if(M.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const Me=(0,re.Yd)(M,[{paths:["./"+F.weightDataFileName],weights:M.weightSpecs}]),Ue=window.URL.createObjectURL(new Blob([JSON.stringify(Me)],{type:"application/json"})),Ge=null==F.modelJsonAnchor?document.createElement("a"):F.modelJsonAnchor;if(Ge.download=F.modelJsonFileName,Ge.href=Ue,yield sa(()=>Ge.dispatchEvent(new MouseEvent("click"))),null!=M.weightData){const xt=null==F.weightDataAnchor?document.createElement("a"):F.weightDataAnchor;xt.download=F.weightDataFileName,xt.href=oe,yield sa(()=>xt.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:(0,re.Q)(M)}}})()}}return R.URL_SCHEME="downloads://",R})();class dn{constructor(x){if(null==x||x.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${x}`);this.jsonFile=x[0],this.weightsFiles=x.slice(1)}load(){var x=this;return(0,Ze.Z)(function*(){return new Promise((M,F)=>{const j=new FileReader;j.onload=oe=>{const me=JSON.parse(oe.target.result),Me=me.modelTopology;if(null==Me)return void F(new Error(`modelTopology field is missing from file ${x.jsonFile.name}`));if(null==me.weightsManifest)return void F(new Error(`weightManifest field is missing from file ${x.jsonFile.name}`));if(0===x.weightsFiles.length)return void M({modelTopology:Me});const Ge=(0,re.jN)(me,xt=>x.loadWeights(xt));M(Ge)},j.onerror=oe=>F(`Failed to read model topology and weights manifest JSON from file '${x.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),j.readAsText(x.jsonFile)})})()}loadWeights(x){const M=[],F=[];for(const me of x)M.push(...me.weights),F.push(...me.paths);const j=this.checkManifestAndWeightFiles(x),oe=F.map(me=>this.loadWeightsFile(me,j[me]));return Promise.all(oe).then(me=>[M,me])}loadWeightsFile(x,M){return new Promise((F,j)=>{const oe=new FileReader;oe.onload=me=>{F(me.target.result)},oe.onerror=me=>j(`Failed to weights data from file of path '${x}'.`),oe.readAsArrayBuffer(M)})}checkManifestAndWeightFiles(x){const M=[],F=this.weightsFiles.map(oe=>(0,re.EZ)(oe.name)),j={};for(const oe of x)oe.paths.forEach(me=>{const Me=(0,re.EZ)(me);if(-1!==M.indexOf(Me))throw new Error(`Duplicate file basename found in weights manifest: '${Me}'`);if(M.push(Me),-1===F.indexOf(Me))throw new Error(`Weight file with basename '${Me}' is not provided.`);j[me]=this.weightsFiles[F.indexOf(Me)]});if(M.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${M.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return j}}function Bt(R){return new dn(R)}function Br(R,x,M,F){(function me(Ue){(0,Pe.hu)(null!=Ue&&Array.isArray(Ue)&&Ue.length>0,()=>"promises must be a none empty array")})(R),function Me(Ue,Ge){(0,Pe.hu)(Ue>=0&&Ue<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${Ue}`),(0,Pe.hu)(Ge>=0&&Ge<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${Ge}`),(0,Pe.hu)(Ge>=Ue,()=>`startFraction must be no more than endFraction, but got startFraction ${Ue} and endFraction ${Ge}`)}(M=M??0,F=F??1);let j=0;return Promise.all(R.map(Ue=>(Ue.then(Ge=>{const xt=M+ ++j/R.length*(F-M);return x(xt),Ge}),Ue)))}ze.registerSaveRouter(R=>(0,Ke.OB)().getBool("IS_BROWSER")&&!Array.isArray(R)&&R.startsWith(cr.URL_SCHEME)?function gn(R="model"){return new cr(R)}(R.slice(cr.URL_SCHEME.length)):null);var io=I(1352);function Nr(R,x){return so.apply(this,arguments)}function so(){return(so=(0,Ze.Z)(function*(R,x){null==x&&(x={});const M=null==x.fetchFunc?(0,Ke.OB)().platform.fetch:x.fetchFunc,F=R.map(He=>M(He,x.requestInit,{isBinary:!0})),Me=(null==x.onProgress?yield Promise.all(F):yield Br(F,x.onProgress,0,.5)).map(He=>He.arrayBuffer());return null==x.onProgress?yield Promise.all(Me):yield Br(Me,x.onProgress,.5,1)})).apply(this,arguments)}function En(R){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,Ze.Z)(function*(R,x="",M,F){return An(me=>Nr(me,{requestInit:F}))(R,x,M)})).apply(this,arguments)}function An(R){return function(){var x=(0,Ze.Z)(function*(M,F="",j){const oe=M.map(()=>!1),me={},Me=null!=j?j.map(()=>!1):[],Ue=[];if(M.forEach((Wt,ln)=>{let Rn=0;Wt.weights.forEach(vr=>{const It=io.J["quantization"in vr?vr.quantization.dtype:vr.dtype]*Pe.NA(vr.shape),Yr=()=>{oe[ln]=!0,null==me[ln]&&(me[ln]=[]),me[ln].push({manifestEntry:vr,groupOffset:Rn,sizeBytes:It})};null!=j?j.forEach((Pn,Er)=>{Pn===vr.name&&(Yr(),Me[Er]=!0)}):Yr(),Ue.push(vr.name),Rn+=It})}),!Me.every(Wt=>Wt)){const Wt=j.filter((ln,Rn)=>!Me[Rn]);throw new Error(`Could not find weights in manifest with names: ${Wt.join(", ")}. \nManifest JSON has weights with names: ${Ue.join(", ")}.`)}const Ge=oe.reduce((Wt,ln,Rn)=>(ln&&Wt.push(Rn),Wt),[]),xt=[];Ge.forEach(Wt=>{M[Wt].paths.forEach(ln=>{const Rn=F+(F.endsWith("/")?"":"/")+ln;xt.push(Rn)})});const He=yield R(xt),at={};let Ot=0;return Ge.forEach(Wt=>{const ln=M[Wt].paths.length,Rn=new Q.w(He.slice(Ot,Ot+ln));me[Wt].forEach(ts=>{const It=Rn.slice(ts.groupOffset,ts.groupOffset+ts.sizeBytes),Yr=(0,re.dI)(It,[ts.manifestEntry]);for(const Pn in Yr)at[Pn]=Yr[Pn]}),Ot+=ln}),at});return function(M){return x.apply(this,arguments)}}()}let Sn=(()=>{class R{constructor(M,F){if(this.DEFAULT_METHOD="POST",null==F&&(F={}),this.weightPathPrefix=F.weightPathPrefix,this.weightUrlConverter=F.weightUrlConverter,null!=F.fetchFunc?((0,Pe.hu)("function"==typeof F.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=F.fetchFunc):this.fetch=(0,Ke.OB)().platform.fetch,(0,Pe.hu)(null!=M&&M.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(M)&&(0,Pe.hu)(2===M.length,()=>`URL paths for http must have a length of 2, (actual length is ${M.length}).`),this.path=M,null!=F.requestInit&&null!=F.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=F.requestInit||{},this.loadOptions=F}save(M){var F=this;return(0,Ze.Z)(function*(){if(M.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const j=Object.assign({method:F.DEFAULT_METHOD},F.requestInit);j.body=new FormData;const me=(0,re.Yd)(M,[{paths:["./model.weights.bin"],weights:M.weightSpecs}]);if(j.body.append("model.json",new Blob([JSON.stringify(me)],{type:"application/json"}),"model.json"),null!=M.weightData){const Ue=Q.w.join(M.weightData);j.body.append("model.weights.bin",new Blob([Ue],{type:"application/octet-stream"}),"model.weights.bin")}const Me=yield F.fetch(F.path,j);if(Me.ok)return{modelArtifactsInfo:(0,re.Q)(M),responses:[Me]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${Me.status}.`)})()}loadModelJSON(){var M=this;return(0,Ze.Z)(function*(){const F=yield M.fetch(M.path,M.requestInit);if(!F.ok)throw new Error(`Request to ${M.path} failed with status code ${F.status}. Please verify this URL points to the model JSON of the model to load.`);let j;try{j=yield F.json()}catch{let Ue=`Failed to parse model JSON of response from ${M.path}.`;throw M.path.endsWith(".pb")?Ue+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":Ue+=" Please make sure the server is serving valid JSON for this request.",new Error(Ue)}if(null==j.modelTopology&&null==j.weightsManifest)throw new Error(`The JSON from HTTP path ${M.path} contains neither model topology or manifest for weights.`);return j})()}load(){var M=this;return(0,Ze.Z)(function*(){if(M.loadOptions.streamWeights)return M.loadStream();const F=yield M.loadModelJSON();return(0,re.jN)(F,j=>M.loadWeights(j))})()}loadStream(){var M=this;return(0,Ze.Z)(function*(){const F=yield M.loadModelJSON(),j=yield M.getWeightUrls(F.weightsManifest),oe=(0,re.hu)(F.weightsManifest);return Object.assign(Object.assign({},F),{weightSpecs:oe,getWeightStream:()=>function ka(R,x){var M;const F=null==x.fetchFunc?(0,Ke.OB)().platform.fetch:x.fetchFunc;let oe,j=0;return null===(M=x.onProgress)||void 0===M||M.call(x,0),new ReadableStream({pull:(me=(0,Ze.Z)(function*(Me){for(var Ue;j<R.length;){oe||(oe=(yield F(R[j],x.requestInit,{isBinary:!0})).body.getReader());const{done:Ge,value:xt}=yield oe.read();if(!Ge)return void Me.enqueue(xt);j++,oe=void 0,null===(Ue=x.onProgress)||void 0===Ue||Ue.call(x,j/R.length)}Me.close()}),function(Ue){return me.apply(this,arguments)})});var me}(j,M.loadOptions)})})()}getWeightUrls(M){var F=this;return(0,Ze.Z)(function*(){const j=Array.isArray(F.path)?F.path[1]:F.path,[oe,me]=function jt(R){const x=R.lastIndexOf("/"),M=R.lastIndexOf("?");return[R.substring(0,x)+"/",M>x?R.substring(M):""]}(j),Me=F.weightPathPrefix||oe,Ue=[],Ge=[];for(const xt of M)for(const He of xt.paths)null!=F.weightUrlConverter?Ge.push(F.weightUrlConverter(He)):Ue.push(Me+He+me);return F.weightUrlConverter&&Ue.push(...yield Promise.all(Ge)),Ue})()}loadWeights(M){var F=this;return(0,Ze.Z)(function*(){const j=yield F.getWeightUrls(M);return[(0,re.hu)(M),yield Nr(j,F.loadOptions)]})()}}return R.URL_SCHEME_REGEX=/^https?:\/\//,R})();function ks(R){return null!=R.match(Sn.URL_SCHEME_REGEX)}const Wi=(R,x)=>{if(typeof fetch>"u"&&(null==x||null==x.fetchFunc))return null;{let M=!0;if(M=Array.isArray(R)?R.every(F=>ks(F)):ks(R),M)return oa(R,x)}return null};function oa(R,x){return new Sn(R,x)}function Gi(R,x){return oa(R,x)}ze.registerSaveRouter(Wi),ze.registerLoadRouter(Wi);class je{constructor(x){this.modelArtifacts=x}load(){return this.modelArtifacts}}class Rr{constructor(x){this.saveHandler=x}save(x){return this.saveHandler(x)}}class Kt{constructor(x){x.load&&(this.load=()=>Promise.resolve(x.load())),x.save&&(this.save=M=>Promise.resolve(x.save(M)))}}function Ht(R,x,M,F){return new Kt(Ki(...arguments))}function Ki(R,x,M,F){return 1===arguments.length?null!=R.modelTopology||null!=R.weightSpecs?new je(R):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new je({modelTopology:R})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new je({modelTopology:R,weightSpecs:x,weightData:M,trainingConfig:F}))}function Po(R){return new Rr(R)}function On(R){return new Rr(R)}var Ti=I(1257),wr=I(5592),bs=I(5618),aa=I(4195),la=I(9194);const vs=(0,aa.op)({confusionMatrix_:function Xi(R,x,M){const F=(0,Ti._1)(R,"labels","confusionMatrix"),j=(0,Ti._1)(x,"predictions","confusionMatrix");Pe.hu(null==M||M>0&&Number.isInteger(M),()=>`If provided, numClasses must be a positive integer, but got ${M}`),Pe.hu(1===F.rank,()=>`Expected the rank of labels to be 1, but got ${F.rank}`),Pe.hu(1===j.rank,()=>`Expected the rank of predictions to be 1, but got ${j.rank}`),Pe.hu(F.shape[0]===j.shape[0],()=>`Mismatch in the number of examples: ${F.shape[0]} vs. ${j.shape[0]}. Labels and predictions should have the same number of elements.`),Pe.hu(M>0&&Number.isInteger(M),()=>`numClasses is required to be a positive integer, but got ${M}`);const oe=(0,bs.l)((0,gr.p)(F,"int32"),M),me=(0,bs.l)((0,gr.p)(j,"int32"),M),Me=(0,la.p)(oe),Ue=(0,wr.O)(Me,me);return(0,gr.p)(Ue,"int32")}});var Fo=I(3239),f=I(4251),d=I(8987),p=I(2786);let w,z=!1;function U(R,x=3){if(x>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==R)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let M=!1,F=!1,j=!1,oe=!1,me=!1,Me=!1;if(R.data instanceof Uint8Array)M=!0;else if(typeof ImageData<"u"&&R instanceof ImageData)F=!0;else if(typeof HTMLVideoElement<"u"&&R instanceof HTMLVideoElement)j=!0;else if(typeof HTMLImageElement<"u"&&R instanceof HTMLImageElement)oe=!0;else if(null!=R.getContext)me=!0;else{if(!(typeof ImageBitmap<"u"&&R instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${R.constructor.name}`);Me=!0}if(null!=(0,d.pI)(f.eBW,S.BV.backendName))return S.BV.runKernel(f.eBW,{pixels:R},{numChannels:x});const[Ge,xt]=j?[R.videoWidth,R.videoHeight]:[R.width,R.height];let He,at;if(me)He=R.getContext("2d").getImageData(0,0,Ge,xt).data;else if(F||M)He=R.data;else if(oe||j||Me){if(null==w)if(typeof document>"u"){if(!(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u"))throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");w=new OffscreenCanvas(1,1).getContext("2d")}else w=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});w.canvas.width=Ge,w.canvas.height=xt,w.drawImage(R,0,0,Ge,xt),He=w.getImageData(0,0,Ge,xt).data}if(4===x)at=new Int32Array(He);else{const Wt=Ge*xt;at=new Int32Array(Wt*x);for(let ln=0;ln<Wt;ln++)for(let Rn=0;Rn<x;++Rn)at[ln*x+Rn]=He[4*ln+Rn]}return(0,p.w)(at,[xt,Ge,x],"int32")}function nt(R){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,Ze.Z)(function*(R,x=3){let M=null;if((0,Ke.OB)().getBool("WRAP_TO_IMAGEBITMAP")&&function rt(R){return function X(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}()&&!(R instanceof ImageBitmap)&&function Ee(R){return null!=R&&0!==R.width&&0!==R.height}(R)&&!function J(R){return null!=R&&R.data instanceof Uint8Array}(R)}(R)){let F;try{F=yield createImageBitmap(R,{premultiplyAlpha:"none"})}catch{F=null}M=null!=F&&F.width===R.width&&F.height===R.height?F:R}else M=R;return U(M,x)})).apply(this,arguments)}function bt(R){if(2!==R.rank&&3!==R.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${R.rank}.`);const x=2===R.rank?1:R.shape[2];if(x>4||2===x)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${x}`);if("float32"!==R.dtype&&"int32"!==R.dtype)throw new Error(`Unsupported type for toPixels: ${R.dtype}. Please use float32 or int32 tensors.`)}function qt(R,x){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,Ze.Z)(function*(R,x){let M=(0,Ti._1)(R,"img","toPixels");if(!(R instanceof fi.es)){const Ge=M;M=(0,gr.p)(Ge,"int32"),Ge.dispose()}bt(M);const[F,j]=M.shape.slice(0,2),oe=2===M.rank?1:M.shape[2],me=yield M.data(),Me="float32"===M.dtype?255:1,Ue=new Uint8ClampedArray(j*F*4);for(let Ge=0;Ge<F*j;++Ge){const xt=[0,0,0,255];for(let at=0;at<oe;at++){const Ot=me[Ge*oe+at];if("float32"===M.dtype){if(Ot<0||Ot>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${Ot}.`)}else if("int32"===M.dtype&&(Ot<0||Ot>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${Ot}.`);1===oe?(xt[0]=Ot*Me,xt[1]=Ot*Me,xt[2]=Ot*Me):xt[at]=Ot*Me}const He=4*Ge;Ue[He+0]=Math.round(xt[0]),Ue[He+1]=Math.round(xt[1]),Ue[He+2]=Math.round(xt[2]),Ue[He+3]=Math.round(xt[3])}if(null!=x){z||null!=(0,d.pI)(f.hGc,S.BV.backendName)&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),z=!0),x.width=j,x.height=F;const Ge=x.getContext("2d"),xt=new ImageData(Ue,j,F);Ge.putImageData(xt,0,0)}return M!==R&&M.dispose(),Ue})).apply(this,arguments)}function Nt(R,x,M){let F=(0,Ti._1)(R,"img","draw");if(!(R instanceof fi.es)){const me=F;F=(0,gr.p)(me,"int32"),me.dispose()}bt(F),function yt(R){const x=R?.alpha||1;if(x>1||x<0)throw new Error(`Alpha value ${x} is suppoed to be in range [0 - 1].`)}(M?.imageOptions),S.BV.runKernel(f.hGc,{image:F},{canvas:x,options:M})}const sn=(0,aa.op)({fromPixels_:U});function Kn(R,x){const M=R.shape.length,F=x.shape.length;if(M<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${M}.`);if(F<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${F}.`);if("int32"!==x.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${x.dtype}.`);if(x.shape[F-1]>M)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${x.shape[F-1]} vs. ${M}`);if(0===(0,Pe.NA)(R.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${R.shape}.`);const j=x.shape,oe=j[j.length-1];let me=1;for(let He=0;He<j.length-1;++He)me*=j[He];const Me=R.shape,Ue=j.slice();Ue.pop();let Ge=1;for(let He=oe;He<M;++He)Ge*=Me[He],Ue.push(Me[He]);const xt=[...(0,Pe.e3)(R.shape).map(He=>He/Ge),1].slice(0,oe);return[Ue,me,Ge,xt]}var Cr=I(1876);const Vr=-2,Nn=-1;function ao(R,x,M){const F=R.shape.length;Pe.hu(F===x.length,()=>`Error in slice${F}D: Length of begin ${x} must match the rank of the array (${F}).`),Pe.hu(F===M.length,()=>`Error in slice${F}D: Length of size ${M} must match the rank of the array (${F}).`);for(let j=0;j<F;++j)Pe.hu(x[j]+M[j]<=R.shape[j],()=>`Error in slice${F}D: begin[${j}] + size[${j}] (${x[j]+M[j]}) would overflow input.shape[${j}] (${R.shape[j]})`)}function on(R){const x=[];let M=0;for(;R>0;)1&R&&x.push(M),R/=2,M++;return x}function lo(R,x,M){const F=[];for(let j=0;j<R.length;j++)F[j]=Math.ceil((x[j]-R[j])/M[j]);return F}function $o(R,x,M,F){const j=[...R];for(let oe=j.length;oe<F.length;oe++)j.push(1);for(let oe=0;oe<M;oe++)0===oe?j[x]=1:(j.splice(x,0,1),j.pop());return j}function Gr(R,x,M){return M<=R?M:M-(x-1)}function Pa(R,x){const M=[];for(let F=0;F<R;F++)M.push(x+F);return M}function _p(R,x,M,F,j,oe,me,Me,Ue){const Ge=R.length;let xt=new Array(Ge),He=new Array(Ge),at=new Array(Ge);if(x.length&&M>0){const Ot=x[0],Wt=M+1;xt=Vn(me,Ot,Wt,F,R),He=zd(Me,Ot,Wt,j,R),at=$o(oe,Ot,Wt,R)}else for(let Ot=0;Ot<Ge;Ot++)xt[Ot]=ot(me,F,oe,R,Ot,Ue),He[Ot]=pl(Me,j,oe,R,Ot,Ue),at[Ot]=Ud(oe,Ot,Ue);return{begin:xt,end:He,strides:at}}function Vn(R,x,M,F,j){const oe=[...j],me=Pa(M,x);for(let Me=0;Me<oe.length;Me++)if(me.indexOf(Me)>-1)oe[Me]=0;else{const Ue=Gr(x,M,Me);let Ge=F[Ue];R&1<<Ue&&(Ge=0),oe[Me]=Ge}return oe}function zd(R,x,M,F,j){const oe=[...j],me=Pa(M,x);for(let Me=0;Me<oe.length;Me++)if(me.indexOf(Me)>-1)oe[Me]=Number.MAX_SAFE_INTEGER;else{const Ue=Gr(x,M,Me);let Ge=F[Ue];R&1<<Ue&&(Ge=Number.MAX_SAFE_INTEGER),oe[Me]=Ge}for(let Me=0;Me<oe.length;Me++)oe[Me]<0&&(oe[Me]+=j[Me]),oe[Me]=Pe.uZ(0,oe[Me],j[Me]);return oe}function Ud(R,x,M){let F=R[x];return(M&1<<x||null==F)&&(F=1),F}function ot(R,x,M,F,j,oe){let me=x[j];(R&1<<j||oe&1<<j||null==me)&&(me=(M[j]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const Ue=F[j];return me<0&&(me+=Ue),me=Pe.uZ(0,me,Ue-1),me}function pl(R,x,M,F,j,oe){let me=x[j];const Me=M[j]||1;(R&1<<j||oe&1<<j||null==me)&&(me=Me>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const Ue=F[j];return me<0&&(me+=Ue),me=Me>0?Pe.uZ(0,me,Ue):Pe.uZ(-1,me,Ue-1),me}function ml(R,x,M){let F=M.length;for(let j=0;j<M.length;j++)if(M[j]>1){F=j;break}for(let j=F+1;j<M.length;j++)if(x[j]>0||M[j]!==R[j])return!1;return!0}function xs(R,x){let M=R.length>0?R[R.length-1]:1;for(let F=0;F<R.length-1;F++)M+=R[F]*x[F];return M}function qi(R,x,M){let F;const j=R.shape.length;let oe;return F="number"==typeof x?[x,...new Array(j-1).fill(0)]:x.length<j?x.concat(new Array(j-x.length).fill(0)):x.slice(),F.forEach(me=>{Pe.hu(-1!==me,()=>"slice() does not support negative begin indexing.")}),oe=null==M?new Array(j).fill(-1):"number"==typeof M?[M,...new Array(j-1).fill(-1)]:M.length<j?M.concat(new Array(j-M.length).fill(-1)):M,oe=oe.map((me,Me)=>me>=0?me:(Pe.hu(-1===me,()=>`Negative size values should be exactly -1 but got ${me} for the slice() size at index ${Me}.`),R.shape[Me]-F[Me])),[F,oe]}function jd(R,x,M,F,j,oe,me,Me,Ue){let Ge;if(null==F?(Ge=new Array(x.length),Ge.fill(1)):Ge=F,null!=me&&me&me-1)throw new Error("Multiple ellipses in slice is not allowed.");let xt=!1;const He={dims:Ge.length,numAddAxisAfterEllipsis:0,begin:x.slice(),end:M.slice(),strides:Ge.slice(),beginMask:j,endMask:oe,ellipsisMask:me,newAxisMask:Me,shrinkAxisMask:Ue};for(let It=0;It<He.dims;It++)xt&&1<<It&Me&&He.numAddAxisAfterEllipsis++,1<<It&me&&(xt=!0);xt||(He.ellipsisMask|=1<<He.dims,He.dims++);const at={dims:R.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function gl(R,x){x.beginMask=0,x.endMask=0,x.shrinkAxisMask=0;let M=0;x.beginValid=null!=R.begin,x.endValid=null!=R.end,x.begin=new Array(x.dims),x.end=new Array(x.dims),x.strides=new Array(x.dims),x.finalShapeGatherIndices=[],x.finalShapeGatherIndicesSparse=[],x.inputShapeGatherIndicesSparse=new Array(x.dims);for(let F=0;F<R.dims;F++)if(1<<F&R.ellipsisMask){const j=Math.min(x.dims-(R.dims-F)+1+R.numAddAxisAfterEllipsis,x.dims);for(;M<j;M++)x.begin[M]=0,x.end[M]=0,x.strides[M]=1,x.beginMask|=1<<M,x.endMask|=1<<M,x.finalShapeGatherIndices.push(M),x.finalShapeGatherIndicesSparse.push(-1),x.inputShapeGatherIndicesSparse[M]=F}else if(1<<F&R.newAxisMask)x.finalShapeGatherIndices.push(Vr),x.finalShapeGatherIndicesSparse.push(-1);else{if(M===x.begin.length)throw Error(`Index out of range using input dim ${M}; input has only ${x.dims} dims, ${x.begin.length}.`);null!=R.begin&&(x.begin[M]=R.begin[F]),null!=R.end&&(x.end[M]=R.end[F]),x.strides[M]=R.strides[F],R.beginMask&1<<F&&(x.beginMask|=1<<M),R.endMask&1<<F&&(x.endMask|=1<<M),R.shrinkAxisMask&1<<F?(x.finalShapeGatherIndices.push(Nn),x.finalShapeGatherIndicesSparse.push(-1),x.shrinkAxisMask|=1<<M):(x.finalShapeGatherIndices.push(M),x.finalShapeGatherIndicesSparse.push(F)),x.inputShapeGatherIndicesSparse[M]=F,M++}}(He,at);let Ot=!0,Wt=!0,ln=!0;const Rn=[],vr=[];for(let It=0;It<R.length;++It){if(0===at.strides[It])throw Error(`strides[${It}] must be non-zero`);const Yr=!!(at.shrinkAxisMask&1<<It),Pn=R[It];if(-1===Pn){Rn.push(Yr?1:-1);continue}const Er=[at.beginMask&1<<It,at.endMask&1<<It],Cl=[at.strides[It]>0?0:-1,at.strides[It]>0?Pn:Pn-1];if(Yr&&at.strides[It]<=0)throw Error("only stride 1 allowed on non-range indexing.");ln=ln&&1===at.strides[It];const ws=!!(at.beginMask&1<<It&&at.endMask&1<<It);if(at.beginValid&&at.endValid){if(Yr){const lc=at.begin[It]<0?Pn+at.begin[It]:at.begin[It];if(at.begin[It]=lc,at.end[It]=at.begin[It]+1,lc<0||lc>=Pn)throw Error(`slice index ${at.begin[It]} of dimension ${It} out of bounds.`)}else at.begin[It]=Hd(at.begin[It],0,at.strides[It],Pn,Er,Cl),at.end[It]=Hd(at.end[It],1,at.strides[It],Pn,Er,Cl);const ho=1===at.strides[It]&&0===at.begin[It]&&at.end[It]===Pn;Ot=Ot&&ho,Wt=Wt&&(0===It&&1===at.strides[It]||ho)}else Ot=Ot&&1===at.strides[It]&&ws,Wt=Wt&&(0===It&&1===at.strides[It]||ws);let ns,oi=!1;if(at.beginValid&&at.endValid?(ns=at.end[It]-at.begin[It],oi=!0):Yr?(ns=1,oi=!0):ws&&Pn>=0&&(ns=at.strides[It]<0?-Pn:Pn,oi=!0),oi){let ho;ho=0===ns||ns<0!=at.strides[It]<0?0:Math.trunc(ns/at.strides[It])+(ns%at.strides[It]!=0?1:0),Rn.push(ho)}else Rn.push(-1)}for(let It=0;It<at.finalShapeGatherIndices.length;++It){const Yr=at.finalShapeGatherIndices[It];Yr>=0?vr.push(Rn[Yr]):Yr===Vr&&vr.push(1)}return{finalShapeSparse:vr.filter((It,Yr)=>at.finalShapeGatherIndices[Yr]!==Vr),finalShape:vr,isIdentity:Ot,sliceDim0:Wt,isSimpleSlice:ln,begin:at.begin,end:at.end,strides:at.strides}}function Hd(R,x,M,F,j,oe){if(j[x])return M>0?oe[x]:oe[x+1&1];{const me=R<0?F+R:R;return me<oe[0]?oe[0]:me>oe[1]?oe[1]:me}}var bp=I(7664),an=I(1153);const vp=.001,Wd=.1;function Fa(R,x,M){return null==M&&(M=ca()),ua(R,x,(F,j)=>_l(F,j,M))}function ca(){return 32===S.BV.backend.floatPrecision()?vp:Wd}function ua(R,x,M){let F=!0;if(((0,an.isTypedArray)(R)||(0,an.isTypedArray)(x))&&(F=!1),(0,an.isTypedArray)(R)&&(0,an.isTypedArray)(x)&&(F=!0),F){const me=R.constructor.name,Me=x.constructor.name;if(me!==Me)throw new Error(`Arrays are of different type. Actual: ${me}. Expected: ${Me}`)}if(Array.isArray(R)&&Array.isArray(x)){const me=(0,Ti.C)(R),Me=(0,Ti.C)(x);if(!(0,Pe.cO)(me,Me))throw new Error(`Arrays have different shapes. Actual: [${me}]. Expected: [${Me}]`)}const j=(0,an.isTypedArray)(R)?R:(0,an.flatten)(R),oe=(0,an.isTypedArray)(x)?x:(0,an.flatten)(x);if(j.length!==oe.length)throw new Error(`Arrays have different lengths actual: ${j.length} vs expected: ${oe.length}.\nActual:   ${j}.\nExpected: ${oe}.`);for(let me=0;me<oe.length;++me){const Me=j[me],Ue=oe[me];if(!M(Me,Ue))throw new Error(`Arrays differ: actual[${me}] = ${Me}, expected[${me}] = ${Ue}.\nActual:   ${j}.\nExpected: ${oe}.`)}typeof expect<"u"&&expect().nothing()}function yl(R,x){R().then(()=>x.fail(),()=>x()),typeof expect<"u"&&expect().nothing()}function Gd(R,x){const M="string"==typeof x||"number"==typeof x||"boolean"==typeof x?[x]:x;return(0,Pe.HD)(R)||(0,Pe.HD)(R[0])||(0,Pe.HD)(x)||(0,Pe.HD)(x[0])?ua(R,M,(F,j)=>F==j):ua(R,x,(F,j)=>_l(F,j,0))}function Yc(R,x,M){if(null==M&&(M=ca()),!_l(R,x,M))throw new Error(`Numbers differ: actual === ${R}, expected === ${x}`);typeof expect<"u"&&expect().nothing()}function _l(R,x,M){return!isFinite(R)&&!isFinite(x)||!(isNaN(R)||isNaN(x)||Math.abs(R-x)>M)}function Lo(R,x,M){for(let F=0;F<R.length;F++)if(R[F]<x||R[F]>M)throw new Error(`Value out of range:${R[F]} low: ${x}, high: ${M}`)}function Kd(R,x){const M=new Float32Array(R),F=new Float32Array(x);if(M.length!==F.length)throw new Error(`Expected ArrayBuffer to be of length ${F.length}, but it was ${M.length}`);for(let j=0;j<F.length;j++)if(M[j]!==F[j])throw new Error(`Expected ArrayBuffer value at ${j} to be ${F[j]} but got ${M[j]} instead`)}function Os(R){for(let x=0;x<R.length;x++){const M=R[x];Array.isArray(M)?Os(M):R[x]=(0,an.encodeString)(M)}return R}function bl(R){const x=document.createElement("video");return"playsInline"in x&&(x.playsInline=!0),x.muted=!0,x.loop=!0,x.style.position="fixed",x.style.left="0px",x.style.top="0px",x.preload="auto",x.appendChild(R),new Promise(M=>{x.addEventListener("loadeddata",F=>M(x)),x.load()})}function We(R){return da.apply(this,arguments)}function da(){return(da=(0,Ze.Z)(function*(R){yield R.play(),"requestVideoFrameCallback"in R&&(yield new Promise(x=>{R.requestVideoFrameCallback(x)}))})).apply(this,arguments)}const ft="4.15.0";class $a{static sgd(x){return new no(x)}static momentum(x,M,F=!1){return new Ro(x,M,F)}static rmsprop(x,M=.9,F=0,j=null,oe=!1){return new ro(x,M,F,j,oe)}static adam(x=.001,M=.9,F=.999,j=null){return new to(x,M,F,j)}static adadelta(x=.001,M=.95,F=null){return new er(x,M,F)}static adamax(x=.002,M=.9,F=.999,j=null,oe=0){return new _s(x,M,F,j,oe)}static adagrad(x,M=.1){return new Lr(x,M)}}var Bo=I(1216),we=I(9678),Xd=I(4839);const qd=$a,Zd=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:R=>R();function Ps(){return new Promise(R=>Zd(()=>R()))}var Zi=I(929);function Kr(R,x){const M=R[0].length;R.forEach((j,oe)=>{Pe.hu(j.length===M,()=>`Error in concat${M}D: rank of tensors[${oe}] must be the same as the rank of the rest (${M})`)}),Pe.hu(x>=0&&x<M,()=>`Error in concat${M}D: axis must be between 0 and ${M-1}.`);const F=R[0];R.forEach((j,oe)=>{for(let me=0;me<M;me++)Pe.hu(me===x||j[me]===F[me],()=>`Error in concat${M}D: Shape of tensors[${oe}] (${j}) does not match the shape of the rest (${F}) along the non-concatenated axis ${oe}.`)})}function Xr(R,x){const M=R[0].slice();for(let F=1;F<R.length;F++)M[x]+=R[F][x];return M}var Zt=I(5551),Yi=I(6254),Qi=function(R){return R[R.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",R[R.VALUE_ROWIDS=1]="VALUE_ROWIDS",R[R.ROW_LENGTHS=2]="ROW_LENGTHS",R[R.ROW_SPLITS=3]="ROW_SPLITS",R[R.ROW_LIMITS=4]="ROW_LIMITS",R[R.ROW_STARTS=5]="ROW_STARTS",R}(Qi||{});function rc(R,x,M){let F=new Array;if(null==M&&null==x)return F;if(null==x)for(;F.length<R+M.length;)F.push(-1);else F=x.slice();if(null==M)return F;if(R+M.length!==F.length)throw new Error(`rt input.shape and shape=${x} are incompatible: rt input.rank = ${R+M.length}, but shape.rank = ${F.length}`);for(let j=1;j<M.length;++j){const oe=M[j],me=F[F.length-M.length+j],Me=F[me];if(oe>=0)if(Me>=0){if(Me!==oe)throw new Error(`rt input.shape and shape=${x} are incompatible: rt input.shape[${j+R}] = ${oe} but shape[${j+R}] = ${Me}`)}else F[me]=oe}return F}function La(R){const x={FIRST_DIM_SIZE:Qi.FIRST_DIM_SIZE,VALUE_ROWIDS:Qi.VALUE_ROWIDS,ROW_LENGTHS:Qi.ROW_LENGTHS,ROW_SPLITS:Qi.ROW_SPLITS,ROW_LIMITS:Qi.ROW_LIMITS,ROW_STARTS:Qi.ROW_STARTS},M=[];for(const F of R){if(!(F in x))break;M.push(x[F])}return M}function Fs(R){return 0===R.length?0:R[0]===Qi.FIRST_DIM_SIZE?R.length-1:R.length}function Ba(R,x){if(null==R||null==x)return;const M=R.length,F=x.length;if(M>=F)throw new Error(`defaultValue.shape=${R} and ragged tensor flatValues.shape=${x}, are incompatible: defaultValue.rank = ${M} must be less than ragged tensor input flatValues.rank = ${F})`);for(let j=0;j<Math.min(M,F-1);++j){const oe=R[j],me=x[j+1];if(oe>=0&&me>=0&&1!==oe&&oe!==me)throw new Error(`defaultValue.shape=${R}, and ragged tensor input flatValues.shape=${x} are incompatible: defaultValue.shape[${j-R.length}] = ${oe} but ragged tensor input.flatValues.shape[${j-R.length}] = ${me}`)}}const vl=30;function Qc(R){return R<=vl?R:(0,Pe.jP)(R,Math.floor(Math.sqrt(R)))}function ic(R,x,M){return[M*("number"==typeof R?R:R[0]),x*("number"==typeof R?R:R[1])]}function Jc(R,x,M,F=!0){let j=[];if(F)j=j.concat(x.slice(0)),j.push(R[0]/M),j=j.concat(R.slice(1));else{j=j.concat(R[0]);const oe=x.length;for(let me=0;me<oe;++me)j=j.concat([R[me+1]/x[me],x[me]]);j=j.concat(R.slice(oe+1))}return j}function eu(R,x,M=!0){const F=[];if(M){F.push(x);for(let j=x+1;j<R;++j)j<=2*x?(F.push(j),F.push(j-(x+1))):F.push(j)}else{const j=[],oe=[];for(let me=1;me<R;++me)me>=2*x+1||me%2==1?oe.push(me):j.push(me);F.push(...j),F.push(0),F.push(...oe)}return F}function Va(R,x,M,F=!0){const j=[];j.push(F?R[0]/M:R[0]*M);for(let oe=1;oe<R.length;++oe)j.push(oe<=x.length?F?x[oe-1]*R[oe]:R[oe]/x[oe-1]:R[oe]);return j}function tu(R,x){const M=[0];for(let F=0;F<x;++F)M.push(R[F][0]);return M}function nu(R,x,M){const F=R.slice(0,1);for(let j=0;j<M;++j)F.push(R[j+1]-x[j][0]-x[j][1]);return F}const Yd=1.7580993408473768,sc=1.0507009873554805,Qd=.3275911,Jd=.254829592,Ji=-.284496736,eh=1.421413741,ru=-1.453152027,th=1.061405429;var ha=I(2932);function nh(R,x){if(R.length!==x.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${R.length}, imag: ${x.length}.`);const M=new Float32Array(2*R.length);for(let F=0;F<M.length;F+=2)M[F]=R[F/2],M[F+1]=x[F/2];return M}function rh(R){const x=new Float32Array(R.length/2),M=new Float32Array(R.length/2);for(let F=0;F<R.length;F+=2)x[F/2]=R[F],M[F/2]=R[F+1];return{real:x,imag:M}}function iu(R){const x=Math.ceil(R.length/4),M=new Float32Array(x),F=new Float32Array(x);for(let j=0;j<R.length;j+=4)M[Math.floor(j/4)]=R[j],F[Math.floor(j/4)]=R[j+1];return{real:M,imag:F}}function ih(R){const x=Math.floor(R.length/4),M=new Float32Array(x),F=new Float32Array(x);for(let j=2;j<R.length;j+=4)M[Math.floor(j/4)]=R[j],F[Math.floor(j/4)]=R[j+1];return{real:M,imag:F}}function sh(R,x){return{real:R[2*x],imag:R[2*x+1]}}function oh(R,x,M,F){R[2*F]=x,R[2*F+1]=M}function rr(R,x){const M=new Float32Array(R/2),F=new Float32Array(R/2);for(let j=0;j<Math.ceil(R/2);j++){const oe=(x?2:-2)*Math.PI*(j/R);M[j]=Math.cos(oe),F[j]=Math.sin(oe)}return{real:M,imag:F}}function ah(R,x,M){const F=(M?2:-2)*Math.PI*(R/x);return{real:Math.cos(F),imag:Math.sin(F)}}const oc="->",su=/->/g,Tn=",",ou="...";function au(R,x){const M=((R=R.replace(/\s/g,"")).length-R.replace(su,"").length)/oc.length;if(M<1)throw new Error("Equations without an arrow are not supported.");if(M>1)throw new Error(`Equation must contain exactly one arrow ("${oc}").`);const[F,j]=R.split(oc);(0,Pe.hu)(-1===F.indexOf(ou),()=>`The ellipsis notation ("${ou}") is not supported yet.`);const oe=F.split(Tn),me=oe.length;if(x!==me)throw new Error(`Expected ${me} input tensors, received ${x}`);if(me>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const Me=[];for(let at=0;at<j.length;++at){const Ot=j[at];if(!oe.some(Wt=>-1!==Wt.indexOf(Ot)))throw new Error(`Output subscripts contain the label ${Ot} not present in the input subscripts.`);-1===Me.indexOf(Ot)&&Me.push(Ot)}for(let at=0;at<F.length;++at){const Ot=F[at];-1===Me.indexOf(Ot)&&Ot!==Tn&&Me.push(Ot)}const Ue=new Array(oe.length);for(let at=0;at<me;++at){if(new Set(oe[at].split("")).size!==oe[at].length)throw new Error(`Found duplicate axes in input component ${oe[at]}. Support for duplicate axes in input is not implemented yet.`);Ue[at]=[];for(let Ot=0;Ot<oe[at].length;++Ot)Ue[at].push(Me.indexOf(oe[at][Ot]))}const Ge=Me.length,He=[];for(let at=j.length;at<Ge;++at)He.push(at);return{allDims:Me,summedDims:He,idDims:Ue}}function Rt(R,x){let M=new Array(R);M.fill(-1);for(let j=0;j<x.length;++j)M[x[j]]=j;const F=[];for(let j=0;j<R;++j)-1===M[j]&&F.push(j);return M=M.filter(j=>-1!==j),{permutationIndices:M,expandDims:F}}function si(R,x,M){const F=new Array(R);for(let j=0;j<M.length;++j){const oe=M[j].shape;for(let me=0;me<x[j].length;++me)void 0===F[x[j][me]]?F[x[j][me]]=oe[me]:(0,Pe.hu)(F[x[j][me]]===oe[me],()=>`Expected dimension ${F[x[j][me]]} at axis ${me} of input shaped ${JSON.stringify(oe)}, but got dimension ${oe[me]}`)}}function bn(R,x){const M=R,F=[];let j=0;0===R.length&&M.push(-1),j=R.length+1;for(let me=0;me<j;++me)F.push([]);const oe=[];for(let me=0;me<M.length;++me){const Ue=qr(x,M[me]);for(const Ge of Ue)-1===oe.indexOf(Ge)&&(F[me].push(Ge),oe.push(Ge))}return{path:M,steps:F}}function kr(R){return R.every((x,M)=>x===M)}function qr(R,x){const M=[];for(let F=0;F<R.length;++F)(0===R[F].length||-1!==R[F].indexOf(x)||-1===x)&&M.push(F);return M}function fa(R,x,M=0){let F=[];if("number"==typeof x)(0,Pe.hu)(R.shape[M]%x==0,()=>"Number of splits must evenly divide the axis."),F=new Array(x).fill(R.shape[M]/x);else{const j=x.reduce((me,Me)=>(-1===Me&&(me+=1),me),0);(0,Pe.hu)(j<=1,()=>"There should be only one negative value in split array.");const oe=x.indexOf(-1);if(-1!==oe){const me=x.reduce((Me,Ue)=>Ue>0?Me+Ue:Me);x[oe]=R.shape[M]-me}(0,Pe.hu)(R.shape[M]===x.reduce((me,Me)=>me+Me),()=>"The sum of sizes must match the size of the axis dimension."),F=x}return F}function mi(R){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${R}`}function lu(R,x){return`indices(${R}, 0) is invalid: ${x} < 0`}function cu(R,x,M){return`indices(${R}, 0) is invalid: ${x} >= ${M}`}function xl(R,x){return`only one output dimension may be -1, not both ${R} and ${x}`}function lh(R,x){return`size ${R} must be non-negative, not ${x}`}function ch(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function ir(R,x){return`Input to reshape is a SparseTensor with ${(0,Pe.NA)(R)}\n  dense values, but the requested shape requires a multiple of ${(0,Pe.NA)(x)}. inputShape=${R} outputShape= ${x}`}function St(R,x){return`Input to reshape is a tensor with ${(0,Pe.NA)(R)} dense values, but the requested shape has ${(0,Pe.NA)(x)}. inputShape=${R} outputShape=${x}`}function en(){return"segment ids must be >= 0"}function Zn(){return"segment ids are not increasing"}function es(R,x){return`Segment id ${R} out of range [0, ${x}), possibly because segmentIds input is not sorted.`}function wl(R,x,M){return`Bad: indices[${R}] == ${x} out of range [0, ${M})`}function Zr(R,x){let F,M=!1;for(R<=vl?(F=R,M=!0):F=(0,Pe.jP)(R,Math.floor(Math.sqrt(R)));!M;)F>x||F===R?M=!0:F=(0,Pe.jP)(R,F+1);return F}function co(R,x,M){const F=[],j=R.length;for(let oe=0;oe<j;oe++)F.push(oe!==x?R[oe]:M);return F}function ur(R,x,M,F){const j=x.shape.length,oe=R.shape.length;if(0!==F&&(F<-j||F>j))throw new Error(`Expect batchDims in the range of [-${j}, ${j}], but got ${F}`);if(F<0&&(F+=j),F>oe)throw new Error(`batchDims (${F}) must be less than rank(x) (\n    ${oe}).`);if(M<F)throw new Error(`batchDims (${F}) must be less than or equal to axis (${M}).`);for(let He=0;He<F;++He)if(R.shape[He]!==x.shape[He])throw new Error(`x.shape[${He}]: ${R.shape[He]} should be equal to indices.shape[${He}]: ${x.shape[He]}.`);const me=R.shape[M],Me=[];let Ue=1,Ge=1,xt=1;for(let He=0;He<F;++He)Me.push(R.shape[He]),Ue*=R.shape[He];for(let He=F;He<M;He++)Me.push(R.shape[He]),Ge*=R.shape[He];for(let He=F;He<j;He++)Me.push(x.shape[He]);for(let He=M+1;He<oe;He++)Me.push(R.shape[He]),xt*=R.shape[He];return{batchSize:Ue,sliceSize:xt,outerSize:Ge,dimSize:me,outputShape:Me}}function uo(R){try{return R.map(x=>(0,an.decodeString)(x))}catch(x){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${x}`)}}function pa(R){return R.map(x=>(0,an.encodeString)(x))}var Yt=I(7228),za=I(7349),ac=I(7173);!function ko(){for(const R of hl)na(R)}()},7864:(st,Oe,I)=>{"use strict";I.d(Oe,{w:()=>ye});var ce=I(1153);class ye{static join(T){return new ye(T).slice()}constructor(T){if(this.shards=[],this.previousShardIndex=0,null==T||(T instanceof Array||(T=[T]),0===(T=T.map(se=>ce.isTypedArray(se)?se.buffer:se)).length))return;this.bufferUniformSize=T[0].byteLength;let $=0;for(let se=0;se<T.length;se++){const ne=T[se];se!==T.length-1&&ne.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const G=$+ne.byteLength;this.shards.push({buffer:ne,start:$,end:G}),$=G}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(T=0,$=this.byteLength){if(0===this.shards.length)return new ArrayBuffer(0);if(T=isNaN(Number(T))?0:T,$=isNaN(Number($))?0:$,T=Math.max(0,T),($=Math.min(this.byteLength,$))<=T)return new ArrayBuffer(0);const se=this.findShardForByte(T);if(-1===se)throw new Error(`Could not find start shard for byte ${T}`);const G=new ArrayBuffer($-T),te=new Uint8Array(G);let Y=0;for(let S=se;S<this.shards.length;S++){const ee=this.shards[S],he=T+Y-ee.start,Ne=Y,Ke=Math.min($,ee.end)-ee.start,_t=new Uint8Array(ee.buffer,he,Ke-he);if(te.set(_t,Ne),Y+=_t.length,$<ee.end)break}return G}findShardForByte(T){if(0===this.shards.length||T<0||T>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(T/this.bufferUniformSize),this.previousShardIndex;function $(ne){return T<ne.start?-1:T>=ne.end?1:0}if(0===$(this.shards[this.previousShardIndex]))return this.previousShardIndex;const se=function H(q,T){let $=0,se=q.length;for(;$<=se;){const ne=Math.floor((se-$)/2)+$,G=T(q[ne]);if(0===G)return ne;G<0?se=ne:$=ne+1}return-1}(this.shards,$);return-1===se?-1:(this.previousShardIndex=se,this.previousShardIndex)}}},8339:(st,Oe,I)=>{"use strict";I.d(Oe,{EZ:()=>Q,JY:()=>N,Q:()=>pe,Yd:()=>le,_n:()=>ue,dI:()=>S,hu:()=>_e,jN:()=>v,ji:()=>Ae,n7:()=>ie,r:()=>_t,yz:()=>te});var ce=I(5861),ye=I(3037),H=I(3905),q=I(5359),T=I(1352),$=I(7864),se=I(2773),ne=I(5527);const G=4;function te(Ce,De){return Y.apply(this,arguments)}function Y(){return Y=(0,ce.Z)(function*(Ce,De){const Ye=[],Pe=[],tt=Array.isArray(Ce)?Ce.map(mt=>mt.name):Object.keys(Ce);for(let mt=0;mt<tt.length;++mt){const qe=tt[mt],At=Array.isArray(Ce)?Ce[mt].tensor:Ce[qe];if("float32"!==At.dtype&&"int32"!==At.dtype&&"bool"!==At.dtype&&"string"!==At.dtype&&"complex64"!==At.dtype)throw new Error(`Unsupported dtype in weight '${qe}': ${At.dtype}`);const Wn={name:qe,shape:At.shape,dtype:At.dtype};if("string"===At.dtype){const Ut=new Promise(function(){var ge=(0,ce.Z)(function*(Be){const Xe=yield At.bytes(),vt=Xe.reduce((kn,Cn)=>kn+Cn.length,0)+G*Xe.length,cn=new Uint8Array(vt);let un=0;for(let kn=0;kn<Xe.length;kn++){const Cn=Xe[kn],lr=new Uint8Array(new Uint32Array([Cn.length]).buffer);cn.set(lr,un),un+=G,cn.set(Cn,un),un+=Cn.length}Be(cn)});return function(Be){return ge.apply(this,arguments)}}());Pe.push(Ut)}else Pe.push(At.data());null!=De&&(Wn.group=De),Ye.push(Wn)}return{data:re(yield Promise.all(Pe)),specs:Ye}}),Y.apply(this,arguments)}function S(Ce,De){const Ye=new $.w(Ce),Pe={};let tt=0;for(const et of De){const mt=ee(et,(qe,At)=>Ye.slice(tt+qe,tt+At));Pe[et.name]=Ne(et,Ye.slice(tt,tt+mt)),tt+=mt}return Pe}function ee(Ce,De){const Ye=(0,q.NA)(Ce.shape);let Pe;if("quantization"in Ce)Pe=T.J[Ce.quantization.dtype];else{if("string"===Ce.dtype){let tt=0;for(let et=0;et<Ye;et++)tt+=G+new Uint32Array(De(tt,tt+G))[0];return tt}Pe=T.J[Ce.dtype]}return Ye*Pe}function Se(Ce,De){return he.apply(this,arguments)}function he(){return(he=(0,ce.Z)(function*(Ce,De){const Ye=(0,q.NA)(Ce.shape);let Pe;if("quantization"in Ce)Pe=T.J[Ce.quantization.dtype];else{if("string"===Ce.dtype){let tt=0;for(let et=0;et<Ye;et++)tt+=G+new Uint32Array(yield De(tt,tt+G))[0];return tt}Pe=T.J[Ce.dtype]}return Ye*Pe})).apply(this,arguments)}function Ne(Ce,De){const Ye=Ce.name,Pe=Ce.dtype,tt=Ce.shape,et=(0,q.NA)(tt);let mt,qe=0;if("quantization"in Ce){const At=Ce.quantization;if("uint8"===At.dtype||"uint16"===At.dtype){if(!("min"in At)||!("scale"in At))throw new Error(`Weight ${Ce.name} with quantization ${At.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==At.dtype)throw new Error(`Weight ${Ce.name} has unknown quantization dtype ${At.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==Pe)throw new Error(`Weight ${Ce.name} is quantized with ${At.dtype} which only supports weights of type float32 not ${Pe}.`)}const Wn=T.J[At.dtype],Ut="uint8"===At.dtype?new Uint8Array(De):new Uint16Array(De);if("float32"===Pe)if("uint8"===At.dtype||"uint16"===At.dtype){mt=new Float32Array(Ut.length);for(let ge=0;ge<Ut.length;ge++)mt[ge]=Ut[ge]*At.scale+At.min}else{if("float16"!==At.dtype)throw new Error(`Unsupported quantization type ${At.dtype} for weight type float32.`);mt=function ut(){const Ce=function Te(){const Ce=Ye=>{let Pe=Ye<<13,tt=0;for(;!(8388608&Pe);)tt-=8388608,Pe<<=1;return Pe&=-8388609,tt+=947912704,Pe|tt},De=new Uint32Array(2048);De[0]=0;for(let Ye=1;Ye<1024;Ye++)De[Ye]=Ce(Ye);for(let Ye=1024;Ye<2048;Ye++)De[Ye]=939524096+(Ye-1024<<13);return De}(),De=function Ie(){const Ce=new Uint32Array(64);Ce[0]=0,Ce[31]=1199570944,Ce[32]=2147483648,Ce[63]=3347054592;for(let De=1;De<31;De++)Ce[De]=De<<23;for(let De=33;De<63;De++)Ce[De]=2147483648+(De-32<<23);return Ce}(),Ye=function be(){const Ce=new Uint32Array(64);for(let De=0;De<64;De++)Ce[De]=1024;return Ce[0]=Ce[32]=0,Ce}();return Pe=>{const tt=new ArrayBuffer(4*Pe.length),et=new Uint32Array(tt);for(let mt=0;mt<Pe.length;mt++){const qe=Pe[mt];et[mt]=Ce[Ye[qe>>10]+(1023&qe)]+De[qe>>10]}return new Float32Array(tt)}}()(Ut)}else{if("int32"!==Pe)throw new Error(`Unsupported dtype in weight '${Ye}': ${Pe}`);if("uint8"!==At.dtype&&"uint16"!==At.dtype)throw new Error(`Unsupported quantization type ${At.dtype} for weight type int32.`);mt=new Int32Array(Ut.length);for(let ge=0;ge<Ut.length;ge++)mt[ge]=Math.round(Ut[ge]*At.scale+At.min)}qe+=et*Wn}else if("string"===Pe){const At=(0,q.NA)(Ce.shape);mt=[];for(let Wn=0;Wn<At;Wn++){const Ut=new Uint32Array(De.slice(qe,qe+G))[0];qe+=G;const ge=new Uint8Array(De.slice(qe,qe+Ut));mt.push(ge),qe+=Ut}}else{const At=T.J[Pe];if("float32"===Pe)mt=new Float32Array(De);else if("int32"===Pe)mt=new Int32Array(De);else{if("bool"!==Pe){if("complex64"===Pe){mt=new Float32Array(De);const Wn=new Float32Array(mt.length/2),Ut=new Float32Array(mt.length/2);for(let vt=0;vt<Wn.length;vt++)Wn[vt]=mt[2*vt],Ut[vt]=mt[2*vt+1];const ge=(0,H.X)(Wn,tt,"float32"),Be=(0,H.X)(Ut,tt,"float32"),Xe=(0,ye.P)(ge,Be);return ge.dispose(),Be.dispose(),Xe}throw new Error(`Unsupported dtype in weight '${Ye}': ${Pe}`)}mt=new Uint8Array(De)}qe+=et*At}return(0,H.X)(mt,tt,Pe)}function Qe(Ce,De,Ye){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,ce.Z)(function*(Ce,De,Ye){let Pe=new Uint8Array(De);for(;Pe.byteLength<Ye;){const{done:tt,value:et}=yield Ce.read();if(tt&&null==et)throw new Error(`Reader is done but ${Ye-Pe.byteLength} bytes are still expected`);const mt=new Uint8Array(Pe.length+et.byteLength);mt.set(Pe,0),mt.set(new Uint8Array(et),Pe.length),Pe=mt}return Pe.buffer})).apply(this,arguments)}function _t(Ce,De){return Ze.apply(this,arguments)}function Ze(){return Ze=(0,ce.Z)(function*(Ce,De){const Ye={},Pe=Ce.getReader();let tt=new ArrayBuffer(0);for(const et of De){const mt=yield Se(et,function(){var Wn=(0,ce.Z)(function*(Ut,ge){return tt=yield Qe(Pe,tt,ge),tt.slice(Ut,ge)});return function(Ut,ge){return Wn.apply(this,arguments)}}());tt=yield Qe(Pe,tt,mt);const qe=tt.slice(0,mt);tt=tt.slice(mt);const At=Ne(et,qe);if(Ye[et.name]=At,"webgpu"===(0,se.N_)()){const Wn=(0,se.y3)();"uploadToGPU"in Wn&&(0,q.NA)(At.shape)>=(0,ne.OB)().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&Wn.uploadToGPU(At.dataId)}}return Ye}),Ze.apply(this,arguments)}function re(Ce){if(null===Ce)throw new Error(`Invalid input value: ${JSON.stringify(Ce)}`);let De=0;const Ye=[];Ce.forEach(et=>{if(De+=et.byteLength,Ye.push(et.byteLength===et.buffer.byteLength?et:new et.constructor(et)),!(et instanceof Float32Array||et instanceof Int32Array||et instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${et.constructor.name}`)});const Pe=new Uint8Array(De);let tt=0;return Ye.forEach(et=>{Pe.set(new Uint8Array(et.buffer),tt),tt+=et.byteLength}),Pe.buffer}const ze=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Je(Ce){return ze?Buffer.byteLength(Ce,"utf8"):new Blob([Ce]).size}function ue(Ce){if(ze)return Buffer.from(Ce).toString("base64");const De=new Uint8Array(Ce);let Ye="";for(let Pe=0,tt=De.length;Pe<tt;Pe++)Ye+=String.fromCharCode(De[Pe]);return btoa(Ye)}function ie(Ce){if(ze){const Pe=Buffer.from(Ce,"base64");return Pe.buffer.slice(Pe.byteOffset,Pe.byteOffset+Pe.byteLength)}const De=atob(Ce),Ye=new Uint8Array(De.length);for(let Pe=0;Pe<De.length;++Pe)Ye.set([De.charCodeAt(Pe)],Pe);return Ye.buffer}function N(Ce){return $.w.join(Ce)}function Q(Ce){for(Ce=Ce.trim();Ce.endsWith("/");)Ce=Ce.slice(0,Ce.length-1);const Ye=Ce.split("/");return Ye[Ye.length-1]}function le(Ce,De){const Ye={modelTopology:Ce.modelTopology,format:Ce.format,generatedBy:Ce.generatedBy,convertedBy:Ce.convertedBy,weightsManifest:De};return null!=Ce.signature&&(Ye.signature=Ce.signature),null!=Ce.userDefinedMetadata&&(Ye.userDefinedMetadata=Ce.userDefinedMetadata),null!=Ce.modelInitializer&&(Ye.modelInitializer=Ce.modelInitializer),null!=Ce.initializerSignature&&(Ye.initializerSignature=Ce.initializerSignature),null!=Ce.trainingConfig&&(Ye.trainingConfig=Ce.trainingConfig),Ye}function Ae(Ce,De,Ye){const Pe={modelTopology:Ce.modelTopology,format:Ce.format,generatedBy:Ce.generatedBy,convertedBy:Ce.convertedBy};if(null!=Ce.trainingConfig&&(Pe.trainingConfig=Ce.trainingConfig),null!=Ce.weightsManifest){if(!De)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!Ye)throw new Error("modelJSON has weightsManifest but weightData is null");Pe.weightSpecs=De,Pe.weightData=Ye}return null!=Ce.signature&&(Pe.signature=Ce.signature),null!=Ce.userDefinedMetadata&&(Pe.userDefinedMetadata=Ce.userDefinedMetadata),null!=Ce.modelInitializer&&(Pe.modelInitializer=Ce.modelInitializer),null!=Ce.initializerSignature&&(Pe.initializerSignature=Ce.initializerSignature),Pe}function v(Ce,De){return Le.apply(this,arguments)}function Le(){return(Le=(0,ce.Z)(function*(Ce,De){let Ye,Pe;return null!=Ce.weightsManifest&&([Ye,Pe]=yield De(Ce.weightsManifest)),Ae(Ce,Ye,Pe)})).apply(this,arguments)}function pe(Ce){if(Ce.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==Ce.modelTopology?0:Je(JSON.stringify(Ce.modelTopology)),weightSpecsBytes:null==Ce.weightSpecs?0:Je(JSON.stringify(Ce.weightSpecs)),weightDataBytes:null==Ce.weightData?0:new $.w(Ce.weightData).byteLength}}function _e(Ce){const De=[];for(const Ye of Ce)De.push(...Ye.weights);return De}},1352:(st,Oe,I)=>{"use strict";I.d(Oe,{J:()=>ce});const ce={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},4251:(st,Oe,I)=>{"use strict";I.d(Oe,{$HU:()=>Br,$g6:()=>cn,$w:()=>Wn,Acj:()=>Rs,BMI:()=>ji,BiW:()=>Oo,Byc:()=>De,CAk:()=>ul,CQl:()=>dn,D2d:()=>f,DlI:()=>sa,Eh3:()=>v,FKq:()=>On,G3Y:()=>qt,GBy:()=>Ti,Gcp:()=>aa,HEU:()=>kn,HZH:()=>Nr,Hhh:()=>Si,Hmb:()=>ka,IKK:()=>se,IMb:()=>Ke,J$2:()=>nc,J7O:()=>Bn,J_u:()=>Ao,JhU:()=>he,Kgp:()=>fl,L8s:()=>bs,Ly9:()=>Je,M2y:()=>te,MIZ:()=>nt,MRv:()=>Po,MZg:()=>Pt,NEP:()=>hi,NZg:()=>Aa,O3z:()=>la,OAf:()=>ta,OR:()=>Ns,OU7:()=>ii,OV7:()=>No,Omj:()=>Cn,Oyi:()=>ee,PYm:()=>fi,PhF:()=>oa,QCc:()=>Se,QRR:()=>tt,Qg5:()=>Ei,QiL:()=>hl,Qvg:()=>sn,RFZ:()=>ie,ROF:()=>Ne,RQH:()=>Rr,RuY:()=>Cr,SIB:()=>ks,SX0:()=>un,SYM:()=>ce,SbG:()=>An,SpW:()=>H,T0n:()=>et,TQc:()=>wr,TR1:()=>Ce,ToN:()=>Nt,Tr8:()=>Ee,Uyb:()=>To,VGw:()=>ye,Vbg:()=>Lr,VcC:()=>Pe,VfG:()=>ea,Vn9:()=>Be,W0H:()=>no,XDQ:()=>Kn,XLW:()=>_t,XkS:()=>X,Xze:()=>T,Y0y:()=>As,YFo:()=>nr,YoZ:()=>pi,ZbH:()=>eo,ZjV:()=>Fo,Zz9:()=>le,_JP:()=>U,_V0:()=>lo,_Yw:()=>En,_k9:()=>Qe,_tC:()=>d,a5O:()=>Ki,aJk:()=>G,avt:()=>fs,b9H:()=>ao,bK0:()=>p,bV0:()=>Sn,c17:()=>Ii,cWu:()=>bt,cie:()=>mt,cye:()=>_s,dDz:()=>cr,deh:()=>ds,dpD:()=>so,e07:()=>Oa,e0R:()=>w,e6w:()=>gn,e7N:()=>gr,eBW:()=>Nn,eEB:()=>ue,eZ0:()=>Ui,ekb:()=>ge,gJX:()=>N,h8e:()=>Vr,hCO:()=>ze,hGc:()=>Xe,hdR:()=>lr,i5y:()=>Ht,iHb:()=>Ye,iJz:()=>hs,iWB:()=>xe,iZT:()=>Js,ik2:()=>be,jMg:()=>S,jQk:()=>z,jQs:()=>gs,jeX:()=>Mo,kU:()=>ms,kpP:()=>Jt,kuV:()=>to,luS:()=>$o,lyA:()=>ko,mKl:()=>oo,mTV:()=>dl,mc4:()=>ut,mhS:()=>Le,mm_:()=>q,n9L:()=>Fe,nhH:()=>Xi,nr8:()=>Wi,o0g:()=>Ra,o2y:()=>Ie,oFR:()=>Gi,oHH:()=>vt,oT6:()=>$,p2w:()=>je,p4S:()=>Ut,pe_:()=>Na,q1x:()=>Qs,q2K:()=>Di,q8u:()=>er,qCd:()=>Wr,qIC:()=>rn,qWM:()=>Ro,qi_:()=>Ys,qkr:()=>io,qw7:()=>Y,r7n:()=>cl,s1s:()=>J,sEM:()=>rt,sHE:()=>$r,sJF:()=>ne,sL$:()=>qe,usg:()=>on,uv1:()=>ia,vFR:()=>na,vtC:()=>ps,vwp:()=>us,w3H:()=>vs,w6g:()=>xn,wUP:()=>pe,wYB:()=>Kt,wYn:()=>ys,we_:()=>ro,wm:()=>_e,wx7:()=>yt,x12:()=>Te,xJR:()=>Bt,xQA:()=>jt,xnO:()=>Q,y7R:()=>At,yQU:()=>ra,yj2:()=>Ae,zbQ:()=>Hi,zvY:()=>re,zws:()=>Ze});const ce="Abs",ye="Acos",H="Acosh",q="Add",T="AddN",$="All",se="Any",ne="ArgMax",G="ArgMin",te="Asin",Y="Asinh",S="Atan",ee="Atanh",Se="Atan2",he="AvgPool",Ne="AvgPoolGrad",Qe="AvgPool3D",Ke="AvgPool3DGrad",_t="BatchMatMul",Ze="BatchToSpaceND",re="Bincount",ze="BitwiseAnd",Je="BroadcastTo",ue="BroadcastArgs",ie="Cast",N="Ceil",Q="ClipByValue",le="Complex",Ae="ComplexAbs",v="Concat",Le="Conv2D",pe="Conv2DBackpropFilter",_e="Conv2DBackpropInput",Te="Conv3D",Ie="Conv3DBackpropFilterV2",be="Conv3DBackpropInputV2",ut="Cos",Ce="Cosh",De="Cumprod",Ye="Cumsum",Pe="CropAndResize",tt="DenseBincount",et="DepthToSpace",mt="DepthwiseConv2dNative",qe="DepthwiseConv2dNativeBackpropFilter",At="DepthwiseConv2dNativeBackpropInput",Wn="Diag",Ut="Dilation2D",ge="Dilation2DBackpropInput",Be="Dilation2DBackpropFilter",Xe="Draw",vt="RealDiv",cn="Einsum",un="Elu",kn="EluGrad",Cn="Erf",lr="Equal",hi="Exp",nr="ExpandDims",As="Expm1",us="FFT",ds="Fill",To="FlipLeftRight",Ns="Floor",Mo="FloorDiv",$r="FusedBatchNorm",Ys="GatherV2",Qs="GatherNd",Js="Greater",Rs="GreaterEqual",hs="Identity",Ei="IFFT",Ao="Imag",fs="IsFinite",xe="IsInf",cl="IsNan",nc="LeakyRelu",ps="Less",ul="LessEqual",gr="LinSpace",eo="Log",ms="Log1p",fi="LogicalAnd",ea="LogicalNot",Pt="LogicalOr",xn="LogicalXor",Wr="LogSoftmax",rn="LowerBound",Ui="LRN",Si="LRNGrad",Bn="MatrixBandPart",pi="Max",ji="Maximum",dl="MaxPool",No="MaxPoolGrad",ta="MaxPool3D",ii="MaxPool3DGrad",na="MaxPoolWithArgmax",Di="Mean",Ii="Min",er="Minimum",gs="MirrorPad",Lr="Mod",Aa="Multinomial",ys="Multiply",to="Neg",ra="NotEqual",ia="NonMaxSuppressionV3",_s="NonMaxSuppressionV4",no="NonMaxSuppressionV5",Ro="OnesLike",ro="OneHot",hl="Pack",ko="PadV2",fl="Pool",Na="Pow",Ra="Prelu",sa="Prod",cr="RaggedGather",dn="RaggedRange",Oo="RaggedTensorToTensor",gn="Range",Bt="Real",Br="Reciprocal",io="Relu",Nr="Reshape",so="ResizeNearestNeighbor",ka="ResizeNearestNeighborGrad",En="ResizeBilinear",Hi="ResizeBilinearGrad",An="Relu6",oo="Reverse",Oa="Round",Sn="Rsqrt",jt="ScatterNd",ks="TensorScatterUpdate",Wi="SearchSorted",oa="Select",Gi="Selu",je="Slice",Rr="Sin",Kt="Sinh",Ht="Sign",Ki="Sigmoid",Po="Softplus",On="Sqrt",Ti="Sum",wr="SpaceToBatchND",bs="SplitV",aa="Softmax",la="SparseFillEmptyRows",Xi="SparseReshape",vs="SparseSegmentMean",Fo="SparseSegmentSum",f="SparseToDense",d="SquaredDifference",p="Square",w="StaticRegexReplace",z="StridedSlice",U="StringNGrams",J="StringSplit",X="StringToHashBucketFast",Ee="Sub",rt="Tan",nt="Tanh",Fe="Tile",bt="TopK",yt="Transform",qt="Transpose",Jt="Unique",Nt="Unpack",sn="UnsortedSegmentSum",Kn="UpperBound",Cr="ZerosLike",Vr="Step",Nn="FromPixels",ao="RotateWithOffset",on="_FusedMatMul",lo="FusedConv2D",$o="FusedDepthwiseConv2D"},8987:(st,Oe,I)=>{"use strict";I.d(Oe,{Li:()=>te,T3:()=>ee,bt:()=>S,nE:()=>Y,pI:()=>$,tr:()=>ne,uk:()=>se,wC:()=>G});var ce=I(5527),ye=I(2918),H=I(2932);const q=(0,ye.R)("kernelRegistry",()=>new Map),T=(0,ye.R)("gradRegistry",()=>new Map);function $(he,Ne){const Qe=Se(he,Ne);return q.get(Qe)}function se(he){return T.get(he)}function ne(he){const Ne=q.entries(),Qe=[];for(;;){const{done:Ke,value:_t}=Ne.next();if(Ke)break;const[Ze,re]=_t,[ze]=Ze.split("_");ze===he&&Qe.push(re)}return Qe}function G(he){const{kernelName:Ne,backendName:Qe}=he,Ke=Se(Ne,Qe);q.has(Ke)&&H.Z(`The kernel '${Ne}' for backend '${Qe}' is already registered`),q.set(Ke,he)}function te(he){const{kernelName:Ne}=he;T.has(Ne)&&(0,ce.OB)().getBool("DEBUG")&&H.Z(`Overriding the gradient for '${Ne}'`),T.set(Ne,he)}function Y(he,Ne){const Qe=Se(he,Ne);if(!q.has(Qe))throw new Error(`The kernel '${he}' for backend '${Ne}' is not registered`);q.delete(Qe)}function S(he){if(!T.has(he))throw new Error(`The gradient '${he}' for backend is not registered`);T.delete(he)}function ee(he,Ne){ne(he).forEach(Ke=>{G(Object.assign({},Ke,{backendName:Ne}))})}function Se(he,Ne){return`${Ne}_${he}`}},2932:(st,Oe,I)=>{"use strict";I.d(Oe,{Z:()=>ye,c:()=>H});var ce=I(5527);function ye(...q){(0,ce.OB)().getBool("IS_TEST")||(0,ce.OB)().getBool("PROD")||console.warn(...q)}function H(...q){(0,ce.OB)().getBool("IS_TEST")||(0,ce.OB)().getBool("PROD")||console.log(...q)}},6989:(st,Oe,I)=>{"use strict";I.d(Oe,{W:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({abs_:function T(se){const ne=(0,H._1)(se,"x","abs");return ce.BV.runKernel("complex64"===ne.dtype?ye.yj2:ye.SYM,{x:ne})}})},7066:(st,Oe,I)=>{"use strict";I.d(Oe,{I:()=>se});var ce=I(687),ye=I(4251),H=I(7664),q=I(1257);const se=(0,I(4195).op)({add_:function $(ne,G){let te=(0,q._1)(ne,"a","add"),Y=(0,q._1)(G,"b","add");return[te,Y]=(0,H.makeTypesMatch)(te,Y),ce.BV.runKernel(ye.mm_,{a:te,b:Y})}})},929:(st,Oe,I)=>{"use strict";I.d(Oe,{LJ:()=>ne,Q3:()=>se,Vh:()=>H,YB:()=>ye,kz:()=>q,lB:()=>$,rv:()=>T,sY:()=>G});var ce=I(5359);function ye(te,Y){for(let S=0;S<te.length;++S)if(te[te.length-S-1]!==Y-1-S)return!1;return!0}function H(te,Y,S){const ee=te.length+Y.length,Se=[];let he=0,Ne=0;for(let Qe=0;Qe<ee;Qe++)-1===S.indexOf(Qe)?Se.push(te[he++]):Se.push(Y[Ne++]);return Se}function q(te,Y){const S=[],ee=te.length;for(let he=0;he<ee;he++)-1===Y.indexOf(he)&&S.push(te[he]);return[S,Y.map(he=>te[he])]}function T(te,Y){return H(te,Y.map(ee=>1),Y)}function $(te,Y,S){ce.hu(ye(Y,S),()=>`${te} supports only inner-most axes for now. Got axes ${Y} and rank-${S} input.`)}function se(te,Y){if(ye(te,Y))return null;const S=[];for(let ee=0;ee<Y;++ee)-1===te.indexOf(ee)&&S.push(ee);return te.forEach(ee=>S.push(ee)),S}function ne(te){return te.map((Y,S)=>[S,Y]).sort((Y,S)=>Y[1]-S[1]).map(Y=>Y[0])}function G(te,Y){const S=[];for(let ee=Y-te;ee<Y;++ee)S.push(ee);return S}},3239:(st,Oe,I)=>{"use strict";function ce(q,T){const $=q.length,se=[];for(let ne=0;ne<$;ne++){const G=$-1-ne;(T[T.length-1-ne]||1)>1&&1===(q[G]||1)&&se.unshift(G)}return se}function ye(q,T){const $=[];for(let se=0;se<T.length;se++){const ne=q[q.length-se-1],G=T.length-se-1;(null==ne||1===ne&&T[G]>1)&&$.unshift(G)}return $}function H(q,T){const $=Math.max(q.length,T.length),se=new Array($);for(let ne=0;ne<$;ne++){let G=q[q.length-ne-1];null==G&&(G=1);let te=T[T.length-ne-1];if(null==te&&(te=1),1===G)se[$-ne-1]=te;else if(1===te)se[$-ne-1]=G;else{if(G!==te)throw Error(`Operands could not be broadcast together with shapes ${q} and ${T}.`);se[$-ne-1]=G}}return se}I.r(Oe),I.d(Oe,{assertAndGetBroadcastShape:()=>H,getBroadcastDims:()=>ce,getReductionAxes:()=>ye})},582:(st,Oe,I)=>{"use strict";I.d(Oe,{f:()=>H});var ce=I(4945),ye=I(5359);function H(q,T="float32",$){return T=T||"float32",ye.Mu(q),new ce.YD(q,T,$)}},3062:(st,Oe,I)=>{"use strict";I.d(Oe,{p:()=>se});var ce=I(687),ye=I(4251),H=I(1257),q=I(5359);const se=(0,I(4195).op)({cast_:function $(ne,G){const te=(0,H._1)(ne,"x","cast");if(!q.LP(G))throw new Error(`Failed to cast to unknown dtype ${G}`);if("string"===G&&"string"!==te.dtype||"string"!==G&&"string"===te.dtype)throw new Error("Only strings can be casted to strings");return ce.BV.runKernel(ye.RFZ,{x:te},{dtype:G})}})},7315:(st,Oe,I)=>{"use strict";I.d(Oe,{d:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({clone_:function T(se){const G={x:(0,H._1)(se,"x","clone","string_or_numeric")};return ce.BV.runKernel(ye.iJz,G)}})},3037:(st,Oe,I)=>{"use strict";I.d(Oe,{P:()=>se});var ce=I(687),ye=I(4251),H=I(1257),q=I(5359);const se=(0,I(4195).op)({complex_:function $(ne,G){const te=(0,H._1)(ne,"real","complex"),Y=(0,H._1)(G,"imag","complex");return q.k5(te.shape,Y.shape,`real and imag shapes, ${te.shape} and ${Y.shape}, must match in call to tf.complex().`),ce.BV.runKernel(ye.Zz9,{real:te,imag:Y})}})},5551:(st,Oe,I)=>{"use strict";I.d(Oe,{I0:()=>Ne,Ix:()=>T,Rf:()=>ye,U3:()=>Ke,Xw:()=>H,aO:()=>G,jT:()=>Qe,jw:()=>$,m:()=>Ze,pl:()=>q,sl:()=>_t});var ce=I(5359);function ye(re,ze,Je,ue,ie="NHWC",N){return T(re,[...ze,re[3]],Je,N,ue,null,null,_t(ie))}function H(re,ze,Je,ue,ie,N,Q="channelsLast"){const[le,Ae]=te(ze);let v;if("channelsLast"===Q)v=[le,Ae,re[3],re[3]];else{if("channelsFirst"!==Q)throw new Error(`Unknown dataFormat ${Q}`);v=[le,Ae,re[1],re[1]]}return T(re,v,Je,ue,ie,N,!1,Q)}function q(re,ze,Je,ue,ie,N,Q="NDHWC"){const[le,Ae,v]=Y(ze);let Le,pe;if("NDHWC"===Q)pe="channelsLast",Le=[le,Ae,v,re[4],re[4]];else{if("NCDHW"!==Q)throw new Error(`Unknown dataFormat ${Q}`);pe="channelsFirst",Le=[le,Ae,v,re[1],re[1]]}return $(re,Le,Je,ue,ie,!1,pe,N)}function T(re,ze,Je,ue,ie,N,Q=!1,le="channelsLast"){let[Ae,v,Le,pe]=[-1,-1,-1,-1];if("channelsLast"===le)[Ae,v,Le,pe]=re;else{if("channelsFirst"!==le)throw new Error(`Unknown dataFormat ${le}`);[Ae,pe,v,Le]=re}const[_e,Te,,Ie]=ze,[be,ut]=te(Je),[Ce,De]=te(ue),Ye=S(_e,Ce),Pe=S(Te,De),{padInfo:tt,outHeight:et,outWidth:mt}=function ee(re,ze,Je,ue,ie,N,Q,le,Ae){let v,Le,pe;if("number"==typeof re){v={top:re,bottom:re,left:re,right:re,type:0===re?"VALID":"NUMBER"};const Te=function se(re,ze,Je,ue,ie){null==ue&&(ue=G(re,ze,Je));const Q=re[1];return[he((re[0]-ze+2*ue)/Je+1,ie),he((Q-ze+2*ue)/Je+1,ie)]}([ze,Je],N,ue,re,le);Le=Te[0],pe=Te[1]}else if("same"===re){Le=Math.ceil(ze/ue),pe=Math.ceil(Je/ie);const _e=Math.max(0,(Le-1)*ue+N-ze),Te=Math.max(0,(pe-1)*ie+Q-Je),Ie=Math.floor(_e/2),be=_e-Ie,ut=Math.floor(Te/2);v={top:Ie,bottom:be,left:ut,right:Te-ut,type:"SAME"}}else if("valid"===re)v={top:0,bottom:0,left:0,right:0,type:"VALID"},Le=Math.ceil((ze-N+1)/ue),pe=Math.ceil((Je-Q+1)/ie);else{if("object"!=typeof re)throw Error(`Unknown padding parameter: ${re}`);{const _e="channelsLast"===Ae?re[1][0]:re[2][0],Te="channelsLast"===Ae?re[1][1]:re[2][1],Ie="channelsLast"===Ae?re[2][0]:re[3][0],be="channelsLast"===Ae?re[2][1]:re[3][1];v={top:_e,bottom:Te,left:Ie,right:be,type:0===_e&&0===Te&&0===Ie&&0===be?"VALID":"EXPLICIT"},Le=he((ze-N+_e+Te)/ue+1,le),pe=he((Je-Q+Ie+be)/ie+1,le)}}return{padInfo:v,outHeight:Le,outWidth:pe}}(ie,v,Le,be,ut,Ye,Pe,N,le),qe=Q?Ie*pe:Ie;let At;return"channelsFirst"===le?At=[Ae,qe,et,mt]:"channelsLast"===le&&(At=[Ae,et,mt,qe]),{batchSize:Ae,dataFormat:le,inHeight:v,inWidth:Le,inChannels:pe,outHeight:et,outWidth:mt,outChannels:qe,padInfo:tt,strideHeight:be,strideWidth:ut,filterHeight:_e,filterWidth:Te,effectiveFilterHeight:Ye,effectiveFilterWidth:Pe,dilationHeight:Ce,dilationWidth:De,inShape:re,outShape:At,filterShape:ze}}function $(re,ze,Je,ue,ie,N=!1,Q="channelsLast",le){let[Ae,v,Le,pe,_e]=[-1,-1,-1,-1,-1];if("channelsLast"===Q)[Ae,v,Le,pe,_e]=re;else{if("channelsFirst"!==Q)throw new Error(`Unknown dataFormat ${Q}`);[Ae,_e,v,Le,pe]=re}const[Te,Ie,be,,ut]=ze,[Ce,De,Ye]=Y(Je),[Pe,tt,et]=Y(ue),mt=S(Te,Pe),qe=S(Ie,tt),At=S(be,et),{padInfo:Wn,outDepth:Ut,outHeight:ge,outWidth:Be}=function Se(re,ze,Je,ue,ie,N,Q,le,Ae,v,Le){let pe,_e,Te,Ie;if("valid"===re&&(re=0),"number"==typeof re){pe={top:re,bottom:re,left:re,right:re,front:re,back:re,type:0===re?"VALID":"NUMBER"};const ut=function ne(re,ze,Je,ue,ie,N){null==ie&&(ie=G(re,ze[0],ue[0]));const Q=[0,0,0,Je];for(let le=0;le<3;le++)re[le]+2*ie>=ze[le]&&(Q[le]=he((re[le]-ze[le]+2*ie)/ue[le]+1,N));return Q}([ze,Je,ue,1],[le,Ae,v],1,[ie,N,Q],re,Le);_e=ut[0],Te=ut[1],Ie=ut[2]}else{if("same"!==re)throw Error(`Unknown padding parameter: ${re}`);{_e=Math.ceil(ze/ie),Te=Math.ceil(Je/N),Ie=Math.ceil(ue/Q);const be=(_e-1)*ie+le-ze,ut=(Te-1)*N+Ae-Je,Ce=(Ie-1)*Q+v-ue,De=Math.floor(be/2),Ye=be-De,Pe=Math.floor(ut/2),tt=ut-Pe,et=Math.floor(Ce/2);pe={top:Pe,bottom:tt,left:et,right:Ce-et,front:De,back:Ye,type:"SAME"}}}return{padInfo:pe,outDepth:_e,outHeight:Te,outWidth:Ie}}(ie,v,Le,pe,Ce,De,Ye,mt,qe,At,le),Xe=N?ut*_e:ut;let vt;return"channelsFirst"===Q?vt=[Ae,Xe,Ut,ge,Be]:"channelsLast"===Q&&(vt=[Ae,Ut,ge,Be,Xe]),{batchSize:Ae,dataFormat:Q,inDepth:v,inHeight:Le,inWidth:pe,inChannels:_e,outDepth:Ut,outHeight:ge,outWidth:Be,outChannels:Xe,padInfo:Wn,strideDepth:Ce,strideHeight:De,strideWidth:Ye,filterDepth:Te,filterHeight:Ie,filterWidth:be,effectiveFilterDepth:mt,effectiveFilterHeight:qe,effectiveFilterWidth:At,dilationDepth:Pe,dilationHeight:tt,dilationWidth:et,inShape:re,outShape:vt,filterShape:ze}}function G(re,ze,Je,ue=1){const ie=S(ze,ue);return Math.floor((re[0]*(Je-1)-Je+ie)/2)}function te(re){return"number"==typeof re?[re,re,re]:2===re.length?[re[0],re[1],1]:re}function Y(re){return"number"==typeof re?[re,re,re]:re}function S(re,ze){return ze<=1?re:re+(re-1)*(ze-1)}function he(re,ze){if(!ze)return Math.trunc(re);switch(ze){case"round":return Math.round(re);case"ceil":return Math.ceil(re);case"floor":return Math.floor(re);default:throw new Error(`Unknown roundingMode ${ze}`)}}function Ne(re){const[ze,Je,ue]=te(re);return 1===ze&&1===Je&&1===ue}function Qe(re,ze){return Ne(re)||Ne(ze)}function Ke(re){return te(re).every(ze=>ze>0)}function _t(re){if("NHWC"===re)return"channelsLast";if("NCHW"===re)return"channelsFirst";throw new Error(`Unknown dataFormat ${re}`)}function Ze(re,ze,Je){if(null!=Je){if("string"==typeof ze)throw Error(`Error in ${re}: pad must be an integer when using dimRoundingMode ${Je} but got pad ${ze}.`);if("number"==typeof ze)ce.hu(ce.GN(ze),()=>`Error in ${re}: pad must be an integer when using dimRoundingMode ${Je} but got pad ${ze}.`);else{if("object"!=typeof ze)throw Error(`Error in ${re}: Unknown padding parameter: ${ze}`);ze.forEach(ue=>{ue.forEach(ie=>{ce.hu(ce.GN(ie),()=>`Error in ${re}: pad must be an integer when using dimRoundingMode ${Je} but got pad ${ie}.`)})})}}}},3530:(st,Oe,I)=>{"use strict";I.d(Oe,{h:()=>ne});var ce=I(687),ye=I(4251),H=I(7664),q=I(1257),T=I(1030);const ne=(0,I(4195).op)({div_:function se(G,te){let Y=(0,q._1)(G,"a","div"),S=(0,q._1)(te,"b","div");return[Y,S]=(0,H.makeTypesMatch)(Y,S),"int32"===Y.dtype&&"int32"===S.dtype?(0,T.q)(Y,S):ce.BV.runKernel(ye.oHH,{a:Y,b:S},{})}})},9529:(st,Oe,I)=>{"use strict";I.d(Oe,{p:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({elu_:function T(se){const G={x:(0,H._1)(se,"x","elu","float32")};return ce.BV.runKernel(ye.SX0,G)}})},2787:(st,Oe,I)=>{"use strict";I.d(Oe,{h:()=>q});var ce=I(687),ye=I(4251),H=I(5359);function q(T,$,se){return(0,H.Mu)(T),se=se||(0,H.D2)($),ce.BV.runKernel(ye.deh,{},{shape:T,value:$,dtype:se})}},1030:(st,Oe,I)=>{"use strict";I.d(Oe,{q:()=>se});var ce=I(687),ye=I(4251),H=I(7664),q=I(1257);const se=(0,I(4195).op)({floorDiv_:function $(ne,G){let te=(0,q._1)(ne,"a","floorDiv"),Y=(0,q._1)(G,"b","floorDiv");return[te,Y]=(0,H.makeTypesMatch)(te,Y),ce.BV.runKernel(ye.jeX,{a:te,b:Y})}})},6254:(st,Oe,I)=>{"use strict";I.d(Oe,{Fr:()=>S,QH:()=>Se,pf:()=>ee,uy:()=>he});var ce=I(3239),ye=I(9529),H=I(9424),q=I(8737),T=I(1584),$=I(8586),se=I(4917),ne=I(5715),G=I(6139),te=I(6034),Y=I(9929);function S(Ne,Qe,Ke){if(null==Ke||"linear"===Ke)return Ne;if("relu"===Ke)return(0,q.d)(Ne,(0,te.N)(Qe));throw new Error(`Cannot compute gradient for fused activation ${Ke}.`)}function ee(Ne,Qe){let Ke=Qe;const _t=ce.getReductionAxes(Ne.shape,Qe.shape);return _t.length>0&&(Ke=(0,Y.S)(Ke,_t)),(0,ne.X)(Ke,Ne.shape)}function Se(Ne,Qe,Ke,_t){if("linear"===Qe)return Ne;if("relu"===Qe)return(0,$.U)(Ne);if("elu"===Qe)return(0,ye.p)(Ne);if("relu6"===Qe)return(0,se.b)(Ne);if("prelu"===Qe)return(0,T.A)(Ne,Ke);if("leakyrelu"===Qe)return(0,H.h)(Ne,_t);if("sigmoid"===Qe)return(0,G.X)(Ne);throw new Error(`Unknown fused activation ${Qe}.`)}const he=(Ne,Qe)=>!(Ne>0)||"linear"===Qe},1844:(st,Oe,I)=>{"use strict";I.d(Oe,{a:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({imag_:function T(se){const G={input:(0,H._1)(se,"input","imag")};return ce.BV.runKernel(ye.J_u,G)}})},9424:(st,Oe,I)=>{"use strict";I.d(Oe,{h:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({leakyRelu_:function T(se,ne=.2){const te={x:(0,H._1)(se,"x","leakyRelu")};return ce.BV.runKernel(ye.J$2,te,{alpha:ne})}})},4839:(st,Oe,I)=>{"use strict";I.d(Oe,{I:()=>ce});var ce=function(ye){return ye[ye.NONE=0]="NONE",ye[ye.MEAN=1]="MEAN",ye[ye.SUM=2]="SUM",ye[ye.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",ye}(ce||{})},5592:(st,Oe,I)=>{"use strict";I.d(Oe,{O:()=>se});var ce=I(687),ye=I(4251),H=I(7664),q=I(1257);const se=(0,I(4195).op)({matMul_:function $(ne,G,te=!1,Y=!1){let S=(0,q._1)(ne,"a","matMul"),ee=(0,q._1)(G,"b","matMul");return[S,ee]=(0,H.makeTypesMatch)(S,ee),ce.BV.runKernel(ye.XLW,{a:S,b:ee},{transposeA:te,transposeB:Y})}})},765:(st,Oe,I)=>{"use strict";I.d(Oe,{g:()=>G});var ce=I(687),ye=I(4251),H=I(7664),q=I(1257),T=I(3239),$=I(3062);const G=(0,I(4195).op)({maximum_:function ne(te,Y){let S=(0,q._1)(te,"a","maximum"),ee=(0,q._1)(Y,"b","maximum");return[S,ee]=(0,H.makeTypesMatch)(S,ee),"bool"===S.dtype&&(S=(0,$.p)(S,"int32"),ee=(0,$.p)(ee,"int32")),(0,T.assertAndGetBroadcastShape)(S.shape,ee.shape),ce.BV.runKernel(ye.BMI,{a:S,b:ee})}})},8737:(st,Oe,I)=>{"use strict";I.d(Oe,{d:()=>se});var ce=I(687),ye=I(4251),H=I(7664),q=I(1257);const se=(0,I(4195).op)({mul_:function $(ne,G){let te=(0,q._1)(ne,"a","mul"),Y=(0,q._1)(G,"b","mul");return[te,Y]=(0,H.makeTypesMatch)(te,Y),ce.BV.runKernel(ye.wYn,{a:te,b:Y})}})},5048:(st,Oe,I)=>{"use strict";I.d(Oe,{W:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({neg_:function T(se){const G={x:(0,H._1)(se,"x","neg")};return ce.BV.runKernel(ye.kuV,G)}})},5618:(st,Oe,I)=>{"use strict";I.d(Oe,{l:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({oneHot_:function T(se,ne,G=1,te=0,Y="int32"){if(ne<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${ne}`);const ee={indices:(0,H._1)(se,"indices","oneHot","int32")};return ce.BV.runKernel(ye.we_,ee,{dtype:Y,depth:ne,onValue:G,offValue:te})}})},4195:(st,Oe,I)=>{"use strict";I.d(Oe,{op:()=>q,z:()=>H});var ce=I(687),ye=I(5359);const H="__op";function q(T){const $=Object.keys(T);if(1!==$.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${$.length} keys.`);let se=$[0];const ne=T[se];se.endsWith("_")&&(se=se.substring(0,se.length-1)),se+=H;const G=(...te)=>{ce.BV.startScope(se);try{const Y=ne(...te);return(0,ye.tI)(Y)&&console.error("Cannot return a Promise inside of tidy."),ce.BV.endScope(Y),Y}catch(Y){throw ce.BV.endScope(null),Y}};return Object.defineProperty(G,"name",{value:se,configurable:!0}),G}},9678:(st,Oe,I)=>{"use strict";I.d(Oe,{zvA:()=>$.z,WnP:()=>ye.W,Khb:()=>ne,__u:()=>te,IHx:()=>Y.I,QBD:()=>Se,$6P:()=>Ne,YjB:()=>Ke,NqF:()=>Ze,vHJ:()=>ze,ZRM:()=>ue,VfV:()=>N,z4N:()=>le,fvJ:()=>Le,C80:()=>_e,wS1:()=>Ce,uR5:()=>Ye,zEQ:()=>vt,tgs:()=>lr,Dxk:()=>nr,JY5:()=>us,p3b:()=>To,E4h:()=>un,yE8:()=>Mo,ycw:()=>Ys,anm:()=>$p,XsQ:()=>Js,UFq:()=>hs,f3b:()=>Ei.f,pju:()=>Te.p,mDi:()=>fs,iUl:()=>nc,d9v:()=>Pe.d,PYB:()=>ps.P,zoF:()=>et,gME:()=>gr,Izb:()=>ms,MNy:()=>ea,ZaL:()=>xn,PAt:()=>Si,Tek:()=>rn,bc:()=>dl,pdZ:()=>ta,$QV:()=>Ii,mCk:()=>gs,f9Y:()=>Aa,mew:()=>_h,$Gn:()=>to,zbp:()=>ia,ppE:()=>no,nTT:()=>ro,B10:()=>ko,Ka3:()=>Na,WmZ:()=>sa,hiC:()=>cr.h,NTj:()=>so,AKD:()=>En,rvX:()=>Il,WYO:()=>An,pyx:()=>oo.p,GRh:()=>Ai,EDe:()=>Sn,DgJ:()=>gn,qNN:()=>ks,d2q:()=>la,Qqt:()=>vs,dt4:()=>f,t$B:()=>p,iyy:()=>J,kp_:()=>Ep,hlL:()=>xe.h,GWj:()=>Ee,qPi:()=>rt.q,imm:()=>ce,Iqj:()=>Fe,dbB:()=>Mi,pjt:()=>yt,brS:()=>Jt,Sxn:()=>Sr,asL:()=>Nt.a,BHj:()=>cm,V3u:()=>ga,wx0:()=>rs,xVT:()=>Kn,UWc:()=>Vr,i2d:()=>ao,hi7:()=>on.h,d9m:()=>$o,zN1:()=>Pa,$r2:()=>um,SX3:()=>_p,G9k:()=>zd,cM7:()=>ot,Krr:()=>ml,e_t:()=>bp,CmS:()=>Wd,l_t:()=>ca,HvI:()=>yl,hJK:()=>Yc,K5V:()=>Lo,egP:()=>Os,MB5:()=>rb,eab:()=>ft,OI3:()=>mt.O,Fp7:()=>Gi,_sB:()=>Bo,YQQ:()=>Xd,Ip$:()=>Zd,gWQ:()=>Ps.g,J69:()=>Kr,ry_:()=>Qi,VV$:()=>Rr,LTh:()=>La,VdP:()=>Ba,wQq:()=>Qc,Gi7:()=>Jc,p_:()=>D_,dC7:()=>qe.d,rq4:()=>Va,SJ_:()=>nu,W76:()=>qi.W,KOy:()=>bs,Quu:()=>sc,lfX:()=>Qd.l,iUs:()=>Zt,JpU:()=>Ji,op:()=>$.op,N2O:()=>ru,vku:()=>ha,pNR:()=>rh,koy:()=>ih,t1L:()=>oh,lGY:()=>ah,d_R:()=>Rt,sQ3:()=>Kt.s,AL3:()=>si.A,S0v:()=>bn.S,WVs:()=>qr,$gW:()=>mi,VT$:()=>cu,N89:()=>lh,TN_:()=>ir,wzB:()=>za,nGf:()=>R,ruB:()=>M,LGj:()=>j,pe5:()=>me,w6H:()=>Me,kwC:()=>Ue.k,M25:()=>xt,UYe:()=>He.U,btT:()=>at.b,XLQ:()=>be.X,GYS:()=>Wt,SDf:()=>Rn,diP:()=>ts,sx7:()=>Yr,mG2:()=>Er,QEs:()=>du,NMM:()=>ws,bp0:()=>oi,iD$:()=>Ht.i,snQ:()=>Lp,zcT:()=>da,U8D:()=>lc,U_I:()=>Qw,ODp:()=>Jw,XD2:()=>At.X,Xxe:()=>tC,tdS:()=>lm,O$l:()=>rC,R_K:()=>sC,tPi:()=>Ut,jZU:()=>aC,SmN:()=>cC,CnO:()=>Cp,p0P:()=>dC,XAC:()=>ja,Wvh:()=>gl,fBT:()=>su,rVs:()=>Tu,ers:()=>yh,uN7:()=>am,Vl2:()=>El,_b3:()=>Ki._,h62:()=>Po.h,$i:()=>dh,L9e:()=>cc,knu:()=>Sl,Nbs:()=>Tp.N,NXj:()=>uc,Z_8:()=>Ga,luU:()=>an.l,Smz:()=>On.S,ORZ:()=>Mp,AEp:()=>Be,XeE:()=>Ap.X,RRF:()=>$s,odF:()=>dc,wOQ:()=>y_.w,yXz:()=>pC,Bfx:()=>Np,xZs:()=>fh,Pg0:()=>mC,Gg6:()=>z,hg7:()=>__,p4s:()=>mh.p,Xu6:()=>Op,Two:()=>v_,pUJ:()=>Pp,HHK:()=>pu,GaM:()=>C_,VD$:()=>yC,arb:()=>Br,itS:()=>Fp,lls:()=>Xr,P84:()=>io.P});var ce={};I.r(ce),I.d(ce,{conv2d:()=>jp,depthwiseConv2d:()=>R_,matMul:()=>Wp});var ye=I(6989),H=I(687),q=I(4251),T=I(1257),$=I(4195);const ne=(0,$.op)({acos_:function se(E){const _={x:(0,T._1)(E,"x","acos")};return H.BV.runKernel(q.VGw,_)}}),te=(0,$.op)({acosh_:function G(E){const _={x:(0,T._1)(E,"x","acosh")};return H.BV.runKernel(q.SpW,_)}});var Y=I(7066),S=I(5359);const Se=(0,$.op)({addN_:function ee(E){S.hu(Array.isArray(E),()=>"The argument passed to tf.addN() must be a list of tensors"),S.hu(E.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${E.length}`);const b=E.map((O,L)=>(0,T._1)(O,`tensors${L}`,"addN")),_=b[0];return b.forEach(O=>{if(O.dtype!==_.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),b.forEach(O=>{if(!S.cO(O.shape,_.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),H.BV.runKernel(q.Xze,b)}}),Ne=(0,$.op)({all_:function he(E,b=null,_=!1){const O={x:(0,T._1)(E,"x","all","bool")};return H.BV.runKernel(q.oT6,O,{axis:b,keepDims:_})}}),Ke=(0,$.op)({any_:function Qe(E,b=null,_=!1){const O={x:(0,T._1)(E,"x","any","bool")};return H.BV.runKernel(q.IKK,O,{axis:b,keepDims:_})}}),Ze=(0,$.op)({argMax_:function _t(E,b=0){const D={x:(0,T._1)(E,"x","argMax")};return H.BV.runKernel(q.sJF,D,{axis:b})}}),ze=(0,$.op)({argMin_:function re(E,b=0){const D={x:(0,T._1)(E,"x","argMin")};return H.BV.runKernel(q.aJk,D,{axis:b})}}),ue=(0,$.op)({asin_:function Je(E){const _={x:(0,T._1)(E,"x","asin")};return H.BV.runKernel(q.M2y,_)}}),N=(0,$.op)({asinh_:function ie(E){const _={x:(0,T._1)(E,"x","asinh")};return H.BV.runKernel(q.qw7,_)}}),le=(0,$.op)({atan_:function Q(E){const _={x:(0,T._1)(E,"x","atan")};return H.BV.runKernel(q.jMg,_)}});var Ae=I(7664);const Le=(0,$.op)({atan2_:function v(E,b){let _=(0,T._1)(E,"a","atan2"),D=(0,T._1)(b,"b","atan2");return[_,D]=(0,Ae.makeTypesMatch)(_,D),H.BV.runKernel(q.QCc,{a:_,b:D})}}),_e=(0,$.op)({atanh_:function pe(E){const _={x:(0,T._1)(E,"x","atanh")};return H.BV.runKernel(q.Oyi,_)}});var Te=I(3062),Ie=I(5551),be=I(5715);const Ce=(0,$.op)({avgPool_:function ut(E,b,_,D,O){const L=(0,T._1)(E,"x","avgPool","float32");S.hu(Ie.jT(_,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${_} and dilations '1'`);let K=L,ae=!1;3===L.rank&&(ae=!0,K=(0,be.X)(L,[1,L.shape[0],L.shape[1],L.shape[2]])),S.hu(4===K.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${K.rank}.`),Ie.m("avgPool",D,O);let $e=H.BV.runKernel(q.JhU,{x:K},{filterSize:b,strides:_,pad:D,dimRoundingMode:O});return $e=(0,Te.p)($e,L.dtype),ae?(0,be.X)($e,[$e.shape[1],$e.shape[2],$e.shape[3]]):$e}}),Ye=(0,$.op)({avgPool3d_:function De(E,b,_,D,O,L="NDHWC"){const W=(0,T._1)(E,"x","avgPool3d","float32");let K=W,ae=!1;4===W.rank&&(ae=!0,K=(0,be.X)(W,[1,W.shape[0],W.shape[1],W.shape[2],W.shape[3]])),S.hu(5===K.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${K.rank}.`),S.hu("NDHWC"===L,()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${L}`),S.hu("number"==typeof _&&_>0||Array.isArray(_)&&_[0]>0&&_[1]>0&&_[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${_}'`),(0,Ie.m)("avgPool3d",D,O);let $e=H.BV.runKernel(q._k9,{x:K},{filterSize:b,strides:_,pad:D,dimRoundingMode:O,dataFormat:L});return $e=(0,Te.p)($e,K.dtype),ae?(0,be.X)($e,[$e.shape[1],$e.shape[2],$e.shape[3],$e.shape[4]]):$e}});var Pe=I(7315);const et=(0,$.op)({concat_:function tt(E,b=0){(0,S.hu)(E.length>=1,()=>"Pass at least one tensor to concat");const _=(0,T.sI)(E,"tensors","concat","string_or_numeric");return"complex64"===_[0].dtype&&_.forEach(L=>{if("complex64"!==L.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${L.dtype}. `)}),1===_.length?(0,Pe.d)(_[0]):H.BV.runKernel(q.Eh3,_,{axis:b})}});var mt=I(5592),qe=I(8737),At=I(6139);const Ut=(0,$.op)({slice_:function Wn(E,b,_){const D=(0,T._1)(E,"x","slice","string_or_numeric");if(0===D.rank)throw new Error("Slicing scalar is not possible");return H.BV.runKernel(q.p2w,{x:D},{begin:b,size:_})}}),Be=(0,$.op)({tanh_:function ge(E){const _={x:(0,T._1)(E,"x","tanh","float32")};return H.BV.runKernel(q.MIZ,_)}}),vt=(0,$.op)({basicLSTMCell_:function Xe(E,b,_,D,O,L){const W=(0,T._1)(E,"forgetBias","basicLSTMCell"),K=(0,T._1)(b,"lstmKernel","basicLSTMCell"),ae=(0,T._1)(_,"lstmBias","basicLSTMCell"),de=(0,T._1)(D,"data","basicLSTMCell"),ke=(0,T._1)(O,"c","basicLSTMCell"),$e=(0,T._1)(L,"h","basicLSTMCell"),lt=et([de,$e],1),wt=(0,mt.O)(lt,K),Tt=(0,Y.I)(wt,ae),Vt=Tt.shape[1]/4,fn=[Tt.shape[0],Vt],Jr=Ut(Tt,[0,0],fn),Or=Ut(Tt,[0,Vt],fn),xr=Ut(Tt,[0,2*Vt],fn),Pr=Ut(Tt,[0,3*Vt],fn),vn=(0,Y.I)((0,qe.d)((0,At.X)(Jr),Be(Or)),(0,qe.d)(ke,(0,At.X)((0,Y.I)(W,xr))));return[vn,(0,qe.d)(Be(vn),(0,At.X)(Pr))]}}),un=(0,$.op)({batchToSpaceND_:function cn(E,b,_){const D=(0,T._1)(E,"x","batchToSpaceND"),O=b.reduce((K,ae)=>K*ae);return S.hu(D.rank>=1+b.length,()=>`input rank is ${D.rank} but should be > than blockShape.length ${b.length}`),S.hu(_.length===b.length,()=>`crops.length is ${_.length} but should be equal to blockShape.length  ${b.length}`),S.hu(D.shape[0]%O==0,()=>`input tensor batch is ${D.shape[0]} but is not divisible by the product of the elements of blockShape ${b.join(" * ")} === ${O}`),H.BV.runKernel(q.zws,{x:D},{blockShape:b,crops:_})}});function kn(E){let b;return b=0===E.rank||1===E.rank?(0,be.X)(E,[1,1,1,E.size]):2===E.rank?(0,be.X)(E,[1,1,E.shape[0],E.shape[1]]):3===E.rank?(0,be.X)(E,[1,E.shape[0],E.shape[1],E.shape[2]]):E,b}const lr=(0,$.op)({batchNorm_:function Cn(E,b,_,D,O,L){null==L&&(L=.001);const W=(0,T._1)(E,"x","batchNorm"),K=(0,T._1)(b,"mean","batchNorm"),ae=(0,T._1)(_,"variance","batchNorm");let de,ke;null!=O&&(de=(0,T._1)(O,"scale","batchNorm")),null!=D&&(ke=(0,T._1)(D,"offset","batchNorm")),S.hu(K.rank===ae.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),S.hu(null==ke||K.rank===ke.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),S.hu(null==de||K.rank===de.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const lt={x:kn(W),scale:de,offset:ke,mean:K,variance:ae},Tt=H.BV.runKernel(q.sHE,lt,{varianceEpsilon:L});return(0,be.X)(Tt,W.shape)}}),nr=(0,$.op)({batchNorm2d_:function hi(E,b,_,D,O,L){const W=(0,T._1)(E,"x","batchNorm"),K=(0,T._1)(b,"mean","batchNorm"),ae=(0,T._1)(_,"variance","batchNorm");let de,ke;return null!=O&&(de=(0,T._1)(O,"scale","batchNorm")),null!=D&&(ke=(0,T._1)(D,"offset","batchNorm")),S.hu(2===W.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${W.rank}.`),S.hu(2===K.rank||1===K.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${K.rank}.`),S.hu(2===ae.rank||1===ae.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${ae.rank}.`),null!=de&&S.hu(2===de.rank||1===de.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${de.rank}.`),null!=ke&&S.hu(2===ke.rank||1===ke.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${ke.rank}.`),lr(W,K,ae,ke,de,L)}}),us=(0,$.op)({batchNorm3d_:function As(E,b,_,D,O,L){const W=(0,T._1)(E,"x","batchNorm"),K=(0,T._1)(b,"mean","batchNorm"),ae=(0,T._1)(_,"variance","batchNorm");let de,ke;return null!=O&&(de=(0,T._1)(O,"scale","batchNorm")),null!=D&&(ke=(0,T._1)(D,"offset","batchNorm")),S.hu(3===W.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${W.rank}.`),S.hu(3===K.rank||1===K.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${K.rank}.`),S.hu(3===ae.rank||1===ae.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${ae.rank}.`),null!=de&&S.hu(3===de.rank||1===de.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${de.rank}.`),null!=ke&&S.hu(3===ke.rank||1===ke.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${ke.rank}.`),lr(W,K,ae,ke,de,L)}}),To=(0,$.op)({batchNorm4d_:function ds(E,b,_,D,O,L){const W=(0,T._1)(E,"x","batchNorm"),K=(0,T._1)(b,"mean","batchNorm"),ae=(0,T._1)(_,"variance","batchNorm");let de,ke;return null!=O&&(de=(0,T._1)(O,"scale","batchNorm")),null!=D&&(ke=(0,T._1)(D,"offset","batchNorm")),S.hu(4===W.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${W.rank}.`),S.hu(4===K.rank||1===K.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${K.rank}.`),S.hu(4===ae.rank||1===ae.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${ae.rank}.`),null!=de&&S.hu(4===de.rank||1===de.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${de.rank}.`),null!=ke&&S.hu(4===ke.rank||1===ke.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${ke.rank}.`),lr(W,K,ae,ke,de,L)}}),Mo=(0,$.op)({bincount_:function Ns(E,b,_){const D=(0,T._1)(E,"x","bincount"),O=(0,T._1)(b,"weights","bincount");return S.hu("int32"===D.dtype,()=>`Error in bincount: input dtype must be int32, but got ${D.dtype}`),S.hu(_>=0,()=>`size must be non-negative, but got ${_}.`),S.hu(O.size===D.size||0===O.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${D.shape}, weights shape: ${O.shape}.`),H.BV.runKernel(q.zvY,{x:D,weights:O},{size:_})}}),Ys=(0,$.op)({bitwiseAnd_:function $r(E,b){const _=(0,T._1)(E,"x","bitwiseAnd"),D=(0,T._1)(b,"y","bitwiseAnd");if(!(0,S.cO)(_.shape,D.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${_.shape}, y: ${D.shape}`);if("int32"!==_.dtype||"int32"!==D.dtype)throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${_.dtype} and type of y: ${D.dtype}`);return H.BV.runKernel(q.hCO,{a:_,b:D})}}),Js=(0,$.op)({broadcastArgs_:function Qs(E,b){const _=(0,T._1)(E,"s0","broadcastArgs","int32"),D=(0,T._1)(b,"s1","broadcastArgs","int32");if(1!==_.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${_.rank}`);if(1!==D.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${D.rank}`);return H.BV.runKernel(q.eEB,{s0:_,s1:D})}}),hs=(0,$.op)({broadcastTo_:function Rs(E,b){let _=(0,T._1)(E,"broadcastTo","x");const D=_.shape;if((0,S.Mu)(b),b.length<_.rank)throw new Error(`broadcastTo(): shape.length=${b.length} < input.rank=${_.rank}.`);if(b.length>_.rank){const de=_.shape.slice();for(;de.length<b.length;)de.unshift(1);_=(0,be.X)(_,de)}const O=_.shape,L=Array.from(b);for(let de=b.length-1;de>=0;de--)if(O[de]===b[de])L[de]=1;else if(1!==_.shape[de])throw new Error(`broadcastTo(): [${D}] cannot be broadcast to [${b}].`);return 0===L.map((de,ke)=>de>1?ke:-1).filter(de=>de>=0).length?(0,Pe.d)(_):H.BV.runKernel(q.n9L,{x:_},{reps:L})}});var Ei=I(582);const fs=(0,$.op)({ceil_:function Ao(E){const _={x:(0,T._1)(E,"x","ceil","float32")};return H.BV.runKernel(q.gJX,_)}});var xe=I(2787);const nc=(0,$.op)({clipByValue_:function cl(E,b,_){const D=(0,T._1)(E,"x","clipByValue");return S.hu(b<=_,()=>`Error in clip: min (${b}) must be less than or equal to max (${_}).`),b===_?(0,xe.h)(D.shape,b,D.dtype):H.BV.runKernel(q.xnO,{x:D},{clipValueMin:b,clipValueMax:_})}});var ps=I(3037);const gr=(0,$.op)({concat1d_:function ul(E){return et(E,0)}}),ms=(0,$.op)({concat2d_:function eo(E,b){return et(E,b)}}),ea=(0,$.op)({concat3d_:function fi(E,b){return et(E,b)}}),xn=(0,$.op)({concat4d_:function Pt(E,b){return et(E,b)}}),rn=(0,$.op)({conv2d_:function Wr(E,b,_,D,O="NHWC",L=[1,1],W){const K=(0,T._1)(E,"x","conv2d","float32"),ae=(0,T._1)(b,"filter","conv2d","float32");let de=K,ke=!1;3===K.rank&&(ke=!0,de=(0,be.X)(K,[1,K.shape[0],K.shape[1],K.shape[2]])),S.hu(4===de.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${de.rank}.`),S.hu(4===ae.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${ae.rank}.`),Ie.m("conv2d",D,W);const $e="NHWC"===O?de.shape[3]:de.shape[1];S.hu($e===ae.shape[2],()=>`Error in conv2d: depth of input (${$e}) must match input depth for filter ${ae.shape[2]}.`),S.hu(Ie.jT(_,L),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${_} and dilations '${L}'`),S.hu(Ie.U3(L),()=>"Error in conv2D: Dilated rates should be larger than 0."),S.hu(Ie.U3(_),()=>"Error in conv2D: Strides should be larger than 0.");const Tt=H.BV.runKernel(q.mhS,{x:de,filter:ae},{strides:_,pad:D,dataFormat:O,dilations:L,dimRoundingMode:W});return ke?(0,be.X)(Tt,[Tt.shape[1],Tt.shape[2],Tt.shape[3]]):Tt}}),Si=(0,$.op)({conv1d_:function Ui(E,b,_,D,O="NWC",L=1,W){const K=(0,T._1)(E,"x","conv1d"),ae=(0,T._1)(b,"filter","conv1d");let de=K,ke=!1;2===K.rank&&(ke=!0,de=(0,be.X)(K,[1,K.shape[0],K.shape[1]])),S.hu(3===de.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${de.rank}.`),S.hu(3===ae.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${ae.rank}.`),Ie.m("conv1d",D,W),S.hu(de.shape[2]===ae.shape[1],()=>`Error in conv1d: depth of input (${de.shape[2]}) must match input depth for filter ${ae.shape[1]}.`),S.hu(Ie.jT(_,L),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${_} and dilation '${L}'`),S.hu(Ie.U3(L),()=>"Error in conv1D: Dilated rates should be larger than 0."),S.hu(Ie.U3(_),()=>"Error in conv1D: Stride should be larger than 0."),S.hu("NWC"===O,()=>`Error in conv1d: got dataFormat of ${O} but only NWC is currently supported.`);const $e=(0,be.X)(ae,[1,ae.shape[0],ae.shape[1],ae.shape[2]]),lt=(0,be.X)(de,[de.shape[0],1,de.shape[1],de.shape[2]]),Vt=rn(lt,$e,[1,_],D,"NHWC",[1,L],W);return(0,be.X)(Vt,ke?[Vt.shape[2],Vt.shape[3]]:[Vt.shape[0],Vt.shape[2],Vt.shape[3]])}}),pi=(0,$.op)({conv2DBackpropInput_:function Bn(E,b,_,D,O,L="NHWC",W){S.hu(E.length===b.rank,()=>`Length of inShape (${E.length}) and rank of dy (${b.rank}) must match`);let K=E,ae=b,de=!1;3===b.rank&&(de=!0,ae=(0,be.X)(b,[1,b.shape[0],b.shape[1],b.shape[2]]),K=[1,E[0],E[1],E[2]]),S.hu(4===K.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${K.length}.`),S.hu(4===ae.rank,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${ae.rank}`),S.hu(4===_.rank,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${_.rank}`);const ke="NHWC"===L?K[3]:K[1],$e="NHWC"===L?ae.shape[3]:ae.shape[1];S.hu(ke===_.shape[2],()=>`Error in conv2dDerInput: depth of input (${ke}) must match input depth for filter ${_.shape[2]}.`),S.hu($e===_.shape[3],()=>`Error in conv2dDerInput: depth of output (${$e}) must match output depth for filter ${_.shape[3]}.`),Ie.m("conv2dDerInput",O,W);const Tt=H.BV.runKernel(q.wm,{dy:ae,filter:_},{strides:D,pad:O,dataFormat:L,dimRoundingMode:W,inputShape:K});return de?(0,be.X)(Tt,[Tt.shape[1],Tt.shape[2],Tt.shape[3]]):Tt}}),dl=(0,$.op)({conv2dTranspose_:function ji(E,b,_,D,O,L){const W=(0,T._1)(E,"x","conv2dTranspose"),K=(0,T._1)(b,"filter","conv2dTranspose");return pi(_,W,K,D,O,"NHWC",L)}}),ta=(0,$.op)({conv3d_:function No(E,b,_,D,O="NDHWC",L=[1,1,1]){const W=(0,T._1)(E,"x","conv3d"),K=(0,T._1)(b,"filter","conv3d");let ae=W,de=!1;4===W.rank&&(de=!0,ae=(0,be.X)(W,[1,W.shape[0],W.shape[1],W.shape[2],W.shape[3]])),S.hu(5===ae.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${ae.rank}.`),S.hu(5===K.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${K.rank}.`),S.hu(ae.shape[4]===K.shape[3],()=>`Error in conv3d: depth of input (${ae.shape[4]}) must match input depth for filter ${K.shape[3]}.`),S.hu((0,Ie.jT)(_,L),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${_} and dilations '${L}'`),S.hu("NDHWC"===O,()=>`Error in conv3d: got dataFormat of ${O} but only NDHWC is currently supported.`),S.hu((0,Ie.U3)(L),()=>"Error in conv3D: Dilated rates should be larger than 0."),S.hu((0,Ie.U3)(_),()=>"Error in conv3D: Strides should be larger than 0.");const lt=H.BV.runKernel(q.x12,{x:ae,filter:K},{strides:_,pad:D,dataFormat:O,dilations:L});return de?(0,be.X)(lt,[lt.shape[1],lt.shape[2],lt.shape[3],lt.shape[4]]):lt}}),na=(0,$.op)({conv3DBackpropInput_:function ii(E,b,_,D,O){S.hu(E.length===b.rank,()=>`Length of inShape (${E.length}) and rank of dy (${b.rank}) must match`);let L=E,W=b,K=!1;4===b.rank&&(K=!0,W=(0,be.X)(b,[1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]]),L=[1,E[0],E[1],E[2],E[3]]);const ae=L[4],de=W.shape[4];S.hu(5===L.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${L.length}.`),S.hu(5===W.rank,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${W.rank}`),S.hu(5===_.rank,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${_.rank}`),S.hu(ae===_.shape[3],()=>`Error in conv3dDerInput: depth of input (${ae}) must match input depth for filter ${_.shape[3]}.`),S.hu(de===_.shape[4],()=>`Error in conv3dDerInput: depth of output (${de}) must match output depth for filter ${_.shape[4]}.`);const lt=H.BV.runKernel(q.ik2,{dy:W,filter:_},{pad:O,strides:D,inputShape:L});return K?(0,be.X)(lt,[lt.shape[1],lt.shape[2],lt.shape[3],lt.shape[4]]):lt}}),Ii=(0,$.op)({conv3dTranspose_:function Di(E,b,_,D,O){const L=(0,T._1)(E,"x","conv3dTranspose"),W=(0,T._1)(b,"filter","conv3dTranspose");return na(_,L,W,D,O)}}),gs=(0,$.op)({cos_:function er(E){const _={x:(0,T._1)(E,"x","cos","float32")};return H.BV.runKernel(q.mc4,_)}}),Aa=(0,$.op)({cosh_:function Lr(E){const _={x:(0,T._1)(E,"x","cosh","float32")};return H.BV.runKernel(q.TR1,_)}}),to=(0,$.op)({cumprod_:function ys(E,b=0,_=!1,D=!1){const L={x:(0,T._1)(E,"x","cumprod")};return H.BV.runKernel(q.Byc,L,{axis:b,exclusive:_,reverse:D})}}),ia=(0,$.op)({cumsum_:function ra(E,b=0,_=!1,D=!1){const L={x:(0,T._1)(E,"x","cumsum")};return H.BV.runKernel(q.iHb,L,{axis:b,exclusive:_,reverse:D})}}),no=(0,$.op)({denseBincount_:function _s(E,b,_,D=!1){const O=(0,T._1)(E,"x","denseBincount"),L=(0,T._1)(b,"weights","denseBincount");return S.hu("int32"===O.dtype,()=>`Error in denseBincount: input dtype must be int32, but got ${O.dtype}`),S.hu(O.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${O.rank}.`),S.hu(_>=0,()=>`size must be non-negative, but got ${_}.`),S.hu(L.size===O.size||0===L.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${O.shape}, weights shape: ${L.shape}.`),H.BV.runKernel(q.QRR,{x:O,weights:L},{size:_,binaryOutput:D})}}),ro=(0,$.op)({depthToSpace_:function Ro(E,b,_="NHWC"){const D=(0,T._1)(E,"x","depthToSpace","float32"),O="NHWC"===_?D.shape[1]:D.shape[2],L="NHWC"===_?D.shape[2]:D.shape[3],W="NHWC"===_?D.shape[3]:D.shape[1];return S.hu(b>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${b}`),S.hu(O*b>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${O} and ${b}  for depthToSpace with input shape\n    ${D.shape}`),S.hu(L*b>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${L} and ${b} for depthToSpace with input shape\n        ${D.shape}`),S.hu(W%(b*b)==0,()=>`Dimension size must be evenly divisible by ${b*b} but is ${W} for depthToSpace with input shape ${D.shape}`),H.BV.runKernel(q.T0n,{x:D},{blockSize:b,dataFormat:_})}}),ko=(0,$.op)({depthwiseConv2d_:function hl(E,b,_,D,O="NHWC",L=[1,1],W){const K=(0,T._1)(E,"x","depthwiseConv2d","float32"),ae=(0,T._1)(b,"filter","depthwiseConv2d","float32");let de=K,ke=!1;3===K.rank&&(ke=!0,de=(0,be.X)(K,[1,K.shape[0],K.shape[1],K.shape[2]])),S.hu(4===de.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${de.rank}.`),S.hu(4===ae.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${ae.rank}.`);const $e="NHWC"===O?de.shape[3]:de.shape[1];S.hu($e===ae.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${$e}) must match the inChannels dimension in filter ${ae.shape[2]}.`),Ie.m("depthwiseConv2d",D,W);const Tt=H.BV.runKernel(q.cie,{x:de,filter:ae},{strides:_,pad:D,dataFormat:O,dilations:L,dimRoundingMode:W});return ke?(0,be.X)(Tt,[Tt.shape[1],Tt.shape[2],Tt.shape[3]]):Tt}}),Na=(0,$.op)({diag_:function fl(E){const _={x:(0,T._1)(E,"x","diag")};return H.BV.runKernel(q.$w,_)}}),sa=(0,$.op)({dilation2d_:function Ra(E,b,_,D,O=[1,1],L="NHWC"){const W=(0,T._1)(E,"x","dilation2d"),K=(0,T._1)(b,"filter","dilation2d");S.hu(3===W.rank||4===W.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${W.rank}.`),S.hu(3===K.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${K.rank}.`),S.hu("NHWC"===L,()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${L}`);let ae=W,de=!1;3===W.rank&&(ae=(0,be.X)(W,[1,W.shape[0],W.shape[1],W.shape[2]]),de=!0),S.hu(ae.shape[3]===K.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${ae.shape[3]} vs ${K.shape[2]}`);const lt=H.BV.runKernel(q.p4S,{x:ae,filter:K},{strides:_,pad:D,dilations:O});return de?(0,be.X)(lt,[lt.shape[1],lt.shape[2],lt.shape[3]]):lt}});var cr=I(3530),dn=I(3239);const gn=(0,$.op)({equal_:function Oo(E,b){let _=(0,T._1)(E,"a","equal","string_or_numeric"),D=(0,T._1)(b,"b","equal","string_or_numeric");return[_,D]=(0,Ae.makeTypesMatch)(_,D),(0,dn.assertAndGetBroadcastShape)(_.shape,D.shape),H.BV.runKernel(q.hdR,{a:_,b:D})}}),Br=(0,$.op)({where_:function Bt(E,b,_){const D=(0,T._1)(b,"a","where"),O=(0,T._1)(_,"b","where"),L=(0,T._1)(E,"condition","where","bool"),W=(0,dn.assertAndGetBroadcastShape)((0,dn.assertAndGetBroadcastShape)(L.shape,D.shape),O.shape),K=hs(L,W),ae=hs(D,W),de=hs(O,W);return H.BV.runKernel(q.PhF,{condition:K,t:ae,e:de})}});var io=I(3143);const so=(0,$.op)({divNoNan_:function Nr(E,b){let _=(0,T._1)(E,"a","div"),D=(0,T._1)(b,"b","div");[_,D]=(0,Ae.makeTypesMatch)(_,D);const O=(0,cr.h)(_,D),L=(0,io.P)(O),W=gn(D,L);return Br(W,L,O)}}),En=(0,$.op)({dot_:function ka(E,b){const _=(0,T._1)(E,"t1","dot"),D=(0,T._1)(b,"t2","dot");S.hu(!(1!==_.rank&&2!==_.rank||1!==D.rank&&2!==D.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${_.rank} and ${D.rank}.`);const O=1===_.rank?_.size:_.shape[1],L=1===D.rank?D.size:D.shape[0];if(S.hu(O===L,()=>`Error in dot: inner dimensions of inputs must match, but got ${O} and ${L}.`),1===_.rank&&1===D.rank){const W=(0,be.X)(_,[1,-1]),K=(0,be.X)(D,[-1,1]),ae=(0,mt.O)(W,K);return(0,be.X)(ae,[])}if(1===_.rank&&2===D.rank){const W=(0,be.X)(_,[1,-1]),K=(0,be.X)(D,[D.shape[0],D.shape[1]]),ae=(0,mt.O)(W,K);return(0,be.X)(ae,[ae.size])}if(2===_.rank&&1===D.rank){const W=(0,be.X)(D,[-1,1]),K=(0,mt.O)(_,W);return(0,be.X)(K,[K.size])}{const W=(0,be.X)(D,[D.shape[0],D.shape[1]]);return(0,mt.O)(_,W)}}}),An=(0,$.op)({einsum_:function Hi(E,...b){const _=b.map((O,L)=>(0,T._1)(O,`tensors${L}`,"einsum"));return H.BV.runKernel(q.$g6,_,{equation:E})}});var oo=I(9529);const Sn=(0,$.op)({ensureShape_:function Oa(E,b){const _=(0,T._1)(E,"x","ensureShape","string_or_numeric");if(!(0,S.DK)(_.shape,b))throw new Error(`EnsureShape: Shape of tensor ${_.shape} is not compatible with expected shape ${b}`);return E}}),ks=(0,$.op)({erf_:function jt(E){let b=(0,T._1)(E,"x","erf");return S.hu("int32"===b.dtype||"float32"===b.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===b.dtype&&(b=(0,Te.p)(b,"float32")),H.BV.runKernel(q.Omj,{x:b})}});var Wi=I(929);const Gi=(0,$.op)({max_:function oa(E,b=null,_=!1){const O={x:(0,T._1)(E,"x","max")};return H.BV.runKernel(q.YoZ,O,{reductionIndices:b,keepDims:_})}}),Rr=(0,$.op)({min_:function je(E,b=null,_=!1){const O={x:(0,T._1)(E,"x","min")};return H.BV.runKernel(q.c17,O,{axis:b,keepDims:_})}});var Kt=I(2962),Ht=I(8661),Ki=I(930),Po=I(7527),On=I(9929);function wr(E,b,_=null){if(0===E.rank)return(0,ye.W)(E);if(1!==E.rank&&null===_)return wr((0,be.X)(E,[-1]),b,_);if(1===E.rank||"number"==typeof _||Array.isArray(_)&&1===_.length){if(1===b)return(0,On.S)((0,ye.W)(E),_);if(b===1/0)return Gi((0,ye.W)(E),_);if(b===-1/0)return Rr((0,ye.W)(E),_);if("euclidean"===b||2===b)return(0,Ki._)((0,On.S)((0,Kt.s)((0,ye.W)(E),(0,Ht.i)(2,"int32")),_));throw new Error(`Error in norm: invalid ord value: ${b}`)}if(Array.isArray(_)&&2===_.length){if(1===b)return Gi((0,On.S)((0,ye.W)(E),_[0]),_[1]-1);if(b===1/0)return Gi((0,On.S)((0,ye.W)(E),_[1]),_[0]);if(b===-1/0)return Rr((0,On.S)((0,ye.W)(E),_[1]),_[0]);if("fro"===b||"euclidean"===b)return(0,Ki._)((0,On.S)((0,Po.h)(E),_));throw new Error(`Error in norm: invalid ord value: ${b}`)}throw new Error(`Error in norm: invalid axis: ${_}`)}const bs=(0,$.op)({norm_:function Ti(E,b="euclidean",_=null,D=!1){const O=wr(E=(0,T._1)(E,"x","norm"),b,_);let L=O.shape;if(D){const W=(0,S.EC)(_,E.shape);L=Wi.rv(O.shape,W)}return(0,be.X)(O,L)}}),la=(0,$.op)({euclideanNorm_:function aa(E,b=null,_=!1){return bs(E,"euclidean",b,_)}}),vs=(0,$.op)({exp_:function Xi(E){const _={x:(0,T._1)(E,"x","exp")};return H.BV.runKernel(q.NEP,_)}}),f=(0,$.op)({expandDims_:function Fo(E,b=0){const _=(0,T._1)(E,"x","expandDims","string_or_numeric");return S.hu(b<=_.rank,()=>"Axis must be <= rank of the tensor"),H.BV.runKernel(q.YFo,{input:_},{dim:b})}}),p=(0,$.op)({expm1_:function d(E){const _={x:(0,T._1)(E,"x","expm1")};return H.BV.runKernel(q.Y0y,_)}}),z=(0,$.op)({tile_:function w(E,b){const _=(0,T._1)(E,"x","tile","string_or_numeric");return S.hu(_.rank===b.length,()=>`Error in transpose: rank of input ${_.rank} must match length of reps ${b}.`),H.BV.runKernel(q.n9L,{x:_},{reps:b})}}),J=(0,$.op)({eye_:function U(E,b,_,D="float32"){null==b&&(b=E);const O=(0,Ei.f)([E,b],D),L=E<=b?E:b;for(let K=0;K<L;++K)O.set(1,K,K);const W=(0,be.X)(O.toTensor(),[E,b]);if(null==_)return W;if(1===_.length)return z(f(W,0),[_[0],1,1]);if(2===_.length)return z(f(f(W,0),0),[_[0],_[1],1,1]);if(3===_.length)return z(f(f(f(W,0),0),0),[_[0],_[1],_[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${_.length}D.`)}}),Ee=(0,$.op)({floor_:function X(E){const _={x:(0,T._1)(E,"x","floor","float32")};return H.BV.runKernel(q.OR,_)}});var rt=I(1030);const Fe=(0,$.op)({gather_:function nt(E,b,_=0,D=0){const O=(0,T._1)(E,"x","gather"),L=(0,T._1)(b,"indices","gather","int32");return H.BV.runKernel(q.qi_,{x:O,indices:L},{axis:_,batchDims:D})}}),yt=(0,$.op)({greater_:function bt(E,b){let _=(0,T._1)(E,"a","greater","string_or_numeric"),D=(0,T._1)(b,"b","greater","string_or_numeric");return[_,D]=(0,Ae.makeTypesMatch)(_,D),(0,dn.assertAndGetBroadcastShape)(_.shape,D.shape),H.BV.runKernel(q.iZT,{a:_,b:D})}}),Jt=(0,$.op)({greaterEqual_:function qt(E,b){let _=(0,T._1)(E,"a","greaterEqual","string_or_numeric"),D=(0,T._1)(b,"b","greaterEqual","string_or_numeric");return[_,D]=(0,Ae.makeTypesMatch)(_,D),(0,dn.assertAndGetBroadcastShape)(_.shape,D.shape),H.BV.runKernel(q.Acj,{a:_,b:D})}});var Nt=I(1844);const Kn=(0,$.op)({isFinite_:function sn(E){const _={x:(0,T._1)(E,"x","isFinite")};return H.BV.runKernel(q.avt,_)}}),Vr=(0,$.op)({isInf_:function Cr(E){const _={x:(0,T._1)(E,"x","isInf")};return H.BV.runKernel(q.iWB,_)}}),ao=(0,$.op)({isNaN_:function Nn(E){const _={x:(0,T._1)(E,"x","isNaN")};return H.BV.runKernel(q.r7n,_)}});var on=I(9424);const $o=(0,$.op)({less_:function lo(E,b){let _=(0,T._1)(E,"a","less","string_or_numeric"),D=(0,T._1)(b,"b","less","string_or_numeric");return[_,D]=(0,Ae.makeTypesMatch)(_,D),(0,dn.assertAndGetBroadcastShape)(_.shape,D.shape),H.BV.runKernel(q.vtC,{a:_,b:D})}}),Pa=(0,$.op)({lessEqual_:function Gr(E,b){let _=(0,T._1)(E,"a","lessEqual","string_or_numeric"),D=(0,T._1)(b,"b","lessEqual","string_or_numeric");return[_,D]=(0,Ae.makeTypesMatch)(_,D),(0,dn.assertAndGetBroadcastShape)(_.shape,D.shape),H.BV.runKernel(q.CAk,{a:_,b:D})}});function _p(E,b,_){if(_<=0)throw new Error("The number of values should be positive.");return H.BV.runKernel(q.e7N,{},{start:E,stop:b,num:_})}const zd=(0,$.op)({localResponseNormalization_:function Vn(E,b=5,_=1,D=1,O=.5){const L=(0,T._1)(E,"x","localResponseNormalization");S.hu(4===L.rank||3===L.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${L.rank}.`),S.hu(S.GN(b),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${b}.`);let W=L,K=!1;3===L.rank&&(K=!0,W=(0,be.X)(L,[1,L.shape[0],L.shape[1],L.shape[2]]));const ke=H.BV.runKernel(q.eZ0,{x:W},{depthRadius:b,bias:_,alpha:D,beta:O});return K?(0,be.X)(ke,[ke.shape[1],ke.shape[2],ke.shape[3]]):ke}}),ot=(0,$.op)({log_:function Ud(E){const _={x:(0,T._1)(E,"x","log","float32")};return H.BV.runKernel(q.ZbH,_)}}),ml=(0,$.op)({log1p_:function pl(E){const _={x:(0,T._1)(E,"x","log1p")};return H.BV.runKernel(q.kU,_)}});var xs=I(3537),qi=I(5048);const gl=(0,$.op)({softplus_:function jd(E){const _={x:(0,T._1)(E,"x","softplus")};return H.BV.runKernel(q.MRv,_)}}),bp=(0,$.op)({logSigmoid_:function Hd(E){const b=(0,T._1)(E,"x","logSigmoid");return(0,xs.cb)(D=>({value:(0,qi.W)(gl((0,qi.W)(D))),gradFunc:W=>(0,qe.d)(W,(0,At.X)((0,qi.W)(D)))}))(b)}});var an=I(1191);const Wd=(0,$.op)({logSoftmax_:function vp(E,b=-1){const _=(0,T._1)(E,"logits","logSoftmax");if(-1===b&&(b=_.rank-1),b!==_.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${_.rank} and axis was ${b}`);return(0,xs.cb)((O,L)=>{const K=Gi(O,b,!0),ae=(0,an.l)(O,K),de=(0,an.l)((0,Te.p)(ae,"float32"),ot((0,On.S)(vs(ae),b,!0)));return L([de]),{value:de,gradFunc:($e,lt)=>{const[wt]=lt,nn=vs(wt);return(0,an.l)($e,(0,qe.d)((0,On.S)($e,b,!0),nn))}}})(_)}}),ca=(0,$.op)({logSumExp_:function Fa(E,b=null,_=!1){const D=(0,T._1)(E,"x","logSumExp"),O=(0,S.EC)(b,D.shape),L=Gi(D,O,!0),W=(0,an.l)(D,L),K=vs(W),ae=(0,On.S)(K,O),de=ot(ae),ke=(0,Y.I)((0,be.X)(L,de.shape),de);if(_){const $e=(0,Wi.rv)(ke.shape,O);return(0,be.X)(ke,$e)}return ke}}),yl=(0,$.op)({logicalAnd_:function ua(E,b){const _=(0,T._1)(E,"a","logicalAnd","bool"),D=(0,T._1)(b,"b","logicalAnd","bool");return(0,dn.assertAndGetBroadcastShape)(_.shape,D.shape),H.BV.runKernel(q.PYm,{a:_,b:D})}}),Yc=(0,$.op)({logicalNot_:function Gd(E){const _={x:(0,T._1)(E,"x","logicalNot","bool")};return H.BV.runKernel(q.VfG,_)}}),Lo=(0,$.op)({logicalOr_:function _l(E,b){const _=(0,T._1)(E,"a","logicalOr","bool"),D=(0,T._1)(b,"b","logicalOr","bool");return(0,dn.assertAndGetBroadcastShape)(_.shape,D.shape),H.BV.runKernel(q.MZg,{a:_,b:D})}}),Os=(0,$.op)({logicalXor_:function Kd(E,b){const _=(0,T._1)(E,"a","logicalXor","bool"),D=(0,T._1)(b,"b","logicalXor","bool");return(0,dn.assertAndGetBroadcastShape)(_.shape,D.shape),yl(Lo(E,b),Yc(yl(E,b)))}}),bl=2147483648,da=(0,$.op)({searchSorted_:function We(E,b,_="left"){const D=(0,T._1)(E,"sortedSequence","searchSorted"),O=(0,T._1)(b,"values","searchSorted"),W=O.shape[O.shape.length-1],K=(0,be.X)(D,[-1,D.shape[D.shape.length-1]]),ae=(0,be.X)(O,[-1,W]);if(K.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(K.shape[0]!==ae.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if((0,S.NA)(ae.shape)>=bl)throw new Error(`values tensor size must less than ${bl}`);if(K.shape[1]>=bl)throw new Error(`trailing dim_size must less than ${bl} for int32 output type, was ${K.shape[1]}`);return H.BV.runKernel(q.nr8,{sortedSequence:K,values:ae},{side:_})}});function ft(E,b){return da(E,b,"left")}const Bo=(0,$.op)({maxPool_:function $a(E,b,_,D,O){const L=(0,T._1)(E,"x","maxPool");let K=L,ae=!1;3===L.rank&&(ae=!0,K=(0,be.X)(L,[1,L.shape[0],L.shape[1],L.shape[2]])),S.hu(4===K.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${K.rank}.`),S.hu(Ie.jT(_,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${_} and dilations '1'`),Ie.m("maxPool",D,O);const $e=H.BV.runKernel(q.mTV,{x:K},{filterSize:b,strides:_,pad:D,dimRoundingMode:O});return ae?(0,be.X)($e,[$e.shape[1],$e.shape[2],$e.shape[3]]):$e}}),Xd=(0,$.op)({maxPool3d_:function we(E,b=[1,1,1],_,D,O,L="NDHWC"){const W=(0,T._1)(E,"x","maxPool3d");let K=W,ae=!1;4===W.rank&&(ae=!0,K=(0,be.X)(W,[1,W.shape[0],W.shape[1],W.shape[2],W.shape[3]])),S.hu(5===K.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${K.rank}.`),S.hu("NDHWC"===L,()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${L}`),(0,Ie.m)("maxPool3d",D,O);const $e=H.BV.runKernel(q.OAf,{x:K},{filterSize:b,strides:_,pad:D,dimRoundingMode:O,dataFormat:L});return ae?(0,be.X)($e,[$e.shape[1],$e.shape[2],$e.shape[3],$e.shape[4]]):$e}}),Zd=(0,$.op)({maxPoolWithArgmax_:function qd(E,b,_,D,O=!1){const W={x:(0,T._1)(E,"x","maxPoolWithArgmax")},ae=H.BV.runKernel(q.vFR,W,{filterSize:b,strides:_,pad:D,includeBatchInIndex:O});return{result:ae[0],indexes:ae[1]}}});var Ps=I(765);const Kr=(0,$.op)({mean_:function Zi(E,b=null,_=!1){const O={x:(0,T._1)(E,"x","mean")};return H.BV.runKernel(q.q2K,O,{axis:b,keepDims:_})}});function Xr(E,b="float32"){if((0,S.Mu)(E),"complex64"===b){const D=Xr(E,"float32"),O=Xr(E,"float32");return(0,ps.P)(D,O)}const _=(0,S.wT)((0,S.NA)(E),b);return H.BV.makeTensor(_,E,b)}function Zt(E,b="float32"){if((0,S.Mu)(E),"complex64"===b){const D=Zt(E,"float32"),O=Xr(E,"float32");return(0,ps.P)(D,O)}const _=(0,S.p8)((0,S.NA)(E),b);return H.BV.makeTensor(_,E,b)}var Yi=I(4945);function Qi(E,b,{indexing:_="xy"}={}){if("xy"!==_&&"ij"!==_)throw new TypeError(`${_} is not a valid third argument to meshgrid`);if(void 0===E)return[];let D=(0,T._1)(E,"x","meshgrid",E instanceof Yi.es?E.dtype:"float32");if(void 0===b)return[D];let O=(0,T._1)(b,"y","meshgrid",b instanceof Yi.es?b.dtype:"float32");const L=(0,S.NA)(D.shape),W=(0,S.NA)(O.shape);return"xy"===_?(D=(0,be.X)(D,[1,-1]),O=(0,be.X)(O,[-1,1]),[(0,mt.O)(Zt([W,1],D.dtype),D),(0,mt.O)(O,Zt([1,L],O.dtype))]):(D=(0,be.X)(D,[-1,1]),O=(0,be.X)(O,[1,-1]),[(0,mt.O)(D,Zt([1,W],D.dtype)),(0,mt.O)(Zt([L,1],O.dtype),O)])}const La=(0,$.op)({minimum_:function rc(E,b){let _=(0,T._1)(E,"a","minimum"),D=(0,T._1)(b,"b","minimum");return[_,D]=(0,Ae.makeTypesMatch)(_,D),"bool"===_.dtype&&(_=(0,Te.p)(_,"int32"),D=(0,Te.p)(D,"int32")),(0,dn.assertAndGetBroadcastShape)(_.shape,D.shape),H.BV.runKernel(q.q8u,{a:_,b:D})}}),Ba=(0,$.op)({mirrorPad_:function Fs(E,b,_){S.hu("reflect"===_||"symmetric"===_,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${_}.`);const D=(0,T._1)(E,"x","mirrorPad");if(0===D.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");S.hu(b.length===D.rank,()=>`Padding doesn't match input. Must be ${D.rank}. Got ${b.length}.`);const O="reflect"===_?1:0;for(let K=0;K<D.rank;K++)S.hu(2===b[K].length,()=>"Invalid number of paddings. Must be length of 2 each."),S.hu(b[K][0]>=0&&b[K][0]<=D.shape[K]-O&&b[K][1]>=0&&b[K][1]<=D.shape[K]-O,()=>`Padding in dimension ${K} cannot be greater than or equal to ${D.shape[K]-O} or less than 0 for input of shape ${D.shape}`);return H.BV.runKernel(q.jQs,{x:D},{paddings:b,mode:_})}}),Qc=(0,$.op)({mod_:function vl(E,b){let _=(0,T._1)(E,"a","mod"),D=(0,T._1)(b,"b","mod");return[_,D]=(0,Ae.makeTypesMatch)(_,D),H.BV.runKernel(q.Vbg,{a:_,b:D})}}),Jc=(0,$.op)({moments_:function ic(E,b=null,_=!1){E=(0,T._1)(E,"x","moments");const D=(0,S.EC)(b,E.shape),O=Kr(E,D,_);let L=O.shape;_||(L=(0,Wi.rv)(O.shape,D));const W=(0,Po.h)((0,an.l)((0,Te.p)(E,"float32"),(0,be.X)(O,L)));return{mean:O,variance:Kr(W,D,_)}}}),Va=(0,$.op)({multiRNNCell_:function eu(E,b,_,D){const O=(0,T._1)(b,"data","multiRNNCell"),L=(0,T.sI)(_,"c","multiRNNCell"),W=(0,T.sI)(D,"h","multiRNNCell");let K=O;const ae=[];for(let $e=0;$e<E.length;$e++){const lt=E[$e](K,L[$e],W[$e]);ae.push(lt[0]),ae.push(lt[1]),K=lt[1]}const de=[],ke=[];for(let $e=0;$e<ae.length;$e+=2)de.push(ae[$e]),ke.push(ae[$e+1]);return[de,ke]}}),nu=(0,$.op)({multinomial_:function tu(E,b,_,D=!1){const O=(0,T._1)(E,"logits","multinomial"),L=O.size,W=O.rank;if(L<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${L}.`);if(W>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${W}`);_=_||Math.random();const ae={logits:1===W?(0,be.X)(O,[1,-1]):O},ke=H.BV.runKernel(q.NZg,ae,{numSamples:b,seed:_,normalized:D});return 1===W?(0,be.X)(ke,[ke.size]):ke}}),sc=(0,$.op)({notEqual_:function Yd(E,b){let _=(0,T._1)(E,"a","notEqual","string_or_numeric"),D=(0,T._1)(b,"b","notEqual","string_or_numeric");return[_,D]=(0,Ae.makeTypesMatch)(_,D),(0,dn.assertAndGetBroadcastShape)(_.shape,D.shape),H.BV.runKernel(q.yQU,{a:_,b:D})}});var Qd=I(5618);const Ji=(0,$.op)({onesLike_:function Jd(E){const _={x:(0,T._1)(E,"x","onesLike")};return H.BV.runKernel(q.qWM,_)}}),ru=(0,$.op)({outerProduct_:function eh(E,b){const _=(0,T._1)(E,"v1","outerProduct"),D=(0,T._1)(b,"v2","outerProduct");S.hu(1===_.rank&&1===D.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${_.rank} and ${D.rank}.`);const O=(0,be.X)(_,[-1,1]),L=(0,be.X)(D,[1,-1]);return(0,mt.O)(O,L)}}),ha=(0,$.op)({pad_:function th(E,b,_=0){const D=(0,T._1)(E,"x","pad");if(0===D.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return H.BV.runKernel(q.lyA,{x:D},{paddings:b,constantValue:_})}}),rh=(0,$.op)({pad1d_:function nh(E,b,_=0){return(0,S.hu)(2===b.length,()=>"Invalid number of paddings. Must be length of 2."),ha(E,[b],_)}}),ih=(0,$.op)({pad2d_:function iu(E,b,_=0){return(0,S.hu)(2===b.length&&2===b[0].length&&2===b[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),ha(E,b,_)}}),oh=(0,$.op)({pad3d_:function sh(E,b,_=0){return(0,S.hu)(3===b.length&&2===b[0].length&&2===b[1].length&&2===b[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),ha(E,b,_)}}),ah=(0,$.op)({pad4d_:function rr(E,b,_=0){return(0,S.hu)(4===b.length&&2===b[0].length&&2===b[1].length&&2===b[2].length&&2===b[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),ha(E,b,_)}}),su=(0,$.op)({spaceToBatchND_:function oc(E,b,_){const D=(0,T._1)(E,"x","spaceToBatchND");return S.hu(D.rank>=1+b.length,()=>`input rank ${D.rank} should be > than [blockShape] ${b.length}`),S.hu(_.length===b.length,()=>`paddings.shape[0] ${_.length} must be equal to [blockShape] ${b.length}`),S.hu(D.shape.reduce((W,K,ae)=>ae>0&&ae<=b.length?W&&(K+_[ae-1][0]+_[ae-1][1])%b[ae-1]==0:W,!0),()=>`input spatial dimensions ${D.shape.slice(1)} with paddings ${_.toString()} must be divisible by blockShapes ${b.toString()}`),H.BV.runKernel(q.TQc,{x:D},{blockShape:b,paddings:_})}}),Rt=(0,$.op)({pool_:function Tn(E,b,_,D,O,L,W){null==O&&(O=[1,1]),null==L&&(L=1),0===D&&(D="valid");const K=(0,T._1)(E,"x","maxPool");let ae=K,de=!1;3===K.rank&&(de=!0,ae=(0,be.X)(K,[1,K.shape[0],K.shape[1],K.shape[2]])),S.hu(Ie.jT(L,O),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${L} and dilations '${O}'`);const ke=Ie.Xw(ae.shape,b,L,O,D),$e=[ke.dilationHeight,ke.dilationWidth];let lt;lt="same"===D?function au(E,b){const D=E.map((W,K)=>W+(W-1)*(b[K]-1)).map(W=>W-1),O=D.map(W=>Math.floor(W/2)),L=D.map((W,K)=>W-O[K]);return D.map((W,K)=>[O[K],L[K]])}([ke.filterHeight,ke.filterWidth],$e):[[0,0],[0,0]];const wt=1===$e[0]&&1===$e[1],[Tt,nn]=function ou(E,b,_){const D=_.map(ke=>ke[0]),O=_.map(ke=>ke[1]),L=E.concat(D,O),W=b.map((ke,$e)=>(ke-L[$e]%ke)%ke),K=O.map((ke,$e)=>ke+W[$e]),ae=b.map((ke,$e)=>[D[$e],K[$e]]),de=b.map((ke,$e)=>[0,W[$e]]);return[ae,de]}([ke.inHeight,ke.inWidth],$e,lt),Vt=wt?D:"valid",fn=wt?ae:su(ae,$e,Tt),Or=("avg"===_?()=>Ce(fn,b,L,Vt,W):()=>Bo(fn,b,L,Vt,W))(),xr=wt?Or:un(Or,$e,nn);return de?(0,be.X)(xr,[xr.shape[1],xr.shape[2],xr.shape[3]]):xr}});var si=I(1584),bn=I(3006);const qr=(0,$.op)({prod_:function kr(E,b=null,_=!1){let D=(0,T._1)(E,"x","prod");return"bool"===D.dtype&&(D=(0,Te.p)(D,"int32")),H.BV.runKernel(q.DlI,{x:D},{axis:b,keepDims:_})}}),mi=(0,$.op)({raggedGather_:function fa(E,b,_,D){const O=E.map((ke,$e)=>(0,T._1)(ke,`tensors${$e}`,"raggedGather","int32")),L=(0,T._1)(b,"paramsDenseValues","raggedGather"),W=(0,T._1)(_,"indices","raggedGather","int32"),de=H.BV.runKernel(q.dDz,{paramsNestedSplits:O,paramsDenseValues:L,indices:W},{outputRaggedRank:D});return{outputNestedSplits:de.slice(0,de.length-1),outputDenseValues:de[de.length-1]}}}),cu=(0,$.op)({raggedRange_:function lu(E,b,_){const D=(0,T._1)(E,"starts","raggedRange"),O=(0,T._1)(b,"limits","raggedRange",D.dtype),L=(0,T._1)(_,"deltas","raggedRange",D.dtype),K=H.BV.runKernel(q.CQl,{starts:D,limits:O,deltas:L});return{rtNestedSplits:K[0],rtDenseValues:K[1]}}}),lh=(0,$.op)({raggedTensorToTensor_:function xl(E,b,_,D,O){const L=(0,T._1)(E,"shape","raggedTensorToTensor","int32"),W=(0,T._1)(b,"values","raggedTensorToTensor"),K=(0,T._1)(_,"defaultValue","raggedTensorToTensor",W.dtype),ae=D.map(($e,lt)=>(0,T._1)($e,`tensors${lt}`,"raggedTensorToTensor","int32"));return H.BV.runKernel(q.BiW,{shape:L,values:W,defaultValue:K,rowPartitionTensors:ae},{rowPartitionTypes:O})}}),ir=(0,$.op)({rand_:function ch(E,b,_){(0,S.Mu)(E);const D=(0,S.NA)(E);let O=null;if(null==_||"float32"===_)O=new Float32Array(D);else if("int32"===_)O=new Int32Array(D);else{if("bool"!==_)throw new Error(`Unknown data type ${_}`);O=new Uint8Array(D)}for(let L=0;L<D;L++)O[L]=b();return H.BV.makeTensor(O,E,_)}});var St=I(9128);class en{constructor(b,_,D,O,L){this.mean=b,this.stdDev=_,this.dtype=D,this.nextVal=NaN,this.truncated=O,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const W=L||Math.random();this.random=St.alea(W.toString())}nextValue(){if(!isNaN(this.nextVal)){const O=this.nextVal;return this.nextVal=NaN,O}let b,_,D=!1;for(;!D;){let O,L,W;do{O=2*this.random()-1,L=2*this.random()-1,W=O*O+L*L}while(W>=1||0===W);const K=Math.sqrt(-2*Math.log(W)/W);b=this.mean+this.stdDev*O*K,_=this.mean+this.stdDev*L*K,(!this.truncated||this.isValidTruncated(b))&&(D=!0)}return(!this.truncated||this.isValidTruncated(_))&&(this.nextVal=this.convertValue(_)),this.convertValue(b)}convertValue(b){return null==this.dtype||"float32"===this.dtype?b:Math.round(b)}isValidTruncated(b){return b<=this.upper&&b>=this.lower}}class Zn{constructor(b,_,D,O){this.alpha=b,this.beta=1/_,this.dtype=D;const L=O||Math.random();this.randu=St.alea(L.toString()),this.randn=new en(0,1,D,!1,this.randu()),this.d=b<1?b+2/3:b-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let b,_,D,O,L,W;for(;;){do{O=this.randn.nextValue(),W=1+this.c*O}while(W<=0);if(W*=W*W,b=O*O,_=1-.331*b*b,D=.5*b+this.d*(1-W+Math.log(W)),L=this.randu(),L<_||Math.log(L)<D)break}return W*=1/this.beta*this.d,this.alpha<1&&(W*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(W)}convertValue(b){return"float32"===this.dtype?b:Math.round(b)}}class es{constructor(b=0,_=1,D,O){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=b,this.range=_-b,this.dtype=D,null==O&&(O=Math.random()),"number"==typeof O&&(O=O.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${b} - ${_} <= 1 and dtype is not float`);this.random=St.alea(O)}convertValue(b){return this.canReturnFloat()?b:Math.round(b)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const za=(0,$.op)({randomGamma_:function Yt(E,b,_=1,D="float32",O){if((0,S.Mu)(E),null==_&&(_=1),null==D&&(D="float32"),"float32"!==D&&"int32"!==D)throw new Error(`Unsupported data type ${D}`);const L=new Zn(b,_,D,O),W=(0,Ei.f)(E,D);for(let K=0;K<W.values.length;K++)W.values[K]=L.nextValue();return W.toTensor()}}),R=(0,$.op)({randomNormal_:function ac(E,b=0,_=1,D,O){if((0,S.Mu)(E),null!=D&&"bool"===D)throw new Error(`Unsupported data type ${D}`);const L=new en(b,_,D,!1,O),W=(0,Ei.f)(E,D);for(let K=0;K<W.values.length;K++)W.values[K]=L.nextValue();return W.toTensor()}}),M=(0,$.op)({randomStandardNormal_:function x(E,b,_){if(null!=b&&"bool"===b)throw new Error(`Unsupported data type ${b}`);return R(E,0,1,b,_)}}),j=(0,$.op)({randomUniform_:function F(E,b=0,_=1,D="float32",O){(0,S.Mu)(E);const L=(0,Ei.f)(E,D),W=new es(b,_,null,O);for(let K=0;K<L.values.length;K++)L.values[K]=W.nextValue();return L.toTensor()}}),me=(0,$.op)({randomUniformInt_:function oe(E,b,_,D){return j(E,b,_,"int32",D)}});function Me(E,b,_=1,D="float32"){if(0===_)throw new Error("Cannot have a step of zero");return H.BV.runKernel(q.e6w,{},{start:E,stop:b,step:_,dtype:D})}var Ue=I(6027);const xt=(0,$.op)({reciprocal_:function Ge(E){const _={x:(0,T._1)(E,"x","reciprocal")};return H.BV.runKernel(q.$HU,_)}});var He=I(8586),at=I(4917);const Wt=(0,$.op)({reverse_:function Ot(E,b){const D={x:(0,T._1)(E,"x","reverse")};return H.BV.runKernel(q.mKl,D,{dims:b})}}),Rn=(0,$.op)({reverse1d_:function ln(E){const b=(0,T._1)(E,"x","reverse");return S.hu(1===b.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${b.rank}.`),Wt(b,0)}}),ts=(0,$.op)({reverse2d_:function vr(E,b){const _=(0,T._1)(E,"x","reverse");return S.hu(2===_.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${_.rank}.`),Wt(_,b)}}),Yr=(0,$.op)({reverse3d_:function It(E,b){const _=(0,T._1)(E,"x","reverse");return S.hu(3===_.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${_.rank}.`),Wt(_,b)}}),Er=(0,$.op)({reverse4d_:function Pn(E,b){const _=(0,T._1)(E,"x","reverse");return S.hu(4===_.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${_.rank}.`),Wt(_,b)}}),ws=(0,$.op)({round_:function Cl(E){const _={x:(0,T._1)(E,"x","round")};return H.BV.runKernel(q.e07,_)}}),oi=(0,$.op)({rsqrt_:function ns(E){const _={x:(0,T._1)(E,"x","rsqrt","float32")};return H.BV.runKernel(q.bV0,_)}}),lc=(0,$.op)({selu_:function ho(E){const _={x:(0,T._1)(E,"x","selu")};return H.BV.runKernel(q.oFR,_)}}),Qw=(0,$.op)({separableConv2d_:function m_(E,b,_,D,O,L=[1,1],W="NHWC"){const K=(0,T._1)(E,"x","separableConv2d"),ae=(0,T._1)(b,"depthwiseFilter","separableConv2d"),de=(0,T._1)(_,"pointwiseFilter","separableConv2d");let ke=K,$e=!1;if(3===K.rank&&($e=!0,ke=(0,be.X)(K,[1,K.shape[0],K.shape[1],K.shape[2]])),"NCHW"===W)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");S.hu(4===ke.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${ke.rank}.`),S.hu(4===ae.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${ae.rank}.`),S.hu(4===de.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${ae.rank}.`),S.hu(1===de.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${de.shape[0]}.`),S.hu(1===de.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${de.shape[1]}.`);const lt=ae.shape[2],wt=ae.shape[3];S.hu(de.shape[2]===lt*wt,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${lt*wt}, but got ${de.shape[2]}.`);const Tt=ko(ke,ae,D,O,W,L),Vt=rn(Tt,de,1,"valid",W);return $e?(0,be.X)(Vt,[Vt.shape[1],Vt.shape[2],Vt.shape[3]]):Vt}});var Ua=I(5861);function xp(){return(xp=(0,Ua.Z)(function*(E,b){const _=(0,T._1)(E,"x","setdiff1d"),D=(0,T._1)(b,"y","setdiff1d");S.hu(_.dtype===D.dtype,()=>`x and y should have the same dtype, but got x (${_.dtype}) and y (${D.dtype}).`),S.hu(1===_.rank,()=>`x should be 1D tensor, but got x (${_.shape}).`),S.hu(1===D.rank,()=>`y should be 1D tensor, but got y (${D.shape}).`);const O=yield _.data(),L=yield D.data(),W=new Set(L);let K=0;for(let ke=0;ke<O.length;ke++)W.has(O[ke])||K++;const ae=new Yi.YD([K],_.dtype),de=new Yi.YD([K],"int32");for(let ke=0,$e=0;ke<O.length;ke++)W.has(O[ke])||(ae.values[$e]=O[ke],de.values[$e]=ke,$e++);return[ae.toTensor(),de.toTensor()]})).apply(this,arguments)}const Jw=function g_(E,b){return xp.apply(this,arguments)},tC=(0,$.op)({sign_:function eC(E){const _={x:(0,T._1)(E,"x","sign")};return H.BV.runKernel(q.i5y,_)}}),rC=(0,$.op)({sin_:function nC(E){const _={x:(0,T._1)(E,"x","sin","float32")};return H.BV.runKernel(q.RQH,_)}}),sC=(0,$.op)({sinh_:function iC(E){const _={x:(0,T._1)(E,"x","sinh")};return H.BV.runKernel(q.wYB,_)}}),aC=(0,$.op)({slice1d_:function oC(E,b,_){const D=(0,T._1)(E,"x","slice1d");return S.hu(1===D.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${D.rank} tensor`),Ut(D,[b],[_])}}),cC=(0,$.op)({slice2d_:function lC(E,b,_){const D=(0,T._1)(E,"x","slice2d");return S.hu(2===D.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${D.rank} tensor`),Ut(D,b,_)}}),Cp=(0,$.op)({slice3d_:function wp(E,b,_){const D=(0,T._1)(E,"x","slice3d");return S.hu(3===D.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${D.rank} tensor`),Ut(D,b,_)}}),dC=(0,$.op)({slice4d_:function uC(E,b,_){const D=(0,T._1)(E,"x","slice4d");return S.hu(4===D.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${D.rank} tensor`),Ut(D,b,_)}}),ja=(0,$.op)({softmax_:function hC(E,b=-1){const _=(0,T._1)(E,"logits","softmax","float32");if(-1===b&&(b=_.rank-1),b!==_.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${_.rank} and dim was ${b}`);return H.BV.runKernel(q.Gcp,{logits:_},{dim:b})}}),Ep=(0,$.op)({fft_:function ma(E){return(0,S.hu)("complex64"===E.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${E.dtype}.`),H.BV.runKernel(q.vwp,{input:E})}}),Sr=(0,$.op)({ifft_:function fC(E){return(0,S.hu)("complex64"===E.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${E.dtype}.`),H.BV.runKernel(q.Qg5,{input:E})}}),rs=(0,$.op)({irfft_:function uu(E){const b=E.shape[E.shape.length-1],_=E.size/b;let D;if(b<=2){const O=(0,be.X)(E,[_,b]);D=Sr(O)}else{const O=[_,2*(b-1)],L=(0,be.X)((0,Ue.k)(E),[_,b]),W=(0,be.X)((0,Nt.a)(E),[_,b]),K=Wt(Ut(L,[0,1],[_,b-2]),1),ae=(0,qe.d)(Wt(Ut(W,[0,1],[_,b-2]),1),(0,Ht.i)(-1)),de=et([L,K],1),ke=et([W,ae],1),$e=(0,be.X)((0,ps.P)(de,ke),[O[0],O[1]]);D=Sr($e)}if(D=(0,Ue.k)(D),3===E.rank&&0!==E.shape[0]){const O=D,L=E.shape[0];D=(0,be.X)(D,[L,D.shape[0]/L,D.shape[1]]),O.dispose()}return D}}),El=(0,$.op)({split_:function Sp(E,b,_=0){const O={x:(0,T._1)(E,"x","split")};return H.BV.runKernel(q.L8s,O,{numOrSizeSplits:b,axis:_})}}),du=(0,$.op)({rfft_:function Dp(E,b){(0,S.hu)("float32"===E.dtype,()=>`The dtype for rfft() must be real value but got ${E.dtype}`);let _=E.shape[E.shape.length-1];const D=E.size/_;let O;if(null!=b&&b<_){const Tt=E.shape.map(Vt=>0),nn=E.shape.map(Vt=>Vt);nn[E.shape.length-1]=b,O=Ut(E,Tt,nn),_=b}else if(null!=b&&b>_){const Tt=E.shape.map(nn=>nn);Tt[E.shape.length-1]=b-_,O=et([E,Xr(Tt)],E.shape.length-1),_=b}else O=E;const L=(0,io.P)(O),W=(0,be.X)((0,ps.P)(O,L),[D,_]),K=Ep(W),ae=Math.floor(_/2)+1,de=(0,Ue.k)(K),ke=(0,Nt.a)(K),$e=El(de,[ae,_-ae],de.shape.length-1),lt=El(ke,[ae,_-ae],ke.shape.length-1),wt=O.shape.slice();return wt[O.shape.length-1]=ae,(0,be.X)((0,ps.P)($e[0],lt[0]),wt)}}),dh=(0,$.op)({squaredDifference_:function uh(E,b){let _=(0,T._1)(E,"a","squaredDifference"),D=(0,T._1)(b,"b","squaredDifference");return[_,D]=(0,Ae.makeTypesMatch)(_,D),(0,dn.assertAndGetBroadcastShape)(_.shape,D.shape),H.BV.runKernel(q._tC,{a:_,b:D},{})}}),cc=(0,$.op)({squeeze_:function hh(E,b){const _=(0,T._1)(E,"x","squeeze","string_or_numeric");return(0,be.X)(_,(0,S.bp)(_.shape,b).newShape)}}),Sl=(0,$.op)({stack_:function Ip(E,b=0){const _=(0,T.sI)(E,"tensors","stack","string_or_numeric");return S.hu(_.length>=1,()=>"Pass at least one tensor to tf.stack"),_.length>0&&S.hu(b<=_[0].rank,()=>"Axis must be <= rank of the tensor"),H.BV.runKernel(q.QiL,_,{axis:b})}});var Tp=I(6034);const uc=(0,$.op)({stridedSlice_:function hu(E,b,_,D,O=0,L=0,W=0,K=0,ae=0){const ke={x:(0,T._1)(E,"x","stridedSlice","string_or_numeric")};return H.BV.runKernel(q.jQk,ke,{begin:b,end:_,strides:D,beginMask:O,endMask:L,ellipsisMask:W,newAxisMask:K,shrinkAxisMask:ae})}}),Mp=(0,$.op)({tan_:function Dl(E){const _={x:(0,T._1)(E,"x","tan","float32")};return H.BV.runKernel(q.sEM,_)}});var Ap=I(3905),fu=I(7431);function $s(E,b){(0,S.Cq)(E);const _=(0,T.C)(E,b);if(1!==_.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,fu.H)(E,null,_,b)}function dc(E,b,_){if((0,S.Cq)(E),null!=b&&2!==b.length)throw new Error("tensor2d() requires shape to have two numbers");const D=(0,T.C)(E,_);if(2!==D.length&&1!==D.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===D.length&&null==b)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,fu.H)(E,b,D,_)}var y_=I(2786);function pC(E,b,_){if((0,S.Cq)(E),null!=b&&4!==b.length)throw new Error("tensor4d() requires shape to have four numbers");const D=(0,T.C)(E,_);if(4!==D.length&&1!==D.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===D.length&&null==b)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,fu.H)(E,b,D,_)}function Np(E,b,_){if((0,S.Cq)(E),null!=b&&5!==b.length)throw new Error("tensor5d() requires shape to have five numbers");const D=(0,T.C)(E,_);if(5!==D.length&&1!==D.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===D.length&&null==b)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,fu.H)(E,b,D,_)}function fh(E,b,_){if((0,S.Cq)(E),null!=b&&6!==b.length)throw new Error("tensor6d() requires shape to have six numbers");const D=(0,T.C)(E,_);if(6!==D.length&&1!==D.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===D.length&&null==b)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return(0,fu.H)(E,b=b||D,D,_)}var Rp=I(1876);const mC=(0,$.op)({tensorScatterUpdate_:function ph(E,b,_){const D=(0,T._1)(E,"tensor","tensorScatterupdate"),O=(0,T._1)(b,"indices","tensorScatterupdate","int32"),L=(0,T._1)(_,"updates","tensorScatterupdate");if(Rp.validateInput(L,O,D.shape),D.dtype!==L.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${D.dtype} and ${L.dtype}.`);return H.BV.runKernel(q.SIB,{tensor:D,indices:O,updates:L},{})}}),__=(0,$.op)({topk_:function gC(E,b=1,_=!0){const D=(0,T._1)(E,"x","topk");if(0===D.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const O=D.shape[D.shape.length-1];if(b<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${b}`);if(b>O)throw new Error(`'k' passed to topk() must be <= the last dimension (${O}) but got ${b}`);const L={x:D},W={k:b,sorted:_},[K,ae]=H.BV.runKernel(q.cWu,L,W);return{values:K,indices:ae}}}),Op=(0,$.op)({truncatedNormal_:function kp(E,b=0,_=1,D,O){if((0,S.Mu)(E),null!=D&&"bool"===D)throw new Error("Unsupported data type $ { dtype }");const L=new en(b,_,D,!0,O),W=(0,Ei.f)(E,D);for(let K=0;K<W.values.length;K++)W.values[K]=L.nextValue();return W.toTensor()}}),v_=(0,$.op)({unique_:function b_(E,b=0){const _=(0,T._1)(E,"x","unique","string_or_numeric");(0,S.hu)(_.rank>0,()=>"The input tensor must be at least 1D");const D={x:_},O={axis:b},[L,W]=H.BV.runKernel(q.kpP,D,O);return{values:L,indices:W}}}),Pp=(0,$.op)({unsortedSegmentSum_:function x_(E,b,_){const D=(0,T._1)(E,"x","unsortedSegmentSum"),O=(0,T._1)(b,"segmentIds","unsortedSegmentSum","int32");return(0,S.hu)((0,S.GN)(_),()=>"numSegments must be of dtype int"),H.BV.runKernel(q.Qvg,{x:D,segmentIds:O},{numSegments:_})}}),pu=(0,$.op)({unstack_:function w_(E,b=0){const _=(0,T._1)(E,"x","unstack","string_or_numeric");return S.hu(b>=-_.shape.length&&b<_.shape.length,()=>`Axis = ${b} is not in [-${_.shape.length}, ${_.shape.length})`),H.BV.runKernel(q.ToN,{value:_},{axis:b})}});function C_(E,b){return da(E,b,"right")}function yC(E,b=!0,_,D){return H.BV.makeVariable(E,b,_,D)}var E_=I(7349);function mu(){return(mu=(0,Ua.Z)(function*(E){const b=(0,T._1)(E,"condition","whereAsync","bool"),_=yield b.data(),D=(0,E_.Z)(b.shape,_);return E!==b&&b.dispose(),D})).apply(this,arguments)}const Fp=function zr(E){return mu.apply(this,arguments)};function gu(){return(gu=(0,Ua.Z)(function*(E,b,_){const D=(0,T._1)(E,"tensor","boolMask"),O=(0,T._1)(b,"mask","boolMask","bool"),L=_??0,W=O.rank,K=D.shape;S.hu(W>0,()=>"mask cannot be scalar"),S.k5(K.slice(L,L+W),O.shape,"mask's shape must match the first K dimensions of tensor's shape,");let ae=1;for(let nn=L;nn<L+W;nn++)ae*=K[nn];const de=K.slice(0,L).concat([ae],K.slice(L+W)),ke=(0,be.X)(D,de),$e=(0,be.X)(O,[-1]),lt=yield Fp($e),wt=cc(lt,[1]),Tt=Fe(ke,wt,L);return E!==D&&D.dispose(),b!==O&&O.dispose(),wt.dispose(),ke.dispose(),$e.dispose(),lt.dispose(),Tt})).apply(this,arguments)}const $p=function S_(E,b,_){return gu.apply(this,arguments)};var mh=I(9194);const D_=(0,$.op)({movingAverage_:function gh(E,b,_,D,O=!0){const L=(0,T._1)(E,"v","movingAverage"),W=(0,T._1)(b,"x","movingAverage"),K=(0,T._1)(_,"decay","movingAverage");(0,Ae.assertTypesMatch)(L,W),S.hu(S.cO(L.shape,W.shape),()=>"Shape mismatch in v and x");const ae=(0,Ht.i)(1),de=(0,an.l)(ae,K);let ke=(0,qe.d)((0,an.l)(W,L),de);if(O){S.hu(null!=D,()=>"When using zeroDebias: true, step is required.");const $e=(0,T._1)(D,"step","movingAverage");ke=(0,cr.h)(ke,(0,an.l)(ae,(0,Kt.s)(K,$e)))}return(0,Y.I)(L,ke)}}),Lp=(0,$.op)({scatterND_:function fo(E,b,_){(0,S.Mu)(_);const D=(0,T._1)(E,"indices","scatterND","int32"),O=(0,T._1)(b,"updates","scatterND");return Rp.validateInput(O,D,_),H.BV.runKernel(q.xQA,{indices:D,updates:O},{shape:_})}}),yh=(0,$.op)({sparseToDense_:function Yn(E,b,_,D=0){(0,S.Mu)(_);const O=(0,T._1)(E,"sparseIndices","sparseToDense","int32"),L=(0,T._1)(b,"sparseValues","sparseToDense","string_or_numeric"),W=(0,T._1)(D,"defaultValue","sparseToDense",L.dtype);return function Bp(E,b,_,D){if("int32"!==E.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${E.dtype}.`);if(E.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${E.shape}.`);const O=E.rank>0?E.shape[0]:1,L=E.rank>1?E.shape[1]:1;if(_.length!==L)throw new Error(`outputShape has incorrect number of elements:, ${_.length}, should be: ${L}.`);if(0!==b.rank&&(1!==b.rank||b.size!==O))throw new Error(`sparseValues has incorrect shape ${b.shape}, should be [] or [${O}]`);if(b.dtype!==D.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(O,L,_,W),H.BV.runKernel(q.D2d,{sparseIndices:O,sparseValues:L,defaultValue:W},{outputShape:_})}}),Mi=(0,$.op)({gatherND_:function yu(E,b){const _=(0,T._1)(b,"indices","gatherND","int32"),O={params:(0,T._1)(E,"x","gatherND","string_or_numeric"),indices:_};return H.BV.runKernel(q.q1x,O)}}),Il=(0,$.op)({dropout_:function Vp(E,b,_,D){const O=(0,T._1)(E,"x","dropout");if(S.hu("float32"===O.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${O.dtype} tensor instead.`),S.hu(b>=0&&b<1,()=>`rate must be a float in the range [0, 1), but got ${b}.`),0===b)return E instanceof Yi.es?O.clone():O;const L=function I_(E,b){if(null==b)return E.shape.slice();if(S.cO(E.shape,b))return b;if(E.shape.length===b.length){const _=[];for(let D=0;D<E.shape.length;D++)_.push(null==b[D]&&null!=E.shape[D]?E.shape[D]:b[D]);return _}return b}(O,_),W=1-b,K=(0,cr.h)(Ee((0,Y.I)(j(L,0,1,"float32",D),W)),W);return(0,qe.d)(O,K)}});function Ai(E){return Math.floor(Math.pow(2,Math.ceil(Math.log(E)/Math.log(2))))}function _h(E,b,_){const D=1-E%2,O=new Float32Array(E);for(let L=0;L<E;++L){const W=2*Math.PI*L/(E+D-1);O[L]=b-_*Math.cos(W)}return $s(O,"float32")}function bh(){return(bh=(0,Ua.Z)(function*(E,b,_=1){const D=(0,T._1)(E,"predictions","inTopK"),O=(0,T._1)(b,"targets","inTopK");(0,S.hu)(D.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${D.rank}`),(0,S.hu)(D.rank-1===O.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${D.rank} and targets rank ${O.rank}`),(0,S.k5)(D.shape.slice(0,D.shape.length-1),O.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const L=D.shape[D.shape.length-1];(0,S.hu)(_>0&&_<=L,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${L}), but got ${_}`);const W=yield D.data(),K=yield O.data(),[ae,de]=[W.length/L,L],ke=(0,S.WP)("bool",ae);for(let $e=0;$e<ae;$e++){const lt=$e*de,wt=W.subarray(lt,lt+de),Tt=[];for(let nn=0;nn<wt.length;nn++)Tt.push({value:wt[nn],index:nn});Tt.sort((nn,Vt)=>Vt.value-nn.value),ke[$e]=0;for(let nn=0;nn<_;nn++)if(Tt[nn].index===K[$e]){ke[$e]=1;break}}return E!==D&&D.dispose(),b!==O&&O.dispose(),(0,Ap.X)(ke,O.shape,"bool")})).apply(this,arguments)}const ga=function T_(E,b){return bh.apply(this,arguments)},M_=(0,$.op)({conv2DBackpropFilter_:function zp(E,b,_,D,O,L="NHWC",W){let K=E;3===E.rank&&(K=(0,be.X)(E,[1,E.shape[0],E.shape[1],E.shape[2]]));let ae=b;3===ae.rank&&(ae=(0,be.X)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),S.hu(4===K.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${K.shape}.`),S.hu(4===ae.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${ae.shape}.`),S.hu(4===_.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${_}.`);const de="NHWC"===L?K.shape[3]:K.shape[1],ke="NHWC"===L?ae.shape[3]:ae.shape[1];return S.hu(de===_[2],()=>`Error in conv2dDerFilter: depth of input ${de}) must match input depth in filter (${_[2]}.`),S.hu(ke===_[3],()=>`Error in conv2dDerFilter: depth of dy (${ke}) must match output depth for filter (${_[3]}).`),Ie.m("conv2dDerFilter",O,W),H.BV.runKernel(q.wUP,{x:K,dy:ae},{strides:D,pad:O,dataFormat:L,dimRoundingMode:W,filterShape:_})}});var is=I(6254);const jp=(0,$.op)({fusedConv2d_:function Up({x:E,filter:b,strides:_,pad:D,dataFormat:O="NHWC",dilations:L=[1,1],dimRoundingMode:W,bias:K,activation:ae="linear",preluActivationWeights:de,leakyreluAlpha:ke}){if(!1===(0,is.uy)(H.BV.state.gradientDepth,ae=ae||"linear")){S.hu("NHWC"===O,()=>`Error in fused conv2d: got dataFormat of ${O} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let vn=rn(E,b,_,D,O,L,W);return null!=K&&(vn=(0,Y.I)(vn,K)),(0,is.QH)(vn,ae,de,ke)}const $e=(0,T._1)(E,"x","conv2d","float32"),lt=(0,T._1)(b,"filter","conv2d","float32");let wt=$e,Tt=!1;3===$e.rank&&(Tt=!0,wt=(0,be.X)($e,[1,$e.shape[0],$e.shape[1],$e.shape[2]])),S.hu(4===wt.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${wt.rank}.`),S.hu(4===lt.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${lt.rank}.`),Ie.m("fused conv2d",D,W);const nn="NHWC"===O?wt.shape[3]:wt.shape[1];S.hu(lt.shape[2]===nn,()=>`Error in conv2d: depth of input (${nn}) must match input depth for filter ${lt.shape[2]}.`),S.hu(Ie.jT(_,L),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${_} and dilations '${L}'`);const Vt=Ie.Ix(wt.shape,lt.shape,_,L,D,W);let fn,Jr;if(null!=K&&(fn=(0,T._1)(K,"bias","fused conv2d"),[fn]=(0,Ae.makeTypesMatch)(fn,$e),"NHWC"===O?dn.assertAndGetBroadcastShape(Vt.outShape,fn.shape):(S.hu(fn.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${fn.shape.length}.`),S.hu(0===fn.shape.length||fn.shape[0]===Vt.outChannels||1===fn.shape[0],()=>`Error in fused conv2d: bias shape (${fn.shape}) is not compatible with the number of output channels (${Vt.outChannels})`))),null!=de){const vn=de.shape;if(S.hu(vn.length<=1||3===vn.length,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${vn.length}.`),1===vn.length)S.hu(1===vn[0]||vn[0]===Vt.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${vn}) is not compatible with the number of output channels (${Vt.outChannels}).`);else if(3===vn.length)try{dn.assertAndGetBroadcastShape(vn,Vt.outShape)}catch{throw Error(`Error in fused conv2d: PReLU activation weights (${vn}) is not compatible with the output shape of the conv2d (${Vt.outShape}).`)}Jr=(0,T._1)(de,"prelu weights","fused conv2d")}const Or=(vn,Ir)=>{S.hu("NHWC"===O,()=>`Error in gradient of fused conv2D: got dataFormat of ${O} but only NHWC is currently supported.`);const[yr,sr,zn,_r]=Ir,Es=(0,is.Fr)(vn,zn,ae);S.hu(Ie.I0(L),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${L}'`);const Ni=[pi(sr.shape,Es,yr,_,D),M_(sr,Es,yr.shape,_,D)];if(null!=_r){const Nl=(0,is.pf)(_r,Es);Ni.push(Nl)}return Ni},xr={x:wt,filter:lt,bias:fn,preluActivationWeights:Jr},Pr={strides:_,pad:D,dataFormat:O,dilations:L,dimRoundingMode:W,activation:ae,leakyreluAlpha:ke};return null==K?(0,xs.cb)((Ir,yr,sr)=>{let zn=H.BV.runKernel(q._V0,xr,Pr);return sr([yr,Ir,zn]),Tt&&(zn=(0,be.X)(zn,[zn.shape[1],zn.shape[2],zn.shape[3]])),{value:zn,gradFunc:Or}})(wt,lt):(0,xs.cb)((Ir,yr,sr,zn)=>{let _r=H.BV.runKernel(q._V0,xr,Pr);return zn([yr,Ir,_r,sr]),Tt&&(_r=(0,be.X)(_r,[_r.shape[1],_r.shape[2],_r.shape[3]])),{value:_r,gradFunc:Or}})(wt,lt,fn)}}),Qt=(0,$.op)({depthwiseConv2dNativeBackpropFilter_:function A_(E,b,_,D,O,L=[1,1],W){let K=E;3===E.rank&&(K=(0,be.X)(E,[1,E.shape[0],E.shape[1],E.shape[2]]));let ae=b;return 3===ae.rank&&(ae=(0,be.X)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),H.BV.runKernel(q.sL$,{x:K,dy:ae},{strides:D,pad:O,dimRoundingMode:W,dilations:L,filterShape:_})}}),_C=(0,$.op)({depthwiseConv2dNativeBackpropInput_:function Hp(E,b,_,D,O,L=[1,1],W){let K=b,ae=!1;3===b.rank&&(ae=!0,K=(0,be.X)(b,[1,b.shape[0],b.shape[1],b.shape[2]]));const $e=H.BV.runKernel(q.y7R,{dy:K,filter:_},{strides:D,pad:O,dimRoundingMode:W,dilations:L,inputShape:E});return ae?(0,be.X)($e,[$e.shape[1],$e.shape[2],$e.shape[3]]):$e}}),R_=(0,$.op)({fusedDepthwiseConv2d_:function N_({x:E,filter:b,strides:_,pad:D,dataFormat:O="NHWC",dilations:L=[1,1],dimRoundingMode:W,bias:K,activation:ae="linear",preluActivationWeights:de,leakyreluAlpha:ke}){if(!1===(0,is.uy)(H.BV.state.gradientDepth,ae)){let Pr=ko(E,b,_,D,O,L,W);return null!=K&&(Pr=(0,Y.I)(Pr,K)),(0,is.QH)(Pr,ae,de,ke)}const $e=(0,T._1)(E,"x","depthwiseConv2d","float32"),lt=(0,T._1)(b,"filter","depthwiseConv2d","float32");let wt=$e,Tt=!1;3===$e.rank&&(Tt=!0,wt=(0,be.X)($e,[1,$e.shape[0],$e.shape[1],$e.shape[2]])),S.hu(4===wt.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${wt.rank}.`),S.hu(4===lt.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${lt.rank}.`),S.hu(wt.shape[3]===lt.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${wt.shape[3]}) must match the inChannels dimension in filter ${lt.shape[2]}.`),null==L&&(L=[1,1]),S.hu(Ie.jT(_,L),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${_} and dilations '${L}'`),Ie.m("fused depthwiseConv2d",D,W);const nn=Ie.Ix(wt.shape,lt.shape,_,L,D,W,!0);let Vt,fn;null!=K&&(Vt=(0,T._1)(K,"bias","fused conv2d"),[Vt]=(0,Ae.makeTypesMatch)(Vt,$e),dn.assertAndGetBroadcastShape(nn.outShape,Vt.shape)),null!=de&&(fn=(0,T._1)(de,"prelu weights","fused depthwiseConv2d"));const Jr=(Pr,vn)=>{S.hu(Ie.I0(L),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${L}'`);const[Ir,yr,sr,zn]=vn,_r=(0,is.Fr)(Pr,sr,ae),Es=_C(yr.shape,_r,Ir,_,D,L,W),Fn=Qt(yr,_r,Ir.shape,_,D,L,W);return null!=zn?[Es,Fn,(0,is.pf)(Vt,_r)]:[Es,Fn]},Or={x:wt,filter:lt,bias:Vt,preluActivationWeights:fn},xr={strides:_,pad:D,dataFormat:O,dilations:L,dimRoundingMode:W,activation:ae,leakyreluAlpha:ke};return null==K?(0,xs.cb)((vn,Ir,yr)=>{let sr=H.BV.runKernel(q.luS,Or,xr);return yr([Ir,vn,sr]),Tt&&(sr=(0,be.X)(sr,[sr.shape[1],sr.shape[2],sr.shape[3]])),{value:sr,gradFunc:Jr}})(wt,lt):(0,xs.cb)((vn,Ir,yr,sr)=>{let zn=H.BV.runKernel(q.luS,Or,xr);return sr([Ir,vn,zn,yr]),Tt&&(zn=(0,be.X)(zn,[zn.shape[1],zn.shape[2],zn.shape[3]])),{value:zn,gradFunc:Jr}})(wt,lt,Vt)}}),Wp=(0,$.op)({fusedMatMul_:function k_({a:E,b,transposeA:_=!1,transposeB:D=!1,bias:O,activation:L="linear",preluActivationWeights:W,leakyreluAlpha:K=.2}){if(!1===(0,is.uy)(H.BV.state.gradientDepth,L)){let _r=(0,mt.O)(E,b,_,D);return null!=O&&(_r=(0,Y.I)(_r,O)),(0,is.QH)(_r,L,W,K)}let ae=(0,T._1)(E,"a","fused matMul"),de=(0,T._1)(b,"b","fused matMul");[ae,de]=(0,Ae.makeTypesMatch)(ae,de);const ke=_?ae.shape[ae.rank-2]:ae.shape[ae.rank-1],$e=D?de.shape[de.rank-1]:de.shape[de.rank-2],lt=_?ae.shape[ae.rank-1]:ae.shape[ae.rank-2],wt=D?de.shape[de.rank-2]:de.shape[de.rank-1],Tt=ae.shape.slice(0,-2),nn=de.shape.slice(0,-2),Vt=S.NA(Tt),fn=S.NA(nn);S.hu(ke===$e,()=>`Error in fused matMul: inner shapes (${ke}) and (${$e}) of Tensors with shapes ${ae.shape} and ${de.shape} and transposeA=${_} and transposeB=${D} must match.`);const Or=dn.assertAndGetBroadcastShape(ae.shape.slice(0,-2),de.shape.slice(0,-2)).concat([lt,wt]),xr=(0,be.X)(ae,_?[Vt,ke,lt]:[Vt,lt,ke]),Pr=(0,be.X)(de,D?[fn,wt,$e]:[fn,$e,wt]);let vn,Ir;null!=O&&(vn=(0,T._1)(O,"bias","fused matMul"),[vn]=(0,Ae.makeTypesMatch)(vn,ae),dn.assertAndGetBroadcastShape(Or,vn.shape)),null!=W&&(Ir=(0,T._1)(W,"prelu weights","fused matMul"));const yr=(_r,Es)=>{const[Fn,Ss,Ni,Nl]=Es,Tr=(0,is.Fr)((0,be.X)(_r,Ni.shape),Ni,L);let Bs,Ka;return _||D?!_&&D?(Bs=(0,mt.O)(Tr,Ss,!1,!1),Ka=(0,mt.O)(Tr,Fn,!0,!1)):_&&!D?(Bs=(0,mt.O)(Ss,Tr,!1,!0),Ka=(0,mt.O)(Fn,Tr,!1,!1)):(Bs=(0,mt.O)(Ss,Tr,!0,!0),Ka=(0,mt.O)(Tr,Fn,!0,!0)):(Bs=(0,mt.O)(Tr,Ss,!1,!0),Ka=(0,mt.O)(Fn,Tr,!0,!1)),null!=O?[Bs,Ka,(0,is.pf)(Nl,Tr)]:[Bs,Ka]},sr={a:xr,b:Pr,bias:vn,preluActivationWeights:Ir},zn={transposeA:_,transposeB:D,activation:L,leakyreluAlpha:K};return null==O?(0,xs.cb)((Es,Fn,Ss)=>{const Ni=H.BV.runKernel(q.usg,sr,zn);return Ss([Es,Fn,Ni]),{value:(0,be.X)(Ni,Or),gradFunc:yr}})(xr,Pr):(0,xs.cb)((Es,Fn,Ss,Ni)=>{const Nl=H.BV.runKernel(q.usg,sr,zn);return Ni([Es,Fn,Nl,Ss]),{value:(0,be.X)(Nl,Or),gradFunc:yr}})(xr,Pr,vn)}}),O_=(0,$.op)({hammingWindow_:function Tl(E){return _h(E,.54,.46)}}),Gp=(0,$.op)({hannWindow_:function P_(E){return _h(E,.5,.5)}}),Kp=(0,$.op)({frame_:function F_(E,b,_,D=!1,O=0){let L=0;const W=[];for(;L+b<=E.size;)W.push(Ut(E,L,b)),L+=_;if(D)for(;L<E.size;){const K=L+b-E.size,ae=et([Ut(E,L,b-K),(0,xe.h)([K],O)]);W.push(ae),L+=_}return 0===W.length?dc([],[0,b]):(0,be.X)(et(W),[W.length,b])}}),Dn=(0,$.op)({stft_:function it(E,b,_,D,O=Gp){null==D&&(D=Ai(b));const L=Kp(E,b,_),W=(0,qe.d)(L,O(b));return du(W,D)}}),bu=(0,$.op)({cropAndResize_:function _u(E,b,_,D,O="bilinear",L=0){const W=(0,T._1)(E,"image","cropAndResize"),K=(0,T._1)(b,"boxes","cropAndResize","float32"),ae=(0,T._1)(_,"boxInd","cropAndResize","int32"),de=K.shape[0];return S.hu(4===W.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${W.rank}.`),S.hu(2===K.rank&&4===K.shape[1],()=>`Error in cropAndResize: boxes must be have size [${de},4] but had shape ${K.shape}.`),S.hu(1===ae.rank&&ae.shape[0]===de,()=>`Error in cropAndResize: boxInd must be have size [${de}] but had shape ${K.shape}.`),S.hu(2===D.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${D.length}.`),S.hu(D[0]>=1&&D[1]>=1,()=>`cropSize must be atleast [1,1], but was ${D}`),S.hu("bilinear"===O||"nearest"===O,()=>`method must be bilinear or nearest, but was ${O}`),H.BV.runKernel(q.VcC,{image:W,boxes:K,boxInd:ae},{method:O,extrapolationValue:L,cropSize:D})}}),Xp=(0,$.op)({flipLeftRight_:function Qr(E){const b=(0,T._1)(E,"image","flipLeftRight","float32");return S.hu(4===b.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${b.rank}.`),H.BV.runKernel(q.Uyb,{image:b},{})}}),po=(0,$.op)({grayscaleToRGB_:function hc(E){const b=(0,T._1)(E,"image","grayscaleToRGB"),_=b.rank-1,D=b.shape[_];S.hu(b.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${b.rank}.`),S.hu(1===D,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${D}.`);const O=new Array(b.rank);return O.fill(1,0,_),O[_]=3,z(b,O)}}),xh=(0,$.op)({rgbToGrayscale_:function vh(E){const b=(0,T._1)(E,"image","RGBToGrayscale"),D=b.shape[b.rank-1];S.hu(b.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${b.rank}.`),S.hu(3===D,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${D}.`);const O=b.dtype,L=(0,Te.p)(b,"float32"),W=$s([.2989,.587,.114]);let K;switch(b.rank){case 2:K=An("ij,j->i",L,W);break;case 3:K=An("ijk,k->ij",L,W);break;case 4:K=An("ijkl,l->ijk",L,W);break;case 5:K=An("ijklm,m->ijkl",L,W);break;case 6:K=An("ijklmn,n->ijklm",L,W);break;default:throw new Error("Not a valid tensor rank.")}return K=f(K,-1),(0,Te.p)(K,O)}}),bC=(0,$.op)({rotateWithOffset_:function $_(E,b,_=0,D=.5){const O=(0,T._1)(E,"image","rotateWithOffset","float32");return S.hu(4===O.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${O.rank}.`),H.BV.runKernel(q.b9H,{image:O},{radians:b,fillValue:_,center:D})}});function Ha(E,b,_,D,O,L){null==D&&(D=.5),null==O&&(O=Number.NEGATIVE_INFINITY),null==L&&(L=0);const W=E.shape[0];return _=Math.min(_,W),S.hu(0<=D&&D<=1,()=>`iouThreshold must be in [0, 1], but was '${D}'`),S.hu(2===E.rank,()=>`boxes must be a 2D tensor, but was of rank '${E.rank}'`),S.hu(4===E.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${E.shape[1]}`),S.hu(1===b.rank,()=>"scores must be a 1D tensor"),S.hu(b.shape[0]===W,()=>`scores has incompatible shape with boxes. Expected ${W}, but was ${b.shape[0]}`),S.hu(0<=L&&L<=1,()=>`softNmsSigma must be in [0, 1], but was '${L}'`),{maxOutputSize:_,iouThreshold:D,scoreThreshold:O,softNmsSigma:L}}const Vo=(0,$.op)({nonMaxSuppression_:function gi(E,b,_,D=.5,O=Number.NEGATIVE_INFINITY){const L=(0,T._1)(E,"boxes","nonMaxSuppression","float32"),W=(0,T._1)(b,"scores","nonMaxSuppression","float32"),K=Ha(L,W,_,D,O);return H.BV.runKernel(q.uv1,{boxes:L,scores:W},{maxOutputSize:_=K.maxOutputSize,iouThreshold:D=K.iouThreshold,scoreThreshold:O=K.scoreThreshold})}});var vu=I(7228);function Ls(){return(Ls=(0,Ua.Z)(function*(E,b,_,D=.5,O=Number.NEGATIVE_INFINITY){const L=(0,T._1)(E,"boxes","nonMaxSuppressionAsync"),W=(0,T._1)(b,"scores","nonMaxSuppressionAsync"),K=Ha(L,W,_,D,O);_=K.maxOutputSize,D=K.iouThreshold,O=K.scoreThreshold;const ae=yield Promise.all([L.data(),W.data()]),de=ae[0],ke=ae[1],{selectedIndices:$e}=(0,vu.GP)(de,ke,_,D,O);return L!==E&&L.dispose(),W!==b&&W.dispose(),$s($e,"int32")})).apply(this,arguments)}const B_=(0,$.op)({nonMaxSuppressionWithScore_:function qp(E,b,_,D=.5,O=Number.NEGATIVE_INFINITY,L=0){const W=(0,T._1)(E,"boxes","nonMaxSuppression"),K=(0,T._1)(b,"scores","nonMaxSuppression"),ae=Ha(W,K,_,D,O,L),$e=H.BV.runKernel(q.W0H,{boxes:W,scores:K},{maxOutputSize:_=ae.maxOutputSize,iouThreshold:D=ae.iouThreshold,scoreThreshold:O=ae.scoreThreshold,softNmsSigma:L=ae.softNmsSigma});return{selectedIndices:$e[0],selectedScores:$e[1]}}});function fc(){return(fc=(0,Ua.Z)(function*(E,b,_,D=.5,O=Number.NEGATIVE_INFINITY,L=0){const W=(0,T._1)(E,"boxes","nonMaxSuppressionAsync"),K=(0,T._1)(b,"scores","nonMaxSuppressionAsync"),ae=Ha(W,K,_,D,O,L);_=ae.maxOutputSize,D=ae.iouThreshold,O=ae.scoreThreshold,L=ae.softNmsSigma;const de=yield Promise.all([W.data(),K.data()]),ke=de[0],$e=de[1],{selectedIndices:lt,selectedScores:wt}=(0,vu.pA)(ke,$e,_,D,O,L);return W!==E&&W.dispose(),K!==b&&K.dispose(),{selectedIndices:$s(lt,"int32"),selectedScores:$s(wt)}})).apply(this,arguments)}const Ch=(0,$.op)({nonMaxSuppressionPadded_:function Zp(E,b,_,D=.5,O=Number.NEGATIVE_INFINITY,L=!1){const W=(0,T._1)(E,"boxes","nonMaxSuppression"),K=(0,T._1)(b,"scores","nonMaxSuppression"),ae=Ha(W,K,_,D,O,null),Tt=H.BV.runKernel(q.cye,{boxes:W,scores:K},{maxOutputSize:ae.maxOutputSize,iouThreshold:ae.iouThreshold,scoreThreshold:ae.scoreThreshold,padToMaxOutputSize:L});return{selectedIndices:Tt[0],validOutputs:Tt[1]}}});function xu(){return(xu=(0,Ua.Z)(function*(E,b,_,D=.5,O=Number.NEGATIVE_INFINITY,L=!1){const W=(0,T._1)(E,"boxes","nonMaxSuppressionAsync"),K=(0,T._1)(b,"scores","nonMaxSuppressionAsync"),ae=Ha(W,K,_,D,O,null),de=ae.maxOutputSize,ke=ae.iouThreshold,$e=ae.scoreThreshold,[lt,wt]=yield Promise.all([W.data(),K.data()]),{selectedIndices:Tt,validOutputs:nn}=(0,vu.qP)(lt,wt,de,ke,$e,L);return W!==E&&W.dispose(),K!==b&&K.dispose(),{selectedIndices:$s(Tt,"int32"),validOutputs:(0,Ht.i)(nn,"int32")}})).apply(this,arguments)}const Qp=(0,$.op)({resizeBilinear_:function Yp(E,b,_=!1,D=!1){const O=(0,T._1)(E,"images","resizeBilinear");S.hu(3===O.rank||4===O.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${O.rank}.`),S.hu(2===b.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${b}.`),S.hu(!1===D||!1===_,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let L=O,W=!1;3===O.rank&&(W=!0,L=(0,be.X)(O,[1,O.shape[0],O.shape[1],O.shape[2]]));const[]=b,de=H.BV.runKernel(q._Yw,{images:L},{alignCorners:_,halfPixelCenters:D,size:b});return W?(0,be.X)(de,[de.shape[1],de.shape[2],de.shape[3]]):de}}),em=(0,$.op)({resizeNearestNeighbor_:function Jp(E,b,_=!1,D=!1){const O=(0,T._1)(E,"images","resizeNearestNeighbor");S.hu(3===O.rank||4===O.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${O.rank}.`),S.hu(2===b.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${b}.`),S.hu("float32"===O.dtype||"int32"===O.dtype,()=>"`images` must have `int32` or `float32` as dtype"),S.hu(!1===D||!1===_,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let L=O,W=!1;3===O.rank&&(W=!0,L=(0,be.X)(O,[1,O.shape[0],O.shape[1],O.shape[2]]));const[]=b,de=H.BV.runKernel(q.dpD,{images:L},{alignCorners:_,halfPixelCenters:D,size:b});return W?(0,be.X)(de,[de.shape[1],de.shape[2],de.shape[3]]):de}}),j_=(0,$.op)({threshold_:function Sh(E,b="binary",_=!1,D=.5){const O=(0,T._1)(E,"image","threshold"),ae=O.shape[0]*O.shape[1];let ke,$e,lt,wt,de=(0,qe.d)($s([D]),255);if(S.hu(3===O.rank,()=>`Error in threshold: image must be rank 3,but got rank ${O.rank}.`),S.hu(3===O.shape[2]||1===O.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${O.shape[2]}.`),S.hu("int32"===O.dtype||"float32"===O.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${O.dtype}.`),S.hu("otsu"===b||"binary"===b,()=>`Method must be binary or otsu, but was ${b}`),3===O.shape[2]){[ke,$e,lt]=El(O,[1,1,1],-1);const Vt=(0,qe.d)(ke,.2989),fn=(0,qe.d)($e,.587),Jr=(0,qe.d)(lt,.114);wt=(0,Y.I)((0,Y.I)(Vt,fn),Jr)}else wt=E;"otsu"===b&&(de=function U_(E,b){let L,W,K,ae,de,ke,_=$s([-1]),D=$s([0]),O=$s([0]);for(let $e=0;$e<E.size-1;$e++){L=Ut(E,0,$e+1),W=Ut(E,$e+1),de=(0,cr.h)((0,On.S)(L),b),ke=(0,cr.h)((0,On.S)(W),b);const lt=(0,On.S)((0,qe.d)(L,Me(0,L.size)));K=(0,cr.h)(lt,(0,On.S)(L));const wt=(0,xe.h)(W.shape,L.size),Tt=(0,Y.I)(Me(0,W.size),wt),nn=(0,qe.d)(W,Tt);ae=(0,cr.h)((0,On.S)(nn),(0,On.S)(W));const Vt=(0,an.l)(K,ae),fn=(0,an.l)(K,ae),Jr=(0,qe.d)(de,ke);O=(0,qe.d)((0,qe.d)(Jr,Vt),fn);const Or=yt(O,D);D=Br(Or,O,D),_=Br(Or,$s([$e]),_)}return _}(Mo((0,Te.p)(ws(wt),"int32"),(0,Ap.X)([]),256),ae));const Tt=_?Pa(wt,de):yt(wt,de);return(0,Te.p)((0,qe.d)(Tt,255),"int32")}}),Wa=(0,$.op)({transform_:function yi(E,b,_="nearest",D="constant",O=0,L){const W=(0,T._1)(E,"image","transform","float32"),K=(0,T._1)(b,"transforms","transform","float32");return S.hu(4===W.rank,()=>`Error in transform: image must be rank 4,but got rank ${W.rank}.`),S.hu(2===K.rank&&(K.shape[0]===W.shape[0]||1===K.shape[0])&&8===K.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),S.hu(null==L||2===L.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${L}.`),H.BV.runKernel(q.wx7,{image:W,transforms:K},{interpolation:_,fillMode:D,fillValue:O,outputShape:L})}}),H_=(0,$.op)({bandPart_:function dr(E,b,_){const D=(0,T._1)(E,"a","bandPart");(0,S.hu)(D.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${D.rank}.`);const O=D.shape,[L,W]=D.shape.slice(-2);let K,ae;"number"==typeof b?((0,S.hu)(b%1==0,()=>`bandPart(): numLower must be an integer, got ${b}.`),(0,S.hu)(b<=L,()=>`bandPart(): numLower (${b}) must not be greater than the number of rows (${L}).`),K=(0,T._1)(b<0?L:b,"numLower","bandPart")):((0,S.hu)("int32"===b.dtype,()=>"bandPart(): numLower's dtype must be an int32."),K=Br($o(b,0),L,La(b,L))),"number"==typeof _?((0,S.hu)(_%1==0,()=>`bandPart(): numUpper must be an integer, got ${_}.`),(0,S.hu)(_<=W,()=>`bandPart(): numUpper (${_}) must not be greater than the number of columns (${W}).`),ae=(0,T._1)(_<0?W:_,"numUpper","bandPart")):((0,S.hu)("int32"===_.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),ae=Br($o(_,0),W,La(_,W)));const de=(0,be.X)(Me(0,L,1,"int32"),[-1,1]),ke=Me(0,W,1,"int32"),$e=(0,an.l)(de,ke),lt=yl(Pa($e,K),Jt($e,(0,qi.W)(ae))),wt=Xr([L,W],D.dtype);return(0,be.X)(Sl(pu((0,be.X)(D,[-1,L,W])).map(Tt=>Br(lt,Tt,wt))),O)}}),G_=(0,$.op)({gramSchmidt_:function W_(E){let b;if(Array.isArray(E)){b=!1,(0,S.hu)(null!=E&&E.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const O=E[0].shape[0];for(let L=1;L<E.length;++L)(0,S.hu)(E[L].shape[0]===O,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${E[L].shape[0]} vs. ${O})`)}else b=!0,E=El(E,E.shape[0],0).map(O=>cc(O,[0]));(0,S.hu)(E.length<=E[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${E.length}) exceeds number of dimensions (${E[0].shape[0]}).`);const _=[],D=E;for(let O=0;O<E.length;++O)_.push(H.BV.tidy(()=>{let L=D[O];if(O>0)for(let W=0;W<O;++W){const K=(0,qe.d)((0,On.S)((0,qe.d)(_[W],L)),_[W]);L=(0,an.l)(L,K)}return(0,cr.h)(L,bs(L,"euclidean"))}));return b?Sl(_,0):_}});var K_=I(2773);function Dh(E,b=!1){return H.BV.tidy(()=>{(0,S.hu)(2===E.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${E.shape.length}D Tensor.`);const _=E.shape[0],D=E.shape[1];let O=J(_),L=(0,Pe.d)(E);const W=dc([[1]],[1,1]);let K=(0,Pe.d)(W);const ae=_>=D?D:_;for(let de=0;de<ae;++de){const ke=L,$e=K,lt=O;[K,L,O]=H.BV.tidy(()=>{const wt=Ut(L,[de,de],[_-de,1]),Tt=bs(wt),nn=Ut(L,[de,de],[1,1]),Vt=Br(yt(nn,0),dc([[-1]]),dc([[1]])),fn=(0,an.l)(nn,(0,qe.d)(Vt,Tt)),Jr=(0,cr.h)(wt,fn);K=1===Jr.shape[0]?(0,Pe.d)(W):et([W,Ut(Jr,[1,0],[Jr.shape[0]-1,Jr.shape[1]])],0);const Or=(0,qi.W)((0,cr.h)((0,mt.O)(Vt,fn),Tt)),xr=Ut(L,[de,0],[_-de,D]),Pr=(0,qe.d)(Or,K),vn=(0,mh.p)(K);if(0===de)L=(0,an.l)(xr,(0,mt.O)(Pr,(0,mt.O)(vn,xr)));else{const sr=(0,an.l)(xr,(0,mt.O)(Pr,(0,mt.O)(vn,xr)));L=et([Ut(L,[0,0],[de,D]),sr],0)}const Ir=(0,mh.p)(Pr),yr=Ut(O,[0,de],[_,O.shape[1]-de]);if(0===de)O=(0,an.l)(yr,(0,mt.O)((0,mt.O)(yr,K),Ir));else{const sr=(0,an.l)(yr,(0,mt.O)((0,mt.O)(yr,K),Ir));O=et([Ut(O,[0,0],[_,de]),sr],1)}return[K,L,O]}),(0,K_.B9)([ke,$e,lt])}return!b&&_>D&&(O=Ut(O,[0,0],[_,D]),L=Ut(L,[0,0],[D,D])),[O,L]})}const wu=(0,$.op)({qr_:function tm(E,b=!1){if((0,S.hu)(E.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${E.rank}`),2===E.rank)return Dh(E,b);{const _=E.shape.slice(0,E.shape.length-2).reduce((ae,de)=>ae*de),D=pu((0,be.X)(E,[_,E.shape[E.shape.length-2],E.shape[E.shape.length-1]]),0),O=[],L=[];return D.forEach(ae=>{const[de,ke]=Dh(ae,b);O.push(de),L.push(ke)}),[(0,be.X)(Sl(O,0),E.shape),(0,be.X)(Sl(L,0),E.shape)]}}});var Dr=I(4839);const Cs=(0,$.op)({computeWeightedLoss_:function X_(E,b,_=Dr.I.SUM_BY_NONZERO_WEIGHTS){const D=(0,T._1)(E,"losses","computeWeightedLoss");let O=null;null!=b&&(O=(0,T._1)(b,"weights","computeWeightedLoss"));const L=null==O?D:(0,qe.d)(D,O);if(_===Dr.I.NONE)return L;if(_===Dr.I.SUM)return(0,On.S)(L);if(_===Dr.I.MEAN){if(null==O)return Kr(L);{const W=D.size/O.size,K=(0,cr.h)((0,On.S)(L),(0,On.S)(O));return W>1?(0,cr.h)(K,(0,Ht.i)(W)):K}}if(_===Dr.I.SUM_BY_NONZERO_WEIGHTS){if(null==O)return(0,cr.h)((0,On.S)(L),(0,Ht.i)(D.size));{const W=(0,qe.d)(O,Zt(D.shape)),K=(0,Te.p)((0,On.S)(sc(W,(0,Ht.i)(0))),"float32");return(0,cr.h)((0,On.S)(L),K)}}throw Error(`Unknown reduction: ${_}`)}}),Eu=(0,$.op)({absoluteDifference_:function Cu(E,b,_,D=Dr.I.SUM_BY_NONZERO_WEIGHTS){const O=(0,T._1)(E,"labels","absoluteDifference"),L=(0,T._1)(b,"predictions","absoluteDifference");let W=null;null!=_&&(W=(0,T._1)(_,"weights","absoluteDifference")),(0,S.k5)(O.shape,L.shape,"Error in absoluteDifference: ");const K=(0,ye.W)((0,an.l)(O,L));return Cs(K,W,D)}}),nm=(0,$.op)({cosineDistance_:function Ih(E,b,_,D,O=Dr.I.SUM_BY_NONZERO_WEIGHTS){const L=(0,T._1)(E,"labels","cosineDistance"),W=(0,T._1)(b,"predictions","cosineDistance");let K=null;null!=D&&(K=(0,T._1)(D,"weights","cosineDistance")),(0,S.k5)(L.shape,W.shape,"Error in cosineDistance: ");const ae=(0,Ht.i)(1),de=(0,an.l)(ae,(0,On.S)((0,qe.d)(L,W),_,!0));return Cs(de,K,O)}}),q_=(0,$.op)({hingeLoss_:function rm(E,b,_,D=Dr.I.SUM_BY_NONZERO_WEIGHTS){let O=(0,T._1)(E,"labels","hingeLoss");const L=(0,T._1)(b,"predictions","hingeLoss");let W=null;null!=_&&(W=(0,T._1)(_,"weights","hingeLoss")),(0,S.k5)(O.shape,L.shape,"Error in hingeLoss: ");const K=(0,Ht.i)(1);O=(0,an.l)((0,qe.d)((0,Ht.i)(2),O),K);const ae=(0,He.U)((0,an.l)(K,(0,qe.d)(O,L)));return Cs(ae,W,D)}}),pc=(0,$.op)({huberLoss_:function Al(E,b,_,D=1,O=Dr.I.SUM_BY_NONZERO_WEIGHTS){const L=(0,T._1)(E,"labels","huberLoss"),W=(0,T._1)(b,"predictions","huberLoss");let K=null;null!=_&&(K=(0,T._1)(_,"weights","huberLoss")),(0,S.k5)(L.shape,W.shape,"Error in huberLoss: ");const ae=(0,Ht.i)(D),de=(0,ye.W)((0,an.l)(W,L)),ke=La(de,ae),$e=(0,an.l)(de,ke),lt=(0,Y.I)((0,qe.d)((0,Ht.i)(.5),(0,Po.h)(ke)),(0,qe.d)(ae,$e));return Cs(lt,K,O)}}),vC=(0,$.op)({logLoss_:function Z_(E,b,_,D=1e-7,O=Dr.I.SUM_BY_NONZERO_WEIGHTS){const L=(0,T._1)(E,"labels","logLoss"),W=(0,T._1)(b,"predictions","logLoss");let K=null;null!=_&&(K=(0,T._1)(_,"weights","logLoss")),(0,S.k5)(L.shape,W.shape,"Error in logLoss: ");const ae=(0,Ht.i)(1),de=(0,Ht.i)(D),ke=(0,qi.W)((0,qe.d)(L,ot((0,Y.I)(W,de)))),$e=(0,qe.d)((0,an.l)(ae,L),ot((0,Y.I)((0,an.l)(ae,W),de))),lt=(0,an.l)(ke,$e);return Cs(lt,K,O)}}),xC=(0,$.op)({meanSquaredError_:function Th(E,b,_,D=Dr.I.SUM_BY_NONZERO_WEIGHTS){const O=(0,T._1)(E,"labels","meanSquaredError"),L=(0,T._1)(b,"predictions","meanSquaredError");let W=null;null!=_&&(W=(0,T._1)(_,"weights","meanSquaredError")),(0,S.k5)(O.shape,L.shape,"Error in meanSquaredError: ");const K=dh(O,L);return Cs(K,W,D)}}),wC=(0,$.op)({sigmoidCrossEntropy_:function Q_(E,b,_,D=0,O=Dr.I.SUM_BY_NONZERO_WEIGHTS){let L=(0,T._1)(E,"multiClassLabels","sigmoidCrossEntropy");const W=(0,T._1)(b,"logits","sigmoidCrossEntropy");let K=null;if(null!=_&&(K=(0,T._1)(_,"weights","sigmoidCrossEntropy")),(0,S.k5)(L.shape,W.shape,"Error in sigmoidCrossEntropy: "),D>0){const de=(0,Ht.i)(D),ke=(0,Ht.i)(1),$e=(0,Ht.i)(.5);L=(0,Y.I)((0,qe.d)(L,(0,an.l)(ke,de)),(0,qe.d)($e,de))}const ae=function Y_(E,b){const _=(0,T._1)(E,"labels","sigmoidCrossEntropyWithLogits"),D=(0,T._1)(b,"logits","sigmoidCrossEntropyWithLogits");(0,S.k5)(_.shape,D.shape,"Error in sigmoidCrossEntropyWithLogits: ");const O=(0,He.U)(D),L=(0,qe.d)(D,_),W=ml(vs((0,qi.W)((0,ye.W)(D))));return(0,Y.I)((0,an.l)(O,L),W)}(L,W);return Cs(ae,K,O)}}),mc=(0,$.op)({softmaxCrossEntropy_:function Mh(E,b,_,D=0,O=Dr.I.SUM_BY_NONZERO_WEIGHTS){let L=(0,T._1)(E,"onehotLabels","softmaxCrossEntropy");const W=(0,T._1)(b,"logits","softmaxCrossEntropy");let K=null;if(null!=_&&(K=(0,T._1)(_,"weights","softmaxCrossEntropy")),(0,S.k5)(L.shape,W.shape,"Error in softmaxCrossEntropy: "),D>0){const de=(0,Ht.i)(D),ke=(0,Ht.i)(1),$e=(0,Ht.i)(L.shape[1]);L=(0,Y.I)((0,qe.d)(L,(0,an.l)(ke,de)),(0,cr.h)(de,$e))}const ae=function CC(E,b,_=-1){if(-1===_&&(_=b.rank-1),_!==b.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${b.rank} and dim was ${_}`);return(0,xs.cb)((O,L,W)=>{const ae=ca(L,[_],!0),de=(0,an.l)((0,Te.p)(L,"float32"),ae);W([O,de]);const ke=(0,qi.W)((0,qe.d)(de,O));return{value:(0,On.S)(ke,[_]),gradFunc:(wt,Tt)=>{const[nn,Vt]=Tt,fn=(0,Wi.rv)(wt.shape,[_]);return[(0,qe.d)((0,be.X)(wt,fn),(0,an.l)((0,Te.p)(nn,"float32"),vs(Vt))),(0,qe.d)((0,be.X)(wt,fn),(0,an.l)(vs(Vt),(0,Te.p)(nn,"float32")))]}}})(E,b)}(L,W);return Cs(ae,K,O)}}),am={fft:Ep,ifft:Sr,rfft:du,irfft:rs},lm={hammingWindow:O_,hannWindow:Gp,frame:Kp,stft:Dn},cm={flipLeftRight:Xp,grayscaleToRGB:po,resizeNearestNeighbor:em,resizeBilinear:Qp,rgbToGrayscale:xh,rotateWithOffset:bC,cropAndResize:bu,nonMaxSuppression:Vo,nonMaxSuppressionAsync:function Ml(E,b,_){return Ls.apply(this,arguments)},nonMaxSuppressionWithScore:B_,nonMaxSuppressionWithScoreAsync:function V_(E,b,_){return fc.apply(this,arguments)},nonMaxSuppressionPadded:Ch,nonMaxSuppressionPaddedAsync:function z_(E,b,_){return xu.apply(this,arguments)},threshold:j_,transform:Wa},um={bandPart:H_,gramSchmidt:G_,qr:wu},rb={absoluteDifference:Eu,computeWeightedLoss:Cs,cosineDistance:nm,hingeLoss:q_,huberLoss:pc,logLoss:vC,meanSquaredError:xC,sigmoidCrossEntropy:wC,softmaxCrossEntropy:mc},Tu={sparseFillEmptyRows:(0,$.op)({sparseFillEmptyRows_:function J_(E,b,_,D){const O=(0,T._1)(E,"indices","sparseFillEmptyRows","int32"),L=(0,T._1)(b,"values","sparseFillEmptyRows"),W=(0,T._1)(_,"denseShape","sparseFillEmptyRows","int32"),K=(0,T._1)(D,"defaultValue","sparseFillEmptyRows",L.dtype);if(2!==O.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${O.shape}`);if(1!==L.rank)throw new Error(`Values should be Tensor1D but received shape ${L.shape}`);if(1!==W.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${W.shape}`);if(0!==K.rank)throw new Error(`Default value should be a scalar but received shape ${K.shape}`);const de=H.BV.runKernel(q.O3z,{indices:O,values:L,denseShape:W,defaultValue:K});return{outputIndices:de[0],outputValues:de[1],emptyRowIndicator:de[2],reverseIndexMap:de[3]}}}),sparseReshape:(0,$.op)({sparseReshape_:function Ah(E,b,_){const D=(0,T._1)(E,"inputIndices","sparseReshape","int32"),O=(0,T._1)(b,"inputShape","sparseReshape","int32"),L=(0,T._1)(_,"newShape","sparseReshape","int32");if(2!==D.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${D.shape}`);if(1!==O.rank)throw new Error(`Input shape should be Tensor1D but received shape ${O.shape}`);if(1!==L.rank)throw new Error(`New shape should be Tensor1D but received shape ${L.shape}`);const K=H.BV.runKernel(q.nhH,{inputIndices:D,inputShape:O,newShape:L});return{outputIndices:K[0],outputShape:K[1]}}}),sparseSegmentMean:(0,$.op)({sparseSegmentMean_:function EC(E,b,_){const D=(0,T._1)(E,"data","sparseSegmentMean"),O=(0,T._1)(b,"indices","sparseSegmentMean","int32"),L=(0,T._1)(_,"segmentIds","sparseSegmentMean","int32");if(D.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==O.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${O.shape}`);if(1!==L.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${L.shape}`);return H.BV.runKernel(q.w3H,{data:D,indices:O,segmentIds:L})}}),sparseSegmentSum:(0,$.op)({sparseSegmentSum_:function sm(E,b,_){const D=(0,T._1)(E,"data","sparseSegmentSum"),O=(0,T._1)(b,"indices","sparseSegmentSum","int32"),L=(0,T._1)(_,"segmentIds","sparseSegmentSum","int32");if(D.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==O.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${O.shape}`);if(1!==L.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${L.shape}`);return H.BV.runKernel(q.ZjV,{data:D,indices:O,segmentIds:L})}})},Ga={stringNGrams:(0,$.op)({stringNGrams_:function mo(E,b,_,D,O,L,W,K){const ae=(0,T._1)(E,"data","stringNGrams","string");if("string"!==ae.dtype)throw new Error("Data must be of datatype string");if(1!==ae.shape.length)throw new Error(`Data must be a vector, saw: ${ae.shape}`);const de=(0,T._1)(b,"dataSplits","stringNGrams");if("int32"!==de.dtype)throw new Error("Data splits must be of datatype int32");const lt=H.BV.runKernel(q._JP,{data:ae,dataSplits:de},{separator:_,nGramWidths:D,leftPad:O,rightPad:L,padWidth:W,preserveShortSequences:K});return{nGrams:lt[0],nGramsSplits:lt[1]}}}),stringSplit:(0,$.op)({stringSplit_:function Du(E,b,_=!0){const D=(0,T._1)(E,"input","stringSplit","string"),O=(0,T._1)(b,"delimiter","stringSplit","string");if(1!==D.rank)throw new Error(`Input should be Tensor1D but received shape ${D.shape}`);if(0!==O.rank)throw new Error(`Delimiter should be a scalar but received shape ${O.shape}`);const K=H.BV.runKernel(q.s1s,{input:D,delimiter:O},{skipEmpty:_});return{indices:K[0],values:K[1],shape:K[2]}}}),stringToHashBucketFast:(0,$.op)({stringToHashBucketFast_:function om(E,b){const _=(0,T._1)(E,"input","stringToHashBucketFast","string"),D={numBuckets:b};if(b<=0)throw new Error("Number of buckets must be at least 1");return H.BV.runKernel(q.XkS,{input:_},D)}}),staticRegexReplace:(0,$.op)({staticRegexReplace_:function Rh(E,b,_,D=!0){const O=(0,T._1)(E,"input","staticRegexReplace","string");return H.BV.runKernel(q.e0R,{x:O},{pattern:b,rewrite:_,replaceGlobal:D})}})}},2962:(st,Oe,I)=>{"use strict";I.d(Oe,{s:()=>se});var ce=I(687),ye=I(4251),H=I(7664),q=I(1257);const se=(0,I(4195).op)({pow_:function $(ne,G){let te=(0,q._1)(ne,"base","pow"),Y=(0,q._1)(G,"exp","pow");return[te,Y]=(0,H.makeTypesMatch)(te,Y),ce.BV.runKernel(ye.pe_,{a:te,b:Y})}})},1584:(st,Oe,I)=>{"use strict";I.d(Oe,{A:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({prelu_:function T(se,ne){const G=(0,H._1)(se,"x","prelu"),te=(0,H._1)(ne,"alpha","prelu");return ce.BV.runKernel(ye.o0g,{x:G,alpha:te})}})},3006:(st,Oe,I)=>{"use strict";function ce(ye,H=!1){console.log(ye.toString(H))}I.d(Oe,{S:()=>ce})},6027:(st,Oe,I)=>{"use strict";I.d(Oe,{k:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({real_:function T(se){const G={input:(0,H._1)(se,"input","real")};return ce.BV.runKernel(ye.xJR,G)}})},8586:(st,Oe,I)=>{"use strict";I.d(Oe,{U:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({relu_:function T(se){const G={x:(0,H._1)(se,"x","relu")};return ce.BV.runKernel(ye.qkr,G)}})},4917:(st,Oe,I)=>{"use strict";I.d(Oe,{b:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({relu6_:function T(se){const G={x:(0,H._1)(se,"x","relu6")};return ce.BV.runKernel(ye.SbG,G)}})},5715:(st,Oe,I)=>{"use strict";I.d(Oe,{X:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({reshape_:function T(se,ne){const te={x:(0,H._1)(se,"x","reshape","string_or_numeric")};return ce.BV.runKernel(ye.HZH,te,{shape:ne})}})},8661:(st,Oe,I)=>{"use strict";I.d(Oe,{i:()=>H});var ce=I(1153),ye=I(7431);function H(q,T){if(((0,ce.isTypedArray)(q)&&"string"!==T||Array.isArray(q))&&"complex64"!==T)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===T&&(0,ce.isTypedArray)(q)&&!(q instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,ye.H)(q,[],[],T)}},1876:(st,Oe,I)=>{"use strict";I.r(Oe),I.d(Oe,{calculateShapes:()=>q,validateInput:()=>H,validateUpdateShape:()=>ye});var ce=I(5359);function ye(T,$,se){const ne=$.rank>1?$.shape[$.rank-1]:1,G=$.rank>1?$.rank-1:1,te=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${se.shape}, indices.shape: ${$.shape}, shape: ${T}, sliceDim: ${ne}, and batchDim: ${G}.`;if(se.rank<G)throw new Error(te+` update.rank < ${G}. `);if(T.length<ne+(se.rank-G))throw new Error(te+` Output shape length < ${ne+(se.rank-G)}`);if(se.rank!==G+T.length-ne)throw new Error(te+" update.rank != "+(G+T.length-ne));for(let Y=0;Y<G;++Y)if(se.shape[Y]!==$.shape[Y])throw new Error(te+` updates.shape[${Y}] (${se.shape[Y]}) != indices.shape[${Y}] (${$.shape[Y]}).`);for(let Y=0;Y<se.rank-G;++Y)if(se.shape[Y+G]!==T[Y+ne])throw new Error(te+` updates.shape[${Y+G}] (${se.shape[Y+G]}) != shape[${Y+G}] (${T[Y+G]})`)}function H(T,$,se){if($.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${$.rank}.`);if(T.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${T.rank}.`);if("int32"!==$.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${$.dtype}`);if(se.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${se}`);if(0===se.length){if(0===$.size)throw new Error(`Indices specified for empty output. indices shape: ${$.shape}`);if(0===T.size)throw new Error(`Updates specified for empty output. updates shape: ${T.shape}`)}ye(se,$,T)}function q(T,$,se){const ne=$.shape.length,G=ne>1?$.shape[ne-1]:1,te=se.length;let Y=1;for(let Ne=G;Ne<te;++Ne)Y*=se[Ne];const S=G<1?1:G;return{sliceRank:G,numUpdates:(0,ce.NA)($.shape)/S,sliceSize:Y,strides:[...(0,ce.e3)(se.slice(0,G)),1],outputSize:(0,ce.NA)(se)}}},6139:(st,Oe,I)=>{"use strict";I.d(Oe,{X:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({sigmoid_:function T(se){const G={x:(0,H._1)(se,"x","sigmoid","float32")};return ce.BV.runKernel(ye.a5O,G)}})},930:(st,Oe,I)=>{"use strict";I.d(Oe,{_:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({sqrt_:function T(se){const G={x:(0,H._1)(se,"x","sqrt","float32")};return ce.BV.runKernel(ye.FKq,G)}})},7527:(st,Oe,I)=>{"use strict";I.d(Oe,{h:()=>T});var ce=I(687),ye=I(1257);const T=(0,I(4195).op)({square_:function q($){const se=(0,ye._1)($,"x","square");return ce.BV.runKernel("Square",{x:se},{})}})},6034:(st,Oe,I)=>{"use strict";I.d(Oe,{N:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({step_:function T(se,ne=0){const te={x:(0,H._1)(se,"x","step")};return ce.BV.runKernel(ye.h8e,te,{alpha:ne})}})},1191:(st,Oe,I)=>{"use strict";I.d(Oe,{l:()=>se});var ce=I(687),ye=I(4251),H=I(7664),q=I(1257);const se=(0,I(4195).op)({sub_:function $(ne,G){let te=(0,q._1)(ne,"a","sub"),Y=(0,q._1)(G,"b","sub");return[te,Y]=(0,H.makeTypesMatch)(te,Y),ce.BV.runKernel(ye.Tr8,{a:te,b:Y})}})},9929:(st,Oe,I)=>{"use strict";I.d(Oe,{S:()=>se});var ce=I(687),ye=I(4251),H=I(1257),q=I(3062);const se=(0,I(4195).op)({sum_:function $(ne,G=null,te=!1){let Y=(0,H._1)(ne,"x","sum");return"bool"===Y.dtype&&(Y=(0,q.p)(Y,"int32")),ce.BV.runKernel(ye.GBy,{x:Y},{axis:G,keepDims:te})}})},3905:(st,Oe,I)=>{"use strict";I.d(Oe,{X:()=>H});var ce=I(1257),ye=I(7431);function H(q,T,$){const se=(0,ce.C)(q,$);return(0,ye.H)(q,T,se,$)}},2786:(st,Oe,I)=>{"use strict";I.d(Oe,{w:()=>q});var ce=I(1257),ye=I(5359),H=I(7431);function q(T,$,se){if((0,ye.Cq)(T),null!=$&&3!==$.length)throw new Error("tensor3d() requires shape to have three numbers");const ne=(0,ce.C)(T,se);if(3!==ne.length&&1!==ne.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===ne.length&&null==$)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,H.H)(T,$,ne,se)}},7431:(st,Oe,I)=>{"use strict";I.d(Oe,{H:()=>T});var ce=I(687),ye=I(1216),H=I(5359),q=I(1153);function T($,se,ne,G){if(null==G)G=(0,H.D2)($);else if("complex64"===G)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if((0,ye.$F)($)||(0,ye.Oq)($)){if("float32"!==G&&"int32"!==G)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${G}.`);return ce.BV.backend.createTensorFromGPUData($,se||ne,G)}if(!(0,q.isTypedArray)($)&&!Array.isArray($)&&"number"!=typeof $&&"boolean"!=typeof $&&"string"!=typeof $)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=se){(0,H.Mu)(se);const te=(0,H.NA)(se),Y=(0,H.NA)(ne);(0,H.hu)(te===Y,()=>`Based on the provided shape, [${se}], the tensor should have ${te} values but has ${Y}`);for(let S=0;S<ne.length;++S){const Se=S!==ne.length-1||ne[S]!==(0,H.NA)(se.slice(S));(0,H.hu)(ne[S]===se[S]||!Se,()=>`Error creating a new Tensor. Inferred shape (${ne}) does not match the provided shape (${se}). `)}}return!(0,q.isTypedArray)($)&&!Array.isArray($)&&($=[$]),se=se||ne,$="string"!==G?(0,q.toTypedArray)($,G):(0,q.flatten)($,[],!0),ce.BV.makeTensor($,se,G)}},9194:(st,Oe,I)=>{"use strict";I.d(Oe,{p:()=>S});var ce=I(687),ye=I(2773),H=I(4251),q=I(1257),T=I(5359),$=I(3037),se=I(1844),ne=I(5048),G=I(4195),te=I(6027);const S=(0,G.op)({transpose_:function Y(ee,Se,he){const Ne=(0,q._1)(ee,"x","transpose");if(null==Se&&(Se=Ne.shape.map((_t,Ze)=>Ze).reverse()),T.hu(Ne.rank===Se.length,()=>`Error in transpose: rank of input ${Ne.rank} must match length of perm ${Se}.`),Se.forEach(_t=>{T.hu(_t>=0&&_t<Ne.rank,()=>`All entries in 'perm' must be between 0 and ${Ne.rank-1} but got ${Se}`)}),Ne.rank<=1)return Ne.clone();const Qe={x:Ne},Ke={perm:Se};return"complex64"===Ne.dtype?(0,ye.lu)(()=>{let _t=(0,te.k)(Ne),Ze=(0,se.a)(Ne);return _t=ce.BV.runKernel(H.G3Y,{x:_t},Ke),Ze=ce.BV.runKernel(H.G3Y,{x:Ze},Ke),he&&(Ze=(0,ne.W)(Ze)),(0,$.P)(_t,Ze)}):ce.BV.runKernel(H.G3Y,Qe,Ke)}})},3143:(st,Oe,I)=>{"use strict";I.d(Oe,{P:()=>$});var ce=I(687),ye=I(4251),H=I(1257);const $=(0,I(4195).op)({zerosLike_:function T(se){const G={x:(0,H._1)(se,"x","zerosLike")};return ce.BV.runKernel(ye.RuY,G)}})},4705:(st,Oe,I)=>{"use strict";function ce(ye){return ye instanceof Float32Array||ye instanceof Int32Array||ye instanceof Uint8Array||ye instanceof Uint8ClampedArray}I.d(Oe,{j:()=>ce})},4945:(st,Oe,I)=>{"use strict";I.d(Oe,{es:()=>re,YD:()=>Se,_w:()=>Je,t3:()=>ze,FZ:()=>Ze,Vp:()=>_t,Vi:()=>Ke});var ce=I(5861),ye=I(2918),H=I(5359);const q=20,T=3,$=7;function se(ue,ie,N,Q){const le=(0,H.e3)(ie),Ae=function ne(ue,ie,N,Q){const le=(0,H.NA)(ie),Ae=Q[Q.length-1],v=new Array(Ae).fill(0),Le=ie.length,pe="complex64"===N?S(ue):ue;if(Le>1)for(let _e=0;_e<le/Ae;_e++){const Te=_e*Ae;for(let Ie=0;Ie<Ae;Ie++)v[Ie]=Math.max(v[Ie],G(pe[Te+Ie],0,N).length)}return v}(ue,ie,N,le),v=ie.length,Le=Y(ue,ie,N,le,Ae),pe=["Tensor"];return Q&&(pe.push(`  dtype: ${N}`),pe.push(`  rank: ${v}`),pe.push(`  shape: [${ie}]`),pe.push("  values:")),pe.push(Le.map(_e=>"    "+_e).join("\n")),pe.join("\n")}function G(ue,ie,N){let Q;return Q=Array.isArray(ue)?`${parseFloat(ue[0].toFixed($))} + ${parseFloat(ue[1].toFixed($))}j`:(0,H.HD)(ue)?`'${ue}'`:"bool"===N?te(ue):parseFloat(ue.toFixed($)).toString(),(0,H.oj)(Q,ie)}function te(ue){return 0===ue?"false":"true"}function Y(ue,ie,N,Q,le,Ae=!0){const v="complex64"===N?2:1,Le=ie[0],pe=ie.length;if(0===pe)return"complex64"===N?[G(S(ue)[0],0,N)]:"bool"===N?[te(ue[0])]:[ue[0].toString()];if(1===pe){if(Le>q){let Pe=Array.from(ue.slice(0,T*v)),tt=Array.from(ue.slice((Le-T)*v,Le*v));return"complex64"===N&&(Pe=S(Pe),tt=S(tt)),["["+Pe.map((et,mt)=>G(et,le[mt],N)).join(", ")+", ..., "+tt.map((et,mt)=>G(et,le[Le-T+mt],N)).join(", ")+"]"]}return["["+("complex64"===N?S(ue):Array.from(ue)).map((Ye,Pe)=>G(Ye,le[Pe],N)).join(", ")+"]"]}const _e=ie.slice(1),Te=Q.slice(1),Ie=Q[0]*v,be=[];if(Le>q){for(let De=0;De<T;De++){const Ye=De*Ie;be.push(...Y(ue.slice(Ye,Ye+Ie),_e,N,Te,le,!1))}be.push("...");for(let De=Le-T;De<Le;De++){const Ye=De*Ie;be.push(...Y(ue.slice(Ye,Ye+Ie),_e,N,Te,le,De===Le-1))}}else for(let De=0;De<Le;De++){const Ye=De*Ie;be.push(...Y(ue.slice(Ye,Ye+Ie),_e,N,Te,le,De===Le-1))}const ut=2===pe?",":"";be[0]="["+(Le>0?be[0]+ut:"");for(let De=1;De<be.length-1;De++)be[De]=" "+be[De]+ut;let Ce=",\n";for(let De=2;De<pe;De++)Ce+="\n";return be[be.length-1]=" "+be[be.length-1]+"]"+(Ae?"":Ce),be}function S(ue){const ie=[];for(let N=0;N<ue.length;N+=2)ie.push([ue[N],ue[N+1]]);return ie}var ee=I(1153);class Se{constructor(ie,N,Q){if(this.dtype=N,this.shape=ie.slice(),this.size=H.NA(ie),null!=Q){const le=Q.length;H.hu(le===this.size,()=>`Length of values '${le}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===N)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=Q||H.rQ(N,this.size),this.strides=(0,H.e3)(ie)}set(ie,...N){0===N.length&&(N=[0]),H.hu(N.length===this.rank,()=>`The number of provided coordinates (${N.length}) must match the rank (${this.rank})`);const Q=this.locToIndex(N);this.values[Q]=ie}get(...ie){0===ie.length&&(ie=[0]);let N=0;for(const le of ie){if(le<0||le>=this.shape[N])throw new Error(`Requested out of range element at ${ie}.   Buffer shape=${this.shape}`);N++}let Q=ie[ie.length-1];for(let le=0;le<ie.length-1;++le)Q+=this.strides[le]*ie[le];return this.values[Q]}locToIndex(ie){if(0===this.rank)return 0;if(1===this.rank)return ie[0];let N=ie[ie.length-1];for(let Q=0;Q<ie.length-1;++Q)N+=this.strides[Q]*ie[Q];return N}indexToLoc(ie){if(0===this.rank)return[];if(1===this.rank)return[ie];const N=new Array(this.shape.length);for(let Q=0;Q<N.length-1;++Q)N[Q]=Math.floor(ie/this.strides[Q]),ie-=N[Q]*this.strides[Q];return N[N.length-1]=ie,N}get rank(){return this.shape.length}toTensor(){return he().makeTensor(this.values,this.shape,this.dtype)}}let he=null,Ne=null,Qe=null;function Ke(ue){he=ue}function _t(ue){Ne=ue}function Ze(ue){Qe=ue}class re{constructor(ie,N,Q,le){this.kept=!1,this.isDisposedInternal=!1,this.shape=ie.slice(),this.dtype=N||"float32",this.size=H.NA(ie),this.strides=(0,H.e3)(ie),this.dataId=Q,this.id=le,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){var ie=this;return(0,ce.Z)(function*(){const N=yield ie.data();return Ne.buffer(ie.shape,ie.dtype,N)})()}bufferSync(){return Ne.buffer(this.shape,this.dtype,this.dataSync())}array(){var ie=this;return(0,ce.Z)(function*(){const N=yield ie.data();return(0,H.GX)(ie.shape,N,"complex64"===ie.dtype)})()}arraySync(){return(0,H.GX)(this.shape,this.dataSync(),"complex64"===this.dtype)}data(){var ie=this;return(0,ce.Z)(function*(){ie.throwIfDisposed();const N=he().read(ie.dataId);if("string"===ie.dtype){const Q=yield N;try{return Q.map(le=>ee.decodeString(le))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return N})()}dataToGPU(ie){return this.throwIfDisposed(),he().readToGPU(this.dataId,ie)}dataSync(){this.throwIfDisposed();const ie=he().readSync(this.dataId);if("string"===this.dtype)try{return ie.map(N=>ee.decodeString(N))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return ie}bytes(){var ie=this;return(0,ce.Z)(function*(){ie.throwIfDisposed();const N=yield he().read(ie.dataId);return"string"===ie.dtype?N:new Uint8Array(N.buffer)})()}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),he().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(ie=!1){return Ne.print(this,ie)}clone(){return this.throwIfDisposed(),Ne.clone(this)}toString(ie=!1){return se(this.dataSync(),this.shape,this.dtype,ie)}cast(ie){return this.throwIfDisposed(),Ne.cast(this,ie)}variable(ie=!0,N,Q){return this.throwIfDisposed(),he().makeVariable(this,ie,N,Q)}}function ze(){return(0,ye.R)("Tensor",()=>re)}Object.defineProperty(re,Symbol.hasInstance,{value:ue=>!!ue&&null!=ue.data&&null!=ue.dataSync&&null!=ue.throwIfDisposed}),ze();class Je extends re{constructor(ie,N,Q,le){super(ie.shape,ie.dtype,ie.dataId,le),this.trainable=N,this.name=Q}assign(ie){if(ie.dtype!==this.dtype)throw new Error(`dtype of the new value (${ie.dtype}) and previous value (${this.dtype}) must match`);if(!H.cO(ie.shape,this.shape))throw new Error(`shape of the new value (${ie.shape}) and previous value (${this.shape}) must match`);he().disposeTensor(this),this.dataId=ie.dataId,he().incRef(this,null)}dispose(){he().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Je,Symbol.hasInstance,{value:ue=>ue instanceof re&&null!=ue.assign&&ue.assign instanceof Function})},7664:(st,Oe,I)=>{"use strict";I.r(Oe),I.d(Oe,{assertTypesMatch:()=>T,getTensorsInContainer:()=>se,isTensorInList:()=>$,makeTypesMatch:()=>q});var ce=I(4945),ye=I(1216),H=I(5359);function q(te,Y){if(te.dtype===Y.dtype)return[te,Y];const S=(0,ye.x8)(te.dtype,Y.dtype);return[te.cast(S),Y.cast(S)]}function T(te,Y){(0,H.hu)(te.dtype===Y.dtype,()=>`The dtypes of the first(${te.dtype}) and second(${Y.dtype}) input must match`)}function $(te,Y){return Y.some(S=>S.id===te.id)}function se(te){const Y=[];return ne(te,Y,new Set),Y}function ne(te,Y,S){if(null==te)return;if(te instanceof ce.es)return void Y.push(te);if(!function G(te){return Array.isArray(te)||"object"==typeof te}(te))return;const ee=te;for(const Se in ee){const he=ee[Se];S.has(he)||(S.add(he),ne(he,Y,S))}}},1257:(st,Oe,I)=>{"use strict";I.d(Oe,{C:()=>se,_1:()=>te,sI:()=>Y});var ce=I(687),ye=I(5527),H=I(4945),q=I(1216),T=I(1153),$=I(5359);function se(S,ee){let Se=S;if((0,T.isTypedArray)(S))return"string"===ee?[]:[S.length];if((0,q.Oq)(S))return[S.height,S.width*(S.channels||"RGBA").length];if((0,q.$F)(S))return[S.buffer.size/(null==ee?4:(0,$.bT)(ee))];if(!Array.isArray(S))return[];const he=[];for(;Array.isArray(Se)||(0,T.isTypedArray)(Se)&&"string"!==ee;)he.push(Se.length),Se=Se[0];return Array.isArray(S)&&(0,ye.OB)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&ne(S,he,[]),he}function ne(S,ee,Se){if(Se=Se||[],!Array.isArray(S)&&!(0,T.isTypedArray)(S))return void(0,$.hu)(0===ee.length,()=>`Element arr[${Se.join("][")}] is a primitive, but should be an array/TypedArray of ${ee[0]} elements`);(0,$.hu)(ee.length>0,()=>`Element arr[${Se.join("][")}] should be a primitive, but is an array of ${S.length} elements`),(0,$.hu)(S.length===ee[0],()=>`Element arr[${Se.join("][")}] should have ${ee[0]} elements, but has ${S.length} elements`);const he=ee.slice(1);for(let Ne=0;Ne<S.length;++Ne)ne(S[Ne],he,Se.concat(Ne))}function G(S,ee,Se,he){if("string_or_numeric"!==S){if(null==S)throw new Error("Expected dtype cannot be null.");if("numeric"!==S&&S!==ee||"numeric"===S&&"string"===ee)throw new Error(`Argument '${Se}' passed to '${he}' must be ${S} tensor, but got ${ee} tensor`)}}function te(S,ee,Se,he="numeric"){if(S instanceof(0,H.t3)())return G(he,S.dtype,ee,Se),S;let Ne=(0,$.D2)(S);if("string"!==Ne&&["bool","int32","float32"].indexOf(he)>=0&&(Ne=he),G(he,Ne,ee,Se),null==S||!(0,T.isTypedArray)(S)&&!Array.isArray(S)&&"number"!=typeof S&&"boolean"!=typeof S&&"string"!=typeof S)throw new Error(`Argument '${ee}' passed to '${Se}' must be a Tensor or TensorLike, but got '${null==S?"null":S.constructor.name}'`);const Qe=se(S,Ne);!(0,T.isTypedArray)(S)&&!Array.isArray(S)&&(S=[S]);const _t="string"!==Ne?(0,T.toTypedArray)(S,Ne):(0,T.flatten)(S,[],!0);return ce.BV.makeTensor(_t,Qe,Ne)}function Y(S,ee,Se,he="numeric"){if(!Array.isArray(S))throw new Error(`Argument ${ee} passed to ${Se} must be a \`Tensor[]\` or \`TensorLike[]\``);return S.map((Qe,Ke)=>te(Qe,`${ee}[${Ke}]`,Se,he))}},1216:(st,Oe,I)=>{"use strict";I.d(Oe,{$F:()=>te,Oq:()=>G,x8:()=>se,yw:()=>ce,z4:()=>ne});var ce=function(Y){return Y.R0="R0",Y.R1="R1",Y.R2="R2",Y.R3="R3",Y.R4="R4",Y.R5="R5",Y.R6="R6",Y}(ce||{}),ye=function(Y){return Y.float32="float32",Y.int32="int32",Y.bool="int32",Y.complex64="complex64",Y}(ye||{}),H=function(Y){return Y.float32="float32",Y.int32="int32",Y.bool="bool",Y.complex64="complex64",Y}(H||{}),q=function(Y){return Y.float32="float32",Y.int32="float32",Y.bool="float32",Y.complex64="complex64",Y}(q||{}),T=function(Y){return Y.float32="complex64",Y.int32="complex64",Y.bool="complex64",Y.complex64="complex64",Y}(T||{});const $={float32:q,int32:ye,bool:H,complex64:T};function se(Y,S){if("string"===Y||"string"===S){if("string"===Y&&"string"===S)return"string";throw new Error(`Can not upcast ${Y} with ${S}`)}return $[Y][S]}function ne(Y){return se(Y,"int32")}function G(Y){return null!=Y&&"object"==typeof Y&&"texture"in Y&&Y.texture instanceof WebGLTexture}function te(Y){return typeof GPUBuffer<"u"&&null!=Y&&"object"==typeof Y&&"buffer"in Y&&Y.buffer instanceof GPUBuffer}},1153:(st,Oe,I)=>{"use strict";I.r(Oe),I.d(Oe,{arraysEqual:()=>H.cO,arraysEqualWithNull:()=>H.DK,assert:()=>H.hu,assertNonNegativeIntegerDimensions:()=>H.Mu,assertNonNull:()=>H.Cq,assertShapesMatch:()=>H.k5,bytesFromStringArray:()=>H.Ub,bytesPerElement:()=>H.bT,checkConversionForErrors:()=>H.D5,clamp:()=>H.uZ,computeStrides:()=>H.e3,convertBackendValuesAndArrayBuffer:()=>H.KS,createScalarValue:()=>Je,createShuffledIndices:()=>H.U$,decodeString:()=>Ae,distSquared:()=>H.E7,encodeString:()=>le,fetch:()=>Q,fingerPrint64:()=>ze,flatten:()=>Le,getArrayFromDType:()=>H.rQ,getTypedArrayFromDType:()=>H.WP,hasEncodingLoss:()=>H.QB,hexToLong:()=>se,indexToLoc:()=>H.NE,inferDtype:()=>H.D2,inferFromImplicitShape:()=>H.JZ,isBoolean:()=>H.jn,isFunction:()=>H.mf,isInt:()=>H.GN,isNumber:()=>H.hj,isPromise:()=>H.tI,isScalarShape:()=>H.xH,isString:()=>H.HD,isTypedArray:()=>v,isValidDtype:()=>H.LP,locToIndex:()=>H.qy,makeOnesTypedArray:()=>H.p8,makeZerosNestedTypedArray:()=>H.l6,makeZerosTypedArray:()=>H.wT,nearestDivisor:()=>H.jP,nearestLargerEven:()=>H.nY,now:()=>N,parseAxisParam:()=>H.EC,randUniform:()=>H.bj,repeatedTry:()=>H.WD,rightPad:()=>H.oj,shuffle:()=>H.TV,shuffleCombo:()=>H.d7,sizeFromShape:()=>H.NA,sizeToSquarishShape:()=>H.YP,squeezeShape:()=>H.bp,sum:()=>H.Sm,swap:()=>H.LF,tanh:()=>H.AE,toNestedArray:()=>H.GX,toTypedArray:()=>ie});var ce=I(5527),ye=I(4705),H=I(5359),q=I(186);const $=I.n(q)()||q;function se(pe){return $.fromString(pe,!0,16)}const ne=se("c3a5c85c97cb3127"),G=se("b492b66fbe98f273"),te=se("9ae16a3b2f90404f");function Y(pe){return pe.xor(pe.shru(47))}function S(pe,_e,Te){const Ie=pe.slice(_e,_e+Te);return $.fromBytes(Array.from(Ie),!0,!0)}function ee(pe,_e){return S(pe,_e,8)}function Se(pe,_e){return S(pe,_e,4)}function he(pe,_e){return 0===_e?pe:pe.shru(_e).or(pe.shl(64-_e))}function Ne(pe,_e,Te=se("9ddfea08eb382d69")){let Ie=pe.xor(_e).mul(Te);Ie=Ie.xor(Ie.shru(47));let be=_e.xor(Ie).mul(Te);return be=be.xor(be.shru(47)),be=be.mul(Te),be}function Ke(pe,_e,Te,Ie){return function Qe(pe,_e,Te,Ie,be,ut){be=be.add(pe),ut=he(ut.add(be).add(Ie),21);const Ce=be;return be=(be=be.add(_e)).add(Te),ut=ut.add(he(be,44)),[be.add(Ie),ut.add(Ce)]}(ee(pe,_e),ee(pe,_e+8),ee(pe,_e+16),ee(pe,_e+24),Te,Ie)}function ze(pe,_e=pe.length){const Te=$.fromNumber(81,!0);if(_e<=32)return _e<=16?function _t(pe,_e=pe.length){if(_e>=8){const Te=te.add(2*_e),Ie=ee(pe,0).add(te),be=ee(pe,_e-8);return Ne(he(be,37).mul(Te).add(Ie),he(Ie,25).add(be).mul(Te),Te)}if(_e>=4){const Te=te.add(2*_e);return Ne(Se(pe,0).shl(3).add(_e),Se(pe,_e-4),Te)}if(_e>0){const Ce=_e+(pe[_e-1]<<2);return Y(te.mul(pe[0]+(pe[_e>>1]<<8)).xor(ne.mul(Ce))).mul(te)}return te}(pe,_e):function Ze(pe,_e=pe.length){const Te=te.add(2*_e),Ie=ee(pe,0).mul(G),be=ee(pe,8),ut=ee(pe,_e-8).mul(Te),Ce=ee(pe,_e-16).mul(te);return Ne(he(Ie.add(be),43).add(he(ut,30)).add(Ce),Ie.add(he(be.add(te),18)).add(ut),Te)}(pe,_e);if(_e<=64)return function re(pe,_e=pe.length){const Te=te.add(2*_e),Ie=ee(pe,0).mul(te),be=ee(pe,8),ut=ee(pe,_e-8).mul(Te),Ce=ee(pe,_e-16).mul(te),De=he(Ie.add(be),43).add(he(ut,30)).add(Ce),Ye=Ne(De,Ie.add(he(be.add(te),18)).add(ut),Te),Pe=ee(pe,16).mul(Te),tt=ee(pe,24),et=De.add(ee(pe,_e-32)).mul(Te),mt=Ye.add(ee(pe,_e-24)).mul(Te);return Ne(he(Pe.add(tt),43).add(he(et,30)).add(mt),Pe.add(he(tt.add(Ie),18)).add(et),Te)}(pe,_e);let Ie=Te,be=Te.mul(G).add(113),ut=Y(be.mul(te).add(113)).mul(te),Ce=[$.UZERO,$.UZERO],De=[$.UZERO,$.UZERO];Ie=Ie.mul(te).add(ee(pe,0));let Ye=0;const Pe=64*(_e-1>>6),tt=Pe+(_e-1&63)-63;do{Ie=he(Ie.add(be).add(Ce[0]).add(ee(pe,Ye+8)),37).mul(G),be=he(be.add(Ce[1]).add(ee(pe,Ye+48)),42).mul(G),Ie=Ie.xor(De[1]),be=be.add(Ce[0]).add(ee(pe,Ye+40)),ut=he(ut.add(De[0]),33).mul(G),Ce=Ke(pe,Ye,Ce[1].mul(G),Ie.add(De[0])),De=Ke(pe,Ye+32,ut.add(De[1]),be.add(ee(pe,Ye+16))),[ut,Ie]=[Ie,ut],Ye+=64}while(Ye!==Pe);const et=G.add(ut.and(255).shl(1));return Ye=tt,De[0]=De[0].add(_e-1&63),Ce[0]=Ce[0].add(De[0]),De[0]=De[0].add(Ce[0]),Ie=he(Ie.add(be).add(Ce[0]).add(ee(pe,Ye+8)),37).mul(et),be=he(be.add(Ce[1]).add(ee(pe,Ye+48)),42).mul(et),Ie=Ie.xor(De[1].mul(9)),be=be.add(Ce[0].mul(9).add(ee(pe,Ye+40))),ut=he(ut.add(De[0]),33).mul(et),Ce=Ke(pe,Ye,Ce[1].mul(et),Ie.add(De[0])),De=Ke(pe,Ye+32,ut.add(De[1]),be.add(ee(pe,Ye+16))),[ut,Ie]=[Ie,ut],Ne(Ne(Ce[0],De[0],et).add(Y(be).mul(ne)).add(ut),Ne(Ce[1],De[1],et).add(Ie),et)}function Je(pe,_e){return"string"===_e?le(pe):ie([pe],_e)}function ie(pe,_e){if("string"===_e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(pe)&&(pe=Le(pe)),(0,ce.OB)().getBool("DEBUG")&&H.D5(pe,_e),function ue(pe,_e){return pe instanceof Float32Array&&"float32"===_e||pe instanceof Int32Array&&"int32"===_e||pe instanceof Uint8Array&&"bool"===_e}(pe,_e))return pe;if(null==_e||"float32"===_e||"complex64"===_e)return new Float32Array(pe);if("int32"===_e)return new Int32Array(pe);if("bool"===_e){const Te=new Uint8Array(pe.length);for(let Ie=0;Ie<Te.length;++Ie)0!==Math.round(pe[Ie])&&(Te[Ie]=1);return Te}throw new Error(`Unknown data type ${_e}`)}function N(){return(0,ce.OB)().platform.now()}function Q(pe,_e){return(0,ce.OB)().platform.fetch(pe,_e)}function le(pe,_e="utf-8"){return _e=_e||"utf-8",(0,ce.OB)().platform.encode(pe,_e)}function Ae(pe,_e="utf-8"){return _e=_e||"utf-8",(0,ce.OB)().platform.decode(pe,_e)}function v(pe){return null!=(0,ce.OB)().platform.isTypedArray?(0,ce.OB)().platform.isTypedArray(pe):(0,ye.j)(pe)}function Le(pe,_e=[],Te=!1){if(null==_e&&(_e=[]),"boolean"==typeof pe||"number"==typeof pe||"string"==typeof pe||H.tI(pe)||null==pe||v(pe)&&Te)_e.push(pe);else if(Array.isArray(pe)||v(pe))for(let Ie=0;Ie<pe.length;++Ie)Le(pe[Ie],_e,Te);else{let Ie=-1;for(const be of Object.keys(pe))/^([1-9]+[0-9]*|0)$/.test(be)&&(Ie=Math.max(Ie,Number(be)));for(let be=0;be<=Ie;be++)Le(pe[be],_e,Te)}return _e}},5359:(st,Oe,I)=>{"use strict";function ce(ge){let Be=ge.length,Xe=0;for(;Be>0;)Xe=Math.random()*Be|0,Be--,T(ge,Be,Xe)}function ye(ge,Be){if(ge.length!==Be.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${ge.length}Second array length was ${Be.length}`);let Xe=ge.length,vt=0;for(;Xe>0;)vt=Math.random()*Xe|0,Xe--,T(ge,Xe,vt),T(Be,Xe,vt)}function H(ge,Be,Xe){return Math.max(ge,Math.min(Be,Xe))}function q(ge){return ge%2==0?ge:ge+1}function T(ge,Be,Xe){const vt=ge[Be];ge[Be]=ge[Xe],ge[Xe]=vt}function $(ge){let Be=0;for(let Xe=0;Xe<ge.length;Xe++)Be+=ge[Xe];return Be}function se(ge,Be){const Xe=Math.random();return Be*Xe+(1-Xe)*ge}function ne(ge,Be){let Xe=0;for(let vt=0;vt<ge.length;vt++){const cn=Number(ge[vt])-Number(Be[vt]);Xe+=cn*cn}return Xe}function G(ge,Be){if(!ge)throw new Error("string"==typeof Be?Be:Be())}function te(ge,Be,Xe=""){G(he(ge,Be),()=>Xe+` Shapes ${ge} and ${Be} must match`)}function Y(ge){G(null!=ge,()=>"The input to the tensor constructor must be a non-null value.")}function S(ge){if(0===ge.length)return 1;let Be=ge[0];for(let Xe=1;Xe<ge.length;Xe++)Be*=ge[Xe];return Be}function ee(ge){return 0===ge.length}function Se(ge,Be){if(ge===Be)return!0;if(null==ge||null==Be||ge.length!==Be.length)return!1;for(let Xe=0;Xe<ge.length;Xe++)if(null!==ge[Xe]&&null!==Be[Xe]&&ge[Xe]!==Be[Xe])return!1;return!0}function he(ge,Be){if(ge===Be)return!0;if(null==ge||null==Be||ge.length!==Be.length)return!1;for(let Xe=0;Xe<ge.length;Xe++)if(ge[Xe]!==Be[Xe])return!1;return!0}function Ne(ge){return ge%1==0}function Qe(ge){if(null!=Math.tanh)return Math.tanh(ge);if(ge===1/0)return 1;if(ge===-1/0)return-1;{const Be=Math.exp(2*ge);return(Be-1)/(Be+1)}}function Ke(ge){const Be=Math.ceil(Math.sqrt(ge));return[Be,Math.ceil(ge/Be)]}function _t(ge){const Be=new Uint32Array(ge);for(let Xe=0;Xe<ge;++Xe)Be[Xe]=Xe;return ce(Be),Be}function Ze(ge,Be){return Be<=ge.length?ge:ge+" ".repeat(Be-ge.length)}function re(ge,Be=(cn=>0),Xe,vt){return new Promise((cn,un)=>{let kn=0;const Cn=()=>{if(ge())return void cn();kn++;const lr=Be(kn);null!=Xe&&kn>=Xe?un():null!=vt?vt(Cn,lr):setTimeout(Cn,lr)};Cn()})}function ze(ge,Be){let Xe=1,vt=-1;for(let un=0;un<ge.length;++un)if(ge[un]>=0)Xe*=ge[un];else if(-1===ge[un]){if(-1!==vt)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${vt} and dim ${un}`);vt=un}else if(ge[un]<0)throw Error(`Shapes can not be < 0. Found ${ge[un]} at dim ${un}`);if(-1===vt){if(Be>0&&Be!==Xe)throw Error(`Size(${Be}) must match the product of shape ${ge}`);return ge}if(0===Xe)throw Error(`Cannot infer the missing size in [${ge}] when there are 0 elements`);if(Be%Xe!=0)throw Error(`The implicit shape can't be a fractional number. Got ${Be} / ${Xe}`);const cn=ge.slice();return cn[vt]=Be/Xe,cn}function Je(ge,Be){const Xe=Be.length;return G((ge=null==ge?Be.map((vt,cn)=>cn):[].concat(ge)).every(vt=>vt>=-Xe&&vt<Xe),()=>`All values in axis param must be in range [-${Xe}, ${Xe}) but got axis ${ge}`),G(ge.every(vt=>Ne(vt)),()=>`All values in axis param must be integers but got axis ${ge}`),ge.map(vt=>vt<0?Xe+vt:vt)}function ue(ge,Be){const Xe=[],vt=[],cn=null!=Be&&Array.isArray(Be)&&0===Be.length,un=null==Be||cn?null:Je(Be,ge).sort();let kn=0;for(let Cn=0;Cn<ge.length;++Cn){if(null!=un){if(un[kn]===Cn&&1!==ge[Cn])throw new Error(`Can't squeeze axis ${Cn} since its dim '${ge[Cn]}' is not 1`);(null==un[kn]||un[kn]>Cn)&&1===ge[Cn]&&(Xe.push(ge[Cn]),vt.push(Cn)),un[kn]<=Cn&&kn++}1!==ge[Cn]&&(Xe.push(ge[Cn]),vt.push(Cn))}return{newShape:Xe,keptDims:vt}}function ie(ge,Be){return N(ge,Be)}function N(ge,Be){let Xe=null;if(null==ge||"float32"===ge)Xe=new Float32Array(Be);else if("int32"===ge)Xe=new Int32Array(Be);else if("bool"===ge)Xe=new Uint8Array(Be);else{if("string"!==ge)throw new Error(`Unknown data type ${ge}`);Xe=new Array(Be)}return Xe}function Q(ge,Be){for(let Xe=0;Xe<ge.length;Xe++){const vt=ge[Xe];if(isNaN(vt)||!isFinite(vt))throw Error(`A tensor of type ${Be} being uploaded contains ${vt}.`)}}function le(ge){return"bool"===ge||"complex64"===ge||"float32"===ge||"int32"===ge||"string"===ge}function Ae(ge,Be){return!("complex64"===Be||"float32"===Be&&"complex64"!==ge||"int32"===Be&&"float32"!==ge&&"complex64"!==ge||"bool"===Be&&"bool"===ge)}function v(ge){if("float32"===ge||"int32"===ge)return 4;if("complex64"===ge)return 8;if("bool"===ge)return 1;throw new Error(`Unknown dtype ${ge}`)}function Le(ge){if(null==ge)return 0;let Be=0;return ge.forEach(Xe=>Be+=Xe.length),Be}function pe(ge){return"string"==typeof ge||ge instanceof String}function _e(ge){return"boolean"==typeof ge}function Te(ge){return"number"==typeof ge}function Ie(ge){return Array.isArray(ge)?Ie(ge[0]):ge instanceof Float32Array?"float32":ge instanceof Int32Array||ge instanceof Uint8Array||ge instanceof Uint8ClampedArray?"int32":Te(ge)?"float32":pe(ge)?"string":_e(ge)?"bool":"float32"}function be(ge){return!!(ge&&ge.constructor&&ge.call&&ge.apply)}function ut(ge,Be){for(let Xe=Be;Xe<ge;++Xe)if(ge%Xe==0)return Xe;return ge}function Ce(ge){const Be=ge.length;if(Be<2)return[];const Xe=new Array(Be-1);Xe[Be-2]=ge[Be-1];for(let vt=Be-3;vt>=0;--vt)Xe[vt]=Xe[vt+1]*ge[vt+1];return Xe}function De(ge,Be,Xe,vt=!1){const cn=new Array;if(1===Be.length){const un=Be[0]*(vt?2:1);for(let kn=0;kn<un;kn++)cn[kn]=Xe[ge+kn]}else{const un=Be[0],kn=Be.slice(1),Cn=kn.reduce((lr,hi)=>lr*hi)*(vt?2:1);for(let lr=0;lr<un;lr++)cn[lr]=De(ge+lr*Cn,kn,Xe,vt)}return cn}function Ye(ge,Be,Xe=!1){if(0===ge.length)return Be[0];const vt=ge.reduce((cn,un)=>cn*un)*(Xe?2:1);if(0===vt)return[];if(vt!==Be.length)throw new Error(`[${ge}] does not match the input size ${Be.length}${Xe?" for a complex tensor":""}.`);return De(0,ge,Be,Xe)}function Pe(ge,Be){if(Array.isArray(ge))return ge;if("float32"===Be)return ge instanceof Float32Array?ge:new Float32Array(ge);if("int32"===Be)return ge instanceof Int32Array?ge:new Int32Array(ge);if("bool"===Be||"string"===Be)return Uint8Array.from(new Int32Array(ge));throw new Error(`Unknown dtype ${Be}`)}function tt(ge,Be){const Xe=et(ge,Be);for(let vt=0;vt<Xe.length;vt++)Xe[vt]=1;return Xe}function et(ge,Be){if(null==Be||"float32"===Be||"complex64"===Be)return new Float32Array(ge);if("int32"===Be)return new Int32Array(ge);if("bool"===Be)return new Uint8Array(ge);throw new Error(`Unknown data type ${Be}`)}function mt(ge,Be){const Xe=ge.reduce((vt,cn)=>vt*cn,1);if(null==Be||"float32"===Be)return Ye(ge,new Float32Array(Xe));if("int32"===Be)return Ye(ge,new Int32Array(Xe));if("bool"===Be)return Ye(ge,new Uint8Array(Xe));throw new Error(`Unknown data type ${Be}`)}function qe(ge){ge.forEach(Be=>{G(Number.isInteger(Be)&&Be>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${ge}].`)})}function At(ge,Be,Xe){if(0===Be)return 0;if(1===Be)return ge[0];let vt=ge[ge.length-1];for(let cn=0;cn<ge.length-1;++cn)vt+=Xe[cn]*ge[cn];return vt}function Wn(ge,Be,Xe){if(0===Be)return[];if(1===Be)return[ge];const vt=new Array(Be);for(let cn=0;cn<vt.length-1;++cn)vt[cn]=Math.floor(ge/Xe[cn]),ge-=vt[cn]*Xe[cn];return vt[vt.length-1]=ge,vt}function Ut(ge){return ge&&ge.then&&"function"==typeof ge.then}I.d(Oe,{AE:()=>Qe,Cq:()=>Y,D2:()=>Ie,D5:()=>Q,DK:()=>Se,E7:()=>ne,EC:()=>Je,GN:()=>Ne,GX:()=>Ye,HD:()=>pe,JZ:()=>ze,KS:()=>Pe,LF:()=>T,LP:()=>le,Mu:()=>qe,NA:()=>S,NE:()=>Wn,QB:()=>Ae,Sm:()=>$,TV:()=>ce,U$:()=>_t,Ub:()=>Le,WD:()=>re,WP:()=>ie,YP:()=>Ke,bT:()=>v,bj:()=>se,bp:()=>ue,cO:()=>he,d7:()=>ye,e3:()=>Ce,hj:()=>Te,hu:()=>G,jP:()=>ut,jn:()=>_e,k5:()=>te,l6:()=>mt,mf:()=>be,nY:()=>q,oj:()=>Ze,p8:()=>tt,qy:()=>At,rQ:()=>N,tI:()=>Ut,uZ:()=>H,wT:()=>et,xH:()=>ee})},186:st=>{st.exports=I;var Oe=null;try{Oe=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function I(ie,N,Q){this.low=0|ie,this.high=0|N,this.unsigned=!!Q}function ce(ie){return!0===(ie&&ie.__isLong__)}Object.defineProperty(I.prototype,"__isLong__",{value:!0}),I.isLong=ce;var ye={},H={};function q(ie,N){var Q,le,Ae;return N?(Ae=0<=(ie>>>=0)&&ie<256)&&(le=H[ie])?le:(Q=$(ie,(0|ie)<0?-1:0,!0),Ae&&(H[ie]=Q),Q):(Ae=-128<=(ie|=0)&&ie<128)&&(le=ye[ie])?le:(Q=$(ie,ie<0?-1:0,!1),Ae&&(ye[ie]=Q),Q)}function T(ie,N){if(isNaN(ie))return N?Qe:Ne;if(N){if(ie<0)return Qe;if(ie>=ee)return ze}else{if(ie<=-Se)return Je;if(ie+1>=Se)return re}return ie<0?T(-ie,N).neg():$(ie%S|0,ie/S|0,N)}function $(ie,N,Q){return new I(ie,N,Q)}I.fromInt=q,I.fromNumber=T,I.fromBits=$;var se=Math.pow;function ne(ie,N,Q){if(0===ie.length)throw Error("empty string");if("NaN"===ie||"Infinity"===ie||"+Infinity"===ie||"-Infinity"===ie)return Ne;if("number"==typeof N?(Q=N,N=!1):N=!!N,(Q=Q||10)<2||36<Q)throw RangeError("radix");var le;if((le=ie.indexOf("-"))>0)throw Error("interior hyphen");if(0===le)return ne(ie.substring(1),N,Q).neg();for(var Ae=T(se(Q,8)),v=Ne,Le=0;Le<ie.length;Le+=8){var pe=Math.min(8,ie.length-Le),_e=parseInt(ie.substring(Le,Le+pe),Q);if(pe<8){var Te=T(se(Q,pe));v=v.mul(Te).add(T(_e))}else v=(v=v.mul(Ae)).add(T(_e))}return v.unsigned=N,v}function G(ie,N){return"number"==typeof ie?T(ie,N):"string"==typeof ie?ne(ie,N):$(ie.low,ie.high,"boolean"==typeof N?N:ie.unsigned)}I.fromString=ne,I.fromValue=G;var S=4294967296,ee=S*S,Se=ee/2,he=q(1<<24),Ne=q(0);I.ZERO=Ne;var Qe=q(0,!0);I.UZERO=Qe;var Ke=q(1);I.ONE=Ke;var _t=q(1,!0);I.UONE=_t;var Ze=q(-1);I.NEG_ONE=Ze;var re=$(-1,2147483647,!1);I.MAX_VALUE=re;var ze=$(-1,-1,!0);I.MAX_UNSIGNED_VALUE=ze;var Je=$(0,-2147483648,!1);I.MIN_VALUE=Je;var ue=I.prototype;ue.toInt=function(){return this.unsigned?this.low>>>0:this.low},ue.toNumber=function(){return this.unsigned?(this.high>>>0)*S+(this.low>>>0):this.high*S+(this.low>>>0)},ue.toString=function(N){if((N=N||10)<2||36<N)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Je)){var Q=T(N),le=this.div(Q),Ae=le.mul(Q).sub(this);return le.toString(N)+Ae.toInt().toString(N)}return"-"+this.neg().toString(N)}for(var v=T(se(N,6),this.unsigned),Le=this,pe="";;){var _e=Le.div(v),Ie=(Le.sub(_e.mul(v)).toInt()>>>0).toString(N);if((Le=_e).isZero())return Ie+pe;for(;Ie.length<6;)Ie="0"+Ie;pe=""+Ie+pe}},ue.getHighBits=function(){return this.high},ue.getHighBitsUnsigned=function(){return this.high>>>0},ue.getLowBits=function(){return this.low},ue.getLowBitsUnsigned=function(){return this.low>>>0},ue.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Je)?64:this.neg().getNumBitsAbs();for(var N=0!=this.high?this.high:this.low,Q=31;Q>0&&!(N&1<<Q);Q--);return 0!=this.high?Q+33:Q+1},ue.isZero=function(){return 0===this.high&&0===this.low},ue.eqz=ue.isZero,ue.isNegative=function(){return!this.unsigned&&this.high<0},ue.isPositive=function(){return this.unsigned||this.high>=0},ue.isOdd=function(){return 1==(1&this.low)},ue.isEven=function(){return 0==(1&this.low)},ue.equals=function(N){return ce(N)||(N=G(N)),(this.unsigned===N.unsigned||this.high>>>31!=1||N.high>>>31!=1)&&this.high===N.high&&this.low===N.low},ue.eq=ue.equals,ue.notEquals=function(N){return!this.eq(N)},ue.neq=ue.notEquals,ue.ne=ue.notEquals,ue.lessThan=function(N){return this.comp(N)<0},ue.lt=ue.lessThan,ue.lessThanOrEqual=function(N){return this.comp(N)<=0},ue.lte=ue.lessThanOrEqual,ue.le=ue.lessThanOrEqual,ue.greaterThan=function(N){return this.comp(N)>0},ue.gt=ue.greaterThan,ue.greaterThanOrEqual=function(N){return this.comp(N)>=0},ue.gte=ue.greaterThanOrEqual,ue.ge=ue.greaterThanOrEqual,ue.compare=function(N){if(ce(N)||(N=G(N)),this.eq(N))return 0;var Q=this.isNegative(),le=N.isNegative();return Q&&!le?-1:!Q&&le?1:this.unsigned?N.high>>>0>this.high>>>0||N.high===this.high&&N.low>>>0>this.low>>>0?-1:1:this.sub(N).isNegative()?-1:1},ue.comp=ue.compare,ue.negate=function(){return!this.unsigned&&this.eq(Je)?Je:this.not().add(Ke)},ue.neg=ue.negate,ue.add=function(N){ce(N)||(N=G(N));var Ie=0,be=0,ut=0,Ce=0;return ut+=(Ce+=(65535&this.low)+(65535&N.low))>>>16,be+=(ut+=(this.low>>>16)+(N.low>>>16))>>>16,Ie+=(be+=(65535&this.high)+(65535&N.high))>>>16,Ie+=(this.high>>>16)+(N.high>>>16),$((ut&=65535)<<16|(Ce&=65535),(Ie&=65535)<<16|(be&=65535),this.unsigned)},ue.subtract=function(N){return ce(N)||(N=G(N)),this.add(N.neg())},ue.sub=ue.subtract,ue.multiply=function(N){if(this.isZero())return Ne;if(ce(N)||(N=G(N)),Oe)return $(Oe.mul(this.low,this.high,N.low,N.high),Oe.get_high(),this.unsigned);if(N.isZero())return Ne;if(this.eq(Je))return N.isOdd()?Je:Ne;if(N.eq(Je))return this.isOdd()?Je:Ne;if(this.isNegative())return N.isNegative()?this.neg().mul(N.neg()):this.neg().mul(N).neg();if(N.isNegative())return this.mul(N.neg()).neg();if(this.lt(he)&&N.lt(he))return T(this.toNumber()*N.toNumber(),this.unsigned);var Ae=65535&this.high,v=this.low>>>16,Le=65535&this.low,_e=65535&N.high,Te=N.low>>>16,Ie=65535&N.low,be=0,ut=0,Ce=0,De=0;return Ce+=(De+=Le*Ie)>>>16,ut+=(Ce+=v*Ie)>>>16,Ce&=65535,ut+=(Ce+=Le*Te)>>>16,be+=(ut+=Ae*Ie)>>>16,ut&=65535,be+=(ut+=v*Te)>>>16,ut&=65535,be+=(ut+=Le*_e)>>>16,be+=(this.high>>>16)*Ie+Ae*Te+v*_e+Le*(N.high>>>16),$((Ce&=65535)<<16|(De&=65535),(be&=65535)<<16|(ut&=65535),this.unsigned)},ue.mul=ue.multiply,ue.divide=function(N){if(ce(N)||(N=G(N)),N.isZero())throw Error("division by zero");var le,Ae,v;if(Oe)return this.unsigned||-2147483648!==this.high||-1!==N.low||-1!==N.high?$((this.unsigned?Oe.div_u:Oe.div_s)(this.low,this.high,N.low,N.high),Oe.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Qe:Ne;if(this.unsigned){if(N.unsigned||(N=N.toUnsigned()),N.gt(this))return Qe;if(N.gt(this.shru(1)))return _t;v=Qe}else{if(this.eq(Je))return N.eq(Ke)||N.eq(Ze)?Je:N.eq(Je)?Ke:(le=this.shr(1).div(N).shl(1)).eq(Ne)?N.isNegative()?Ke:Ze:(Ae=this.sub(N.mul(le)),v=le.add(Ae.div(N)));if(N.eq(Je))return this.unsigned?Qe:Ne;if(this.isNegative())return N.isNegative()?this.neg().div(N.neg()):this.neg().div(N).neg();if(N.isNegative())return this.div(N.neg()).neg();v=Ne}for(Ae=this;Ae.gte(N);){le=Math.max(1,Math.floor(Ae.toNumber()/N.toNumber()));for(var pe=Math.ceil(Math.log(le)/Math.LN2),_e=pe<=48?1:se(2,pe-48),Te=T(le),Ie=Te.mul(N);Ie.isNegative()||Ie.gt(Ae);)Ie=(Te=T(le-=_e,this.unsigned)).mul(N);Te.isZero()&&(Te=Ke),v=v.add(Te),Ae=Ae.sub(Ie)}return v},ue.div=ue.divide,ue.modulo=function(N){return ce(N)||(N=G(N)),Oe?$((this.unsigned?Oe.rem_u:Oe.rem_s)(this.low,this.high,N.low,N.high),Oe.get_high(),this.unsigned):this.sub(this.div(N).mul(N))},ue.mod=ue.modulo,ue.rem=ue.modulo,ue.not=function(){return $(~this.low,~this.high,this.unsigned)},ue.and=function(N){return ce(N)||(N=G(N)),$(this.low&N.low,this.high&N.high,this.unsigned)},ue.or=function(N){return ce(N)||(N=G(N)),$(this.low|N.low,this.high|N.high,this.unsigned)},ue.xor=function(N){return ce(N)||(N=G(N)),$(this.low^N.low,this.high^N.high,this.unsigned)},ue.shiftLeft=function(N){return ce(N)&&(N=N.toInt()),0==(N&=63)?this:N<32?$(this.low<<N,this.high<<N|this.low>>>32-N,this.unsigned):$(0,this.low<<N-32,this.unsigned)},ue.shl=ue.shiftLeft,ue.shiftRight=function(N){return ce(N)&&(N=N.toInt()),0==(N&=63)?this:N<32?$(this.low>>>N|this.high<<32-N,this.high>>N,this.unsigned):$(this.high>>N-32,this.high>=0?0:-1,this.unsigned)},ue.shr=ue.shiftRight,ue.shiftRightUnsigned=function(N){if(ce(N)&&(N=N.toInt()),0==(N&=63))return this;var Q=this.high;return N<32?$(this.low>>>N|Q<<32-N,Q>>>N,this.unsigned):$(32===N?Q:Q>>>N-32,0,this.unsigned)},ue.shru=ue.shiftRightUnsigned,ue.shr_u=ue.shiftRightUnsigned,ue.toSigned=function(){return this.unsigned?$(this.low,this.high,!1):this},ue.toUnsigned=function(){return this.unsigned?this:$(this.low,this.high,!0)},ue.toBytes=function(N){return N?this.toBytesLE():this.toBytesBE()},ue.toBytesLE=function(){var N=this.high,Q=this.low;return[255&Q,Q>>>8&255,Q>>>16&255,Q>>>24,255&N,N>>>8&255,N>>>16&255,N>>>24]},ue.toBytesBE=function(){var N=this.high,Q=this.low;return[N>>>24,N>>>16&255,N>>>8&255,255&N,Q>>>24,Q>>>16&255,Q>>>8&255,255&Q]},I.fromBytes=function(N,Q,le){return le?I.fromBytesLE(N,Q):I.fromBytesBE(N,Q)},I.fromBytesLE=function(N,Q){return new I(N[0]|N[1]<<8|N[2]<<16|N[3]<<24,N[4]|N[5]<<8|N[6]<<16|N[7]<<24,Q)},I.fromBytesBE=function(N,Q){return new I(N[4]<<24|N[5]<<16|N[6]<<8|N[7],N[0]<<24|N[1]<<16|N[2]<<8|N[3],Q)}},9128:(st,Oe,I)=>{var ce=I(9864),ye=I(3919),H=I(3263),q=I(5353),T=I(3358),$=I(3789),se=I(2508);se.alea=ce,se.xor128=ye,se.xorwow=H,se.xorshift7=q,se.xor4096=T,se.tychei=$,st.exports=se},9864:function(st,Oe,I){var ce;!function(ye,H,q){function T(G){var te=this,Y=function ne(){var G=4022871197;return function(Y){Y=String(Y);for(var S=0;S<Y.length;S++){var ee=.02519603282416938*(G+=Y.charCodeAt(S));ee-=G=ee>>>0,G=(ee*=G)>>>0,G+=4294967296*(ee-=G)}return 2.3283064365386963e-10*(G>>>0)}}();te.next=function(){var S=2091639*te.s0+2.3283064365386963e-10*te.c;return te.s0=te.s1,te.s1=te.s2,te.s2=S-(te.c=0|S)},te.c=1,te.s0=Y(" "),te.s1=Y(" "),te.s2=Y(" "),te.s0-=Y(G),te.s0<0&&(te.s0+=1),te.s1-=Y(G),te.s1<0&&(te.s1+=1),te.s2-=Y(G),te.s2<0&&(te.s2+=1),Y=null}function $(G,te){return te.c=G.c,te.s0=G.s0,te.s1=G.s1,te.s2=G.s2,te}function se(G,te){var Y=new T(G),S=te&&te.state,ee=Y.next;return ee.int32=function(){return 4294967296*Y.next()|0},ee.double=function(){return ee()+11102230246251565e-32*(2097152*ee()|0)},ee.quick=ee,S&&("object"==typeof S&&$(S,Y),ee.state=function(){return $(Y,{})}),ee}H&&H.exports?H.exports=se:I.amdD&&I.amdO?void 0!==(ce=function(){return se}.call(Oe,I,Oe,H))&&(H.exports=ce):this.alea=se}(0,st=I.nmd(st))},3789:function(st,Oe,I){var ce;!function(ye,H,q){function T(ne){var G=this,te="";G.next=function(){var S=G.b,ee=G.c,Se=G.d,he=G.a;return S=S<<25^S>>>7^ee,ee=ee-Se|0,Se=Se<<24^Se>>>8^he,he=he-S|0,G.b=S=S<<20^S>>>12^ee,G.c=ee=ee-Se|0,G.d=Se<<16^ee>>>16^he,G.a=he-S|0},G.a=0,G.b=0,G.c=-1640531527,G.d=1367130551,ne===Math.floor(ne)?(G.a=ne/4294967296|0,G.b=0|ne):te+=ne;for(var Y=0;Y<te.length+20;Y++)G.b^=0|te.charCodeAt(Y),G.next()}function $(ne,G){return G.a=ne.a,G.b=ne.b,G.c=ne.c,G.d=ne.d,G}function se(ne,G){var te=new T(ne),Y=G&&G.state,S=function(){return(te.next()>>>0)/4294967296};return S.double=function(){do{var he=((te.next()>>>11)+(te.next()>>>0)/4294967296)/(1<<21)}while(0===he);return he},S.int32=te.next,S.quick=S,Y&&("object"==typeof Y&&$(Y,te),S.state=function(){return $(te,{})}),S}H&&H.exports?H.exports=se:I.amdD&&I.amdO?void 0!==(ce=function(){return se}.call(Oe,I,Oe,H))&&(H.exports=ce):this.tychei=se}(0,st=I.nmd(st))},3919:function(st,Oe,I){var ce;!function(ye,H,q){function T(ne){var G=this,te="";G.x=0,G.y=0,G.z=0,G.w=0,G.next=function(){var S=G.x^G.x<<11;return G.x=G.y,G.y=G.z,G.z=G.w,G.w^=G.w>>>19^S^S>>>8},ne===(0|ne)?G.x=ne:te+=ne;for(var Y=0;Y<te.length+64;Y++)G.x^=0|te.charCodeAt(Y),G.next()}function $(ne,G){return G.x=ne.x,G.y=ne.y,G.z=ne.z,G.w=ne.w,G}function se(ne,G){var te=new T(ne),Y=G&&G.state,S=function(){return(te.next()>>>0)/4294967296};return S.double=function(){do{var he=((te.next()>>>11)+(te.next()>>>0)/4294967296)/(1<<21)}while(0===he);return he},S.int32=te.next,S.quick=S,Y&&("object"==typeof Y&&$(Y,te),S.state=function(){return $(te,{})}),S}H&&H.exports?H.exports=se:I.amdD&&I.amdO?void 0!==(ce=function(){return se}.call(Oe,I,Oe,H))&&(H.exports=ce):this.xor128=se}(0,st=I.nmd(st))},3358:function(st,Oe,I){var ce;!function(ye,H,q){function T(ne){var G=this;G.next=function(){var Se,he,Y=G.w,S=G.X,ee=G.i;return G.w=Y=Y+1640531527|0,he=S[ee+34&127],Se=S[ee=ee+1&127],he^=he<<13,Se^=Se<<17,he=S[ee]=(he^=he>>>15)^(Se^=Se>>>12),G.i=ee,he+(Y^Y>>>16)|0},function te(Y,S){var ee,Se,he,Ne,Qe,Ke=[],_t=128;for(S===(0|S)?(Se=S,S=null):(S+="\0",Se=0,_t=Math.max(_t,S.length)),he=0,Ne=-32;Ne<_t;++Ne)S&&(Se^=S.charCodeAt((Ne+32)%S.length)),0===Ne&&(Qe=Se),Se^=Se<<10,Se^=Se>>>15,Se^=Se<<4,Se^=Se>>>13,Ne>=0&&(he=0==(ee=Ke[127&Ne]^=Se+(Qe=Qe+1640531527|0))?he+1:0);for(he>=128&&(Ke[127&(S&&S.length||0)]=-1),he=127,Ne=512;Ne>0;--Ne)Se=Ke[he+34&127],ee=Ke[he=he+1&127],Se^=Se<<13,ee^=ee<<17,Ke[he]=(Se^=Se>>>15)^(ee^=ee>>>12);Y.w=Qe,Y.X=Ke,Y.i=he}(G,ne)}function $(ne,G){return G.i=ne.i,G.w=ne.w,G.X=ne.X.slice(),G}function se(ne,G){null==ne&&(ne=+new Date);var te=new T(ne),Y=G&&G.state,S=function(){return(te.next()>>>0)/4294967296};return S.double=function(){do{var he=((te.next()>>>11)+(te.next()>>>0)/4294967296)/(1<<21)}while(0===he);return he},S.int32=te.next,S.quick=S,Y&&(Y.X&&$(Y,te),S.state=function(){return $(te,{})}),S}H&&H.exports?H.exports=se:I.amdD&&I.amdO?void 0!==(ce=function(){return se}.call(Oe,I,Oe,H))&&(H.exports=ce):this.xor4096=se}(0,st=I.nmd(st))},5353:function(st,Oe,I){var ce;!function(ye,H,q){function T(ne){var G=this;G.next=function(){var ee,Se,Y=G.x,S=G.i;return ee=Y[S],Se=(ee^=ee>>>7)^ee<<24,Se^=(ee=Y[S+1&7])^ee>>>10,Se^=(ee=Y[S+3&7])^ee>>>3,Se^=(ee=Y[S+4&7])^ee<<7,ee=Y[S+7&7],Y[S]=Se^=(ee^=ee<<13)^ee<<9,G.i=S+1&7,Se},function te(Y,S){var ee,he=[];if(S===(0|S))he[0]=S;else for(S=""+S,ee=0;ee<S.length;++ee)he[7&ee]=he[7&ee]<<15^S.charCodeAt(ee)+he[ee+1&7]<<13;for(;he.length<8;)he.push(0);for(ee=0;ee<8&&0===he[ee];++ee);for(8==ee&&(he[7]=-1),Y.x=he,Y.i=0,ee=256;ee>0;--ee)Y.next()}(G,ne)}function $(ne,G){return G.x=ne.x.slice(),G.i=ne.i,G}function se(ne,G){null==ne&&(ne=+new Date);var te=new T(ne),Y=G&&G.state,S=function(){return(te.next()>>>0)/4294967296};return S.double=function(){do{var he=((te.next()>>>11)+(te.next()>>>0)/4294967296)/(1<<21)}while(0===he);return he},S.int32=te.next,S.quick=S,Y&&(Y.x&&$(Y,te),S.state=function(){return $(te,{})}),S}H&&H.exports?H.exports=se:I.amdD&&I.amdO?void 0!==(ce=function(){return se}.call(Oe,I,Oe,H))&&(H.exports=ce):this.xorshift7=se}(0,st=I.nmd(st))},3263:function(st,Oe,I){var ce;!function(ye,H,q){function T(ne){var G=this,te="";G.next=function(){var S=G.x^G.x>>>2;return G.x=G.y,G.y=G.z,G.z=G.w,G.w=G.v,(G.d=G.d+362437|0)+(G.v=G.v^G.v<<4^S^S<<1)|0},G.x=0,G.y=0,G.z=0,G.w=0,G.v=0,ne===(0|ne)?G.x=ne:te+=ne;for(var Y=0;Y<te.length+64;Y++)G.x^=0|te.charCodeAt(Y),Y==te.length&&(G.d=G.x<<10^G.x>>>4),G.next()}function $(ne,G){return G.x=ne.x,G.y=ne.y,G.z=ne.z,G.w=ne.w,G.v=ne.v,G.d=ne.d,G}function se(ne,G){var te=new T(ne),Y=G&&G.state,S=function(){return(te.next()>>>0)/4294967296};return S.double=function(){do{var he=((te.next()>>>11)+(te.next()>>>0)/4294967296)/(1<<21)}while(0===he);return he},S.int32=te.next,S.quick=S,Y&&("object"==typeof Y&&$(Y,te),S.state=function(){return $(te,{})}),S}H&&H.exports?H.exports=se:I.amdD&&I.amdO?void 0!==(ce=function(){return se}.call(Oe,I,Oe,H))&&(H.exports=ce):this.xorwow=se}(0,st=I.nmd(st))},2508:function(st,Oe,I){var ce;!function(ye,H,q){var ee,T=256,G=q.pow(T,6),te=q.pow(2,52),Y=2*te,S=T-1;function Se(re,ze,Je){var ue=[],ie=Ke(Qe((ze=1==ze?{entropy:!0}:ze||{}).entropy?[re,Ze(H)]:re??function _t(){try{var re;return ee&&(re=ee.randomBytes)?re=re(T):(re=new Uint8Array(T),(ye.crypto||ye.msCrypto).getRandomValues(re)),Ze(re)}catch{var ze=ye.navigator,Je=ze&&ze.plugins;return[+new Date,ye,Je,ye.screen,Ze(H)]}}(),3),ue),N=new he(ue),Q=function(){for(var le=N.g(6),Ae=G,v=0;le<te;)le=(le+v)*T,Ae*=T,v=N.g(1);for(;le>=Y;)le/=2,Ae/=2,v>>>=1;return(le+v)/Ae};return Q.int32=function(){return 0|N.g(4)},Q.quick=function(){return N.g(4)/4294967296},Q.double=Q,Ke(Ze(N.S),H),(ze.pass||Je||function(le,Ae,v,Le){return Le&&(Le.S&&Ne(Le,N),le.state=function(){return Ne(N,{})}),v?(q.random=le,Ae):le})(Q,ie,"global"in ze?ze.global:this==q,ze.state)}function he(re){var ze,Je=re.length,ue=this,ie=0,N=ue.i=ue.j=0,Q=ue.S=[];for(Je||(re=[Je++]);ie<T;)Q[ie]=ie++;for(ie=0;ie<T;ie++)Q[ie]=Q[N=S&N+re[ie%Je]+(ze=Q[ie])],Q[N]=ze;(ue.g=function(le){for(var Ae,v=0,Le=ue.i,pe=ue.j,_e=ue.S;le--;)Ae=_e[Le=S&Le+1],v=v*T+_e[S&(_e[Le]=_e[pe=S&pe+Ae])+(_e[pe]=Ae)];return ue.i=Le,ue.j=pe,v})(T)}function Ne(re,ze){return ze.i=re.i,ze.j=re.j,ze.S=re.S.slice(),ze}function Qe(re,ze){var ie,Je=[],ue=typeof re;if(ze&&"object"==ue)for(ie in re)try{Je.push(Qe(re[ie],ze-1))}catch{}return Je.length?Je:"string"==ue?re:re+"\0"}function Ke(re,ze){for(var ue,Je=re+"",ie=0;ie<Je.length;)ze[S&ie]=S&(ue^=19*ze[S&ie])+Je.charCodeAt(ie++);return Ze(ze)}function Ze(re){return String.fromCharCode.apply(0,re)}if(Ke(q.random(),H),st.exports){st.exports=Se;try{ee=I(5042)}catch{}}else void 0!==(ce=function(){return Se}.call(Oe,I,Oe,st))&&(st.exports=ce)}(typeof self<"u"?self:this,[],Math)},5410:()=>{},8628:()=>{},5042:()=>{},7156:st=>{function Oe(ce,ye,H,q,T,$,se){try{var ne=ce[$](se),G=ne.value}catch(te){return void H(te)}ne.done?ye(G):Promise.resolve(G).then(q,T)}st.exports=function I(ce){return function(){var ye=this,H=arguments;return new Promise(function(q,T){var $=ce.apply(ye,H);function se(G){Oe($,q,T,se,ne,"next",G)}function ne(G){Oe($,q,T,se,ne,"throw",G)}se(void 0)})}},st.exports.__esModule=!0,st.exports.default=st.exports},5861:(st,Oe,I)=>{"use strict";function ce(H,q,T,$,se,ne,G){try{var te=H[ne](G),Y=te.value}catch(S){return void T(S)}te.done?q(Y):Promise.resolve(Y).then($,se)}function ye(H){return function(){var q=this,T=arguments;return new Promise(function($,se){var ne=H.apply(q,T);function G(Y){ce(ne,$,se,G,te,"next",Y)}function te(Y){ce(ne,$,se,G,te,"throw",Y)}G(void 0)})}}I.d(Oe,{Z:()=>ye})}},st=>{st(st.s=5547)}]);